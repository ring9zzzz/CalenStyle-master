/* ----------------------------------------------------------------------------- 

  CalenStyle - Responsive Event Calendar
  Version 2.0.8
  Copyright (c)2023 Lajpat Shah
  Contributors : https://github.com/nehakadam/CalenStyle/contributors
  Repository : https://github.com/nehakadam/CalenStyle
  Homepage : https://nehakadam.github.io/CalenStyle

 ----------------------------------------------------------------------------- */


!function(){"use strict";function e(e,t,a,i,n,s,r,o){this.id=e,this.isAllDay=t,this.start=a,this.end=i,this.type=n,this.title=s,this.desc=r,this.url=o}var t;function a(e,t){var a=this;a.elem=e;var i=$.cf.isValid(t.language)?t.language:$.CalenStyle.defaults.language;a.setting=$.extend({},$.CalenStyle.defaults,t,$.CalenStyle.i18n[i]),a.tv=$.extend({},$.CalenStyle.tempDefaults),a.tv.pluginId=$.CalenStyle.extra.iCalenStyleObjCount,a.tv.iUTmMS=a.setting.unitTimeInterval*$.CalenStyle.extra.iMS.m,a.tv.iUTmSlt=60/a.setting.unitTimeInterval,a.tv.iCalHeight=$(a.elem).height(),a.setting.initialize&&a.setting.initialize.call(a),$.CalenStyle.extra.dToday=a._getCurrentDate(),0===a.compareDates(a.setting.selectedDate,new Date)&&(a.setting.selectedDate=new Date($.CalenStyle.extra.dToday)),a.tv.dLoadDt=new Date($.CalenStyle.extra.dToday),a.tv.dVSDt=new Date($.CalenStyle.extra.dToday),a.tv.dVEDt=new Date($.CalenStyle.extra.dToday),a.tv.dVDSDt=new Date($.CalenStyle.extra.dToday),a.tv.dVDEDt=new Date($.CalenStyle.extra.dToday),a.tv.dCMDt=new Date($.CalenStyle.extra.dToday),a.tv.dPMDt=new Date($.CalenStyle.extra.dToday),a.tv.dNMDt=new Date($.CalenStyle.extra.dToday),a.tv.dPLSDt=new Date($.CalenStyle.extra.dToday),a.tv.dPLEDt=new Date($.CalenStyle.extra.dToday),a.tv.dNLSDt=new Date($.CalenStyle.extra.dToday),a.tv.dNLEDt=new Date($.CalenStyle.extra.dToday),$.CalenStyle.extra.oArrCalenStyle.push(a),a._setHeightForEvents()}$.CalenStyle=$.CalenStyle||{name:"CalenStyle",version:"1.0.0",i18n:{},defaults:{sectionsList:["Header","Calendar"],language:"",veryShortDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],numbers:["0","1","2","3","4","5","6","7","8","9"],eventTooltipContent:"Default",formatDates:{},slotTooltipContent:function(e){return"Busy"===e.status?"":"Free"===e.status?void 0===e.count||null===e.count?"<div class=cavTooltipBookNow>Book Now</div>":"<div class=cavTooltipSlotCount>"+e.count+" slots available</div><div class=cavTooltipBookNow>Book Now</div>":void 0},miscStrings:{today:"Today",week:"Week",allDay:"All Day",ends:"Ends",emptyEventTitle:"(No Title)",emptyGoogleCalendarEventTitle:"Busy"},duration:"Default",durationStrings:{y:["year ","years "],M:["month ","months "],w:["w ","w "],d:["d ","d "],h:["h ","h "],m:["m ","m "],s:["s ","s "]},viewsToDisplay:[{viewName:"DetailedMonthView",viewDisplayName:"Month"},{viewName:"WeekView",viewDisplayName:"Week"},{viewName:"DayView",viewDisplayName:"Day"},{viewName:"AgendaView",viewDisplayName:"Agenda"}],visibleView:"DetailedMonthView",selectedDate:new Date,headerComponents:{DatePickerIcon:"<span class='cContHeaderButton cContHeaderDatePickerIcon clickableLink cs-icon-Calendar'></span>",FullscreenButton:function(e){return"<span class='cContHeaderButton cContHeaderFullscreen clickableLink "+(e?"cs-icon-Contract":"cs-icon-Expand")+"'></span>"},PreviousButton:"<span class='cContHeaderButton cContHeaderNavButton cContHeaderPrevButton clickableLink cs-icon-Prev'></span>",NextButton:"<span class='cContHeaderButton cContHeaderNavButton cContHeaderNextButton clickableLink cs-icon-Next'></span>",TodayButton:"<span class='cContHeaderButton cContHeaderToday clickableLink'></span>",HeaderLabel:"<span class='cContHeaderLabelOuter'><span class='cContHeaderLabel'></span></span>",HeaderLabelWithDropdownMenuArrow:"<span class='cContHeaderLabelOuter clickableLink'><span class='cContHeaderLabel'></span><span class='cContHeaderButton cContHeaderDropdownMenuArrow'></span></span>",MenuSegmentedTab:"<span class='cContHeaderMenuSegmentedTab'></span>",MenuDropdownIcon:"<span class='cContHeaderButton cContHeaderMenuButton clickableLink'>&#9776;</span>"},headerSectionsList:{left:["DatePickerIcon","PreviousButton","NextButton"],center:["HeaderLabel"],right:["MenuSegmentedTab"]},dropdownMenuElements:["ViewsToDisplay"],parentObject:null,datePickerObject:null,formatSeparatorDateTime:" ",formatSeparatorDate:"-",formatSeparatorTime:":",is24Hour:!0,inputDateTimeFormat:"dd-MM-yyyy HH:mm:ss",eventDuration:30,allDayEventDuration:1,timeIndicatorUpdationInterval:15,unitTimeInterval:30,timeLabels:"Hour",inputTZOffset:"+05:30",tz:"Asia/Calcutta",outputTZOffset:"+05:30",weekStartDay:1,weekNumCalculation:"US",daysInCustomView:4,daysInDayListView:7,daysInAppointmentView:4,agendaViewDuration:"Month",daysInAgendaView:15,agendaViewTheme:"Timeline2",showDaysWithNoEventsInAgendaView:!1,fixedHeightOfWeekPlannerViewCells:!0,quickAgendaViewDuration:"Week",daysInQuickAgendaView:5,navigateOneDayInQuickAgendaView:!1,taskPlannerViewDuration:"Week",daysInTaskPlannerView:5,fixedHeightOfTaskPlannerView:!0,navigateOneDayInTaskPlannerView:!1,transitionSpeed:600,showTransition:!1,fixedNumOfWeeksInMonthView:!1,displayWeekNumInMonthView:!1,actionOnDayClickInMonthView:"ModifyEventList",eventIndicatorInMonthView:"Events",eventIndicatorInDatePicker:"DayNumberBold",eventIndicatorInDayListView:"DayHighlight",averageEventsPerDayForDayHighlightView:5,hideExtraEvents:!0,hiddenEventsIndicatorLabel:"+(count) more",hiddenEventsIndicatorAction:"ShowEventDialog",addEventsInMonthView:!0,displayEventsInMonthView:!0,isDragNDropInMonthView:!0,isTooltipInMonthView:!1,isDragNDropInDetailView:!0,isResizeInDetailView:!0,isTooltipInDetailView:!1,isDragNDropInQuickAgendaView:!0,isTooltipInQuickAgendaView:!1,isDragNDropInTaskPlannerView:!0,isTooltipInTaskPlannerView:!1,isTooltipInAppointmentView:!0,actionBarHeight:30,filterBarPosition:"Top",filterBarHeight:200,filterBarWidth:200,eventFilterCriteria:[],noneSelectedFilterAction:"SelectNone",calendarBorderColor:"FFFFFF",changeCalendarBorderColorInJS:!1,extraMonthsForDataLoading:1,deleteOldDataWhileNavigating:!0,datasetModificationRule:"Default",changeColorBasedOn:"EventCalendar",borderColor:"",textColor:"FFFFFF",onlyTextForNonAllDayEvents:!0,eventColorsArray:["C0392B","D2527F","674172","4183D7","336E7B","36D7B7","68C3A3","E87E04","6C7A89","F9690E"],eventIcon:"Dot",hideEventIcon:{Default:!1,DetailedMonthView:!1,MonthView:!1,WeekView:!1,DayView:!1,CustomView:!1,QuickAgendaView:!1,TaskPlannerView:!1,DayEventDetailView:!1,AgendaView:!1,WeekPlannerView:!1},hideEventTime:{Default:!1,DetailedMonthView:!1,MonthView:!1,WeekView:!1,DayView:!1,CustomView:!1,QuickAgendaView:!1,TaskPlannerView:!1,DayEventDetailView:!1,AgendaView:!1,WeekPlannerView:!1},businessHoursSource:[{day:1,times:[{startTime:"10:00",endTime:"17:00"}]},{day:2,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]},{day:3,times:[{startTime:"10:00",endTime:"17:00"}]},{day:4,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]},{day:5,times:[{startTime:"10:00",endTime:"17:00"}]},{day:6,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]}],excludeNonBusinessHours:!1,isNonBusinessHoursDroppable:!0,isRestrictedSectionDroppable:!0,eventOrTaskStatusIndicators:[{name:"Overdue",color:"E74C3C"},{name:"Completed",color:"27AE60"},{name:"InProgress",color:"F1C40F"}],calDataSource:[],datePickerCalDataSource:[{config:{sourceCountType:"Event"}}],adjustViewOnWindowResize:!0,useHammerjsAsGestureLibrary:!1,initialize:null,modifyHeaderViewLabels:null,addEventHandlersInHeader:null,dataLoadingStart:null,dataLoadingEnd:null,cellClicked:null,viewLoaded:null,previousButtonClicked:null,nextButtonClicked:null,todayButtonClicked:null,visibleViewChanged:null,modifyCustomView:null,displayEventsForPeriodInList:null,displayEventsForPeriodInListInAgendaView:null,eventListAppended:null,displayEventListDialog:null,eventInADialogClicked:null,eventRendered:null,eventsAddedInView:null,timeSlotsAddedInView:null,eventClicked:null,timeSlotClicked:null,saveChangesOnEventDrop:null,saveChangesOnEventResize:null,modifyFilterBarView:null,modifyActionBarView:null,addDaySummaryInTaskPlannerView:null},tempDefaults:{sLoadType:"Load",iLoadCnt:0,dLoadDt:new Date,bViewLoaded:!1,dHighlightDPV:[],bDisFBar:!1,bDisMenu:!1,iMaxEvId:0,iMxEvRw:0,oAEvents:[],oASmEvSeg:[],oAADEvSeg:[],oASrcCnt:[],oAResSec:[],oASltAvail:[],oAECalendar:[],oAEvTaskStatus:[],bEvTskStatus:!1,oSURLParams:[],iDocHtPrev:0,iUTmMS:0,iUTmSlt:0,dVSDt:new Date,dVEDt:new Date,dVDSDt:new Date,dVDEDt:new Date,dCMDt:new Date,dPMDt:new Date,dNMDt:new Date,dPLSDt:new Date,dPLEDt:new Date,dNLSDt:new Date,dNLEDt:new Date,dDrgSDt:null,dDrgEDt:null,dAVDt:[],dAVDDt:[],iNoVDay:0,iNoVDayDis:0,iSelDay:0,bAWkRw:[],bADVCur:[],sADVInfo:[],iBsDays:0,bABsDays:[],oBsHours:{start:"",end:""},bChkDroppable:!1,iWkInMonth:6,bDVResEv:!1,bDVDrgEv:!1,bEvLgPresd:!1,bUrlClk:!1,oEvEdt:null,oDVEdtgEv:null,bDVScrlg:!1,fDVDayWth:0,fADVDayLftPos:[],fAHrTpPos:[],bCMVDisEvLst:!1,bDisABar:!1,oAEvFltrCnt:[],iCalHeight:0,bDyClDLV:!1},extra:{iCalenStyleObjCount:0,iBorderOverhead:1,iEventHeightOverhead:4,iScrollbarWidth:0,dToday:new Date,iMS:{m:6e4,h:36e5,d:864e5,w:6048e5},sArrInputDateTimeFormats:["DateObject","UnixTimestamp","ISO8601","ISO8601Compact","dd-MM-yyyy hh:mm:ss AA","dd-MM-yyyy HH:mm:ss","MM-dd-yyyy hh:mm:ss AA","MM-dd-yyyy HH:mm:ss","yyyy-MM-dd hh:mm:ss AA","yyyy-MM-dd HH:mm:ss"],sArrViewsTypes:["DetailedMonthView","MonthView","WeekView","DayView","AgendaView","WeekPlannerView","QuickAgendaView","TaskPlannerView","CustomView","DayEventListView","DayEventDetailView","AppointmentView","DatePicker"],bTouchDevice:"ontouchstart"in document.documentElement,sClickHandler:(document.documentElement,"click"),sClickHandlerButtons:"ontouchstart"in document.documentElement?"touchstart":"click",oArrCalenStyle:[],iEventHeights:{DetailedMonthView:18,WeekView:18,DayView:18,CustomView:18,DayEventDetailView:18,QuickAgendaView:18},oEventClass:{DetailedMonthView:"cdmvEvent",WeekView:"cdvEventAllDay",DayView:"cdvEventAllDay",CustomView:"cdvEventAllDay",DayEventDetailView:"cdvEventAllDay",QuickAgendaView:"cqavEvent"}}},$.cf={isValid:function(e){return void 0!==e&&null!==e&&""!==e},compareStrings:function(e,t){return null!==e&&void 0!==e&&null!==t&&void 0!==t?"string"==typeof e&&"string"==typeof t&&e.toLocaleLowerCase()===t.toLocaleLowerCase():null===e&&null===t||void 0===e&&void 0===t},getTimestamp:function(){return(new Date).getTime()},getRGBAString:function(e,t){var a=0,i=0,n=0,s=e.match(/rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)/i),r=e.match(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})/i);return $.cf.isValid(s)&&s.length>0?(a=s[0],i=s[1],n=s[2]):$.cf.isValid(r)&&r.length>0?(a=r[0],i=r[1],n=r[2]):3===(e=(e="#"===e.charAt(0)?e.substring(1,7):e).match(/([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/)[0]).length?(a=e.substring(0,1),a+=a,a=parseInt(a,16),i=e.substring(1,2),i+=i,i=parseInt(i,16),n=e.substring(2,3),n+=n,n=parseInt(n,16)):6===e.length&&(a=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16)),"rgba("+a+", "+i+", "+n+", "+t+")"},addHashToHexcode:function(e){if($.cf.isValid(e)){var t=e.match(/(rgba)/i),a=e.match(/(#+([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}))/),i=e.match(/([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/);return $.cf.isValid(t)&&t.length>0?e:$.cf.isValid(a)&&a.length>0?a[0]:$.cf.isValid(i)&&i.length>0?"#"+i[0]:"#000000"}return e},getSizeValue:function(e,t){var a,i=e.css(t);return void 0!==i&&null!==i&&""!==i&&(-1!==i.indexOf("px")?a=parseInt(i.replace("px","")):-1!==i.indexOf("%")&&(a=parseInt(i.replace("%",""))%100*e.closest().width()),!(a<=0)&&a)}},t=function(e){e.fn.CalenStyle=function(t){var i,n,s=e(this).data(),r=Object.keys(s);if(null===t||void 0===t)if(r.length>0){for(i in r)if(-1!==(n=r[i]).search("plugin_CalenStyle_"))return s[n]}else console.log("No CalenStyle Object Defined For This Element");else{if("string"!=typeof t)return this.each(function(){if(e.CalenStyle.extra.iCalenStyleObjCount++,e.data(this,"plugin_CalenStyle_"+e.CalenStyle.extra.iCalenStyleObjCount))if(r.length>0){for(i in r)if(-1!==(n=r[i]).search("plugin_CalenStyle_"))return s[n]}else console.log("No CalenStyle Object Defined For This Element");else s=new a(this,t),e.data(this,"plugin_CalenStyle_"+e.CalenStyle.extra.iCalenStyleObjCount,s),s.loadView(),console.log("Calendar Object "),console.log(s)});if(e.cf.isValid(s)&&"destroy"===t)if(r.length>0){for(i in r)if(-1!==(n=r[i]).search("plugin_CalenStyle_")){e(this).children().remove(),e(".cElemDatePickerBg").remove(),e(this).removeData(),e(this).unbind(),e(this).removeClass("elem-CalenStyle"),e(document).unbind(e.CalenStyle.extra.sClickHandler+".CalenStyle"),e(document).unbind(e.CalenStyle.extra.sClickHandler+".CalenStyleDialog"),e(document).unbind(e.CalenStyle.extra.sClickHandler+".MonthPicker"),e(document).unbind(e.CalenStyle.extra.sClickHandler+".YearPicker"),s=s[n],e(window).unbind("resize."+s.tv.pluginId),e(window).unbind("resize.CSDP."+s.tv.pluginId);for(var o=[],l=0;l<e.CalenStyle.extra.oArrCalenStyle.length;l++){var d=e.CalenStyle.extra.oArrCalenStyle[l];d.tv.pluginId!==s.tv.pluginId&&d.tv.pluginId!==s.setting.datePickerObject.tv.pluginId&&o.push(d)}e.CalenStyle.extra.oArrCalenStyle=o,console.log("Destroyed CalenStyle Object"),console.log(s);break}}else console.log("No CalenStyle Object Defined For This Element")}}},"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery),a.prototype={modifyCalenStyleObject:function(e){},setLanguage:function(e,t){var a=this;a.setting.language=e,a.setting=$.extend({},a.setting,$.CalenStyle.i18n[e]);for(var i=0;i<a.setting.viewsToDisplay.length;i++)a.setting.viewsToDisplay[i].viewDisplayName=a.setting.viewDisplayNames[a.setting.viewsToDisplay[i].viewName];return a.setting.datePickerObject.setting=$.extend({},a.setting.datePickerObject.setting,$.CalenStyle.i18n[e]),t?a.reloadData():(a.refreshView(),a.setting.datePickerObject.refreshView()),a},changeOutputTimezone:function(e,t,a){var i,n=this,s=n.setting.tz,r=n.setting.outputTZOffset;if(n.setting.tz=e,n.setting.outputTZOffset=t,a||n.tv.bGCData&&s!==e)n.reloadData();else if(r!==t){for(i=0;i<n.tv.oAEvents.length;i++){var o=n.tv.oAEvents[i];o.isAllDay||(o.start=n.normalizeDateTimeWithOffset(o.start,r,t),o.end=n.normalizeDateTimeWithOffset(o.end,r,t))}for(i=0;i<n.tv.oAResSec.length;i++){var l=n.tv.oAResSec[i];l.isAllDay||(l.start=n.normalizeDateTimeWithOffset(l.start,r,t),l.end=n.normalizeDateTimeWithOffset(l.end,r,t))}for(i=0;i<n.tv.oASltAvail.length;i++){var d=n.tv.oASltAvail[i];d.isAllDay||(d.start=n.normalizeDateTimeWithOffset(d.start,r,t),d.end=n.normalizeDateTimeWithOffset(d.end,r,t))}n.refreshView()}},addRemoveLoaderIndicators:function(e,t){var a=this;$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker")?e?$(a.elem).find(".cmvMonthTableMain tbody").addClass(t):$(a.elem).find(".cmvMonthTableMain tbody").removeClass(t):$.cf.compareStrings(a.setting.visibleView,"WeekView")||$.cf.compareStrings(a.setting.visibleView,"DayView")||$.cf.compareStrings(a.setting.visibleView,"CustomView")?e?$(a.elem).find(".cdvDetailTableMain tbody").addClass(t):$(a.elem).find(".cdvDetailTableMain tbody").removeClass(t):$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")?e?($(a.elem).find(".cdvDetailTableMain tbody").addClass(t),$(a.elem).find(".cdlvDaysTableMain tbody").addClass(t)):($(a.elem).find(".cdvDetailTableMain tbody").removeClass(t),$(a.elem).find(".cdlvDaysTableMain tbody").removeClass(t)):$.cf.compareStrings(a.setting.visibleView,"DayEventListView")?e?$(a.elem).find(".cdlvDaysTableMain tbody").addClass(t):$(a.elem).find(".cdlvDaysTableMain tbody").removeClass(t):$.cf.compareStrings(a.setting.visibleView,"QuickAgendaView")?e?$(a.elem).find(".cqavTableMain tbody").addClass(t):$(a.elem).find(".cqavTableMain tbody").removeClass(t):$.cf.compareStrings(a.setting.visibleView,"TaskPlannerView")?e?$(a.elem).find(".ctpvTableMain tbody").addClass(t):$(a.elem).find(".ctpvTableMain tbody").removeClass(t):$.cf.compareStrings(a.setting.visibleView,"AppointmentView")?e?$(a.elem).find(".cavTableMain").addClass(t):$(a.elem).find(".cavTableMain").removeClass(t):$.cf.compareStrings(a.setting.visibleView,"AgendaView")?e?$(a.elem).find(".cListOuterCont").addClass(t):$(a.elem).find(".cListOuterCont").removeClass(t):$.cf.compareStrings(a.setting.visibleView,"WeekPlannerView")&&(e?$(a.elem).find(".cwpvTableOuterCont").addClass(t):$(a.elem).find(".cwpvTableOuterCont").removeClass(t))},addRemoveViewLoader:function(e,t){if(e){"cViewLoaderBg"===t?$(this.elem).parent().append("<div class='"+t+"'><div class='cViewLoaderBody'></div></div>"):"cEventLoaderBg"===t&&$(this.elem).parent().append("<div class='"+t+"'><div class='cEventLoaderIcon'></div></div>"),$(".cContHeaderMenuDropdownBg").css({background:"rgba(0, 0, 0, 0)"});var a=$(this.elem),i=$.cf.getSizeValue(a,"margin-left"),n=$.cf.getSizeValue(a,"margin-top"),s=a.position().left+i,r=a.position().top+n,o=$.cf.getSizeValue(a,"max-width"),l=$.cf.getSizeValue(a,"min-width"),d=a.width(),c=a.height();if(d=o&&d>o?o:d,d=l&&d<l?l:d,$("."+t).css({left:s,top:r,width:d,height:c}),"cViewLoaderBg"===t){var v=$(this.elem).find(".cContHeader").height(),g=c-v,m=v;$(".cViewLoaderBody").css({height:g,"margin-top":m})}$("."+t).on("click touchstart touchmove",function(e){e.stopPropagation()})}else $("."+t).remove()},__setHoverClass:function(e,t){e.on("touchstart",function(a){e.addClass(t)}),e.on("touchend",function(a){e.removeClass(t)})},_callCommonEvents:function(){this._hideDatePicker(),this._collapseSubmenu()},_resetSourceFetch:function(){for(var e=0;e<this.setting.calDataSource.length;e++){this.setting.calDataSource[e].fetched=!1}},reloadData:function(e){var t=this;t.tv.sLoadType="Load",t.tv.dLoadDt=new Date(t.setting.selectedDate),t.tv.oSURLParams=t.__parseJson(e)||[],t._resetSourceFetch(),t.__reloadCurrentView(!0,!0)},_setDisplayTimeLabelsArray:function(){var e,t=this,a="Array";if($.cf.compareStrings(t.setting.timeLabels,"Hour")||$.cf.compareStrings(t.setting.timeLabels,"All"))a=t.setting.timeLabels;else if($.isArray(t.setting.timeLabels)&&t.setting.timeLabels.length===t.tv.iUTmSlt)for(a="No",e=0;e<t.tv.iUTmSlt;e++)if(!$.cf.compareStrings(typeof t.setting.timeLabels[e],"boolean")){a="Array";break}if(!$.cf.compareStrings(a,"No"))for(t.setting.timeLabels=[],e=0;e<t.tv.iUTmSlt;e++)$.cf.compareStrings(a,"Hour")||$.cf.compareStrings(a,"Array")?0===e?t.setting.timeLabels.push(!0):t.setting.timeLabels.push(!1):$.cf.compareStrings(a,"All")&&t.setting.timeLabels.push(!0)},_getRestrictedSectionForCurrentView:function(e){var t,a=this,i=[];for(t=0;t<a.tv.oAResSec.length;t++){var n=a.tv.oAResSec[t],s=a.compareDates(new Date(n.start),e)<=0,r=a.compareDates(new Date(n.end),e)>=0;s&&r&&i.push(n)}var o=i.length;if(o>1)for(t=0;t<o-1;t++){var l=i[t],d=i[t+1];0===a.compareDateTimes(new Date(l[0]),new Date(d[0]))&&(i[t]=d,i[t+1]=l)}return i},_getBusinessDaysForWeek:function(){var e,t,a=this;for(a.setting.businessHoursSource=a.__parseJson(a.setting.businessHoursSource),a.tv.iBsDays=0,a.tv.bABsDays=[!1,!1,!1,!1,!1,!1,!1],e=0;e<a.setting.businessHoursSource.length;e++){var i=a.setting.businessHoursSource[e],n=i.times;if($.cf.isValid(i.day)&&(a.tv.bABsDays[i.day]=!0),$.cf.isValid(i.days))for(t=0;t<i.days.length;t++)a.tv.bABsDays[i.days[t]]=!0;for(var s=0;s<n.length;s++){var r=n[s];$.cf.isValid(a.tv.oBsHours.start)?a._compareHours(r.startTime,a.tv.oBsHours.start)<0&&(a.tv.oBsHours.start=r.startTime):a.tv.oBsHours.start=r.startTime,$.cf.isValid(a.tv.oBsHours.end)?a._compareHours(r.endTime,a.tv.oBsHours.end)>0&&(a.tv.oBsHours.end=r.endTime):a.tv.oBsHours.end=r.endTime}}a.tv.oBsHours.startTime=a._getHourAndMinuteFromString(a.tv.oBsHours.start),a.tv.oBsHours.endTime=a._getHourAndMinuteFromString(a.tv.oBsHours.end);var o=(60*a.tv.oBsHours.startTime[0]+a.tv.oBsHours.startTime[1])%a.setting.unitTimeInterval,l=(60*a.tv.oBsHours.endTime[0]+a.tv.oBsHours.endTime[1])%a.setting.unitTimeInterval;for(0!==o&&(a.tv.oBsHours.startTime[1]=a.tv.oBsHours.startTime[1]+o,a.tv.oBsHours.start=a.tv.oBsHours.startTime[0]+":"+a.tv.oBsHours.startTime[1]),0!==l&&(a.tv.oBsHours.endTime[1]=a.tv.oBsHours.endTime[1]+l,a.tv.oBsHours.end=a.tv.oBsHours.endTime[0]+":"+a.tv.oBsHours.endTime[1]),e=0;e<a.tv.bABsDays.length;e++)a.tv.bABsDays[e]&&a.tv.iBsDays++},_compareHours:function(e,t){var a=this._getHourAndMinuteFromString(e),i=this._getHourAndMinuteFromString(t),n=new Date,s=new Date;return n.setHours(parseInt(a[0])),n.setMinutes(parseInt(a[1])),s.setHours(parseInt(i[0])),s.setMinutes(parseInt(i[1])),this.compareDateTimes(n,s)},_getBusinessHoursForCurrentView:function(e){var t,a=this,i=a.getDateInFormat({date:e},"object",!1,!0),n=[];for(t=0;t<a.setting.businessHoursSource.length;t++){var s=a.setting.businessHoursSource[t];if($.cf.isValid(s.day)&&i.D===parseInt(s.day)||$.cf.isValid(s.days)&&-1!==s.days.indexOf(i.D)){for(var r=0;r<s.times.length;r++){var o=s.times[r],l=a._getHourAndMinuteFromString(o.startTime),d=a._getHourAndMinuteFromString(o.endTime),c=a.setDateInFormat({iDate:{d:i.d,M:i.M,y:i.y,H:parseInt(l[0]),m:parseInt(l[1]),s:0}},""),v=a.setDateInFormat({iDate:{d:i.d,M:i.M,y:i.y,H:parseInt(d[0]),m:parseInt(d[1]),s:0}},"");a.compareDateTimes(c,v)<0&&n.push([c,v])}break}}var g=n.length;if(g>1)for(t=0;t<g-1;t++){var m=n[t],D=n[t+1];0!==a.compareDateTimes(m[0],D[0])&&(n[t]=D,n[t+1]=m)}return n},_getHourAndMinuteFromString:function(e){var t=e.split(" "),a=t[0].split(this.setting.formatSeparatorTime),i=a[0],n=a[1];return t.length>1&&($.cf.compareStrings(t[1],"AM")&&12===i&&(i=0),$.cf.compareStrings(t[1],"PM")&&i<12&&(i+=12)),[i,n]},_checkAllowDroppable:function(){var e=this;e.tv.bChkDroppable=!1,e.setting.isNonBusinessHoursDroppable||e.setting.isNonBusinessHoursDroppable||(e.tv.bChkDroppable=!0);var t,a=e.setting.isDragNDropInMonthView||e.setting.isDragNDropInDetailView||e.setting.isDragNDropInQuickAgendaView||e.setting.isDragNDropInTaskPlannerView;if(!e.tv.bChkDroppable&&e.tv.oAResSec.length>0&&a)for(t=0;t<e.tv.oAResSec.length;t++){var i=e.tv.oAResSec[t];if($.cf.isValid(i.isDroppable)&&i.isDroppable){e.tv.bChkDroppable=!0;break}}},_findWhetherEventEnteredNonDroppableZone:function(e,t,a,i,n){var s=this,r=!1,o=$.cf.isValid(n)?n.split(","):[];if($.cf.isValid(e)&&$.cf.isValid(t)&&i>0){var l,d,c,v,g,m,D,f,p,u=24*s.tv.iUTmSlt;g=0===(g=Math.round((t.getTime()-e.getTime())/s.tv.iUTmMS))?1:g,n=$.cf.isValid(n)?n:"";var h=s._normalizeDateTime(e,"START","T"),y=h.getTime();for(l=0;l<i;l++){if(s.tv.bABsDays[h.getDay()]||!s.setting.excludeNonBusinessHours){for(m=0;m<s.tv.dAVDt.length&&s.tv.dAVDt[m].getDay()!==h.getDay();m++);v=[];for(var w=0;w<24;w++)for(d=0;d<s.tv.iUTmSlt;d++)v.push(0);v.push(0);var C=s._getRestrictedSectionForCurrentView(h),S=s._getBusinessHoursForCurrentView(h),T=!1,V=!1;if(C.length>0){for(r=!1,c=0;c<C.length;c++){var b=C[c],E=new Date(b.start),I=new Date(b.end),M=!!$.cf.isValid(b.isAllDay)&&b.isAllDay,A=$.cf.isValid(b.droppableId)?b.droppableId:"",_=$.cf.isValid(b.isDroppable)?b.isDroppable:s.setting.isRestrictedSectionDroppable,k=$.cf.isValid(b.allowedDroppables)?b.allowedDroppables:[],H=s.compareDateTimes(E,e),F=s.compareDateTimes(I,t),N=s.compareDateTimes(E,t),x=s.compareDateTimes(I,e),B=0===s.compareDates(h,E),L=0===s.compareDates(h,I),R=0;if(B||(E=s._normalizeDateTime(h,"START","T")),L||(I=s._normalizeDateTime(h,"END","T")),R=0===(R=Math.round((I.getTime()-E.getTime())/s.tv.iUTmMS))?1:R>u?u:R,a||g>=u){if(a&&M||0===H&&0===F)return!0}else if(H<=0&&F>=0){if(_||(V=!0),!(H>0&&F>0&&N<0)||H<0&&F<0&&x>0)if(_){var P=!1;if(0===k.length)T=!0;else{for(D=0;D<k.length;D++)if($.cf.compareStrings(k[D],"All")){P=!0,T=!0;break}if(!P)if($.cf.isValid(n))if(1===o.length&&n===A)T=!0;else for(f=0;f<o.length;f++){var O=o[f];if(O!==A){var W=!1;for(p=0;p<k.length;p++)if($.cf.compareStrings(k[p],O)){W=!0,T=!0;break}W||(V=!0)}else T=!0}else V=!0}}else V=!0}else(H>=0&&F>=0&&N<0||H<=0&&F<=0&&x>0)&&(V=!0)}if(T)return!1;if(V)return!0;if($.cf.isValid(n))return!0}if(S.length>0&&!s.setting.isNonBusinessHoursDroppable){for(r=!0,c=0;c<S.length;c++){var j=S[c],z=new Date(j[0]),Y=new Date(j[1]),q=s.compareDateTimes(z,e),U=s.compareDateTimes(Y,t);if(a){if(!s.tv.bABsDays[h.getDay()])return!0;r=!1}r=!(q<=0&&U>=0)&&r}if(r)return!0}else if(!s.setting.isNonBusinessHoursDroppable)return!0}y+=$.CalenStyle.extra.iMS.d,h=new Date(y)}}return r},modifySettings:function(e){var t=this,a=t.tv.pluginId;t.setting=$.extend({},$.CalenStyle.defaults,e),t.tv=$.extend({},$.CalenStyle.tempDefaults),t.tv.pluginId=a,t.tv.iUTmMS=t.setting.unitTimeInterval*$.CalenStyle.extra.iMS.m,t.tv.iUTmSlt=60/t.setting.unitTimeInterval},loadView:function(){var e=this;if($(e.elem).hasClass("cElemDatePicker")||$(e.elem).addClass("elem-CalenStyle"),$(e.elem).html("<div class='calendarCont'></div>"),e.setting.viewsToDisplay.length>1)for(var t=0;t<e.setting.viewsToDisplay.length;t++){var a=e.setting.viewsToDisplay[t].viewName||"";$.cf.compareStrings(a,e.setting.visibleView)&&(e.tv.bDisMenu=!0)}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.bViewLoaded=!1,e._getBusinessDaysForWeek(),e._checkAllowDroppable(),e._setDisplayTimeLabelsArray(),e._resetSourceFetch();var i,n=navigator.userAgent,s="br-other";if(/(ipod|iphone|ipad)/i.test(n)?s="br-ios":/opera|opr/i.test(n)?s="br-opera":/msie|trident/i.test(n)?s="br-ie":/chrome.+? edge/i.test(n)?s="br-ie":/chrome|crios|crmo/i.test(n)?s="br-chrome":/firefox|iceweasel/i.test(n)?s="br-firefox":/safari/i.test(n)&&(s="br-safari"),$("body").addClass(s),$.CalenStyle.extra.bTouchDevice)i=2,$(".calendarCont").addClass("calendarContMobile");else{if("WebkitAppearance"in document.documentElement.style)i=5;else{var r=document.createElement("div");r.innerHTML="<div style='width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;'><div style='width:1px;height:100px;'></div></div>",r=r.firstChild,document.body.appendChild(r);var o=r.offsetWidth-r.clientWidth;document.body.removeChild(r),i=o}$(".calendarCont").addClass("calendarContWeb")}$.CalenStyle.extra.iScrollbarWidth=i,e.setCurrentView(e.setting.visibleView,!0)},setCurrentView:function(e,t){var a=this;a.setting.visibleView=e;var i=$(a.elem).find(".calendarCont");i.removeClass("cmvCalendarCont cdvCalendarCont cdlvCalendarCont cagvCalendarCont cagvTimeline1 cagvTimeline2 cagvTimeline3 cavCalendarCont cqavCalendarCont"),$(a.elem).find(".calendarCont").html(""),i.css({width:"100%",height:"100%"}),i.removeClass("cmvCalendarContWithBorders"),$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker")?(i.addClass("cmvCalendarCont"),$.cf.compareStrings(a.setting.visibleView,"DatePicker")||i.addClass("cmvCalendarContWithBorders")):$.cf.compareStrings(a.setting.visibleView,"DayEventListView")?(i.addClass("cdlvCalendarCont"),a.tv.iNoVDay=a.setting.daysInDayListView,a.tv.iNoVDay>=6&&a.setting.excludeNonBusinessHours&&(a.tv.iNoVDay-=a.tv.iNoVDay-a.tv.iBsDays),a.tv.iSelDay=Math.floor(a.tv.iNoVDay/2),a.tv.iNoVDayDis=1):$.cf.compareStrings(a.setting.visibleView,"AppointmentView")?(i.addClass("cavCalendarCont"),a.tv.iNoVDay=a.setting.daysInAppointmentView,a.tv.iNoVDay>=6&&a.setting.excludeNonBusinessHours&&(a.tv.iNoVDay-=a.tv.iNoVDay-a.tv.iBsDays),a.tv.iNoVDayDis=a.tv.iNoVDay):$.cf.compareStrings(a.setting.visibleView,"AgendaView")?(i.addClass("cagvCalendarCont"),$.cf.isValid(a.setting.displayEventsForPeriodInListInAgendaView)||($.cf.compareStrings(a.setting.agendaViewTheme,"Timeline1")?i.addClass("cagvTimeline1"):$.cf.compareStrings(a.setting.agendaViewTheme,"Timeline2")?i.addClass("cagvTimeline2"):$.cf.compareStrings(a.setting.agendaViewTheme,"Timeline3")&&i.addClass("cagvTimeline3")),$.cf.compareStrings(a.setting.agendaViewDuration,"Month")||($.cf.compareStrings(a.setting.agendaViewDuration,"Week")?a.tv.iNoVDay=6:$.cf.compareStrings(a.setting.agendaViewDuration,"CustomDays")&&(a.tv.iNoVDay=a.setting.daysInAgendaView),a.tv.iNoVDay>=6&&a.setting.excludeNonBusinessHours&&(a.tv.iNoVDay-=a.tv.iNoVDay-a.tv.iBsDays),a.tv.iNoVDayDis=a.tv.iNoVDay)):$.cf.compareStrings(a.setting.visibleView,"WeekPlannerView")?(i.addClass("cwpvCalendarCont"),a.tv.iNoVDay=6,a.tv.iNoVDayDis=a.tv.iNoVDay):$.cf.compareStrings(a.setting.visibleView,"QuickAgendaView")?(i.addClass("cqavCalendarCont"),$.cf.compareStrings(a.setting.quickAgendaViewDuration,"Week")?a.tv.iNoVDay=6:$.cf.compareStrings(a.setting.quickAgendaViewDuration,"CustomDays")&&(a.tv.iNoVDay=a.setting.daysInQuickAgendaView),a.tv.iNoVDay>=6&&a.setting.excludeNonBusinessHours&&(a.tv.iNoVDay-=a.tv.iNoVDay-a.tv.iBsDays),a.tv.iNoVDayDis=a.tv.iNoVDay):$.cf.compareStrings(a.setting.visibleView,"TaskPlannerView")?(i.addClass("ctpvCalendarCont"),$.cf.compareStrings(a.setting.taskPlannerViewDuration,"Week")?a.tv.iNoVDay=6:$.cf.compareStrings(a.setting.taskPlannerViewDuration,"CustomDays")&&(a.tv.iNoVDay=a.setting.daysInTaskPlannerView),a.tv.iNoVDay>=6&&a.setting.excludeNonBusinessHours&&(a.tv.iNoVDay-=a.tv.iNoVDay-a.tv.iBsDays),a.tv.iNoVDayDis=a.tv.iNoVDay):(i.addClass("cdvCalendarCont"),$.cf.compareStrings(a.setting.visibleView,"WeekView")?(a.tv.iNoVDay=6,a.tv.iNoVDay>=6&&a.setting.excludeNonBusinessHours&&(a.tv.iNoVDay-=a.tv.iNoVDay-a.tv.iBsDays),a.tv.iNoVDayDis=a.tv.iNoVDay):$.cf.compareStrings(a.setting.visibleView,"DayView")?(a.tv.iNoVDay=1,a.tv.iNoVDayDis=1):$.cf.compareStrings(a.setting.visibleView,"CustomView")?(a.tv.iNoVDay=a.setting.daysInCustomView,a.tv.iNoVDay>=6&&a.setting.excludeNonBusinessHours&&(a.tv.iNoVDay-=a.tv.iNoVDay-a.tv.iBsDays),a.tv.iNoVDayDis=a.tv.iNoVDay):$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")&&(a.tv.iNoVDay=a.setting.daysInDayListView,a.tv.iNoVDay>=6&&a.setting.excludeNonBusinessHours&&(a.tv.iNoVDay-=a.tv.iNoVDay-a.tv.iBsDays),a.tv.iNoVDayDis=1)),a.__getCurrentViewDates(),a._addCommonView(t)},_addContHeader:function(){var e,t,a=this,i="";for(i+="<div class='cContHeaderSections cContHeaderSectionLeft'>",t=a.setting.headerSectionsList.left||[],e=0;e<t.length;e++)i+=a._addHeaderSections(t[e]);for(i+="</div>",i+="<div class='cContHeaderSections cContHeaderSectionRight'>",t=a.setting.headerSectionsList.right||[],e=0;e<t.length;e++)i+=a._addHeaderSections(t[e]);for(i+="</div>",i+="<div class='cContHeaderSections cContHeaderSectionCenter'>",t=a.setting.headerSectionsList.center||[],e=0;e<t.length;e++)i+=a._addHeaderSections(t[e]);return i+="</div>"},_addHeaderSections:function(e){var t=this,a="",i=t._isFullScreen();return $.cf.compareStrings(e,"DatePickerIcon")?a+=t.setting.headerComponents.DatePickerIcon:$.cf.compareStrings(e,"FullscreenButton")?a+=t.setting.headerComponents.FullscreenButton(i):$.cf.compareStrings(e,"PreviousButton")?a+=t.setting.headerComponents.PreviousButton:$.cf.compareStrings(e,"NextButton")?a+=t.setting.headerComponents.NextButton:$.cf.compareStrings(e,"TodayButton")?a+=t.setting.headerComponents.TodayButton:$.cf.compareStrings(e,"HeaderLabel")?a+=t.setting.headerComponents.HeaderLabel:$.cf.compareStrings(e,"HeaderLabelWithDropdownMenuArrow")?a+=t.setting.headerComponents.HeaderLabelWithDropdownMenuArrow:$.cf.compareStrings(e,"MenuSegmentedTab")&&t.tv.bDisMenu?a+=t.setting.headerComponents.MenuSegmentedTab:$.cf.compareStrings(e,"MenuDropdownIcon")&&t.tv.bDisMenu&&(a+=t.setting.headerComponents.MenuDropdownIcon),a},_updateViewSelectionMenu:function(){var e,t=this,a="";for(a+="<ul class='cContHeaderMenuSections'>",t.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(t.setting.dropdownMenuElements[0],"DatePicker")&&(a+="<li id='cContHeaderMenuDatePicker' name='DatePicker' class='cContHeaderButton clickableLink'>Date Picker</li>"),e=0;e<t.setting.viewsToDisplay.length;e++){var i=t.setting.viewsToDisplay[e],n=i.viewName||"",s=i.viewDisplayName||"";$.cf.compareStrings(s,"")&&($.cf.compareStrings(n,"DetailedMonthView")||$.cf.compareStrings(n,"MonthView")||$.cf.compareStrings(n,"DatePicker")?s="Month":$.cf.compareStrings(n,"WeekView")?s="Week":$.cf.compareStrings(n,"DayView")||$.cf.compareStrings(n,"DayEventListView")||$.cf.compareStrings(n,"DayEventDetailView")?s="Day":$.cf.compareStrings(n,"CustomView")?s=t.setting.daysInCustomView+" Days":$.cf.compareStrings(n,"QuickAgendaView")?s="Quick Agenda":$.cf.compareStrings(n,"TaskPlannerView")?s="Task Planner":$.cf.compareStrings(n,"AppointmentView")?s="Appointment":$.cf.compareStrings(n,"AgendaView")?s="Agenda":$.cf.compareStrings(n,"WeekPlannerView")&&(s="Week Planner")),a+="<li id='cContHeaderMenu"+n+"' name='"+n+"' class='cContHeaderButton clickableLink'>"+s+"</li>"}return t.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(t.setting.dropdownMenuElements[1],"DatePicker")&&(a+="<li id='cContHeaderMenuDatePicker' name='DatePicker' class='cContHeaderButton clickableLink'>Date Picker</li>"),a+="</ul>"},_refreshHeader:function(){var e=this;$(e.elem).find(".cContHeader").length>0&&$(e.elem).find(".cContHeader").html(e._addContHeader()),e._addMenuItemsInSegmentedTab(),e._addEventsToHeaderElements(),e._adjustViewSelectionMenu()},_addEventsToHeaderElements:function(){var e=this;if($(e.elem).find(".cContHeaderMenuDropdown .cContHeaderMenuSections li").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()}),$(e.elem).find(".cContHeaderPrevButton").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation(),e.navigateToPrevView()}),$(e.elem).find(".cContHeaderNextButton").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation(),e.navigateToNextView()}),$(e.elem).find(".cContHeaderToday").html(e.getNumberStringInFormat($.CalenStyle.extra.dToday.getDate(),0,!0)),$(e.elem).find(".cContHeaderToday").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation(),e.navigateToToday()}),e._addEventsForMenu(),$(e.elem).find(".cContHeaderMenuButton").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),$(e.elem).find(".cContHeaderMenuDropdown").length>0?e._collapseSubmenu():e._expandSubmenu()}),$(e.elem).find(".cContHeaderDatePickerIcon").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),e._showOrHideDatePicker()}),$(e.elem).find(".cContHeaderDropdownMenuArrow").length>0){1===e.setting.dropdownMenuElements.length&&$.cf.compareStrings(e.setting.dropdownMenuElements[0],"DatePicker")&&$(e.elem).find(".cContHeaderLabelOuter").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),e._showOrHideDatePicker()});for(var t=!1,a=0;a<e.setting.dropdownMenuElements.length;a++)if($.cf.compareStrings(e.setting.dropdownMenuElements[a],"ViewsToDisplay")){t=!0;break}t&&$(e.elem).find(".cContHeaderLabelOuter").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),$(e.elem).find(".cContHeaderMenuDropdown").length>0?e._collapseSubmenu():e._expandSubmenu()})}if($(e.elem).find(".cContHeaderFullscreen").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation(),e._toggleFullscreen()}),e.setting.addEventHandlersInHeader&&e.setting.addEventHandlersInHeader.call(e),e.setting.useHammerjsAsGestureLibrary){var i=new Hammer(e.elem,{threshold:0,velocity:0});i.on("swiperight",function(t){e.navigateToPrevView()}),i.on("swipeleft",function(t){e.navigateToNextView()})}},_addMenuItemsInSegmentedTab:function(){$(this.elem).find(".cContHeaderMenuSegmentedTab").html(this._updateViewSelectionMenu())},_expandSubmenu:function(){var e=this,t="";if(t+="<div class='cContHeaderMenuDropdownBg'>",t+="<div class='cContHeaderMenuDropdown'>",t+=e._updateViewSelectionMenu(),t+="</div>",t+="</div>",$(e.elem).find(".calendarContInner").append(t),$(e.elem).find(".cContHeaderMenuDropdownBg").length>0){var a,i,n,s,r,o=$(e.elem);0,0,a=o.width(),i=o.height(),$(e.elem).find(".cContHeaderMenuDropdownBg").css({left:0,top:0,width:a,height:i});var l=$(e.elem).find(".cContHeaderMenuButton"),d=$(e.elem).find(".cContHeaderDropdownMenuArrow"),c=0+a;if(r=$(e.elem).find(".cContHeaderMenuDropdown").width(),l.length>0)0+(n=l.position().left-5+$(e.elem).find(".calendarContInner").position().left)+r>c&&(n=a-r-5),s=l.height()+5+$(e.elem).find(".calendarContInner").position().top+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),$(".cContHeaderMenuDropdown").css({left:n,top:s});else if(d.length>0){var v=$(e.elem).find(".cContHeaderLabelOuter"),g=v.width();(n=v.position().left+g/2-r/2)<0&&(n=5),n+r>c&&(n=a-r-5),s=$(e.elem).find(".cContHeaderLabelOuter").height()+$(e.elem).find(".calendarContInner").position().top+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),$(".cContHeaderMenuDropdown").css({left:n,top:s})}}e._addEventsForMenu()},_collapseSubmenu:function(){var e=$(this.elem).find(".cContHeaderMenuDropdownBg");e.length>0&&(e.hide(10),setTimeout(function(){e.remove()},10)),this.addRemoveViewLoader(!1,"cViewLoaderBg")},_addEventsForMenu:function(){var e=this;$(e.elem).find(".cContHeaderMenuSegmentedTab .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuSegmentedTab #cContHeaderMenu"+e.setting.visibleView).addClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuDropdownBg .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuDropdownBg #cContHeaderMenu"+e.setting.visibleView).addClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuSections li").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation();var a=$(this).attr("name");$(e.elem).find(".cContHeaderMenuSegmentedTab .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuSegmentedTab #cContHeaderMenu"+a).addClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuDropdownBg .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuDropdownBg #cContHeaderMenu"+a).addClass("cSelectedMenu"),$.cf.compareStrings(a,"DatePicker")?(e._collapseSubmenu(),setTimeout(function(){e._showOrHideDatePicker()},100)):$.cf.compareStrings(a,e.setting.visibleView)||(e.addRemoveViewLoader(!0,"cViewLoaderBg"),setTimeout(function(){e.setCurrentView(a,!1),e.setting.visibleViewChanged&&e.setting.visibleViewChanged.call(e,e.setting.visibleView,e.setting.selectedDate,e.tv.dAVDt),e._reloadDatePickerContent(),e._collapseSubmenu()},2))}),$(e.elem).find(".cContHeaderMenuDropdownBg").on($.CalenStyle.extra.sClickHandler,function(t){e._collapseSubmenu()}),$.cf.compareStrings(e.setting.visibleView,"DatePicker")||(null===e.setting.datePickerObject?e._addDatePicker():e.setting.datePickerObject.refreshView())},navigateToToday:function(){var e=this;e.setting.selectedDate=e.setDateInFormat({date:e._getCurrentDate()},"START"),e.reloadData(),e.setting.todayButtonClicked&&e.setting.todayButtonClicked.call(e,e.setting.selectedDate,e.tv.dAVDt),e.__reloadDatePickerContentOnNavigation()},navigateToPrevView:function(){var e=this;$(e.elem).find(".cListOuterCont").html(""),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?e.__goToPrevMonthView():$.cf.compareStrings(e.setting.visibleView,"WeekView")||$.cf.compareStrings(e.setting.visibleView,"DayView")||$.cf.compareStrings(e.setting.visibleView,"CustomView")||$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")?e.__goToPrevDetailView():$.cf.compareStrings(e.setting.visibleView,"DayEventListView")?e.__goToPrevDayListView():$.cf.compareStrings(e.setting.visibleView,"QuickAgendaView")?e.__goToPrevQuickAgendaView():$.cf.compareStrings(e.setting.visibleView,"TaskPlannerView")?e.__goToPrevTaskPlannerView():$.cf.compareStrings(e.setting.visibleView,"AppointmentView")?e.__goToPrevAppointmentView():$.cf.compareStrings(e.setting.visibleView,"AgendaView")?e.__goToPrevAgendaView():$.cf.compareStrings(e.setting.visibleView,"WeekPlannerView")&&e.__goToPrevWeekPlannerView(),e.setting.previousButtonClicked&&e.setting.previousButtonClicked.call(e,e.setting.selectedDate,e.tv.dAVDt)},navigateToNextView:function(){var e=this;$(e.elem).find(".cListOuterCont").html(""),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?e.__goToNextMonthView():$.cf.compareStrings(e.setting.visibleView,"WeekView")||$.cf.compareStrings(e.setting.visibleView,"DayView")||$.cf.compareStrings(e.setting.visibleView,"CustomView")||$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")?e.__goToNextDetailView():$.cf.compareStrings(e.setting.visibleView,"DayEventListView")?e.__goToNextDayListView():$.cf.compareStrings(e.setting.visibleView,"QuickAgendaView")?e.__goToNextQuickAgendaView():$.cf.compareStrings(e.setting.visibleView,"TaskPlannerView")?e.__goToNextTaskPlannerView():$.cf.compareStrings(e.setting.visibleView,"AppointmentView")?e.__goToNextAppointmentView():$.cf.compareStrings(e.setting.visibleView,"AgendaView")?e.__goToNextAgendaView():$.cf.compareStrings(e.setting.visibleView,"WeekPlannerView")&&e.__goToNextWeekPlannerView(),e.setting.nextButtonClicked&&e.setting.nextButtonClicked.call(e,e.setting.selectedDate,e.tv.dAVDt)},getVisibleDates:function(){return this.tv.dAVDt},_adjustViewSelectionMenu:function(){var e,t;if($(this.elem).find(".cContHeaderMenuSegmentedTab").length>0){var a=$(this.elem).find(".cContHeaderMenuSections li"),i=0;for(e=0;e<a.length;e++){t=a[e];var n=$(t).width();i=n>i?n:i}for(i+=25,e=0;e<a.length;e++)t=a[e],$(t).css({width:i})}this._adjustDatePicker()},_addDatePicker:function(){var e=this,t=$(e.elem).find(".cContHeaderDatePickerIcon").length>0,a=$(e.elem).find(".cContHeaderDropdownMenuArrow").length>0,i=$(e.elem).find(".cContHeaderMenuButton").length>0,n=e.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(e.setting.dropdownMenuElements[0],"DatePicker")||e.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(e.setting.dropdownMenuElements[1],"DatePicker");if((t||(a||i)&&n)&&e.setting.addEventsInMonthView&&!$.cf.compareStrings(e.setting.visibleView,"DatePicker")&&!$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ChangeDate")&&0===$(".cElemDatePickerBg").length){var s="";s+="<div class='cElemDatePickerBg'>",s+="<div class='cElemDatePickerCont'>",t&&(s+="<span class='cElemDatePickerTooltip cElemDatePickerTooltipBottom'></span>"),s+="<div class='cElemDatePicker'>",s+="</div>",s+="</div>",s+="</div>",$(e.elem).parent().append(s),$(".cElemDatePicker").CalenStyle({visibleView:"DatePicker",headerSectionsList:{left:["TodayButton"],center:["HeaderLabel"],right:["PreviousButton","NextButton"]},transitionSpeed:0,selectedDate:e.setting.selectedDate,shortDayNames:e.setting.veryShortDayNames,shortMonthNames:e.setting.shortMonthNames,fullMonthNames:e.setting.shortMonthNames,numbers:e.setting.numbers,businessHoursSource:e.setting.businessHoursSource,inputTZOffset:e.setting.inputTZOffset,outputTZOffset:e.setting.outputTZOffset,parentObject:e,eventIndicatorInDatePicker:e.setting.eventIndicatorInDatePicker,initialize:function(){e.setting.datePickerObject=this},viewLoaded:function(t,a){e.setting.datePickerObject.highlightDatesInDatePicker(e.tv.dAVDt)},cellClicked:function(t,a,i,n){e._showOrHideDatePicker(),e.addRemoveViewLoader(!0,"cViewLoaderBg"),setTimeout(function(){e.setting.selectedDate=a,e.reloadData(),e.setting.datePickerObject.highlightDatesInDatePicker(e.tv.dAVDt),e.addRemoveViewLoader(!1,"cViewLoaderBg")},4)},calDataSource:e.setting.datePickerCalDataSource,useHammerjsAsGestureLibrary:e.setting.useHammerjsAsGestureLibrary}),$(".cElemDatePickerBg").on($.CalenStyle.extra.sClickHandler,function(t){t.preventDefault(),e._hideDatePicker()}),$(".cElemDatePicker, .cElemDatePicker *").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()}),$(".cElemDatePickerBg *").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()})}},_showOrHideDatePicker:function(){var e=this;"none"===$(".cElemDatePickerBg").css("display")?($(".cElemDatePickerBg").show(0),e.setting.adjustViewOnWindowResize&&$(window).bind("resize.CSDP."+e.tv.pluginId,function(t){e._adjustDatePicker()}),e._reloadDatePickerContent(),e._adjustDatePicker()):e._hideDatePicker()},_hideDatePicker:function(){"none"!==$(".cElemDatePickerBg").css("display")&&$(".cElemDatePickerBg").css({display:"none"}),this.setting.adjustViewOnWindowResize&&$(window).unbind("resize.CSDP."+this.tv.pluginId)},_reloadDatePickerContent:function(){var e=this,t=$(e.elem).find(".cContHeaderDatePickerIcon").length>0,a=$(e.elem).find(".cContHeaderDropdownMenuArrow").length>0,i=$(e.elem).find(".cContHeaderMenuButton").length>0,n=e.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(e.setting.dropdownMenuElements[0],"DatePicker")||e.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(e.setting.dropdownMenuElements[1],"DatePicker");(t||(a||i)&&n)&&null!==e.setting.datePickerObject&&(e.setting.datePickerObject.setting.selectedDate=e.setting.selectedDate,e.setting.datePickerObject.reloadData(),e.setting.datePickerObject.highlightDatesInDatePicker(e.tv.dAVDt)),e._adjustDatePicker()},__reloadDatePickerContentOnNavigation:function(){var e=this;e._reloadDatePickerContent(),$.cf.compareStrings(e.setting.visibleView,"DatePicker")?e.__highlightDaysInDatePicker():$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ChangeDate")&&e.__highlightDaysInDatePicker()},_adjustDatePicker:function(){var e,t,a,i,n,s,r,o=this;if(!$.cf.compareStrings(o.setting.visibleView,"DatePicker")){var l=$(o.elem),d=l.css("margin-left");d=parseInt(d.replace("px",""));var c=l.css("margin-top");c=parseInt(c.replace("px","")),e=l.position().left+d,t=l.position().top+c,a=l.width(),i=l.height(),$(".cElemDatePickerBg").css({left:e,top:t,width:a,height:i})}var v=$(o.elem).find(".cContHeaderDatePickerIcon"),g=$(o.elem).find(".cContHeaderDropdownMenuArrow"),m=$(o.elem).find(".cContHeaderMenuButton"),D=e+a;if(r=$(".cElemDatePickerCont").width(),v.length>0)e+(n=v.position().left-5+$(o.elem).find(".calendarContInner").position().left)+r>D&&(n=a-r-5),s=v.height()+5+$(o.elem).find(".calendarContInner").position().top+($.cf.compareStrings(o.setting.sectionsList[0],"ActionBar")?$(o.elem).find(".cActionBar").height():0),$(".cElemDatePickerCont").css({left:n,top:s});else if(g.length>0||m.length>0){var f=$(o.elem).find(".cContHeaderLabelOuter"),p=f.width(),u=f.position().left+p/2,h=r/2;!$.CalenStyle.extra.bTouchDevice&&a>480?((n=u-h)<0&&(n=5),n+r>D&&(n=a-r-5)):n=(a-r)/2,s=$(o.elem).find(".cContHeaderLabelOuter").height()+10+$(o.elem).find(".calendarContInner").position().top+($.cf.compareStrings(o.setting.sectionsList[0],"ActionBar")?$(o.elem).find(".cActionBar").height():0),$(".cElemDatePickerCont").css({left:n,top:s})}},_isFullScreen:function(){return $(this.elem).hasClass("cFullscreenCont")},_toggleFullscreen:function(){var e=this;e._isFullScreen()?($(e.elem).removeClass("cFullscreenCont"),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight})):$(e.elem).addClass("cFullscreenCont"),e._adjustViews(!0)},__adjustHeader:function(){var e=this;e._isFullScreen()?$(e.elem).find(".cContHeaderFullscreen").removeClass("cs-icon-Expand").addClass("cs-icon-Contract"):$(e.elem).find(".cContHeaderFullscreen").removeClass("cs-icon-Contract").addClass("cs-icon-Expand");var t=$(e.elem).find(".calendarContInner");t.outerWidth(),t.outerHeight();$(e.elem).find(".cContHeader, .cContHeaderDatePickerIcon, .cContHeaderFullscreen, .cContHeaderNavButton").css({height:45,"line-height":"45px"})},_addCommonView:function(e){var t,a,i=this,n=!0,s=0,r=$(i.elem).find(".calendarCont"),o=0,l=0,d=0,c=0,v="";for(t=0;t<i.setting.sectionsList.length;t++)if(a=i.setting.sectionsList[t],$.cf.compareStrings(a,"FilterBar")){i.tv.bDisFBar=!0;break}if(i.tv.bDisFBar){var g,m,D,f,p=r.outerWidth(),u=r.outerHeight();$.cf.compareStrings(i.setting.filterBarPosition,"Top")||$.cf.compareStrings(i.setting.filterBarPosition,"Bottom")?(D=p,d=p,c=u-(f=i.setting.filterBarHeight),g=0,o=0,$.cf.compareStrings(i.setting.filterBarPosition,"Top")?(m=0,l=i.setting.filterBarHeight-$.CalenStyle.extra.iBorderOverhead):$.cf.compareStrings(i.setting.filterBarPosition,"Bottom")&&(l=0,m=c),D="100%",f+="px"):($.cf.compareStrings(i.setting.filterBarPosition,"Left")||$.cf.compareStrings(i.setting.filterBarPosition,"Right"))&&(f=u,d=p-(D=i.setting.filterBarWidth),c=u,m=0,l=0,$.cf.compareStrings(i.setting.filterBarPosition,"Left")?(g=0,o=i.setting.filterBarWidth):$.cf.compareStrings(i.setting.filterBarPosition,"Right")&&(o=0,g=d),D+="px",f="100%"),v+="<div class='cFilterBar' style='left: "+g+"px; top: "+m+"px; width: "+D+"; height: "+f+";'></div>"}for(v+="<div class='calendarContInner' style='left: "+o+"px; top: "+l+"px; width: "+d+"px; height: "+c+"px;'></div>",r.append(v),t=0;t<i.setting.sectionsList.length;t++)a=i.setting.sectionsList[t],$.cf.compareStrings(a,"ActionBar")?i.tv.bDisABar=!0:$.cf.compareStrings(a,"EventList")&&($.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"DayEventListView"))&&(i.tv.bCMVDisEvLst=!0);for(v="",t=0;t<i.setting.sectionsList.length;t++)a=i.setting.sectionsList[t],$.cf.compareStrings(a,"Header")?(n?n=!1:s-=1,v+="<div class='cContHeader' style='top: "+s+"px;'>",v+=i._addContHeader(s),v+="</div>"):$.cf.compareStrings(a,"Calendar")?(n?n=!1:s-=1,$.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"DatePicker")?(i.tv.bDisABar?s-=1:s-=2,v+="<table class='cTable cmvMonthTable cmvMonthTableMain' cellspacing='0' style='top: "+s+"px;'></table>"):$.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")?(v+="<div class='cmvTableContainerOuter'>",v+="<div class='cmvTableContainer' style='overflow: hidden;'>",v+="<table class='cTable cmvMonthTable cmvMonthTableMain' cellspacing='0'></table>",$.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")&&(v+="<div class='cdmvEventCont cdmvEventContMain'></div>"),v+="</div>",v+="</div>"):$.cf.compareStrings(i.setting.visibleView,"WeekView")||$.cf.compareStrings(i.setting.visibleView,"DayView")||$.cf.compareStrings(i.setting.visibleView,"CustomView")||$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")?(2===i.setting.sectionsList.length?s-=3:s-=2,v+="<table class='cTable cdvDetailTable cdvDetailTableMain' cellspacing='0' style='top: "+s+"px;'></table>",v+="<div class='cdvContRow3 cdvContRow3Main'></div>",s-=1):$.cf.compareStrings(i.setting.visibleView,"QuickAgendaView")?(2===i.setting.sectionsList.length?s-=3:s-=2,v+="<table class='cTable cqavTable cqavTableMain' cellspacing='0' style='top: "+s+"px;'></table>",v+="<div class='cqavContRow2 cqavContRow2Main'></div>",s-=1):$.cf.compareStrings(i.setting.visibleView,"TaskPlannerView")?(2===i.setting.sectionsList.length?s-=3:s-=2,v+="<table class='cTable ctpvTable ctpvTableMain' cellspacing='0' style='top: "+s+"px;'></table>",s-=1):$.cf.compareStrings(i.setting.visibleView,"DayEventListView")?v+="<table class='cTable cdlvDaysTable cdlvDaysTableList cdlvDaysTableMain' cellspacing='0' style='top: "+(s-=2)+"px;'></table>":$.cf.compareStrings(i.setting.visibleView,"AppointmentView")?(v+="<table class='cTable cavTable cavTableMain' cellspacing='0' style='top: "+(s-=2)+"px;'></table>",v+="<div class='cavContRow2 cavContRow2Main'></div>"):$.cf.compareStrings(i.setting.visibleView,"WeekPlannerView")&&(s-=2,$.CalenStyle.extra.bTouchDevice?v+="<table class='cTable cwpvTable cwpvTableMain' cellspacing='0' style='top: "+s+"px;'></table>":v+="<div class='cwpvTableOuterCont' style='top: "+s+"px;'><table class='cTable cwpvTable cwpvTableMain' cellspacing='0'></table></div>")):$.cf.compareStrings(a,"ActionBar")?(n?n=!1:$.cf.compareStrings(i.setting.visibleView,"MonthView")||(s-=1),v+="<div class='cActionBar' style='height: "+i.setting.actionBarHeight+"px; top: "+s+"px;'></div>"):$.cf.compareStrings(a,"EventList")&&($.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"DayEventListView"))&&(n?n=!1:s-=1,$.cf.compareStrings(i.setting.visibleView,"DayEventListView")&&(s-=1),v+="<div class='cListOuterCont'></div>");($.cf.compareStrings(i.setting.visibleView,"DayEventListView")&&!i.tv.bCMVDisEvLst||$.cf.compareStrings(i.setting.visibleView,"AgendaView"))&&(n||(s-=2),i.tv.bCMVDisEvLst=!0,v+="<div class='cListOuterCont' style='top: "+s+"px;'></div>"),$(i.elem).find(".calendarContInner").append(v),i._addMenuItemsInSegmentedTab(),i._addEventsToHeaderElements(),i._adjustViewSelectionMenu(),e?i.reloadData():i.__reloadCurrentView(!0,!1),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyle",function(e){i._callCommonEvents()})},refreshView:function(){var e=this;e.tv.oAEvents=e._sortEvents(e.tv.oAEvents),e._refreshHeader(),e.__reloadCurrentView(!0,!1)},_adjustViews:function(e){var t=this;$.cf.compareStrings(t.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(t.setting.visibleView,"MonthView")||$.cf.compareStrings(t.setting.visibleView,"DatePicker")?t.adjustMonthTable():$.cf.compareStrings(t.setting.visibleView,"WeekView")||$.cf.compareStrings(t.setting.visibleView,"DayView")||$.cf.compareStrings(t.setting.visibleView,"CustomView")?t.__adjustDetailViewTable():$.cf.compareStrings(t.setting.visibleView,"DayEventDetailView")?t.__adjustDetailViewTable():$.cf.compareStrings(t.setting.visibleView,"DayEventListView")?t.__adjustDayListView():$.cf.compareStrings(t.setting.visibleView,"QuickAgendaView")?t.__adjustQuickAgendaView(e):$.cf.compareStrings(t.setting.visibleView,"TaskPlannerView")?t.__adjustTaskPlannerView(e):$.cf.compareStrings(t.setting.visibleView,"AppointmentView")?t.__adjustAppointmentTable():$.cf.compareStrings(t.setting.visibleView,"AgendaView")?t.adjustAgendaView():$.cf.compareStrings(t.setting.visibleView,"WeekPlannerView")&&t.adjustWeekPlannerView()},__reloadCurrentView:function(e,t){var a=this;a.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+a.tv.pluginId),a.__getCurrentViewDates(),$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker")?(a.updateMonthTableAndContents(t),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(e){$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&a.setting.hideExtraEvents?($(a.elem).find(".cdmvEvent").remove(),$(a.elem).find(".cHiddenEventsIndicator").remove(),$(a.elem).find(".cHiddenEventsCont").remove(),a.adjustMonthTable(),a._addEventContInMonthView(null)):a.adjustMonthTable()})):$.cf.compareStrings(a.setting.visibleView,"WeekView")||$.cf.compareStrings(a.setting.visibleView,"DayView")||$.cf.compareStrings(a.setting.visibleView,"CustomView")||$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")?e&&($(a.elem).find(".cdvContRow3Main").html(""),a.__updateDetailViewTable(),a.__adjustDetailViewTable(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(e){a.__adjustDetailViewTable()}),a.__parseData(t,function(){if($.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")){if(a.setEventOrTaskStatusForCurrentView(),a.tv.bEvTskStatus){for(var e=0;e<a.tv.iNoVDay;e++)$(a.elem).find("#cdlvRowDay"+e).append("<div class='cdlvTableRowStatusGroup'> &nbsp; </div>");a.__displayEventOrTaskStatusForDayListView()}a.__setDateStringsForDayListView(a.tv.iNoVDay,a.tv.dAVDt,0)}a.__updateTimeSlotTableView(),a.__addEventsInDetailView("Both"),a.__adjustDetailViewTable(),a.__adjustDetailViewTable(),a.__modifyFilterBarCallback()})):$.cf.compareStrings(a.setting.visibleView,"QuickAgendaView")?($(a.elem).find(".cqavContRow2Main").html(""),a.__updateQuickAgendaView(),a.__adjustQuickAgendaView(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(e){a.__adjustQuickAgendaView(!0)}),a.__parseData(t,function(){a.__addEventsInQuickAgendaView(),a.__adjustQuickAgendaView(),a.__modifyFilterBarCallback()})):$.cf.compareStrings(a.setting.visibleView,"TaskPlannerView")?($(a.elem).find(".ctpvTableRow2 td").html(""),a.__updateTaskPlannerView(),a.__adjustTaskPlannerView(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(e){a.__adjustTaskPlannerView(!0)}),a.__parseData(t,function(){a.setEventOrTaskStatusForCurrentView(),a.__addEventsInTaskPlannerView(),a.__adjustTaskPlannerView(),a.__modifyFilterBarCallback()})):$.cf.compareStrings(a.setting.visibleView,"DayEventListView")?(a.__updateDayListViewTable(t,!0),e||a.__adjustDayListView(),a.__adjustDayListView(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(e){a.__adjustDayListView()})):$.cf.compareStrings(a.setting.visibleView,"AppointmentView")?(a.__updateAppointmentTable(),a.__adjustAppointmentTable(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(e){a.__adjustAppointmentTable()}),a.__parseData(t,function(){a.__updateAppointmentTable(),a.__displayAppointments(),a.__adjustAppointmentTable(),a.__adjustAppointmentTable(),a.__modifyFilterBarCallback()})):$.cf.compareStrings(a.setting.visibleView,"AgendaView")?(a.updateAgendaView(t),a.adjustAgendaView(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(e){a.adjustAgendaView()})):$.cf.compareStrings(a.setting.visibleView,"WeekPlannerView")&&(a.updateWeekPlannerView(t),a.adjustWeekPlannerView(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(e){a.adjustWeekPlannerView()})),a.setting.modifyFilterBarView&&a.setting.modifyFilterBarView.call(a,$(a.elem).find(".cFilterBar"),a.setting.eventFilterCriteria,a.tv.oAEvFltrCnt),a.tv.bDisABar&&a.setting.modifyActionBarView&&a.setting.modifyActionBarView.call(a,$(a.elem).find(".cActionBar"),a.setting.visibleView),a.tv.bViewLoaded||(a.setting.viewLoaded&&a.setting.viewLoaded.call(a,a.setting.selectedDate,a.tv.dAVDt),a.tv.bViewLoaded=!0)},__modifyFilterBarCallback:function(){var e=this;e.setting.modifyFilterBarView&&e.setting.modifyFilterBarView.call(e,$(e.elem).find(".cFilterBar"),e.setting.eventFilterCriteria,e.tv.oAEvFltrCnt)},__adjustFontSize:function(){var e=this,t=$(e.elem).find(".calendarContInner"),a=t.outerWidth(),i=t.outerHeight(),n="cFontLarge cFontMedium cFontSmall cFontExtraSmall";$.cf.compareStrings(e.setting.visibleView,"WeekView")||$.cf.compareStrings(e.setting.visibleView,"DayView")||$.cf.compareStrings(e.setting.visibleView,"CustomView")||$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")||$.cf.compareStrings(e.setting.visibleView,"QuickAgendaView")||$.cf.compareStrings(e.setting.visibleView,"TaskPlannerView")?a<=360||i<=360?t.removeClass(n).addClass("cFontSmall"):a<=710?t.removeClass(n).addClass("cFontMedium"):t.removeClass(n).addClass("cFontLarge"):$.cf.compareStrings(e.setting.visibleView,"DayEventListView")||$.cf.compareStrings(e.setting.visibleView,"AppointmentView")||$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")?a<=310||i<=310?t.removeClass(n).addClass("cFontSmall"):a<=410||i<=410?t.removeClass(n).addClass("cFontMedium"):t.removeClass(n).addClass("cFontLarge"):($.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker"))&&(e.tv.bCMVDisEvLst?a<=310||i<=310?t.removeClass(n).addClass("cFontSmall"):a<=400||i<=400?t.removeClass(n).addClass("cFontMedium"):t.removeClass(n).addClass("cFontLarge"):a<=310||i<=310?t.removeClass(n).addClass("cFontSmall"):a<=410||i<=410?t.removeClass(n).addClass("cFontMedium"):t.removeClass(n).addClass("cFontLarge"))},setCalendarBorderColor:function(){var e=this;if(e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Left")?$(e.elem).find(".cFilterBar").css({"border-right":"1px solid #DDD"}):$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({"border-left":"1px solid #DDD"})),e.setting.changeCalendarBorderColorInJS){var t,a="";t=$.cf.compareStrings(e.setting.calendarBorderColor,"transparent")?e.setting.calendarBorderColor:"#"+e.setting.calendarBorderColor,a+=".calendarCont",a+=", .calendarContInner",$(".cElemDatePickerTooltipBottom").css({"border-color":"transparent transparent "+t+" transparent"}),$.cf.compareStrings(e.setting.visibleView,"WeekView")||$.cf.compareStrings(e.setting.visibleView,"DayView")||$.cf.compareStrings(e.setting.visibleView,"CustomView")||$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")?(a+=", .cdvCalendarCont td",a+=", .cdvDetailTable"):$.cf.compareStrings(e.setting.visibleView,"QuickAgendaView")?(a+=", .cqavCalendarCont td",a+=", .cqavTable"):$.cf.compareStrings(e.setting.visibleView,"TaskPlannerView")?(a+=", .ctpvCalendarCont td",a+=", .ctpvTable"):$.cf.compareStrings(e.setting.visibleView,"AppointmentView")?(a+=", .cavCalendarCont .cavTable td",a+=", .cavCalendarCont .cavTable td:last-child",a+=", .cavTableList"):$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?(a+=", .cmvCalendarContWithBorders td",a+=", .cmvThinBorderTop",a+=", .cmvThinBorderRight",a+=", .cmvThinBorderBottom",a+=", .cmvThinBorderLeft",a+=", .cmvThinBorder",a+=", .cdlvDaysTableList"):$.cf.compareStrings(e.setting.visibleView,"DayEventListView")&&(a+=", .cdlvDaysTableList"),a+=", .cContHeader",a+=", .cFilterBar",a+=", .cActionBar",a+=", .cListOuterCont",$(e.elem).find(a).css({"border-color":t})}},setDateInFormat:function(e,t){var a;return void 0===e.date&&void 0===e.iDate&&(e.date=this._getCurrentDate()),void 0===e.iDate?e.iDate={d:e.date.getDate(),M:e.date.getMonth(),y:e.date.getFullYear(),H:e.date.getHours(),m:e.date.getMinutes(),s:e.date.getSeconds(),ms:e.date.getMilliseconds()}:e.iDate={d:void 0!==e.iDate.d?e.iDate.d:$.CalenStyle.extra.dToday.getDate(),M:void 0!==e.iDate.M?e.iDate.M:$.CalenStyle.extra.dToday.getMonth(),y:void 0!==e.iDate.y?e.iDate.y:$.CalenStyle.extra.dToday.getFullYear(),H:void 0!==e.iDate.H?e.iDate.H:0,m:void 0!==e.iDate.m?e.iDate.m:0,s:void 0!==e.iDate.s?e.iDate.s:0,ms:void 0!==e.iDate.ms?e.iDate.ms:0},null===t||void 0===t||""===t?a=new Date(e.iDate.y,e.iDate.M,e.iDate.d,e.iDate.H,e.iDate.m,e.iDate.s,e.iDate.ms):"START"===t?a=new Date(e.iDate.y,e.iDate.M,e.iDate.d,0,0,0,0):"END"===t&&(a=new Date(e.iDate.y,e.iDate.M,e.iDate.d,23,59,59,999)),a},_getCurrentDate:function(){return this.getDateByAddingOutputTZOffset(this.convertToUTC(new Date),this.setting.outputTZOffset)},convertToUTC:function(e,t){return new Date(e.getTime()-(void 0===t||""===t||null===t?-e.getTimezoneOffset()*$.CalenStyle.extra.iMS.m:this._getTZOffsetInMS(t)))},_getTZOffsetInMS:function(e){var t=0;if(void 0===e||""===e||null===e)t=-$.CalenStyle.extra.dToday.getTimezoneOffset()*$.CalenStyle.extra.iMS.m;else{var a=e.match(/^([+|-]{1})([0-1]{0,1}[0-9]{1}):([0-6]{0,1}[0-9]{1})$/);t=parseInt(a[2])*$.CalenStyle.extra.iMS.h+parseInt(a[3])*$.CalenStyle.extra.iMS.m,t="+"===a[1]?t:-t}return t},getDateByAddingOutputTZOffset:function(e,t){return new Date(e.getTime()+this._getTZOffsetInMS(t))},normalizeDateTimeWithOffset:function(e,t,a){var i=new Date(e);return t!==a&&(i=this.getDateByAddingOutputTZOffset(this.convertToUTC(e,t),a)),i},_getDateObjectFromString:function(e,t,a,i,n,s,r){var o,l=this,d={}.toString.call(e);if("[object Date]"===d)o=t?l.convertToUTC(e,r):l.normalizeDateTimeWithOffset(e,r,l.setting.outputTZOffset);else if("[object Number]"===d)o=t?l.convertToUTC(new Date(e),"+00:00"):l.normalizeDateTimeWithOffset(new Date(e),"+00:00",l.setting.outputTZOffset);else{var c,v=0,g=0,m=0,D=0,f=0,p=0,u=e.match(/^([0-9]{4})(-([0-1]{1}[0-9]{1}))(-([0-3]{1}[0-9]{1}))$/),h=e.match(/^([0-9]{4})(-([0-1]{1}[0-9]{1})(-([0-3]{1}[0-9]{1})([T]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/),y=e.match(/^([0-9]{4})(([0-1]{1}[0-9]{1})(([0-3]{1}[0-9]{1})([T]([0-9]{2})([0-9]{2})(([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(null!==u)c=l.setDateInFormat({iDate:{y:parseInt(u[1]),M:parseInt(u[3])-1,d:parseInt(u[5])}},"START"),o=t?c:l.getDateByAddingOutputTZOffset(c,l.setting.outputTZOffset);else if(null!==h)c=l.setDateInFormat({iDate:{y:parseInt(h[1]),M:parseInt(h[3])-1,d:parseInt(h[5]),H:parseInt(h[7]),m:parseInt(h[8]),s:parseInt(h[10])}},""),o="Z"===h[13]?l.getDateByAddingOutputTZOffset(c,l.setting.outputTZOffset):l.normalizeDateTimeWithOffset(c,h[13],l.setting.outputTZOffset);else if(null!==y)c=l.setDateInFormat({iDate:{y:parseInt(y[1]),M:parseInt(y[3])-1,d:parseInt(y[5]),H:parseInt(y[7]),m:parseInt(y[8]),s:parseInt(y[9])}},""),o="Z"===y[13]?l.getDateByAddingOutputTZOffset(c,l.setting.outputTZOffset):l.normalizeDateTimeWithOffset(c,y[13],l.setting.outputTZOffset);else{var w=a||l.setting.inputDateTimeFormat;if($.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[1]))o=new Date(parseInt(e));else{var C,S=i||l.setting.formatSeparatorDateTime,T=n||l.setting.formatSeparatorDate,V=s||l.setting.formatSeparatorTime,b=e.split(S),E=b[0],I=b[1],M=E.split(T);if($.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[4])||$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[5])?(v=parseInt(M[0]),g=parseInt(M[1])-1,m=parseInt(M[2])):$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[6])||$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[7])?(g=parseInt(M[0])-1,v=parseInt(M[1]),m=parseInt(M[2])):($.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[8])||$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[9]))&&(m=parseInt(M[0]),g=parseInt(M[1])-1,v=parseInt(M[2])),$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[4])||$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[6])||$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[8])){var A=I.split(" ");C=A[0].split(V),D=parseInt(C[0]),f=parseInt(C[1]),isNaN(f)&&(f=0),C.length>2&&(p=parseInt(C[2])),$.cf.compareStrings(A[1],"AM")&&12===D&&(D=0),$.cf.compareStrings(A[1],"PM")&&D<12&&(D+=12)}else($.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[5])||$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[7])||$.cf.compareStrings(w,$.CalenStyle.extra.sArrInputDateTimeFormats[9]))&&(C=I.split(V),D=parseInt(C[0]),f=parseInt(C[1]),isNaN(f)&&(f=0),C.length>2&&(p=parseInt(C[2])));o=l.setDateInFormat({iDate:{y:m,M:g,d:v,H:D,m:f,s:p}},"")}o=t?o:l.normalizeDateTimeWithOffset(o,r,l.setting.outputTZOffset)}}return t&&(o=l.setDateInFormat({date:o},"START")),o},__getNumberOfDaysOfMonth:function(e,t){return t%4==0?[31,29,31,30,31,30,31,31,30,31,30,31][e]:[31,28,31,30,31,30,31,31,30,31,30,31][e]},__findWhetherDateIsVisibleInCurrentView:function(e,t,a,i){var n=this;if(n.setting.excludeNonBusinessHours){for(var s=0;s<n.tv.dAVDt.length;s++)if(0===n.compareDates(n.tv.dAVDt[s],e)){if(t)return!0;var r=new Date(e),o=new Date(e);r.setHours(n.tv.oBsHours.startTime[0]),r.setMinutes(n.tv.oBsHours.startTime[1]),o.setHours(n.tv.oBsHours.endTime[0]),o.setMinutes(n.tv.oBsHours.endTime[1]);var l=new Date(a),d=new Date(i);return n.compareDateTimes(r,a)>0&&(l=new Date(r)),n.compareDateTimes(o,i)<0&&(d=new Date(o)),n.compareDateTimes(l,d)<0}return!1}return!0},__getCurrentViewDates:function(){var e,t,a,i=this,n=i.setDateInFormat({date:i.setting.selectedDate},"START");if(!i.tv.bDyClDLV){if(i.tv.dAVDt=[],i.setting.excludeNonBusinessHours&&!$.cf.compareStrings(i.setting.visibleView,"WeekPlannerView")&&i.tv.iBsDays>0)if($.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"DatePicker")||$.cf.compareStrings(i.setting.visibleView,"AgendaView")&&$.cf.compareStrings(i.setting.agendaViewDuration,"Month"))for(;0===i._getBusinessHoursForCurrentView(i.setting.selectedDate).length;)i.setting.selectedDate.setDate(i.setting.selectedDate.getDate()+1);else{for(;0===i._getBusinessHoursForCurrentView(n).length;)"Next"===i.tv.sLoadType||"Load"===i.tv.sLoadType?n.setDate(n.getDate()+1):"Prev"===i.tv.sLoadType&&n.setDate(n.getDate()-1);i.setting.selectedDate=new Date(n)}if($.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"DatePicker")){t=i.setDateInFormat({iDate:{d:1,M:n.getMonth(),y:n.getFullYear()}},"START"),a=i.setDateInFormat({iDate:{d:i.__getNumberOfDaysOfMonth(n.getMonth(),n.getFullYear()),M:n.getMonth(),y:n.getFullYear()}},"START"),i.tv.dVSDt=i.setDateInFormat({date:i._getWeekForDate(t,!1)[0]},"START"),i.setting.fixedNumOfWeeksInMonthView||(i.tv.iWkInMonth=Math.round((i._getWeekForDate(a,!1)[0].getTime()-i.tv.dVSDt.getTime())/$.CalenStyle.extra.iMS.w)+1),i.tv.iNoVDay=0;for(var s=i.tv.dVSDt.getTime(),r=i.setting.excludeNonBusinessHours?i.tv.iBsDays*i.tv.iWkInMonth:7*i.tv.iWkInMonth,o=i.tv.dVSDt.getTimezoneOffset(),l=0;l<7*i.tv.iWkInMonth;l++){var d=new Date(s),c=d.getTimezoneOffset();o!==c&&(d=new Date(s+(c-o)*$.CalenStyle.extra.iMS.m)),i.setting.excludeNonBusinessHours?i._getBusinessHoursForCurrentView(d).length>0&&(i.tv.dAVDt.push(d),i.tv.iNoVDay++,1===i.tv.dAVDt.length&&(i.tv.dVSDt=new Date(d)),i.tv.dAVDt.length===r&&(i.tv.dVEDt=new Date(d))):(i.tv.dAVDt.push(d),i.tv.iNoVDay++,1===i.tv.dAVDt.length&&(i.tv.dVSDt=new Date(d)),i.tv.dAVDt.length===r&&(i.tv.dVEDt=new Date(d))),s+=$.CalenStyle.extra.iMS.d}i.tv.dVEDt=i.setDateInFormat({date:i.tv.dVEDt},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt)}else if($.cf.compareStrings(i.setting.visibleView,"QuickAgendaView"))$.cf.compareStrings(i.setting.quickAgendaViewDuration,"Week")?(e=i._getWeekForDate(n,!1),i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,e[0],null,"Next"),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt)):$.cf.compareStrings(i.setting.quickAgendaViewDuration,"CustomDays")&&("Next"===i.tv.sLoadType||"Load"===i.tv.sLoadType?i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Next"):"Prev"===i.tv.sLoadType&&(i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Prev"),i.tv.dAVDt.reverse()),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt));else if($.cf.compareStrings(i.setting.visibleView,"TaskPlannerView"))$.cf.compareStrings(i.setting.taskPlannerViewDuration,"Week")?(e=i._getWeekForDate(n,!1),i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,e[0],null,"Next"),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt)):$.cf.compareStrings(i.setting.taskPlannerViewDuration,"CustomDays")&&("Next"===i.tv.sLoadType||"Load"===i.tv.sLoadType?i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Next"):"Prev"===i.tv.sLoadType&&(i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Prev"),i.tv.dAVDt.reverse()),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt));else if($.cf.compareStrings(i.setting.visibleView,"AgendaView"))$.cf.compareStrings(i.setting.agendaViewDuration,"Month")?((t=new Date(n)).setDate(1),i.tv.iNoVDay=i.__getNumberOfDaysOfMonth(t.getMonth(),t.getFullYear()),(a=new Date(n)).setDate(i.tv.iNoVDay),i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,t,a,"Next"),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt)):$.cf.compareStrings(i.setting.agendaViewDuration,"Week")?(e=i._getWeekForDate(n,!1),i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,e[0],null,"Next"),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt)):$.cf.compareStrings(i.setting.agendaViewDuration,"CustomDays")&&("Next"===i.tv.sLoadType||"Load"===i.tv.sLoadType?i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Next"):"Prev"===i.tv.sLoadType&&(i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Prev"),i.tv.dAVDt.reverse()),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt));else if($.cf.compareStrings(i.setting.visibleView,"AppointmentView"))"Next"===i.tv.sLoadType||"Load"===i.tv.sLoadType?i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Next"):"Prev"===i.tv.sLoadType&&(i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Prev"),i.tv.dAVDt.reverse()),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END");else if($.cf.compareStrings(i.setting.visibleView,"DayEventListView")||$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")){if(i.setting.daysInDayListView>=6){e=i._getWeekForDate(n,!1),i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,e[0],null,"Next");for(var v=0;v<i.tv.iNoVDay;v++)if(0===i.compareDates(n,i.tv.dAVDt[v])){i.tv.iSelDay=v;break}i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END")}else{var g,m=i.__setCurrentViewDatesArray(i.tv.iSelDay+1,n,null,"Prev"),D=i.tv.iNoVDay-(i.tv.iSelDay+1)+1;m.reverse(),(g=i.__setCurrentViewDatesArray(D,n,null,"Next")).shift(),i.tv.dAVDt=m.concat(g),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END")}i.tv.dVDSDt=i.setDateInFormat({date:i.setting.selectedDate},"START"),i.tv.dVDEDt=i.setDateInFormat({date:i.setting.selectedDate},"END")}else $.cf.compareStrings(i.setting.visibleView,"WeekView")?(e=i._getWeekForDate(n,!1),i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,e[0],null,"Next"),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt)):$.cf.compareStrings(i.setting.visibleView,"DayView")?(i.tv.dVSDt=i.setDateInFormat({date:n},"START"),i.tv.dVEDt=i.setDateInFormat({date:n},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt),i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Next")):$.cf.compareStrings(i.setting.visibleView,"CustomView")?("Next"===i.tv.sLoadType||"Load"===i.tv.sLoadType?i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Next"):"Prev"===i.tv.sLoadType&&(i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,n,null,"Prev"),i.tv.dAVDt.reverse()),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt)):$.cf.compareStrings(i.setting.visibleView,"WeekPlannerView")&&(e=i._getWeekForDate(n,!1),i.tv.dAVDt=i.__setCurrentViewDatesArray(i.tv.iNoVDay,e[0],null,"Next"),i.tv.dVSDt=i.setDateInFormat({date:i.tv.dAVDt[0]},"START"),i.tv.dVEDt=i.setDateInFormat({date:i.tv.dAVDt[i.tv.iNoVDay-1]},"END"),i.tv.dVDSDt=new Date(i.tv.dVSDt),i.tv.dVDEDt=new Date(i.tv.dVEDt))}},__setCurrentViewDatesArray:function(e,t,a,i){for(var n=t.getTime(),s=[],r=t.getTimezoneOffset(),o=0;o<e;o++){var l=new Date(n),d=l.getTimezoneOffset();if(r!==d&&(l=new Date(n+(d-r)*$.CalenStyle.extra.iMS.m)),this.setting.excludeNonBusinessHours?this._getBusinessHoursForCurrentView(l).length>0?s.push(l):o--:s.push(l),null!==a&&0===this.compareDates(l,a))break;$.cf.compareStrings(i,"Prev")?n-=$.CalenStyle.extra.iMS.d:$.cf.compareStrings(i,"Next")&&(n+=$.CalenStyle.extra.iMS.d)}return s},__getDayIndexInView:function(e){for(var t=-1,a=0;a<this.tv.dAVDt.length;a++){var i=this.tv.dAVDt[a];if(0===this.compareDates(e,i)){t=a;break}}return $.cf.compareStrings(this.setting.visibleView,"DayEventDetailView")&&(t=0),t},_getWeekForDate:function(e,t){var a=e.getDay()-(t?0:this.setting.weekStartDay);a<0&&(a=7+a);var i=$.CalenStyle.extra.iMS.d*a,n=e.getTime()-i,s=n+6*$.CalenStyle.extra.iMS.d;return[this.setDateInFormat({date:new Date(n)},"START"),this.setDateInFormat({date:new Date(s)},"END")]},_getThursdayInAWeek:function(e){var t=e.getDay(),a=t>4?7-t+4:4-t,i=e.getTime()+$.CalenStyle.extra.iMS.d*a;return new Date(i)},__getWeekNumber:function(e,t){var a,i=this,n=i._normalizeDateTime(e,"START","y"),s=i._normalizeDateTime(e,"END","y");if($.cf.compareStrings(i.setting.weekNumCalculation,"US")){var r=i._getWeekForDate(n,!0)[0].getTime(),o=i._getWeekForDate(e,!0)[0],l=Math.ceil((o.getTime()-r)/$.CalenStyle.extra.iMS.w)+1,d=i._getWeekForDate(t,!0)[0],c=Math.ceil((d.getTime()-r)/$.CalenStyle.extra.iMS.w)+1;a=0===i.setting.weekStartDay?i.compareDates(t,s)>0?i.getNumberStringInFormat(l,0,!0)+"/"+i.getNumberStringInFormat(1,0,!0):i.getNumberStringInFormat(l,0,!0):l!==c?i.compareDates(t,s)>0?i.getNumberStringInFormat(l,0,!0)+"/"+i.getNumberStringInFormat(1,0,!0):i.getNumberStringInFormat(l,0,!0)+"/"+i.getNumberStringInFormat(c,0,!0):i.getNumberStringInFormat(l,0,!0)}else if($.cf.compareStrings(i.setting.weekNumCalculation,"Europe/ISO")){if(e.getFullYear()!==t.getFullYear()){var v=new Date(t);v.setDate(1),v.setMonth(0);var g=new Date(e);g.setDate(1),g.setMonth(0),n=t.getDate()>=3?v:g}var m=i._getThursdayInAWeek(n),D=i._getThursdayInAWeek(e);a=Math.ceil((D.getTime()-m.getTime())/$.CalenStyle.extra.iMS.w)+1,a=i.getNumberStringInFormat(a,0,!0)}return a},__isDateInCurrentView:function(e){var t=!1;if(this.tv.dAVDt.length>0)for(var a=0;a<this.tv.dAVDt.length;a++){var i=this.tv.dAVDt[a];0===this.compareDates(i,e)&&(t=!0)}return t},_normalizeDateTime:function(e,t,a){var i,n={d:e.getDate(),M:e.getMonth(),y:e.getFullYear(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};switch(a){case"s":"START"===t?i=new Date(n.y,n.M,n.d,n.H,n.M,0,0):"END"===t&&(i=new Date(n.y,n.M,n.d,n.H,n.M,59,999));break;case"m":"START"===t?i=new Date(n.y,n.M,n.d,n.H,0,0,0):"END"===t&&(i=new Date(n.y,n.M,n.d,n.H,59,59,999));break;case"h":case"T":"START"===t?i=new Date(n.y,n.M,n.d,0,0,0,0):"END"===t&&(i=new Date(n.y,n.M,n.d,23,59,59,999));break;case"d":case"dE":"START"===t?i=new Date(n.y,n.M,1,0,0,0,0):"END"===t&&(i=new Date(n.y,n.M,this.__getNumberOfDaysOfMonth(n.M,n.y),0,0,0,0));break;case"M":case"ME":case"y":case"yE":"START"===t?i=new Date(n.y,0,1,0,0,0,0):"END"===t&&(i=new Date(n.y,11,this.__getNumberOfDaysOfMonth(11,n.y),0,0,0,0))}return"dE"!==a&&"ME"!==a&&"yE"!==a||(i=this._normalizeDateTime(i,"END","T")),i},__getDifference:function(e,t,a){var i,n=t.getTime()-a.getTime();return"ms"===e?i=n:"s"===e?i=n/$.CalenStyle.extra.iMS.s:"m"===e?i=n/$.CalenStyle.extra.iMS.m:"h"===e?i=n/$.CalenStyle.extra.iMS.h:"d"===e?i=n/$.CalenStyle.extra.iMS.d:"M"===e?i=n/$.CalenStyle.extra.iMS.m:"y"===e&&(i=n/$.CalenStyle.extra.iMS.y),i},compareDates:function(e,t){e=this._normalizeDateTime(e,"START","T"),t=this._normalizeDateTime(t,"START","T");var a=this.__getDifference("d",e,t);return 0===a?a:a/Math.abs(a)},compareDateTimes:function(e,t){var a=this.__getDifference("m",e,t);return 0===a?a:a/Math.abs(a)},_getMonthAndYear:function(e,t,a,i){for(var n=e,s=t,r=0;r<a;r++)$.cf.compareStrings(i,"Prev")?-1===(n-=1)&&(n=11,s-=1):$.cf.compareStrings(i,"Next")&&12===(n+=1)&&(n=0,s+=1);return[n,s]},getNumberStringInFormat:function(e,t,a){var i,n="",s=e.toString(),r=s.length;if(0!==t)for(i=0;i<t-r;i++)n+=a?this.setting.numbers[0]:"0";if(a)for(i=0;i<r;i++)n+=this.setting.numbers[parseInt(s.charAt(i))];else n+=s;return n},getDateInFormat:function(e,t,a,i){var n,s=this,r="",o=s.setting.formatSeparatorDate,l=s.setting.formatSeparatorTime,d=s.setting.formatSeparatorDateTime,c=i?s.setting.veryShortDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],v=i?s.setting.shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=i?s.setting.fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=i?s.setting.shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D=i?s.setting.fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"];return void 0===e.date&&void 0===e.iDate&&(e.date=s._getCurrentDate()),void 0===e.iDate&&(e.iDate={D:e.date.getDay(),d:e.date.getDate(),M:e.date.getMonth(),y:e.date.getFullYear(),H:e.date.getHours(),m:e.date.getMinutes(),s:e.date.getSeconds(),ms:e.date.getMilliseconds()}),e.iDate.h=e.iDate.H>12?e.iDate.H-12:0===e.iDate.H?12:e.iDate.H,e.iDate.me=e.iDate.H<12?"am":"pm",e.iDate.sm=e.iDate.H<12?"a":"p",a&&(t=(t=(t=(t=(t=t.replace("hh","HH")).replace("h","H")).replace(" me","","i")).replace(" sm","","i")).replace("sm","","i")),"object"===t?r=e.iDate:"d"===t?r=void 0!==s.setting.formatDates.d?s.setting.formatDates.d.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.d,0,i):"M"===t?r=void 0!==s.setting.formatDates.M?s.setting.formatDates.M.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.M+1,0,i):"y"===t?r=void 0!==s.setting.formatDates.y?s.setting.formatDates.y.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.y,0,i):"H"===t?r=void 0!==s.setting.formatDates.H?s.setting.formatDates.H.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.H,0,i):"h"===t?r=void 0!==s.setting.formatDates.h?s.setting.formatDates.h.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.h,0,i):"m"===t?r=void 0!==s.setting.formatDates.m?s.setting.formatDates.m.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.m,0,i):"s"===t&&(r=void 0!==s.setting.formatDates.s?s.setting.formatDates.s.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.s,0,i)),"dd"===t?r=void 0!==s.setting.formatDates.dd?s.setting.formatDates.dd.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.d,2,i):"MM"===t?r=void 0!==s.setting.formatDates.MM?s.setting.formatDates.MM.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.M+1,2,i):"yyyy"===t?r=void 0!==s.setting.formatDates.yyyy?s.setting.formatDates.yyyy.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.y,2,i):"HH"===t?r=void 0!==s.setting.formatDates.HH?s.setting.formatDates.HH.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.H,2,i):"hh"===t?r=void 0!==s.setting.formatDates.hh?s.setting.formatDates.hh.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.h,2,i):"mm"===t?r=void 0!==s.setting.formatDates.mm?s.setting.formatDates.mm.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.m,2,i):"ss"===t?r=void 0!==s.setting.formatDates.ss?s.setting.formatDates.ss.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.s,2,i):"DD"===t?r=c[e.iDate.D]:"DDD"===t?r=v[e.iDate.D]:"DDDD"===t?r=g[e.iDate.D]:"MMM"===t?r=m[e.iDate.M]:"MMMM"===t?r=D[e.iDate.M]:"dd-MM-yyyy"===t?r=void 0!==s.setting.formatDates["dd-MM-yyyy"]?s.setting.formatDates["dd-MM-yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd",a,i)+o+s.getDateInFormat({iDate:e.iDate},"MM",a,i)+o+s.getDateInFormat({iDate:e.iDate},"yyyy",a,i):"dd MMM"===t?r=void 0!==s.setting.formatDates["dd MMM"]?s.setting.formatDates["dd MMM"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"MMM",a,i):"dd-MMM-yyyy"===t?r=void 0!==s.setting.formatDates["dd-MMM-yyyy"]?s.setting.formatDates["dd-MMM-yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd",a,i)+o+s.getDateInFormat({iDate:e.iDate},"MMM",a,i)+o+s.getDateInFormat({iDate:e.iDate},"yyyy",a,i):"DDD MMM dd, yyyy"===t?r=void 0!==s.setting.formatDates["DDD MMM dd, yyyy"]?s.setting.formatDates["DDD MMM dd, yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"DDD",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"MMM",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"dd",a,i)+", "+s.getDateInFormat({iDate:e.iDate},"yyyy",a,i):"DDD MMM dd yyyy"===t?r=void 0!==s.setting.formatDates["DDD MMM dd yyyy"]?s.setting.formatDates["DDD MMM dd yyyy"].call(s,e.iDate):"<b>"+s.getDateInFormat({iDate:e.iDate},"DDD",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"MMM",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"dd",a,i)+"</b> "+s.getDateInFormat({iDate:e.iDate},"yyyy",a,i):"DDDD MMM dd yyyy"===t?r=void 0!==s.setting.formatDates["DDDD MMM dd yyyy"]?s.setting.formatDates["DDDD MMM dd yyyy"].call(s,e.iDate):"<b>"+s.getDateInFormat({iDate:e.iDate},"DDDD",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"MMM",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"dd",a,i)+"</b> "+s.getDateInFormat({iDate:e.iDate},"yyyy",a,i):"DDDD MMMM dd yyyy"===t?r=void 0!==s.setting.formatDates["DDDD MMMM dd yyyy"]?s.setting.formatDates["DDDD MMMM dd yyyy"].call(s,e.iDate):"<b>"+s.getDateInFormat({iDate:e.iDate},"DDDD",a,i)+" - "+s.getDateInFormat({iDate:e.iDate},"MMMM",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"dd",a,i)+"</b> "+s.getDateInFormat({iDate:e.iDate},"yyyy",a,i):"yyyy-MM-dd"===t?r=void 0!==s.setting.formatDates["yyyy-MM-dd"]?s.setting.formatDates["yyyy-MM-dd"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"yyyy",a,i)+o+s.getDateInFormat({iDate:e.iDate},"MM",a,i)+o+s.getDateInFormat({iDate:e.iDate},"dd",a,i):"ISO8601Date"===t?r=void 0!==s.setting.formatDates.ISO8601Date?s.setting.formatDates.ISO8601Date.call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"yyyy",a,i)+"-"+s.getDateInFormat({iDate:e.iDate},"MM",a,i)+"-"+s.getDateInFormat({iDate:e.iDate},"dd",a,i):"DDD, MMM dd"===t?r=void 0!==s.setting.formatDates["DDD, MMM dd"]?s.setting.formatDates["DDD, MMM dd"].call(s,e.iDate):"<b>"+s.getDateInFormat({iDate:e.iDate},"DDD",a,i)+", "+s.getDateInFormat({iDate:e.iDate},"MMM",a,i)+" "+s.getDateInFormat({iDate:e.iDate},"dd",a,i):"hh:mm sm"===t||"hh:mm SM"===t?r=void 0!==s.setting.formatDates["hh:mm"]?s.setting.formatDates["hh:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh",a,i)+l+s.getDateInFormat({iDate:e.iDate},"mm",a,i)+" "+("hh:mm SM"===t?e.iDate.sm.toUpperCase():e.iDate.sm):"hh:mmsm"===t||"hh:mmSM"===t?r=void 0!==s.setting.formatDates["hh:mm"]?s.setting.formatDates["hh:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh",a,i)+l+s.getDateInFormat({iDate:e.iDate},"mm",a,i)+("hh:mmSM"===t?e.iDate.sm.toUpperCase():e.iDate.sm):"h[:m]sm"===t||"h[:m]SM"===t?(n=0!==e.iDate.m?l+s.getDateInFormat({iDate:e.iDate},"m",a,i):"",r=void 0!==s.setting.formatDates["h:m"]?s.setting.formatDates["h:m"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"h",a,i)+n+("h:mSM"===t?e.iDate.sm.toUpperCase():e.iDate.sm)):"hh:mm"===t||"hh:mm me"===t||"hh:mm ME"===t?r=void 0!==s.setting.formatDates["hh:mm"]?s.setting.formatDates["hh:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh",a,i)+l+s.getDateInFormat({iDate:e.iDate},"mm",a,i)+" "+("hh:mm ME"===t?e.iDate.me.toUpperCase():e.iDate.me):"hh:mm:ss"===t||"hh:mm:ss me"===t||"hh:mm:ss ME"===t?r=void 0!==s.setting.formatDates["hh:mm:ss"]?s.setting.formatDates["hh:mm:ss"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh",a,i)+l+s.getDateInFormat({iDate:e.iDate},"mm",a,i)+l+s.getDateInFormat({iDate:e.iDate},"ss",a,i)+" "+("hh:mm:ss ME"===t?e.iDate.me.toUpperCase():e.iDate.me):"HH:mm"===t?r=void 0!==s.setting.formatDates["HH:mm"]?s.setting.formatDates["HH:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"HH",a,i)+l+s.getDateInFormat({iDate:e.iDate},"mm",a,i):"H[:m]"===t?(n=0!==e.iDate.m?l+s.getDateInFormat({iDate:e.iDate},"m",a,i):"",r=void 0!==s.setting.formatDates["H:m"]?s.setting.formatDates["H:m"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"H",a,i)+n):"HH:mm:ss"===t?r=void 0!==s.setting.formatDates["HH:mm:ss"]?s.setting.formatDates["HH:mm:ss"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"HH",a,i)+l+s.getDateInFormat({iDate:e.iDate},"mm",a,i)+l+s.getDateInFormat({iDate:e.iDate},"ss",a,i):"ISO8601Time"===t?r=void 0!==s.setting.formatDates.ISO8601Time?s.setting.formatDates.ISO8601Time.call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"HH",a,i)+":"+s.getDateInFormat({iDate:e.iDate},"mm",a,i)+":"+s.getDateInFormat({iDate:e.iDate},"ss",a,i):"dd-MM-yyyy HH:mm"===t?r=void 0!==s.setting.formatDates["dd-MM-yyyy HH:mm"]?s.setting.formatDates["dd-MM-yyyy HH:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd-MM-yyyy",a,i)+d+s.getDateInFormat({iDate:e.iDate},"HH:mm",a,i):"dd-MM-yyyy hh:mm"===t?r=void 0!==s.setting.formatDates["dd-MM-yyyy hh:mm"]?s.setting.formatDates["dd-MM-yyyy hh:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd-MM-yyyy",a,i)+d+s.getDateInFormat({iDate:e.iDate},"hh:mm",a,i):"HH:mm dd-MMM-yyyy"===t?r=void 0!==s.setting.formatDates["HH:mm dd-MMM-yyyy"]?s.setting.formatDates["HH:mm dd-MMM-yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"HH:mm",a,i)+d+s.getDateInFormat({iDate:e.iDate},"dd-MMM-yyyy",a,i):"hh:mm dd-MMM-yyyy"===t?r=void 0!==s.setting.formatDates["hh:mm dd-MMM-yyyy"]?s.setting.formatDates["hh:mm dd-MMM-yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh:mm",a,i)+d+s.getDateInFormat({iDate:e.iDate},"dd-MMM-yyyy",a,i):"yyyy-MM-ddTHH:mm:ss"===t?r=void 0!==s.setting.formatDates["yyyy-MM-ddTHH:mm:ss"]?s.setting.formatDates["yyyy-MM-ddTHH:mm:ss"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"yyyy-MM-dd",a,i)+"T"+s.getDateInFormat({iDate:e.iDate},"HH:mm:ss",a,i):"ISO8601DateTime"===t&&(r=void 0!==s.setting.formatDates.ISO8601DateTime?s.setting.formatDates.ISO8601DateTime.call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"ISO8601Date",a,i)+"T"+s.getDateInFormat({iDate:e.iDate},"ISO8601Time",a,i)),r},getEventDateTimeString:function(e,t,a,i){var n=this,s="";return a?0===n.compareDates(e,t)?s=n.getDateInFormat({date:e},"dd-MMM-yyyy",!1,!0):0===t.getHours()&&0===t.getMinutes()?(t.setTime(t.getTime()-$.CalenStyle.extra.iMS.m),s=0===n.compareDates(e,t)?n.getDateInFormat({date:e},"dd-MMM-yyyy",!1,!0):n.getDateInFormat({date:e},"hh:mm dd-MMM-yyyy",n.setting.is24Hour,!0)+i+n.getDateInFormat({date:t},"hh:mm dd-MMM-yyyy",n.setting.is24Hour,!0)):s=n.getDateInFormat({date:e},"hh:mm dd-MMM-yyyy",n.setting.is24Hour,!0)+i+n.getDateInFormat({date:t},"hh:mm dd-MMM-yyyy",n.setting.is24Hour,!0):s=0===n.compareDates(e,t)?n.getDateInFormat({date:e},"hh:mm",n.setting.is24Hour,!0)+i+n.getDateInFormat({date:t},"hh:mm",n.setting.is24Hour,!0):n.getDateInFormat({date:e},"hh:mm dd-MMM-yyyy",n.setting.is24Hour,!0)+i+n.getDateInFormat({date:t},"hh:mm dd-MMM-yyyy",n.setting.is24Hour,!0),s},__getDurationBetweenDates:function(e,t,a,i,n){for(var s=this,r=Math.abs(t.getTime()-e.getTime()),o={},l="",d=0;d<a.length;d++)o[a.charAt(d)]=0;return void 0!==o.y&&(o.y=Math.floor(r/$.CalenStyle.extra.iMS.y),r%=$.CalenStyle.extra.iMS.y,n||void 0===o.y||!i&&0===o.y||(l+=o.y+(1===o.y?s.setting.durationStrings.y[0]:s.setting.durationStrings.y[1]))),void 0!==o.M&&(o.M=Math.floor(r/$.CalenStyle.extra.iMS.m),r%=$.CalenStyle.extra.iMS.m,n||void 0===o.M||!i&&0===o.M||(l+=o.M+(1===o.M?s.setting.durationStrings.M[0]:s.setting.durationStrings.M[1]))),void 0!==o.w&&(o.w=Math.floor(r/$.CalenStyle.extra.iMS.w),r%=$.CalenStyle.extra.iMS.w,n||void 0===o.w||!i&&0===o.w||(l+=o.w+(1===o.w?s.setting.durationStrings.w[0]:s.setting.durationStrings.w[1]))),void 0!==o.d&&(o.d=Math.floor(r/$.CalenStyle.extra.iMS.d),r%=$.CalenStyle.extra.iMS.d,n||void 0===o.d||!i&&0===o.d||(l+=o.d+(1===o.d?s.setting.durationStrings.d[0]:s.setting.durationStrings.d[1]))),void 0!==o.h&&(o.h=Math.floor(r/$.CalenStyle.extra.iMS.h),r%=$.CalenStyle.extra.iMS.h,n||void 0===o.h||!i&&0===o.h||(l+=o.h+(1===o.h?s.setting.durationStrings.h[0]:s.setting.durationStrings.h[1]))),void 0!==o.m&&(o.m=Math.floor(r/$.CalenStyle.extra.iMS.m),r%=$.CalenStyle.extra.iMS.m,n||void 0===o.m||!i&&0===o.m||(l+=o.m+(1===o.m?s.setting.durationStrings.m[0]:s.setting.durationStrings.m[1]))),void 0!==o.s&&(o.s=Math.floor(r/$.CalenStyle.extra.iMS.s),r%=$.CalenStyle.extra.iMS.s,n||void 0===o.s||!i&&0===o.s||(l+=o.s+(1===o.s?s.setting.durationStrings.s[0]:s.setting.durationStrings.s[1]))),n?o:l.trim()},__isValidUrl:function(e){return!!e.match(/(((ftp|http|https):\/\/)|(\/)|(..\/)|())(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/)},_isGoogleCalendarUrl:function(e){return!!e.match("https://www.googleapis.com/calendar/v3/calendars/")},_convertToISO8601Date:function(e,t){return this.getDateInFormat({date:e},"ISO8601DateTime",!1,!0)+(t||this.setting.inputTZOffset)},incrementDataLoadingCount:function(e){this.tv.iLoadCnt=this.tv.iLoadCnt+e,1===this.tv.iLoadCnt&&this._startDataLoading()},_startDataLoading:function(){var e=this;e.tv.iLoadCnt>=1&&(e.addRemoveLoaderIndicators(!0,"cEventLoaderIndicator"),e.addRemoveViewLoader(!0,"cEventLoaderBg"),e.setting.dataLoadingStart&&e.setting.dataLoadingStart.call(e,e.setting.visibleView))},_stopDataLoading:function(e,t,a){var i=this;i.tv.iLoadCnt--,0===i.tv.iLoadCnt&&(i.setting.dataLoadingEnd&&i.setting.dataLoadingEnd.call(i,i.setting.visibleView),i.setting.deleteOldDataWhileNavigating&&i._dataCleaning(e,t),a())},__parseJson:function(e){return $.cf.compareStrings(typeof e,"string")?$.parseJSON(e):e},parseDataSource:function(e,t,a,i,n,s,r){var o=this;t=o.__parseJson(t),$.cf.compareStrings(e,"eventSource")&&r?o._getModifiedEventsArray(t,s,r,!1):t.length>0?$.cf.compareStrings(e,"eventCalendarSource")?o._getModifiedEventCalendarsArray(t):$.cf.compareStrings(e,"eventSource")?o._getModifiedEventsArray(t,s,r,!1):$.cf.compareStrings(e,"sourceCount")?o._getModifiedSourceCountArray(t,s):$.cf.compareStrings(e,"restrictedSectionSource")?o._getModifiedRestrictedSectionArray(t,s):$.cf.compareStrings(e,"slotAvailabilitySource")&&o._getModifiedSlotAvailabilityArray(t,s):$.cf.compareStrings(e,"eventCalendarSource")?o.tv.oAECalendar=[]:$.cf.compareStrings(e,"eventSource")?o.tv.oAEvents=[]:$.cf.compareStrings(e,"sourceCount")?o.tv.oASrcCnt=[]:$.cf.compareStrings(e,"restrictedSectionSource")?o.tv.oAResSec=[]:$.cf.compareStrings(e,"slotAvailabilitySource")&&(o.tv.oASltAvail=[]),o._stopDataLoading(a,i,n)},_parseAllDataSources:function(e,t,a,i,n,s){var r=this,o=0;a&&o++,void 0!==e.eventCalendarSource&&o++,void 0!==e.eventSource&&o++,void 0!==e.sourceCount&&o++,void 0!==e.restrictedSectionSource&&o++,void 0!==e.slotAvailabilitySource&&o++,r.incrementDataLoadingCount(o),a&&r.parseDataSource("eventSource",e,i,n,s,t,a),void 0!==e.eventCalendarSource&&r.parseDataSource("eventCalendarSource",e.eventCalendarSource,i,n,s,t,a),void 0!==e.eventSource&&r.parseDataSource("eventSource",e.eventSource,i,n,s,t,a),void 0!==e.sourceCount&&r.parseDataSource("sourceCount",e.sourceCount,i,n,s,t,a),void 0!==e.restrictedSectionSource&&r.parseDataSource("restrictedSectionSource",e.restrictedSectionSource,i,n,s,t,a),void 0!==e.slotAvailabilitySource&&r.parseDataSource("slotAvailabilitySource",e.slotAvailabilitySource,i,n,s,t,a),0===o&&r._stopDataLoading(i,n,s)},__parseData:function(e,t){var a=this;if(e){var i,n,s,r,o=null,l=null,d=null,c=null,v=!1,g=!1;for(i=0;i<a.setting.calDataSource.length;i++)n=a.setting.calDataSource[i],$.cf.compareStrings(n.sourceFetchType,"All")&&!n.fetched&&(v=!0),$.cf.compareStrings(n.sourceFetchType,"DateRange")&&(g=!0);var m=!1;if(g){if($.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"AgendaView")&&$.cf.compareStrings(a.setting.agendaViewDuration,"Month"))m=!0;else if($.cf.compareStrings(a.tv.sLoadType,"Prev")){var D=!1;a.compareDateTimes(a.tv.dLoadDt,a.tv.dPLSDt)>=0&&(D=!0);var f=!1;a.compareDateTimes(a.tv.dLoadDt,a.tv.dPLEDt)<=0&&(f=!0),D&&f&&(m=!0)}else if($.cf.compareStrings(a.tv.sLoadType,"Next")){var p=!1;a.compareDateTimes(a.tv.dLoadDt,a.tv.dNLSDt)>=0&&(p=!0);var u=!1;a.compareDateTimes(a.tv.dLoadDt,a.tv.dNLEDt)<=0&&(u=!0),p&&u&&(m=!0)}else m=!0;if(m){var h=a.tv.dLoadDt.getMonth(),y=a.tv.dLoadDt.getFullYear(),w=a._getMonthAndYear(h,y,1,"Prev"),C=w[0],S=w[1],T=a.__getNumberOfDaysOfMonth(C,S);a.tv.dPLSDt=a.setDateInFormat({iDate:{d:1,M:C,y:S}},"START"),a.tv.dPLEDt=a.setDateInFormat({iDate:{d:T,M:C,y:S}},"START");var V=a._getMonthAndYear(h,y,1,"Next"),b=V[0],E=V[1],I=a.__getNumberOfDaysOfMonth(b,E);a.tv.dNLSDt=a.setDateInFormat({iDate:{d:1,M:b,y:E}},"START"),a.tv.dNLEDt=a.setDateInFormat({iDate:{d:I,M:b,y:E}},"START");var M=a._getMonthAndYear(h,y,a.setting.extraMonthsForDataLoading,"Prev"),A=M[0],_=M[1],k=a.__getNumberOfDaysOfMonth(A,_),H=a._getMonthAndYear(h,y,a.setting.extraMonthsForDataLoading,"Next"),F=H[0],N=H[1],x=a.__getNumberOfDaysOfMonth(F,N);$.cf.compareStrings(a.tv.sLoadType,"Load")||$.cf.compareStrings(a.setting.datasetModificationRule,"ReplaceAll")?(d=o=a.setDateInFormat({iDate:{d:1,M:A,y:_}},"START"),c=l=a.setDateInFormat({iDate:{d:x,M:F,y:N}},"END")):$.cf.compareStrings(a.tv.sLoadType,"Prev")?(o=a.setDateInFormat({iDate:{d:1,M:A,y:_}},"START"),l=a.setDateInFormat({iDate:{d:k,M:A,y:_}},"END"),d=new Date(o),c=a.setDateInFormat({iDate:{d:x,M:F,y:N}},"END")):$.cf.compareStrings(a.tv.sLoadType,"Next")&&(o=a.setDateInFormat({iDate:{d:1,M:F,y:N}},"START"),l=a.setDateInFormat({iDate:{d:x,M:F,y:N}},"END"),d=a.setDateInFormat({iDate:{d:1,M:A,y:_}},"START"),c=new Date(l))}}if(m||v)for($.cf.compareStrings(a.tv.sLoadType,"Load")&&(a.tv.oAECalendar=[],a.tv.oAEvents=[],a.tv.oASrcCnt=[],a.tv.oAResSec=[],a.tv.oASltAvail=[],a.tv.iMaxEvId=0),i=0;i<a.setting.calDataSource.length;i++){var B=(n=a.setting.calDataSource[i]).config||{},L=null,R=null,P=null,O=null;if($.cf.compareStrings(n.sourceFetchType,"DateRange")&&(L=o,R=l,P=d,O=c),$.cf.compareStrings(n.sourceType,"JSON")){var W=a.__parseJson(n.source);a._parseAllDataSources(W,B,!1,P,O,t)}else if($.cf.compareStrings(n.sourceType,"FUNCTION"))n.source.call(a,L,R,P,O,B,t);else if($.cf.compareStrings(n.sourceType,"URL"))if(a.__isValidUrl(n.source)){for(var j=n.source,z=a._isGoogleCalendarUrl(j),Y={},q={},U=B.tzOffset||"",Q=0;Q<a.tv.oSURLParams.length;Q++){var Z=a.tv.oSURLParams[Q];Z.sourceId===n.sourceId&&(q=Z.params)}if(z){for(j+="/events?callback=?",Y.sortOrder="ascending",Y.singleEvents="true",Y.timeZone=a.setting.tz,Y.maxResults=1e3,Y.key=B.googleCalendarApiKey||"",s=0;s<q.length;s++)Y[(r=q[s]).keyName]=r.values;$.cf.compareStrings(n.sourceFetchType,"DateRange")&&null!==L&&null!==R&&(Y.timeMin=a._convertToISO8601Date(L,U),Y.timeMax=a._convertToISO8601Date(R,U))}else{for(s=0;s<q.length;s++)Y[(r=q[s]).keyName]=r.values;$.cf.compareStrings(n.sourceFetchType,"DateRange")&&(Y.callback="?",null!==L&&null!==R&&(Y.startdate=a.getDateInFormat({date:L},"yyyy-MM-dd",!1,!1),Y.enddate=a.getDateInFormat({date:R},"yyyy-MM-dd",!1,!1),Y.startdatetime=a.getDateInFormat({date:a.convertToUTC(L,U)},"yyyy-MM-ddTHH:mm:ss",!1,!1),Y.enddatetime=a.getDateInFormat({date:a.convertToUTC(R,U)},"yyyy-MM-ddTHH:mm:ss",!1,!1)))}a._requestJson(j,Y,B,z,P,O,t)}else console.log("Invalid Event Source String");else console.log("Invalid Event Source.");n.fetched=!0}else t()}else t()},_requestJson:function(e,t,a,i,n,s,r){var o=this;console.log("sBaseUrl : "+e),console.log(t),o.incrementDataLoadingCount(1),$.getJSON(e,t).done(function(e){o.tv.iLoadCnt--,e=o.__parseJson(e),o._parseAllDataSources(e,a,i,n,s,r)}).fail(function(e,t,a){o._stopDataLoading(n,s,r),console.log("Request Failed : "+t+"  :  "+a)})},_getModifiedEventCalendarsArray:function(e){var t=this;$.cf.compareStrings(t.setting.datasetModificationRule,"Default")?t.tv.oAECalendar=t.tv.oAECalendar.concat(e):$.cf.compareStrings(t.setting.datasetModificationRule,"ReplaceAll")&&(t.tv.oAECalendar=e),t.__addEventCalendarToEventFilterCriteriaArray()},_getRecurringEventsArray:function(e){for(var t=[],a=0;a<e.length;a++){for(var i=e[a].iCalUID,n=0,s=0;s<t.length;s++){var r=t[s],o=r[0],l=parseInt(r[1]);if(i===o){n=++l,t[s]=[o,n];break}}0===n&&t.push([i,1])}return t},_getModifiedEventsArray:function(t,a,i,n){var s,r,o,l,d,c,v,g,m=this,D=[],f=0,p=a.inputDateTimeFormat||"",u=a.formatSeparatorDateTime||"",h=a.formatSeparatorDate||"",y=a.formatSeparatorTime||"",w=a.inputTZOffset||m.setting.inputTZOffset,C=!1;$.cf.isValid(a.singleColor)?(C=!0,l=$.cf.addHashToHexcode(a.singleColor),d=$.cf.getRGBAString(l,.1),c=l,v=l,g=l):(d=a.backgroundColor||"",d=$.cf.compareStrings(d,"")||$.cf.compareStrings(d,"transparent")?"transparent":d,c=a.borderColor||"",c=$.cf.compareStrings(c,"")||$.cf.compareStrings(c,"transparent")?"transparent":c,v=a.textColor||"",v=$.cf.compareStrings(v,"")||$.cf.compareStrings(v,"transparent")?m.setting.textColor:v,g=a.nonAllDayEventsTextColor||"",g=$.cf.compareStrings(g,"transparent")?"transparent":$.cf.compareStrings(g,"")?d:g,d=$.cf.addHashToHexcode(d),c=$.cf.addHashToHexcode(c),v=$.cf.addHashToHexcode(v),g=$.cf.addHashToHexcode(g));var S,T=null;if(T=$.cf.isValid(a.icon)?a.icon:m.setting.eventIcon,i){var V=t,b=V.summary,E=V.items||[],I=m._getRecurringEventsArray(E);t=[];for(var M=0;M<I.length;M++)for(var A=I[M],_=A[0],k=A[1],H=1,F=0;F<E.length;F++){var N=E[F],x=N.iCalUID;if(_===x){x=x.replace("@google.com","");var B=!!N.start.date;if(s=new e(x,B,B?N.start.date:N.start.dateTime,B?N.end.date:N.end.dateTime,b,N.summary||m.setting.miscStrings.emptyGoogleCalendarEventTitle,"",N.htmlLink||""),t.push(s),++H>k)break}}}for(r=0;r<t.length;r++){if(null!==(o=t[r]).start){if(f++,null!==o.start&&(o.start=m._getDateObjectFromString(o.start,o.isAllDay,p,u,h,y,w)),null!==o.end?(o.end=m._getDateObjectFromString(o.end,o.isAllDay,p,u,h,y,w),o.endSpecified=!0):(o.end=m._getUnspecifiedEndDateOfEvent(o.isAllDay,o.start),o.endSpecified=!1),S=!1,$.cf.compareStrings(m.setting.datasetModificationRule,"ReplaceSpecified"))for(var L=0;L<m.tv.oAEvents.length;L++)if(s=m.tv.oAEvents[L],parseInt(s.id)===parseInt(o.id)){o.calEventId=s.calEventId,S=!0;break}S||(o.calEventId=++m.tv.iMaxEvId)}else o.id="DEL";""===o.title&&(o.title=m.setting.miscStrings.emptyEventTitle)}if(0!==t.length-f){var R=[];for(r=0;r<t.length;r++)o=t[r],$.cf.compareStrings(o.id,"DEL")||R.push(o);t=R}var P,O=a.changeColorBasedOn||m.setting.changeColorBasedOn||"Event";if($.cf.compareStrings(O,"EventCalendar")){D=[];for(var W=0;W<m.tv.oAECalendar.length;W++){var j=m.tv.oAECalendar[W];j.fromSingleColor=!1,$.cf.isValid(j.singleColor)?(l=$.cf.addHashToHexcode(j.singleColor),j.fromSingleColor=!0,j.backgroundColor=$.cf.getRGBAString(l,.1),j.borderColor=l,j.textColor=l,j.nonAllDayEventsTextColor=l,D.push(l)):$.cf.isValid(j.backgroundColor)?D.push(j.backgroundColor):(P=m._generateUniqueColor(D),D.push(P),j.backgroundColor=$.cf.addHashToHexcode(P)),T=$.cf.isValid(j.icon)?j.icon:m.setting.eventIcon}}for($.cf.compareStrings(O,"EventSource")&&(d=d||m._generateUniqueColor(D),D.push(d)),r=0;r<t.length;r++){o=t[r];var z=m._getEventCalendarObject(o.calendar);$.cf.compareStrings(O,"Event")||$.cf.compareStrings(O,"EventCalendar")&&!$.cf.isValid(z)?($.cf.isValid(o.singleColor)?(l=$.cf.addHashToHexcode(o.singleColor),o.fromSingleColor=!0,o.backgroundColor=$.cf.getRGBAString(l,.1),o.borderColor=l,o.textColor=l,o.nonAllDayEventsTextColor=l,D.push(l)):$.cf.isValid(o.backgroundColor)?(o.backgroundColor=$.cf.addHashToHexcode(o.backgroundColor),o.borderColor=$.cf.addHashToHexcode(o.borderColor),o.textColor=$.cf.addHashToHexcode(o.textColor),o.nonAllDayEventsTextColor=$.cf.addHashToHexcode(o.nonAllDayEventsTextColor),D.push(o.backgroundColor)):(P=m._generateUniqueColor(D),D.push(P),o.backgroundColor=$.cf.addHashToHexcode(P)),T=$.cf.isValid(o.isMarked)&&o.isMarked?$.cf.isValid(o.icon)?o.icon:"cs-icon-Mark":$.cf.isValid(o.icon)?o.icon:m.setting.eventIcon):$.cf.compareStrings(O,"EventCalendar")&&$.cf.isValid(z)?(o.fromSingleColor=z.fromSingleColor,o.backgroundColor=$.cf.addHashToHexcode(z.backgroundColor),o.borderColor=$.cf.addHashToHexcode(z.borderColor),o.textColor=$.cf.addHashToHexcode(z.textColor),o.nonAllDayEventsTextColor=$.cf.addHashToHexcode(z.nonAllDayEventsTextColor),o.icon=z.icon):$.cf.compareStrings(O,"EventSource")&&(o.fromSingleColor=C,o.backgroundColor=d,o.borderColor=c,o.textColor=v,o.nonAllDayEventsTextColor=g,o.icon=T),o.isDragNDropInMonthView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isDragNDropInMonthView)?o.isDragNDropInMonthView:$.cf.isValid(a.isDragNDropInMonthView)?a.isDragNDropInMonthView:z&&$.cf.isValid(z.isDragNDropInMonthView)?z.isDragNDropInMonthView:m.setting.isDragNDropInMonthView),o.isDragNDropInQuickAgendaView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isDragNDropInQuickAgendaView)?o.isDragNDropInQuickAgendaView:$.cf.isValid(a.isDragNDropInQuickAgendaView)?a.isDragNDropInQuickAgendaView:z&&$.cf.isValid(z.isDragNDropInQuickAgendaView)?z.isDragNDropInQuickAgendaView:m.setting.isDragNDropInQuickAgendaView),o.isDragNDropInTaskPlannerView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isDragNDropInTaskPlannerView)?o.isDragNDropInTaskPlannerView:$.cf.isValid(a.isDragNDropInTaskPlannerView)?a.isDragNDropInTaskPlannerView:z&&$.cf.isValid(z.isDragNDropInTaskPlannerView)?z.isDragNDropInTaskPlannerView:m.setting.isDragNDropInTaskPlannerView),o.isDragNDropInDetailView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isDragNDropInDetailView)?o.isDragNDropInDetailView:$.cf.isValid(a.isDragNDropInDetailView)?a.isDragNDropInDetailView:z&&$.cf.isValid(z.isDragNDropInDetailView)?z.isDragNDropInDetailView:m.setting.isDragNDropInDetailView),o.isResizeInDetailView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isResizeInDetailView)?o.isResizeInDetailView:$.cf.isValid(a.isResizeInDetailView)?a.isResizeInDetailView:z&&$.cf.isValid(z.isResizeInDetailView)?z.isResizeInDetailView:m.setting.isResizeInDetailView)}if(n)m.tv.oAEvents=m.tv.oAEvents.concat(t);else if($.cf.compareStrings(m.setting.datasetModificationRule,"Default"))m.tv.oAEvents=m.tv.oAEvents.concat(t);else if($.cf.compareStrings(m.setting.datasetModificationRule,"ReplaceAll"))m.tv.oAEvents=t;else if($.cf.compareStrings(m.setting.datasetModificationRule,"ReplaceSpecified"))for(var Y=0;Y<t.length;Y++){var q=t[Y];S=!1;for(var U=0;U<m.tv.oAEvents.length;U++){var Q=m.tv.oAEvents[U];if(parseInt(Q.id)===parseInt(q.id)){Q=q,S=!0;break}}S||m.tv.oAEvents.push(q)}m.tv.oAEvents=m._sortEvents(m.tv.oAEvents)},_getModifiedSourceCountArray:function(e,t){for(var a=this,i=t.inputDateTimeFormat||"",n=t.formatSeparatorDateTime||"",s=t.formatSeparatorDate||"",r=t.formatSeparatorTime||"",o=t.inputTZOffset||a.setting.inputTZOffset,l=[],d=0;d<e.length;d++){var c=e[d];$.cf.isValid(c.date)&&(c.date=a._getDateObjectFromString(c.date,!0,i,n,s,r,o),$.cf.isValid(c.date)&&l.push(c))}if($.cf.compareStrings(a.setting.datasetModificationRule,"Default"))a.tv.oASrcCnt=a.tv.oASrcCnt.concat(l);else if($.cf.compareStrings(a.setting.datasetModificationRule,"ReplaceAll"))a.tv.oASrcCnt=l;else if($.cf.compareStrings(a.setting.datasetModificationRule,"ReplaceSpecified"))for(var v=0;v<l.length;v++){for(var g=!1,m=l[v],D=0;D<a.tv.oASrcCnt.length;D++){var f=a.tv.oASrcCnt[D];0===a.compareDateTimes(m.date,f.date)&&(f=m,g=!0)}g||a.tv.oASrcCnt.append(m)}return l},_getModifiedRestrictedSectionArray:function(e,t){for(var a=this,i=t.inputDateTimeFormat||"",n=t.formatSeparatorDateTime||"",s=t.formatSeparatorDate||"",r=t.formatSeparatorTime||"",o=t.inputTZOffset||a.setting.inputTZOffset,l=0;l<e.length;l++){var d=e[l];null!==d.start&&(null!==d.start&&(d.start=a._getDateObjectFromString(d.start,d.isAllDay,i,n,s,r,o)),null!==d.end&&(d.end=a._getDateObjectFromString(d.end,d.isAllDay,i,n,s,r,o)),d.isAllDay&&(d.start=a.setDateInFormat({date:d.start},"START"),d.end=a.setDateInFormat({date:d.end},"END"),d.end=a._normalizeEndDateTime(d.end)))}$.cf.compareStrings(a.setting.datasetModificationRule,"Default")?a.tv.oAResSec=a.tv.oAResSec.concat(e):$.cf.compareStrings(a.setting.datasetModificationRule,"ReplaceAll")&&(a.tv.oAResSec=e),a._checkAllowDroppable()},_getModifiedSlotAvailabilityArray:function(e,t){for(var a=this,i=t.inputDateTimeFormat||"",n=t.formatSeparatorDateTime||"",s=t.formatSeparatorDate||"",r=t.formatSeparatorTime||"",o=t.inputTZOffset||a.setting.inputTZOffset,l=[],d=0;d<e.length;d++){var c=e[d];null!==c.start&&null!==c.end&&(null!==c.start&&(c.start=a._getDateObjectFromString(c.start,c.isAllDay,i,n,s,r,o)),null!==c.end&&(c.end=a._getDateObjectFromString(c.end,c.isAllDay,i,n,s,r,o)),""!==c.start&&""!==c.end&&(c.isAllDay&&(c.start=a.setDateInFormat({date:c.start},"START"),c.end=a.setDateInFormat({date:c.end},"END")),c.end=a._normalizeEndDateTime(c.end),l.push(c)))}if($.cf.compareStrings(a.setting.datasetModificationRule,"Default"))a.tv.oASltAvail=a.tv.oASltAvail.concat(l);else if($.cf.compareStrings(a.setting.datasetModificationRule,"ReplaceAll"))a.tv.oASltAvail=l;else if($.cf.compareStrings(a.setting.datasetModificationRule,"ReplaceSpecified"))for(var v=0;v<l.length;v++){for(var g=!1,m=l[v],D=0;D<a.tv.oASltAvail.length;D++){var f=a.tv.oASltAvail[D];0===a.compareDateTimes(m.start,f.start)&&0===a.compareDateTimes(m.end,f.end)&&$.cf.compareStrings(m.status,f.status)&&(f=m,g=!0)}g||a.tv.oASltAvail.append(m)}},_dataCleaning:function(e,t){var a=this;$.cf.compareStrings(a.tv.sLoadType,"Load")?a.tv.oAEvents.length>0&&(a.tv.oAEvents=a._sortEvents(a.tv.oAEvents)):($.cf.compareStrings(a.tv.sLoadType,"Prev")||$.cf.compareStrings(a.tv.sLoadType,"Next"))&&(a.tv.oAEvents.length>0&&(null!==e&&null!==t&&a._deleteEventsOutOfDuration(e,t),a.tv.oAEvents=a._sortEvents(a.tv.oAEvents)),a.tv.oASrcCnt.length>0&&null!==e&&null!==t&&a._deleteSourceCountOutOfDuration(e,t),a.tv.oAResSec.length>0&&null!==e&&null!==t&&a._deleteRestrictedSectionsOutOfDuration(e,t),a.tv.oASltAvail.length>0&&null!==e&&null!==t&&a._deleteSlotAvailabilityOutOfDuration(e,t))},_deleteEventsOutOfDuration:function(e,t){var a,i,n=this;for(a=0;a<n.tv.oAEvents.length;a++)i=n.tv.oAEvents[a],$.cf.compareStrings(n.tv.sLoadType,"Prev")?n.compareDateTimes(i.start,t)>0&&(i.id="DEL"):$.cf.compareStrings(n.tv.sLoadType,"Next")&&n.compareDateTimes(i.end,e)<0&&(i.id="DEL");var s=[];for(a=0;a<n.tv.oAEvents.length;a++)i=n.tv.oAEvents[a],$.cf.compareStrings(i.id,"DEL")||s.push(i);n.tv.oAEvents=s},_deleteSourceCountOutOfDuration:function(e,t){var a,i,n=this;for(a=0;a<n.tv.oASrcCnt.length;a++){i=n.tv.oASrcCnt[a];var s=new Date(i.date);$.cf.compareStrings(n.tv.sLoadType,"Prev")?n.compareDates(s,t)>0&&(i.date="DEL"):$.cf.compareStrings(n.tv.sLoadType,"Next")&&n.compareDates(s,e)<0&&(i.date="DEL")}var r=[];for(a=0;a<n.tv.oASrcCnt.length;a++)i=n.tv.oASrcCnt[a],$.cf.compareStrings(i.date,"DEL")||r.push(i);n.tv.oASrcCnt=r},_deleteRestrictedSectionsOutOfDuration:function(e,t){var a,i,n=this;for(a=0;a<n.tv.oAResSec.length;a++)i=n.tv.oAResSec[a],$.cf.compareStrings(n.tv.sLoadType,"Prev")?n.compareDateTimes(i.start,t)>0&&(i.start="DEL"):$.cf.compareStrings(n.tv.sLoadType,"Next")&&n.compareDateTimes(i.end,e)<0&&(i.start="DEL");var s=[];for(a=0;a<n.tv.oAResSec.length;a++)i=n.tv.oAResSec[a],$.cf.compareStrings(i.start,"DEL")||s.push(i);n.tv.oAResSec=s},_deleteSlotAvailabilityOutOfDuration:function(e,t){var a,i,n=this;for(a=0;a<n.tv.oASltAvail.length;a++){i=n.tv.oASltAvail[a];var s=new Date(i.start),r=new Date(i.end);if($.cf.compareStrings(n.tv.sLoadType,"Prev"))n.compareDateTimes(s,t)>0&&(i.start="DEL");else if($.cf.compareStrings(n.tv.sLoadType,"Next")){var o=n.compareDateTimes(s,e),l=n.compareDateTimes(r,t);o<0&&l<0&&(i.start="DEL")}}var d=[];for(a=0;a<n.tv.oASltAvail.length;a++)i=n.tv.oASltAvail[a],$.cf.compareStrings(i.start,"DEL")||d.push(i);n.tv.oASltAvail=d},addEventsForSource:function(e,t){var a=this;e=a.__parseJson(e);for(var i=0;i<a.setting.calDataSource.length;i++){var n=a.setting.calDataSource[i];if(n.sourceId===t){e.length>0&&a._getModifiedEventsArray(e,n.config||{},"string"==typeof n.source&&a._isGoogleCalendarUrl(n.source),!0);break}}},_replaceEventWithId:function(e,t){for(var a=0;a<this.tv.oAEvents.length;a++){var i=this.tv.oAEvents[a];if(parseInt(e)===parseInt(i.id)){i=t;break}}},_replaceEventsWithRule:function(e,t){this._removeEventsWithRule(e),this.tv.oAEvents=this.tv.oAEvents.concat(t)},replaceEvents:function(e){for(var t=0;t<e.length;t++){var a=e[t],i=a.replaceId,n=a.replaceRule;$.cf.isValid(i)?this._replaceEventWithId(i,a.event):$.cf.isValid(n)&&this._replaceEventsWithRule(n,a.events)}},revertToOriginalEvent:function(e,t,a){this.__updateEventWithId(e.calEventId,t,a)&&this.__reloadCurrentView(!0,!1)},_removeEventsWithIds:function(e){for(var t=[],a=0;a<e.length;a++)for(var i=0;i<this.tv.oAEvents.length;i++){var n=this.tv.oAEvents[i];parseInt(n.id)!==parseInt(e[a])&&t.push(n.id)}this.tv.oAEvents=t},_removeEventsWithRule:function(e){for(var t=[],a=0;a<this.tv.oAEvents.length;a++){var i=this.tv.oAEvents[a];e(i)||t.push(i)}this.tv.oAEvents=t},removeEvents:function(e){for(var t=0;t<e.length;t++){var a=e[t],i=a.removeIds,n=a.removeRule;$.cf.isValid(i)&&this._removeEventsWithIds(i),$.cf.isValid(n)&&this._removeEventsWithRule(n)}},_getEventCalendarObject:function(e){for(var t=0;t<this.tv.oAECalendar.length;t++){var a=this.tv.oAECalendar[t];if($.cf.compareStrings(e,a.calendar))return a}return null},getEventWithId:function(e){for(var t=0;t<this.tv.oAEvents.length;t++){var a=this.tv.oAEvents[t];if(a.calEventId===parseInt(e))return a}return{}},__updateEventWithId:function(e,t,a){for(var i=this,n=!1,s=0;s<i.tv.oAEvents.length;s++){var r=i.tv.oAEvents[s];if(r.calEventId===parseInt(e)){r.start=t,r.end=null!==a?a:new Date(t.getTime()+30*$.CalenStyle.extra.iMS.m),i.tv.oAEvents[s]=r,n=!0;break}}return i.tv.oAEvents=i._sortEvents(i.tv.oAEvents),n},_normalizeEndDateTime:function(e){return 0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&(e=new Date(e.getTime()-$.CalenStyle.extra.iMS.m)),e},_getUnspecifiedEndDateOfEvent:function(e,t){return e?new Date(t.getFullYear(),t.getMonths(),t.getDate()+(this.setting.allDayEventDuration-1),0,0,0,0):new Date(t.getTime()+this.setting.eventDuration*$.CalenStyle.extra.iMS.m)},_getStartAndEndDatesOfEvent:function(e,t,a){var i,n;return e?(i=this.setDateInFormat({date:t},"START"),n=null!==a?this.setDateInFormat({date:a},"START"):this._getUnspecifiedEndDateOfEvent(e,i)):(i=new Date(t),n=null!==a?new Date(a):this._getUnspecifiedEndDateOfEvent(e,i)),[i,n]},__getStartAndEndDatesOfEventForView:function(e,t,a){var i=this,n=i._getStartAndEndDatesOfEvent(e,t,a),s=new Date(n[0]),r=new Date(n[1]),o=i.compareDates(s,i.tv.dVDSDt),l=i.compareDates(r,i.tv.dVDEDt),d=new Date(s),c=new Date(r);return o<0&&(d=i.tv.dVDSDt),l>0&&(c=i.tv.dVDEDt),[d,c]},getDurationOfEventInHHmmFormat:function(e,t){var a=Math.ceil((t.getTime()-e.getTime())/$.CalenStyle.extra.iMS.m);return[Math.floor(a/60),a%60]},__getNumberOfHoursOfEvent:function(e,t,a){var i=this._getStartAndEndDatesOfEvent(e,t,a),n=i[0],s=i[1].getTime()-n.getTime(),r=Math.round(s/$.CalenStyle.extra.iMS.h);return r<=0&&s>0&&(r=1),r},__getDateIndexInView:function(e){for(var t=0;t<this.tv.iNoVDay;t++){var a=this.tv.dAVDt[t];if(0===this.compareDates(a,e))return t}return-1},getNumberOfDaysOfEvent:function(e,t,a,i,n,s){var r,o=this;0===(r=e&&0===o.compareDateTimes(t,a)&&s?new Date(a.getTime()+$.CalenStyle.extra.iMS.d):new Date(a)).getHours()&&0===r.getMinutes()&&r.setMinutes(r.getMinutes()-1);var l=0,d=o.__getNumberOfHoursOfEvent(e,t,r),c=o._getStartAndEndDatesOfEvent(e,t,r),v=c[0],g=c[1],m=o.compareDates(v,g);if(d<=0)e&&m<=0?(d=24,l=1):console.log("Invalid Start And End Dates "+t+" "+r);else if(m<0){var D=o.setDateInFormat({date:v},"START"),f=(o.setDateInFormat({date:g},"START").getTime()-D.getTime())/$.CalenStyle.extra.iMS.h;if(l=Math.round(f/24)+1,n){for(var p=new Date(D),u=0,h=0;h<l;h++)o.__findWhetherDateIsVisibleInCurrentView(p,e||d>23,v,g)&&u++,p.setDate(p.getDate()+1);l=u}}else 0===m&&(n?o.__findWhetherDateIsVisibleInCurrentView(v,e||d>23,v,g)&&(l=1):l=1);return i?[l,d]:l},_sortEvents:function(e){for(var t=0;t<e.length;t++)for(var a=e[t],i=a.start,n=this.__getNumberOfHoursOfEvent(a.isAllDay,a.start,a.end),s=a.isAllDay||n>23||$.cf.isValid(a.isMarked)&&a.isMarked,r=t+1;r<e.length;r++){var o,l=e[r],d=l.start,c=this.__getNumberOfHoursOfEvent(l.isAllDay,l.start,l.end),v=l.isAllDay||c>23||$.cf.isValid(l.isMarked)&&l.isMarked,g=this.compareDates(i,d),m=this.compareDateTimes(i,d),D=0===g,f=!s&&v,p=s&&v,u=!s&&!v;(g>0||D&&f||D&&m>0&&(p||u)||D&&(f||p||u)&&0===m&&n<c)&&(o=a,a=l,l=o,e[t]=a,e[r]=l,i=a.start,n=c,s=v)}return e},_whetherEventIsBetweenDates:function(e,t,a){var i=e.start,n=e.end,s=e.isAllDay,r=this.compareDates(n,t),o=this.compareDates(i,a);if(0===r&&0===n.getHours()&&0===n.getMinutes())if(s){var l=this.__getNumberOfHoursOfEvent(s,i,n)>0,d=this.__getNumberOfHoursOfEvent(s,t,n)>0;l&&!d&&(r=-1)}else r=-1;return!(!(o<=0)||!(r>=0))},getArrayOfEventsForView:function(e,t){var a=this;e=a.setDateInFormat({date:e},"START"),t=a.setDateInFormat({date:t},"END");for(var i=[],n=[],s=0;s<a.tv.oAEvents.length;s++){var r=a.tv.oAEvents[s];a._whetherEventIsBetweenDates(r,e,t)&&(i.push(r),a.setting.eventFilterCriteria.length>0?a.__whetherToDisplayAnEventOnCalendar(r)&&n.push(r):n.push(r))}return a.setting.eventFilterCriteria.length>0&&a.__setEventCountBasedOnCriteria(i),n},__getSourceCountForDate:function(e){var t,a,i,n,s,r,o,l,d,c=this,v=0;if(c.tv.oASrcCnt.length>0){for(t=0;t<c.tv.oASrcCnt.length;t++)if(i=c.tv.oASrcCnt[t],0===c.compareDates(i.date,e)){v=i.count;break}}else if(null!==c.setting.parentObject)for(a=0;a<c.setting.calDataSource.length;a++)if(n=c.setting.calDataSource[a].config.sourceCountType,$.cf.compareStrings(n,"Event"))for(t=0;t<c.setting.parentObject.tv.oAEvents.length;t++)r=(s=c.setting.parentObject.tv.oAEvents[t]).start,o=s.end,l=c.compareDates(e,r)>=0,d=c.compareDates(e,o)<=0,l&&d&&v++;else if($.cf.compareStrings(n,"FreeTimeSlot")||$.cf.compareStrings(n,"BusyTimeSlot"))for(t=0;t<c.setting.parentObject.tv.oASltAvail.length;t++)r=(s=c.setting.parentObject.tv.oASltAvail[t]).start,o=s.end,l=c.compareDates(e,r)>=0,d=c.compareDates(e,o)<=0,l&&d&&($.cf.compareStrings(n,"FreeTimeSlot")&&$.cf.compareStrings(s.status,"Free")||$.cf.compareStrings(n,"BusyTimeSlot")&&$.cf.compareStrings(s.status,"Busy"))&&v++;return v},getEventCountAndIsMarkedDay:function(e,t){var a,i,n=this.getArrayOfEventsForView(e,e),s=n.length;for(a=0;a<s;a++)if(i=n[a],$.cf.isValid(i.isMarked)&&i.isMarked){var r=i.fromSingleColor?i.textColor:i.backgroundColor;return[s,!0,r=$.cf.compareStrings(r,"")||$.cf.compareStrings(r,"transparent")?"transparent":r]}return[s,!1,""]},_setHeightForEvents:function(){for(var e=0;e<this.setting.viewsToDisplay.length;e++){var t=this.setting.viewsToDisplay[e].viewName,a=$.CalenStyle.extra.oEventClass[t];if($.cf.isValid(a)){var i=$("<div class="+a+"></div>").hide().appendTo("body"),n=$.cf.getSizeValue(i,"height");i.remove(),$.cf.isValid(n)&&n>2&&($.CalenStyle.extra.iEventHeights[t]=n)}}},_generateUniqueColor:function(e){var t,a="";if(this.setting.eventColorsArray.length>e.length)for(var i=0;i<this.setting.eventColorsArray.length;i++){var n=this.setting.eventColorsArray[i];t=!1;for(var s=0;s<e.length;s++){if(n===e[s]){t=!0;break}}t||(a=n)}if($.cf.compareStrings(a,"")){t=!0;for(;t;){if(t=!1,a=this._generateColor(),e.length>0)for(var r=0;r<e.length;r++)if(a===e[r]){t=!0;break}1}}return a},_generateColor:function(){var e=Math.floor(100*Math.random())+100,t=Math.floor(100*Math.random())+100,a=Math.floor(100*Math.random())+100,i=e.toString(16);i=1===i.length?"0"+i:i;var n=t.toString(16);n=1===n.length?"0"+n:n;var s=a.toString(16);return i+n+(s=1===i.length?"0"+s:s)},__bindClick:function(e){for(var t,a=e.data,i=0;i<$.CalenStyle.extra.oArrCalenStyle.length;i++){var n=$.CalenStyle.extra.oArrCalenStyle[i];n.tv.pluginId===a.pluginId&&(t=n)}e.stopPropagation();var s=$(t.elem).find(a.eventElemSelector).hasClass("cEditingEvent"),r=$.cf.getTimestamp()-t.tv.iTSEndEditing,o=$("body").hasClass("br-ie")?900:100;s||!s&&r<o||(t.setting.eventClicked?t.setting.eventClicked.call(t,t.setting.visibleView,a.eventElemSelector,t.getEventWithId(a.eventId)):$.cf.compareStrings(a.url,"")||window.open(a.url,"_blank"))},__getElementsAtPoint:function(e,t){return $("body").find("*").filter(function(){var a=$(this).offset().left,i=a+$(this).width(),n=$(this).offset().top,s=n+$(this).height();return e>=a&&e<=i&&t>=n&&t<=s})}},a.prototype=$.extend(a.prototype,{_arrayContains:function(e,t){for(var a=0;a<e.length;a++)if(e[a]===t)return 1;return 0},_setNextPreviousMonthDates:function(){var e=new Date(this.tv.dCMDt.getTime()-30*$.CalenStyle.extra.iMS.d);e.setDate(15),this.tv.dPMDt=new Date(e);var t=new Date(this.tv.dCMDt.getTime()+30*$.CalenStyle.extra.iMS.d);t.setDate(15),this.tv.dNMDt=new Date(t)},_updateMonthTable:function(){var e=this;e.__getCurrentViewDates();var t="";t+="<thead>",t+="<tr class='cmvMonthTableRowDayHeader'>",e.setting.displayWeekNumInMonthView&&(t+="<td class='cmvDayHeader cmvWeekNumber cmvThinBorderRight cmvFirstColumn'></td>");var a,i=e.setting.weekStartDay,n=e.setting.excludeNonBusinessHours?e.tv.iBsDays:7;for(a=0;a<7;a++){var s="";e.setting.displayWeekNumInMonthView||0!==a||(s="cmvFirstColumn"),(e.setting.excludeNonBusinessHours&&e.tv.bABsDays[i]||!e.setting.excludeNonBusinessHours)&&(t+="<td id='cmvDayName"+(i+1)+"' class='cmvDayHeader cmvTableColumns "+s+"'>"+e.getDateInFormat({iDate:{D:i}},"DDD",!1,!0)+"</td>"),++i>6&&(i=0)}t+="</tr>",t+="</thead>",e.tv.dCMDt=new Date(e.setting.selectedDate),e.tv.dCMDt.setDate(15),e._setNextPreviousMonthDates();var r=$.CalenStyle.extra.dToday.getDate(),o=$.CalenStyle.extra.dToday.getMonth(),l=$.CalenStyle.extra.dToday.getFullYear();t+="<tbody>";for(var d=0,c=1;c<=e.tv.iWkInMonth;c++){t+="<tr id='cmvMonthTableRow"+c+"' class='cmvMonthTableRows'>";if(e.setting.displayWeekNumInMonthView){var v=e.tv.dAVDt[d],g=e.setDateInFormat({date:e.tv.dAVDt[d+6]},"END"),m=e.__getWeekNumber(v,g),D="cmvDay cmvWeekNumber cmvThinBorderRight cmvWeekNumberBorderLeft";1===c?D+=" cmvWeekNumberBorderBottom":c===e.tv.iWkInMonth?D+=" cmvWeekNumberBorderTop":D+=" cmvWeekNumberBorderBottom cmvWeekNumberBorderTop";var f=e._getWeekForDate($.CalenStyle.extra.dToday,!1),p=f[0],u=f[1];0===e.compareDates(p,v)&&0===e.compareDates(u,g)&&(D+=" cTodayHighlightTextColor",!0),t+="<td id='"+v.getTime()+"' class='"+D+"'><span>"+m+"</span></td>"}for(a=0;a<n;a++){var h,y,w,C=e.tv.dAVDt[d],S=C.getDate(),T=C.getMonth(),V=C.getFullYear(),b=e.__getSourceCountForDate(C),E=$.cf.compareStrings(e.setting.eventIndicatorInDatePicker,"DayNumberBold")&&($.cf.compareStrings(e.setting.visibleView,"DatePicker")||null!==e.setting.parentObject)&&b>0?" cBold":"",I="",M="cmvDay cmvTableColumns cmvTableColumn"+a;e.tv.dCMDt.getMonth()!==T?M+=" cmvOtherMonthDay":M+=" cmvCurrentMonthDay",e.setting.displayWeekNumInMonthView||0!==a||(M+=" cmvFirstColumn"),w="cmvDay-"+S+"-"+T+"-"+V;var A=e.setting.selectedDate.getDate(),_=e.setting.selectedDate.getMonth(),k=e.setting.selectedDate.getFullYear();for(S===r&&T===o&&V===l?M+=" cTodayHighlightTextColor":S===A&&T===_&&V===k&&(M+=" cCurrentDateHighlightColor"),($.cf.compareStrings(e.setting.visibleView,"MonthView")&&!$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")||$.cf.compareStrings(e.setting.visibleView,"DatePicker"))&&(M+=" clickableLink"),e.tv.bABsDays[C.getDay()]||(M+=" cNonBusinessHoursBg"),h=e._getRestrictedSectionForCurrentView(C),y=0;y<h.length;y++){var H=h[y],F=new Date(H.start),N=0===e.compareDates(C,F),x=new Date(H.end),B=0===e.compareDates(C,x);N||(F=e._normalizeDateTime(C,"START","T")),B||(x=e._normalizeDateTime(C,"END","T")),(Math.round((x.getTime()-F.getTime())/$.CalenStyle.extra.iMS.h)>23||H.isAllDay)&&($.cf.isValid(H.backgroundColor)&&(I="style='background: "+$.cf.addHashToHexcode(H.backgroundColor)+";'"),$.cf.isValid(H.class)&&(M+=" "+H.class))}t+="<td id='"+w+"' class='"+M+"' "+I+">",t+="<span class='cmvDayNumber"+E+"'>"+e.getNumberStringInFormat(S,0,!0)+"</span>",$.cf.compareStrings(e.setting.visibleView,"MonthView")?($.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&(t+="<span class='cmvDisplayAllEvents'>..</span>"),$.cf.compareStrings(e.setting.eventIndicatorInMonthView,"DayHighlight")?t+="<div class='cmvMonthTableRowIndicator' ><span>&nbsp;</span></div>":$.cf.compareStrings(e.setting.eventIndicatorInMonthView,"Custom")&&(t+="<div class='cmvMonthTableRowCustom' >&nbsp;</div>")):$.cf.compareStrings(e.setting.visibleView,"DatePicker")&&(t+="<div class='cElemDatePickerCustom'>",$.cf.compareStrings(e.setting.eventIndicatorInDatePicker,"Dot")&&b>0&&(t+="<span class='cElemDatePickerDot'></span>"),t+="</div>"),t+="</td>",d++}t+="</tr>"}t+="</tbody>",$(e.elem).find(".cmvMonthTableMain").html(t),$(e.elem).find(".cTodayHighlightTextColor").find(".cmvDayNumber").addClass("cTodayHighlightCircle"),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ModifyEventList")&&$(e.elem).find(".cCurrentDateHighlightColor").find(".cmvDayNumber").addClass("cCurrentHighlightCircle"),e.adjustMonthTable(),e.setting.addEventsInMonthView||e.adjustMonthTable(),e._setMonthStrings(),$.CalenStyle.extra.bTouchDevice||e._addHoverClassesInMonthView()},_updateMonthTableContents:function(e){var t=this;t.setting.addEventsInMonthView&&!$.cf.compareStrings(t.setting.visibleView,"DatePicker")?$.cf.compareStrings(t.setting.eventIndicatorInMonthView,"DayHighlight")?t._updateDayHighlightViewInMonthView(e):$.cf.compareStrings(t.setting.eventIndicatorInMonthView,"Events")?t._addEventContInMonthView(e):$.cf.compareStrings(t.setting.eventIndicatorInMonthView,"Custom")&&t.__parseData(e,function(){t.setting.modifyCustomView&&t.setting.modifyCustomView.call(t,t.tv.dAVDt),$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"ChangeDate")||t._displayEventOnDayClickInMonthView(),t.adjustMonthTable(),t.__modifyFilterBarCallback()}):$.cf.compareStrings(t.setting.visibleView,"DatePicker")&&t._updateDayHighlightInDatePickerView(e),$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")||t._makeDayClickableInMonthView()},_updateDayHighlightInDatePickerView:function(e){var t=this;t.__parseData(e,function(){for(var e=0;e<t.tv.dAVDt.length;e++){var a=t.tv.dAVDt[e],i="#cmvDay-"+a.getDate()+"-"+a.getMonth()+"-"+a.getFullYear(),n=$(t.elem).find(i),s=t.__getSourceCountForDate(a),r=($.cf.compareStrings(t.setting.visibleView,"DatePicker")||null!==t.setting.parentObject)&&s>0?" cBold":"";if($.cf.compareStrings(t.setting.eventIndicatorInDatePicker,"DayNumberBold"))""!==r&&n.find(".cmvDayNumber").addClass(r);else if($.cf.compareStrings(t.setting.eventIndicatorInDatePicker,"Dot")&&0===n.find(".cElemDatePickerCustom").length){var o="<div class='cElemDatePickerCustom'>";o+="<span class='cElemDatePickerDot'></span>",o+="</div>",n.append(o)}}})},_updateDayHighlightViewInMonthView:function(e){var t=this;t.__parseData(e,function(){for(var e=0;e<t.tv.dAVDt.length;e++){var a=t.tv.dAVDt[e],i="#cmvDay-"+a.getDate()+"-"+a.getMonth()+"-"+a.getFullYear(),n=t.setDateInFormat({date:a},"START"),s=t.setDateInFormat({date:a},"END"),r=t.getEventCountAndIsMarkedDay(n,s),o=r[0],l=r[1],d=r[2],c=$(t.elem).find(i+" .cmvMonthTableRowIndicator");0!==o&&(o<t.setting.averageEventsPerDayForDayHighlightView?o*=100/t.setting.averageEventsPerDayForDayHighlightView:o=100,o>100&&(o=100)),l&&(c.addClass("cMarkedDayLineIndicator"),$.cf.isValid(d)&&c.find("span").css({background:d})),c.find("span").css({width:o+"%"}),$.cf.compareStrings(t.setting.visibleView,"MonthView")&&$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&0===$(t.elem).find(".cmvMonthTableMain "+i).has(".cmvDisplayAllEvents").length&&$(t.elem).find(".cmvMonthTableMain "+i).prepend("<span class='cmvDisplayAllEvents'>...</span>")}$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"ChangeDate")||t._displayEventOnDayClickInMonthView(),t.adjustMonthTable(),t.addRemoveViewLoader(!1,"cEventLoaderBg"),t.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),t.__modifyFilterBarCallback()})},updateMonthTableAndContents:function(e){var t=this;$(t.elem).find(".cmvDisplayAllEvents").remove(),$(t.elem).find(".cmvEvent").remove(),$(t.elem).find(".cdmvEvent").remove(),$(t.elem).find(".cHiddenEventsIndicator").remove(),$(t.elem).find(".cHiddenEventsCont").remove(),$(t.elem).find(".cmvDialog").remove(),t._updateMonthTable(),t._updateMonthTableContents(e)},_addHoverClassesInMonthView:function(){$(this.elem).find(".cContHeaderLabelMonth, .cContHeaderLabelYear").hasClass("sClickableClass")&&$(this.elem).find(".cContHeaderLabelMonth, .cContHeaderLabelYear").hover(function(e){$(this).addClass("cContHeaderLabelHover")},function(e){$(this).removeClass("cContHeaderLabelHover")}),$(this.elem).find(".cmvDay").hover(function(e){$(this).addClass("cContHeaderButtonsHover")},function(e){$(this).removeClass("cContHeaderButtonsHover")})},_addEventContInMonthView:function(e){var t,a,i,n,s,r,o,l,d,c,v,g,m,D,f,p,u,h,y=this,w="",C=null,S=null,T=0,V=!1;$.cf.compareStrings(y.setting.visibleView,"MonthView")&&y.setting.displayEventsInMonthView&&(w+="<div class='cmvEventCont'><div class='cmvEventContSmall'></div><div class='cmvEventContAllDay'></div></div>",$(y.elem).find(".cmvMonthTableMain .cmvDay").not(".cmvWeekNumber").append(w)),$(y.elem).find(".cmvDay").droppable({scope:"Events",over:function(e,w){for(a=$(w.draggable),n=a.attr("id"),s=a.attr("data-id"),r=y.getEventWithId(s),o=".Event-"+s,C=null,S=null,T=0,$(y.elem).find(o).addClass("cEditingEventClone"),null!==r.start&&(C=r.start),null!==r.end&&(S=r.end),null!==r.isAllDay&&(T=r.isAllDay),d=y.getNumberOfDaysOfEvent(T,C,S,!0,!1,!0),c=d[0],v=d[1],g=$(this).attr("id"),m=g.split("-"),D=new Date(m[3],m[2],m[1],0,0,0,0),f=new Date(D),p=!1,u=y.setDateInFormat({iDate:{d:parseInt(m[1]),M:parseInt(m[2]),y:parseInt(m[3]),H:C.getHours(),m:C.getMinutes(),s:C.getSeconds()}},""),h=new Date(u.getTime()+(S.getTime()-C.getTime())),y.tv.bChkDroppable&&(a=$(y.elem).find("#"+n+".ui-draggable-dragging"),i=a.attr("data-droppableid"),(V=y._findWhetherEventEnteredNonDroppableZone(u,h,T,c,i))?(a.addClass("cCursorNotAllowed"),a.find(".cEventLink").addClass("cCursorNotAllowed")):(a.removeClass("cCursorNotAllowed"),a.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(y.elem).find(".cmvDay").removeClass("cActivatedCell"),t=0;t<c;t++)t>0&&(f=new Date(f.getTime()+$.CalenStyle.extra.iMS.d),p=y.compareDates(f,y.tv.dVEDt)),(0===t||p<=0)&&y.__findWhetherDateIsVisibleInCurrentView(f,T||v>23,C,S)&&(l="#cmvDay-"+f.getDate()+"-"+f.getMonth()+"-"+f.getFullYear(),$(y.elem).find(l).addClass("cActivatedCell"))},drop:function(e,t){a=$(t.draggable),n=a.attr("id"),s=a.attr("data-id"),r=y.getEventWithId(s),o=".Event-"+s,C=null,S=null,T=0,null!==r.start&&(C=r.start),null!==r.end&&(S=r.end),null!==r.isAllDay&&(T=r.isAllDay),d=y.getNumberOfDaysOfEvent(T,C,S,!0,!1,!0),c=d[0],v=d[1],g=$(this).attr("id"),m=g.split("-"),u=y.setDateInFormat({iDate:{d:parseInt(m[1]),M:parseInt(m[2]),y:parseInt(m[3]),H:C.getHours(),m:C.getMinutes(),s:C.getSeconds()}},""),h=new Date(u.getTime()+(S.getTime()-C.getTime())),y.tv.bChkDroppable&&(a=$(y.elem).find("#"+n+".ui-draggable-dragging"),i=a.attr("data-droppableid"),V=y._findWhetherEventEnteredNonDroppableZone(u,h,T,c,i),a.removeClass("cCursorNotAllowed"),a.find(".cEventLink").removeClass("cCursorNotAllowed"));var l=y.compareDates(S,$.CalenStyle.extra.dToday);if(l>=0?$(y.elem).find(o).removeClass("cEditingEventClone"):l<0&&$(y.elem).find(o).removeClass("cEditingEventClone").addClass("cBlurredEvent"),y.tv.draggableParent===$(this).attr("id")||V)return y.tv.iTSEndEditing=$.cf.getTimestamp(),y.tv.bDroppedInDifferent=!1,setTimeout(function(){var e=$("#"+n+".cEventClone");$("#"+n).attr("style",e.attr("style")),$(o).removeClass("cEditingEvent cEditingEventUI cEventBeingDragged"),e.remove()},300),!0;y.tv.bDroppedInDifferent=!0;$.cf.compareStrings(y.setting.visibleView,"MonthView"),y.__updateEventWithId(s,u,h)&&($(y.elem).find(".cmvDisplayAllEvents").remove(),$(y.elem).find(".cmvEvent").remove(),$(y.elem).find(".cdmvEvent").remove(),$(y.elem).find(".cHiddenEventsIndicator").remove(),$(y.elem).find(".cHiddenEventsCont").remove(),$(y.elem).find(".cmvDialog").remove(),y._addEventsInMonthView(null),$.cf.compareStrings(y.setting.visibleView,"DetailedMonthView")&&y._adjustEventsInMonthView()),$(y.elem).find(".cmvDay").removeClass("cActivatedCell"),y.setting.saveChangesOnEventDrop&&y.setting.saveChangesOnEventDrop.call(y,r,C,S,u,h),y.tv.iTSEndEditing=$.cf.getTimestamp()}}),$.cf.compareStrings(y.setting.visibleView,"MonthView")&&y.adjustMonthTable(),y.__parseData(e,function(){y._addEventsInMonthView(null),y.adjustMonthTable(),y.__modifyFilterBarCallback()})},_addEventsInMonthView:function(e){var t,a,i,n,s=this,r=new Date($.CalenStyle.extra.dToday);r.setDate(1);var o=$.cf.isValid(s.setting.hideEventIcon[s.setting.visibleView])?s.setting.hideEventIcon[s.setting.visibleView]:!!$.cf.isValid(s.setting.hideEventIcon.Default)&&s.setting.hideEventIcon.Default,l=$.cf.isValid(s.setting.hideEventTime[s.setting.visibleView])?s.setting.hideEventTime[s.setting.visibleView]:!!$.cf.isValid(s.setting.hideEventTime.Default)&&s.setting.hideEventTime.Default,d=s.setting.is24Hour?"HH:mm":"h[:m]sm",c=s.setting.excludeNonBusinessHours?s.tv.iBsDays:7;if($.cf.isValid(e)&&e.oArrEvents.length>0)t=!0,a=e.oArrEvents,i=e.dDayStart,n=e.dDayEnd;else{$.cf.compareStrings(s.setting.visibleView,"DetailedMonthView")&&$(s.elem).find(".cdmvEventContMain").html(""),a=s.getArrayOfEventsForView(s.tv.dVSDt,s.tv.dVEDt),s.tv.bAWkRw=[];for(var v=0;v<6;v++){for(var g=[],m=0;m<s.tv.iMxEvRw-1;m++)g.push(new Array(0,0,0,0,0,0,0));s.tv.bAWkRw.push(g)}}if(a.length>0){for(var D=$.CalenStyle.extra.iEventHeights[s.setting.visibleView],f="",p=$(s.elem).find(".cmvTableColumn0").width(),u=s._getHeightForAllDayEventInMonthView(),h=s._getHeightForSmallEventInMonthView(),y=s._getMarginValueForSmallEventInMonthView(),w=y+"px "+y+"px",C=0;C<a.length;C++){var S=a[C],T=null,V=null,b=0,E="",I="",M="",A=!1,_=!1,k="",H="Event-"+S.calEventId;null!==S.start&&(T=S.start),null!==S.end&&(V=S.end),null!==S.isAllDay&&(b=S.isAllDay),null!==S.title&&(E=S.title),null!==S.desc&&(I=S.desc),null!==S.type&&S.type,null!==S.url&&(M=S.url),null!==S.droppableId&&(k=S.droppableId),null!==S.isDragNDropInMonthView&&(_=S.isDragNDropInMonthView),null!==S.isMarked&&(A=S.isMarked),A&&(b=!0);var F=s.getNumberOfDaysOfEvent(b,T,V,!0,!0,!0),N=F[0],x=F[1];if(N>0){var B,L,R,P,O,W,j,z,Y,q,U,Q,Z,J,G,X,K,ee,te,ae="",ie=N,ne="",se=0,re=new Date(T),oe=new Date(V),le="",de="",ce="",ve="",ge="",me=!1,De=!1,fe=!1,pe=!1,ue=0;if($.cf.compareStrings(s.setting.visibleView,"DetailedMonthView")){if(f=".cdmvEvent",t)s.compareDates(T,i)<0&&Math.abs(s.__getDifference("m",i,T))>1&&(me=!0,ne="Left",re=new Date(i)),s.compareDates(n,V)<0&&Math.abs(s.__getDifference("m",n,V))>1&&(De=!0,ne="Right",oe=new Date(n)),ae="#cmvDay-"+i.getDate()+"-"+i.getMonth()+"-"+i.getFullYear();else{for(s.compareDates(T,s.tv.dVSDt)<0&&Math.abs(s.__getDifference("m",s.tv.dVSDt,T))>1&&(ne="Left",re=new Date(s.tv.dVSDt)),s.compareDates(s.tv.dVEDt,V)<0&&Math.abs(s.__getDifference("m",s.tv.dVEDt,V))>1&&(ne="Right",oe=new Date(s.tv.dVEDt)),R=new Date(re),te=!0;!(s.__findWhetherDateIsVisibleInCurrentView(R,b||x>23,re,oe)||(R.setDate(R.getDate()+1),te=!1,s.compareDates(R,oe)>0)););ae="#cmvDay-"+(re=new Date(R)).getDate()+"-"+re.getMonth()+"-"+re.getFullYear()}if(L=(ee=s.getNumberOfDaysOfEvent(b,re,oe,!0,!0,te))[0],ie=ee[0],(se=ee[1])>0){Q="cdmvEvent ",j=S.backgroundColor,j=!$.cf.isValid(j)||$.cf.compareStrings(j,"transparent")?"transparent":j,z=S.borderColor||$.cf.addHashToHexcode(s.setting.borderColor),z=!$.cf.isValid(z)||$.cf.compareStrings(z,"transparent")?"transparent":z,Y=S.textColor||$.cf.addHashToHexcode(s.setting.textColor),Y=!$.cf.isValid(Y)||$.cf.compareStrings(Y,"transparent")?$.cf.addHashToHexcode(s.setting.textColor):Y,q=$.cf.isValid(S.nonAllDayEventsTextColor)?S.nonAllDayEventsTextColor:S.backgroundColor,q=!$.cf.isValid(q)||$.cf.compareStrings(q,"transparent")?S.backgroundColor:q,!0===b||x>23?A?S.fromSingleColor?(le+="background: "+j+"; ",le+="border-color: "+z+"; ",le+="color: "+Y+"; ",ce+="color: "+Y+"; ",de="background: "+Y+"; color: #FFFFFF","background: "+Y+"; "):(z=j,le+="background: "+$.cf.getRGBAString(j,.1)+"; ",le+="border-color: "+z+"; ",le+="color: "+j+"; ",ce+="color: "+j+"; ",de="background: "+j+"; color: "+Y,"background: "+j+"; "):(le+="background: "+j+"; ",le+="border-color: "+z+"; ",le+="color: "+Y+"; ",ce+="color: "+Y+"; ",de="color: "+Y+"; ","background: "+Y+"; "):s.setting.onlyTextForNonAllDayEvents?(Q+="cEventOnlyText ",le+="color: "+q+"; ",le+="border-color: transparent; ",ie=1,ne="",ce+="color: "+q+"; ",de="color: "+q+"; ","background: "+q+"; "):(le+="background: "+j+"; ",le+="border-color: "+z+"; ",le+="color: "+Y+"; ",ce+="color: "+Y+"; ",de="color: "+Y+"; ","background: "+Y+"; "),ge="border-color: "+(S.fromSingleColor?Y:"#000000"),U=A?$.cf.isValid(S.icon)&&"Dot"!==S.icon?S.icon:"cs-icon-Mark":$.cf.isValid(S.icon)?S.icon:s.setting.eventIcon,s.compareDates(V,r)<0&&(Q+="cBlurredEvent "),_&&(Q+="EventDraggable cDragNDrop "),s.setting.isTooltipInMonthView&&(Q+="cEventTooltip "),Q+=H,A&&(Q+=" cMarkedDayEvent"),E,I;var he,$e=$(s.elem).find(ae).parent().attr("id"),ye=parseInt($e.replace("cmvMonthTableRow",""))-1,we=$(s.elem).find(ae).index();if(s.setting.displayWeekNumInMonthView&&we--,t)xe=H+"-Hidden",Ce=(Ve=0)+"|"+((Ee=C)+1)+"|"+(Ie=0)+"|"+(Me=1),ve=le,ve+="height: "+(D+"px")+"; ","transparent"===z&&(ve+="border-width: 0px; "),J="<div id='"+xe+"' class='"+(Q+=" cHiddenEvent")+"' style='"+ve+"'  data-pos='"+Ce+"' "+($.cf.isValid(k)?"data-droppableid='"+k+"'":"")+" title='' data-id='"+S.calEventId+"'>",J+="<a class='cEventLink' style='"+ce+"'>",he="",De&&me?(J+="<span class='"+(he="cPartialEvent")+" cPartialEventLeft' style='"+ge+"'></span>",J+="<span class='"+he+" cPartialEventRight' style='"+ge+"'></span>"):(De||me)&&(he="cPartialEvent",me&&(he+=" cPartialEventLeft"),De&&(he+=" cPartialEventRight"),J+="<span class='"+he+"' style='"+ge+"'></span>"),A?(J+="<span class='cdmvEventTitle'>"+E+"</span>",J+="<span class='cdmvEventIcon "+U+"' style='"+de+"'></span>"):(!l&&!1===b&&(1===N||N>1&&!me&&De)&&(J+="<span class='cdmvEventTime'>"+s.getDateInFormat({date:T},d,s.setting.is24Hour,!0)+"</span>"),!l&&!1===b&&(1===N||N>1&&me&&!De)&&(J+="<span class='cdmvEventTimeRight'>"+s.getDateInFormat({date:V},d,s.setting.is24Hour,!0)+"</span>"),o||$.cf.compareStrings(U,"Dot")||(J+="<span class='cdmvEventIcon "+U+"' style='"+de+"'></span>"),J+="<span class='cdmvEventTitle'>"+E+"</span>"),J+="</a>",J+="</div>",$(s.elem).find(".cHiddenEventsCont").append(J),G="#"+xe,K=(X=$(s.elem).find(G)).find(".cEventLink"),Z={},W=s.getEventDateTimeString(T,V,b,"&&").split("&&"),Z.title=E,Z.startDateTime=W[0],Z.endDateTime=W[1],X.data("tooltipcontent",Z),s.setting.eventRendered&&s.setting.eventRendered.call(s,S,X,K,s.setting.visibleView,!0),($.cf.isValid(M)||s.setting.eventClicked)&&K.on($.CalenStyle.extra.sClickHandler,{url:M,eventId:S.calEventId,eventElemSelector:G,view:"MonthView",pluginId:s.tv.pluginId},s.__bindClick);else for(var Ce,Se=0,Te=0,Ve=ye;Ve<s.tv.bAWkRw.length;Ve++){H="Event-"+S.calEventId;var be=s.tv.bAWkRw[Ve],Ee=-1;if(me=!1,De=!1,$.cf.compareStrings(ne,"Left")&&(me=!(Se>0)),$.cf.compareStrings(ne,"Right")&&(De=!0),!(Se<ie))break;var Ie=Se>0&&!fe&&!pe?0:we,Me=ie-Se,Ae=(s.setting.excludeNonBusinessHours?s.tv.iBsDays:7)-Ie;fe=!1,pe=!1,ue=0,Me>Ae&&(Me=Ae,De=!0),Se>0&&(me=!0);var _e,ke,He,Fe,Ne=Ie+Me;for(ke=0;ke<be.length&&(_e=be[ke],-1===Ee);ke++){for(Fe=0,He=Ie;He<Ne;He++)if(0===_e[He]&&Fe<Me){if(s.setting.hideExtraEvents?He===Ie?Fe++:Fe>0&&Fe++:Fe++,Fe===Me){Ee=ke;break}}else if(s.setting.hideExtraEvents)break;s.setting.hideExtraEvents&&Fe>0&&Fe<Me&&(Ee=ke,De=!0,pe=!0,ue=Fe)}if(Ie=Ie>c-1?c-1:Ie,s.setting.hideExtraEvents&&-1!==Ee||!s.setting.hideExtraEvents){-1===Ee&&(be.push([0,0,0,0,0,0,0]),Ee=be.length-1),_e=be[Ee];var xe=H+"-"+ ++Te;if(Ce=Ve+"|"+(Ee+1)+"|"+Ie+"|"+(pe?ue:Me),ve=le,ve+="height: "+(D+"px")+"; ","transparent"===z&&(ve+="border-width: 0px; "),J="<div id='"+xe+"' class='"+Q+"' style='"+ve+"'  data-pos='"+Ce+"' "+($.cf.isValid(k)?"data-droppableid='"+k+"'":"")+" title='' data-id='"+S.calEventId+"'>",J+="<a class='cEventLink' style='"+ce+"'>",he="",De&&me?(J+="<span class='"+(he="cPartialEvent")+" cPartialEventLeft' style='"+ge+"'></span>",J+="<span class='"+he+" cPartialEventRight' style='"+ge+"'></span>"):(De||me)&&(he="cPartialEvent",me&&(he+=" cPartialEventLeft"),De&&(he+=" cPartialEventRight"),J+="<span class='"+he+"' style='"+ge+"'></span>"),A?(J+="<span class='cdmvEventTitle'>"+E+"</span>",J+="<span class='cdmvEventIcon "+U+"' style='"+de+"'></span>"):(!l&&!1===b&&(1===Te&&!me&&N>1||1===N)&&(J+="<span class='cdmvEventTime'>"+s.getDateInFormat({date:T},d,s.setting.is24Hour,!0)+"</span>"),l||!1!==b||!(ie>1||(pe?ue:Me)>1||x>23)||De||(J+="<span class='cdmvEventTimeRight'>"+s.getDateInFormat({date:V},d,s.setting.is24Hour,!0)+"</span>"),o||$.cf.compareStrings(U,"Dot")||(J+="<span class='cdmvEventIcon "+U+"' style='"+de+"'></span>"),J+="<span class='cdmvEventTitle'>"+E+"</span>"),J+="</a>",J+="</div>",$(s.elem).find(".cdmvEventContMain").append(J),G="#"+xe,K=(X=$(s.elem).find(G)).find(".cEventLink"),Z={},W=s.getEventDateTimeString(T,V,b,"&&").split("&&"),Z.title=E,Z.startDateTime=W[0],Z.endDateTime=W[1],X.data("tooltipcontent",Z),s.setting.eventRendered&&s.setting.eventRendered.call(s,S,X,K,s.setting.visibleView,!1),($.cf.isValid(M)||s.setting.eventClicked)&&K.on($.CalenStyle.extra.sClickHandler,{url:M,eventId:S.calEventId,eventElemSelector:G,view:"MonthView",pluginId:s.tv.pluginId},s.__bindClick),A)for(B=$(s.elem).find(ae),P=new Date(re),O=0;O<L;O++)O>0&&(P.setDate(P.getDate()+1),ae="#cmvDay-"+P.getDate()+"-"+P.getMonth()+"-"+P.getFullYear(),B=$(s.elem).find(ae)),0===B.find(".cMarkedDayIndicator").length&&B.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>"),$.cf.isValid(j)&&(S.fromSingleColor?B.css({background:j}):B.css({background:$.cf.getRGBAString(j,.1)}));if(s.setting.hideExtraEvents){var Be=Ie+(pe?ue:Me);for(He=Ie;He<Be;He++)_e[He]=1,Se++;pe&&Ve--,ae="#cmvDay-"+(re=new Date(re.getTime()+(Be-Ie)*$.CalenStyle.extra.iMS.d)).getDate()+"-"+re.getMonth()+"-"+re.getFullYear(),we=$(s.elem).find(ae).index()}else for(He=Ie;He<Ne;He++)_e[He]=1,Se++}else{var Le=$(s.elem).find(".cdmvEventContMain"),Re=s.setDateInFormat({date:re},"START"),Pe=s.setDateInFormat({date:re},"END"),Oe=s.getEventCountAndIsMarkedDay(Re,Pe)[0],We=Re.getDate()+"-"+Re.getMonth()+"-"+Re.getFullYear();H="HiddenEvents-"+We;var je=Oe-be.length,ze=s.getNumberStringInFormat(je,0,!0),Ye=$(s.elem).find("#cmvDay-"+We),qe=Ye.closest(".cmvMonthTableRows").index(),Ue=Ye.index();if(Ue=s.setting.displayWeekNumInMonthView?Ue-1:Ue,Ce=qe+"|"+(be.length+1)+"|"+Ue+"|1",0===Le.find("#"+H).length&&je>0){var Qe="<span class='cHiddenEventsIndicator clickableLink' id='"+H+"' data-pos='"+Ce+"'>";Qe+=s.setting.hiddenEventsIndicatorLabel.replace("(count)",ze),Qe+="</span>",Le.append(Qe)}else Le.find("#"+H).html(s.setting.hiddenEventsIndicatorLabel.replace("(count)",ze));Se++,Ie!==c-1&&(fe=!0,Ve--),ae="#cmvDay-"+(re=new Date(re.getTime()+$.CalenStyle.extra.iMS.d)).getDate()+"-"+re.getMonth()+"-"+re.getFullYear(),we=$(s.elem).find(ae).index()}}}}else if($.cf.compareStrings(s.setting.visibleView,"MonthView")){f=".cmvEvent";var Ze=0,Je=0;for(s.compareDates(T,s.tv.dVSDt)<0&&(ne="Left",re=new Date(s.tv.dVSDt)),s.compareDates(s.tv.dVEDt,V)<0&&(ne="Right",oe=new Date(s.tv.dVEDt)),R=new Date(re),te=!0;!(s.__findWhetherDateIsVisibleInCurrentView(R,b||x>23,re,oe)||(R.setDate(R.getDate()+1),te=!1,s.compareDates(R,oe)>0)););if(re=new Date(R),ie=(ee=s.getNumberOfDaysOfEvent(b,re,oe,!0,!1,te))[0],se=ee[1],j=S.fromSingleColor?S.textColor:S.backgroundColor,j=$.cf.compareStrings(j,"")||$.cf.compareStrings(j,"transparent")?"transparent":j,A)for(P=new Date(re),O=0;O<ie;O++)O>0&&P.setDate(P.getDate()+1),ae="#cmvDay-"+P.getDate()+"-"+P.getMonth()+"-"+P.getFullYear(),B=$(s.elem).find(ae),$.cf.isValid(j)&&B.css({background:$.cf.getRGBAString(j,.1)});else{!0===b||se>23||(ne="",ie=1);for(var Ge=new Date(re),Xe=Ge.getTime(),Ke=1;Ke<=ie;Ke++){if(s.__findWhetherDateIsVisibleInCurrentView(Ge,b||x>23,re,oe)){ae="#cmvDay-"+Ge.getDate()+"-"+Ge.getMonth()+"-"+Ge.getFullYear();var et=!1;if(1===Ke&&(et=!0),s.setting.displayEventsInMonthView){if(Q="cmvEvent ",!0===b||x>23?(Q+="cmvEventAllDay ",0===s.compareDates(Ge,T)&&1===ie?Q+="cmvEventAllDaySingle ":0===s.compareDates(Ge,T)?Q+="cmvEventAllDayFirst ":0===s.compareDates(Ge,V)?Q+="cmvEventAllDayLast ":Q+="cmvEventAllDayMiddle "):Q+="cmvEventSmall ",s.compareDates(V,r)<0&&(Q+="cBlurredEvent "),_&&(Q+="EventDraggable cDragNDrop "),s.setting.isTooltipInMonthView&&(Q+="cEventTooltip "),Q+=H,E,I,1===b||!0===b||x>23){if(et){for(var tt,at=$(s.elem).find(".cmvMonthTableMain "+ae+" .cmvEventCont .cmvEventContAllDay").children(),it=[],nt=0;nt<at.length;nt++)it.push($(s.elem).find(at[nt]).position().top);var st=s._getHeightForAllDayEventInMonthView();tt=2;var rt=st+2;if(it.length>0&&0===Je)if(it.length<2)for(;1===s._arrayContains(it,tt);)tt+=rt;else Je=1;Ze=tt}}else{var ot=Math.floor(p/(h+y))-1;$(s.elem).find(".cmvMonthTableMain "+ae+" .cmvEventCont .cmvEventContSmall").children().length>=ot&&(Je=1)}0===Je&&(ve="background: "+j+"; ",ve+=" top: "+Ze+"px;",ve+=!0===b||x>23?" height: "+u+"px;":" height: "+h+"px; width: "+h+"px; margin: "+w+";",Z={},W=s.getEventDateTimeString(T,V,b,"&&").split("&&"),Z.title=E,Z.startDateTime=W[0],Z.endDateTime=W[1],J="<span id='"+H+"' class='"+Q+"' style='"+ve+"' "+($.cf.isValid(k)?"data-droppableid='"+k+"'":"")+" title='' data-id='"+S.calEventId+"'>",J+="</span>",!0===b||x>23?$(s.elem).find(".cmvMonthTableMain "+ae+" .cmvEventCont .cmvEventContAllDay").append(J):$(s.elem).find(".cmvMonthTableMain "+ae+" .cmvEventCont .cmvEventContSmall").append(J))}}Xe+=$.CalenStyle.extra.iMS.d,Ge.setTime(Xe)}G="."+H,Z={},W=s.getEventDateTimeString(T,V,b,"&&").split("&&"),Z.title=E,Z.startDateTime=W[0],Z.endDateTime=W[1],$(s.elem).find(G).data("tooltipcontent",Z),$(s.elem).find(G).on($.CalenStyle.extra.sClickHandler,{url:M,eventId:S.calEventId,eventElemSelector:G,view:"MonthView",pluginId:s.tv.pluginId},s.__bindClick)}}}}t?(s.setting.isTooltipInMonthView&&s._addTooltipInMonthView(".cEventTooltip.cHiddenEvent"),s.setting.isDragNDropInMonthView&&s._makeEventDraggableInMonthView(".EventDraggable.cHiddenEvent")):($.cf.compareStrings(s.setting.actionOnDayClickInMonthView,"ChangeDate")||s._displayEventOnDayClickInMonthView(),s.setting.hideExtraEvents&&s._hiddenEventsIndicatorActionHandler(),s.setting.displayEventsInMonthView&&(s.setting.isTooltipInMonthView&&s._addTooltipInMonthView(".cEventTooltip"),s.setting.isDragNDropInMonthView&&s._makeEventDraggableInMonthView(".EventDraggable")),null!==s.setting.datePickerObject&&s.setting.datePickerObject.refreshView(),s.setting.eventsAddedInView&&s.setting.eventsAddedInView.call(s,s.setting.visibleView,f))}else console.log("to._addEventsInMonthView - No Events");s.addRemoveViewLoader(!1,"cEventLoaderBg"),s.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_hiddenEventsIndicatorActionHandler:function(){var e=this;$(e.elem).find(".cHiddenEventsIndicator").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation();var a,i,n,s,r,o=$(this).attr("id"),l=$(e.elem).find(".cHiddenEventsCont");a=(o=o.replace("HiddenEvents-","")).split("-"),i=new Date(parseInt(a[2]),parseInt(a[1]),parseInt(a[0]),0,0,0,0),n=e.setDateInFormat({date:i},"START"),s=e.setDateInFormat({date:i},"END"),r=e.getArrayOfEventsForView(n,s);var d="#cmvDay-"+o,c=$(e.elem).find(d),v=c.position().left,g=c.closest(".cmvMonthTableRows").position().top,m=c.width(),D="cHiddenEventsContHeader";if(0===e.compareDates(i,$.CalenStyle.extra.dToday)&&(D+=" cHiddenEventsContToday"),$.cf.compareStrings(typeof e.setting.hiddenEventsIndicatorAction,"function"))e.setting.hiddenEventsIndicatorAction.call(e,i,r,!0);else if($.cf.compareStrings(typeof e.setting.hiddenEventsIndicatorAction,"string")&&$.cf.compareStrings(e.setting.hiddenEventsIndicatorAction,"ShowEventDialog")&&r.length>0){l.length>0&&l.remove();var f="<div class='cHiddenEventsCont' data-date='"+o+"'></span>";f+="<span class='"+D+"'>",f+=e.getDateInFormat({date:i},"DDD MMM dd, yyyy",!1,!0),f+="<span class='cHiddenEventsContClose'>&times;</span>",f+="</span>",f+="</div>",$(e.elem).find(".cdmvEventContMain").append(f);var p={};l=$(e.elem).find(".cHiddenEventsCont"),p.oArrEvents=r,p.dDayStart=n,p.dDayEnd=s,e._addEventsInMonthView(p),l.css({left:v,top:g,width:m+m/2}),e._adjustEventsInMonthView(!0),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(t){t.stopPropagation(),e._endHiddenEventsIndicatorHandlerAction()}),$(e.elem).find(".cdmvEventContMain, .cdmvEvent:not(.cHiddenEvent), .cdmvEvent:not(.cHiddenEvent) .cEventLink").on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(t){t.stopPropagation(),e._endHiddenEventsIndicatorHandlerAction()}),l.find(".cHiddenEventsContClose").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),e._endHiddenEventsIndicatorHandlerAction()})}})},_endHiddenEventsIndicatorHandlerAction:function(){var e=this;if($.cf.compareStrings(typeof e.setting.hiddenEventsIndicatorAction,"function"))e.setting.hiddenEventsIndicatorAction.call(e,null,null,!1);else if($.cf.compareStrings(typeof e.setting.hiddenEventsIndicatorAction,"string")&&$.cf.compareStrings(e.setting.hiddenEventsIndicatorAction,"ShowEventDialog")){var t=$(e.elem).find(".cHiddenEventsCont");t.find(".cHiddenEvent").remove(),t.remove()}},_displayEventOnDayClickInMonthView:function(){var e=this;if($.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"DisplayEventListDialog"))e._displayEventsForDayInDialog(),$(document).off($.CalenStyle.extra.sClickHandler+".CalenStyleDialog"),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(t){e._closeDialogOfEventsForDay()});else if(e.tv.bCMVDisEvLst){var t="";e.setting.displayEventsForPeriodInList&&(t=e.setting.displayEventsForPeriodInList.call(e,e.setDateInFormat({date:e.setting.selectedDate},"START"),e.setDateInFormat({date:e.setting.selectedDate},"END"))||""),$(e.elem).find(".cListOuterCont").html(t),e.setting.eventListAppended&&e.setting.eventListAppended.call(e)}},_adjustEventsInMonthView:function(e){var t=this;if($.cf.compareStrings(t.setting.visibleView,"DetailedMonthView")){var a=$(t.elem).find(".cmvMonthTableRows").css("min-height"),i=$.CalenStyle.extra.iEventHeights[t.setting.visibleView],n=$(t.elem).find(".cdmvEvent, .cHiddenEventsIndicator"),s=0,r=$(t.elem).find(".cdmvEventContMain").width(),o=0,l=30,d=0;if(a=parseInt(a.replace("px","")),t.setting.hideExtraEvents)s=$(t.elem).find(".cmvMonthTableMain").height(),o=$(t.elem).find(".cmvDay").width(),o=(o+=o/2)<200?200:o;else{s+=$(t.elem).find(".cmvMonthTableRowDayHeader").height();for(var c=0;c<t.tv.bAWkRw.length;c++){var v=30+t.tv.bAWkRw[c].length*i;v<a&&(v=a),$(t.elem).find("#cmvMonthTableRow"+(c+1)).css({height:v}),s+=v}$(t.elem).find(".cmvMonthTableMain").css({height:s}),$(t.elem).find(".cdmvEventContMain").css({height:s})}var g,m,D,f=$(t.elem).find(".cmvMonthTableMain").height();t.setting.hideExtraEvents?($(t.elem).find(".cmvTableContainer").height()<30&&$(t.elem).find(".cmvTableContainer").css({height:f}),$(t.elem).find(".cmvTableContainerOuter").height()<30&&$(t.elem).find(".cmvTableContainerOuter").css({height:f}),g=$(t.elem).find(".calendarContInner").height(),g=f+($(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").height():0),t.tv.bDisABar&&(g+=$(t.elem).find(".cActionBar").height()),$(t.elem).find(".calendarContInner").css({height:g}),m=g,t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&(m=g+$(t.elem).find(".cFilterBar").height()),$(t.elem).find(".calendarCont").css({height:m})):($(t.elem).find(".cmvTableContainer").css({height:f}),$(t.elem).find(".cmvTableContainerOuter").css({height:f}),g=f+($(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").height():0),t.tv.bDisABar&&(g+=$(t.elem).find(".cActionBar").height()),$(t.elem).find(".calendarContInner").css({height:g}),m=g,t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&(m+=$(t.elem).find(".cFilterBar").height()),$(t.elem).find(".calendarCont").css({height:m}),D=m,$(t.elem).find(".calendarCont").parent().css({height:D})),t.tv.bDisFBar&&$.cf.compareStrings(t.setting.filterBarPosition,"Bottom")&&$(t.elem).find(".cFilterBar").css({top:g}),t.tv.iDocHtPrev<$(document).height()?$(window).height()<$(document).height()&&t.adjustMonthTable():$(window).height()>$(document).height()&&t.adjustMonthTable();$.CalenStyle.extra.iBorderOverhead;$(t.elem).find(".cContHeader").length>0&&$(t.elem).find(".cContHeader").outerHeight(),t.tv.bDisABar&&$(t.elem).find(".cActionBar").outerHeight(),t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&$(t.elem).find(".cFilterBar").outerHeight(),t.tv.bCMVDisEvLst&&$(t.elem).find(".cListOuterCont").height();for(var p=0;p<n.length;p++){var u,h,y,w,C=n[p],S=$(t.elem).find(C).attr("data-pos").split("|"),T=parseInt(S[0])+1,V=parseInt(S[1]),b=parseInt(S[2]),E=parseInt(S[3]);if($(C).hasClass("cHiddenEvent"))u=0===d?30:u+i+2,h=10,y=o-25,l+=i+2,d++;else if(!e)if(u=$(t.elem).find("#cmvMonthTableRow"+T).position().top,h=$(t.elem).find(".cmvTableColumn"+b).position().left,t.setting.hideExtraEvents&&$(t.elem).find("#cmvMonthTableRow"+T).height()<40){var I=$(".cmvDayNumber").width();y=$(t.elem).find(".cmvTableColumn"+b).width()-(I-10),u+=6,h+=I}else u+=30+(V-1)*(i+1),h+=2*$.CalenStyle.extra.iBorderOverhead,y=$(t.elem).find(".cmvTableColumn"+b).width(),E>1&&(w=b+(E-1),y=$(t.elem).find(".cmvTableColumn"+w).position().left+2*$.CalenStyle.extra.iBorderOverhead+$(t.elem).find(".cmvTableColumn"+w).width()-h),y-=2*$.CalenStyle.extra.iBorderOverhead;if($(C).css({left:h,top:u,width:y}),!$(C).hasClass("cHiddenEventsIndicator")){var M=$(C).find(".cdmvEventTitle"),A=$(C).height(),_=$(C).find(".cdmvEventIcon"),k=null!==_?_.outerWidth(!0):0,H=$(C).find(".cdmvEventTime"),F=null!==H?H.outerWidth(!0):0,N=0,x=$(C).find(".cdmvEventTimeRight");null!==x&&(N=null!==x?x.outerWidth(!0):0);var B=$(C).find(".cPartialEventLeft").outerWidth(!0)+$(C).find(".cPartialEventRight").outerWidth(!0),L=y-(k+F+N+10*$.CalenStyle.extra.iBorderOverhead+B);M.css({height:A,"line-height":A+"px",width:L}),H.css({height:A,"line-height":A+"px"}),null!==x&&x.css({height:A,"line-height":A+"px"})}}var R=$(t.elem).find(".cHiddenEventsCont");if(t.setting.hideExtraEvents&&R.length>0){var P=R.position().left,O=R.position().top;l+=10,P=P+(o=o>r?r-10:o)>r?r-o-1:P,O=O+(l=l>s?s-10:l)>s?s-l-2:O,R.css({width:o,height:l,left:P,top:O})}t.setting.isDragNDropInMonthView&&t._makeEventDraggableInMonthView(".EventDraggable")}},_displayEventsForDayInDialog:function(){var e=this,t=$(e.elem).find(".calendarCont").parent().outerWidth(),a=$(e.elem).find(".calendarCont").parent().outerHeight();$(e.elem).find(".cmvDay").css("cursor","pointer"),$(e.elem).find(".cmvDay, .cmvDisplayAllEvents").off($.CalenStyle.extra.sClickHandler),$(e.elem).find(".cmvDay, .cmvDisplayAllEvents").on($.CalenStyle.extra.sClickHandler,function(i){i.stopPropagation();var n,s=$(this).hasClass("cmvDay")?$(this):$(this).parent(),r=s.attr("id"),o=e._getDateForDayIdInMonthView(r),l=e.setting.is24Hour?"HH:mm":"h[:m]sm",d="cmvDialog-"+o.getDate()+"-"+o.getMonth()+"-"+o.getFullYear(),c=$(e.elem).find(".cmvDialog");if(null!==c&&(n=c.attr("data-date"),c.remove(),n===d))return!1;var v=e.getArrayOfEventsForView(o,o),g={};if(g.x=i.pageX||i.originalEvent.touches[0].pageX||i.originalEvent.changedTouches[0].pageX,g.y=i.pageY||i.originalEvent.touches[0].pageY||i.originalEvent.changedTouches[0].pageY,e.setting.displayEventListDialog)e.setting.displayEventListDialog.call(e,o,v,g);else if(v.length>0){var m=s.parent().attr("id"),D=parseInt(m.replace("cmvMonthTableRow","")),f=0,p=o.getDay();f=p<e.setting.weekStartDay?6-e.setting.weekStartDay+p+1:p-e.setting.weekStartDay;var u=s.height(),h=s.width(),y=3*u,w=1.25*h;w=w<200?200:w,t=$(e.elem).find(".calendarCont").parent().outerWidth(),a=$(e.elem).find(".calendarCont").parent().outerHeight();var C="";C+="<div class='cmvDialog' data-date='"+d+"'>",C+="<span class='cmvDialogTooltip'></span>",C+="<div class='cmvDialogInnerCont'>",C+="<table class='cmvDialogTable'>";for(var S=0;S<v.length;S++){var T,V,b,E,I,M=v[S],A=M.title,_=M.id,k=M.start,H=M.end,F=M.isAllDay,N=M.isMarked,x="cmvDialogEvent",B="",L="",R=$.cf.isValid(e.setting.hideEventIcon[e.setting.visibleView])?e.setting.hideEventIcon[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventIcon.Default)&&e.setting.hideEventIcon.Default,P=$.cf.isValid(e.setting.hideEventTime[e.setting.visibleView])?e.setting.hideEventTime[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventTime.Default)&&e.setting.hideEventTime.Default,O="",W=e.compareDates(k,o),j=e.compareDates(H,o);F?(E="All Day",I=0!==j?$.cf.compareStrings(e.setting.duration,"Default")?e.__getDurationBetweenDates(o,H,"dhm",!1,!1):e.setting.duration.call(e,o,H,"dhm"):""):(E=0===W?e.getDateInFormat({date:k},l,e.setting.is24Hour,!0):0===j?"Ends "+e.getDateInFormat({date:H},l,e.setting.is24Hour,!0):"All Day",I=0===W&&0===j?$.cf.compareStrings(e.setting.duration,"Default")?e.__getDurationBetweenDates(k,H,"dhm",!1,!1):e.setting.duration.call(e,k,H,"dhm"):$.cf.compareStrings(e.setting.duration,"Default")?e.__getDurationBetweenDates(o,H,"dhm",!1,!1):e.setting.duration.call(e,o,H,"dhm")),$.cf.isValid(E)&&(O+="<span class='cmvDialogTimeStart'>"+E+"</span>"),$.cf.isValid(I)&&(O+="<span class='cmvDialogTimeDuration'>"+I+"</span>"),T=M.fromSingleColor?M.textColor:M.backgroundColor,V=M.fromSingleColor?M.backgroundColor:$.cf.addHashToHexcode(T,"0.1"),N?(x+=" cMarkedDayEvent",B="background: "+V+";",L="color: "+T+";",b=$.cf.isValid(M.icon)&&"Dot"!==M.icon?M.icon:"cs-icon-Mark"):("background: "+T+";",L="color: "+T+";",b=$.cf.isValid(M.icon)?M.icon:e.setting.eventIcon),C+="<tr id='cmvDialogEvent-"+_+"' class='"+x+"'>",C+="<td style='"+B+"'>",C+="<div>",C+="<div class='cmvDialogTitle'>"+A+"</div>",P||N||""===O||(C+="<div class='cmvDialogTime'>"+O+"</div>"),C+="</div>",C+="</td>",C+="<td class='cmvDialogIcon' style='"+B+"'>",N?C+="<span class='cmvDialogIconFont "+b+"' style='"+L+"'></span>":R||($.cf.compareStrings(b,"Dot")?C+="<span class='cmvDialogIconDot' style='"+(L="background: "+T+";")+"'></span>":C+="<span class='cmvDialogIconFont "+b+"' style='"+L+"'></span>"),C+="</td>",C+="</tr>",N?C+="<tr class='cmvDialogEventSeparator'><td colspan='2'></td></tr>":S!==v.length-1&&(C+="<tr class='cmvDialogEventSeparator'><td colspan='2'><hr></td></tr>")}if(C+="</table>",C+="</div>",C+="</div>",n!==d){$(e.elem).find(".calendarContInner").append(C);var z=$(e.elem).find(".cmvDialog").width();z=z<200?200:z,t<=400?(z=w=t-2,y=3*u):a<=400&&(y=4*u),$(e.elem).find(".cmvDialog").css({"max-height":y,"max-width":w,width:z}),t=$(e.elem).find(".cmvCalendarCont").width(),a=$(e.elem).find(".cmvCalendarCont").height();var Y=$(e.elem).find(".cmvDialog").width(),q=$(e.elem).find(".cmvDialog").height(),U=$(e.elem).find("#"+r).position().left,Q=$(e.elem).find("#"+m).position().top,Z=y-24;q=q>Z?Z:q;var J,G,X,K,ee=$(e.elem).find(".cmvMonthTableMain").position().top,te="",ae="";if(t<=400?D<=3?(X=-11,ae="cmvDialogTooltipBottom",te="10px 0px 0px 0px",y=(J=ee+Q+(u-10))+y>a?a-J:y):((J=ee+Q-(q+6))<50?(J=50,y=ee+Q-3-50,X=(q=ee+Q-3-50)-1):X=q-1,X=q-1,ae="cmvDialogTooltipTop",te="0px 0px 10px 0px"):D<=3?(X=-11,ae="cmvDialogTooltipBottom",te="10px 0px 0px 0px",y=(J=ee+Q+$(e.elem).find(".cmvDisplayAllEvents").height()-2)+y>a?a-J:y):((J=ee+Q-(q-3))<50?(J=50,y=ee+Q-3-50,X=(q=ee+Q-3-50)-1):X=q-1,ae="cmvDialogTooltipTop",te="0px 0px 10px 0px"),t<=400)G=0,K=U+h/2-10;else if(0===f)G=U+5,K=h-34;else if(f===(e.setting.excludeNonBusinessHours?e.tv.iBsDays:6))G=t-Y,K=Y-28;else{K=Y/2-14,G=U+h-10-Y/2-4;var ie,ne=$(e.elem).find(".cmvTableColumn0").position().left,se=G-Y/2;G+Y>=t&&(K+=(ie=G)-(G=t-Y-5)),se<=ne&&(ie=G,K-=(G=ne+5)-ie)}$(e.elem).find(".cmvDialogTooltip").addClass(ae),$(e.elem).find(".cmvDialogTooltip").css({top:X,left:K}),$(e.elem).find(".cmvDialog").css({top:J,left:G}),y-=24,$(e.elem).find(".cmvDialogInnerCont").css({margin:te,"max-height":y,"max-width":w}),$(e.elem).find(".cmvDialogClose").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),e._closeDialogOfEventsForDay()}),$(e.elem).find(".cmvDialog").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()}),e._addDialogEventAction()}if($("body").hasClass("br-ios")){var re=$(e.elem).find(".cmvDialogTable").height()+20;y=re>y?y:re,$(e.elem).find(".cmvDialogInnerCont").css({height:y}),D>3&&(J=ee+Q-(y+6),$(e.elem).find(".cmvDialog").css({top:J}),X=y-1,$(e.elem).find(".cmvDialogTooltip").css({top:X}))}}})},_closeDialogOfEventsForDay:function(){var e=$(this.elem).find(".cmvDialog");null!==e&&(e.animate({opacity:0},100),setTimeout(function(){e.remove()},100))},_addDialogEventAction:function(){var e=this;$(e.elem).find(".cmvDialogEvent").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation();var a=e.getEventWithId($(this).attr("data-id"));e.setting.eventInADialogClicked&&e.setting.eventInADialogClicked.call(e,a)})},_makeDayClickableInMonthView:function(){var e,t=this;(e=$.cf.compareStrings(t.setting.visibleView,"DetailedMonthView")?$(t.elem).find(".cdmvEventContMain"):$(t.elem).find(".cmvDay")).on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation();var i={};i.x=a.pageX||a.originalEvent.touches[0].pageX||a.originalEvent.changedTouches[0].pageX,i.y=a.pageY||a.originalEvent.touches[0].pageY||a.originalEvent.changedTouches[0].pageY;for(var n=t.__getElementsAtPoint(i.x,i.y),s=0;s<=n.length;s++){var r=$(n[s]);r.hasClass("cmvDay")&&(e=r)}if(e.hasClass("cmvDay")){$(t.elem).find(".cmvDay .cmvDayNumber").removeClass("cCurrentHighlightCircle cContHeaderButtonsHover");var o=e.attr("id");if(t.setting.selectedDate=t._getDateForDayIdInMonthView(o),0===$(t.elem).find(".cHiddenEventsCont").length&&t.setting.cellClicked&&t.setting.cellClicked.call(t,t.setting.visibleView,t.setting.selectedDate,!0,i),$.cf.compareStrings(t.setting.visibleView,"MonthView")&&$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"ModifyEventList")){0!==t.compareDates($.CalenStyle.extra.dToday,t.setting.selectedDate)&&e.find(".cmvDayNumber").addClass("cCurrentHighlightCircle");var l="";t.setting.displayEventsForPeriodInList&&(l=t.setting.displayEventsForPeriodInList.call(t,t.setDateInFormat({date:t.setting.selectedDate},"START"),t.setDateInFormat({date:t.setting.selectedDate},"END"))||""),$(t.elem).find(".cListOuterCont").html(l),t.setting.eventListAppended&&t.setting.eventListAppended.call(t)}}})},_getDateForDayIdInMonthView:function(e){var t=e.split("-");return new Date(t[3],t[2],t[1],0,0,0,0)},_addTooltipInMonthView:function(e){var t=this;$(t.elem).find(e).tooltip({content:function(){var e="";if($.cf.compareStrings(t.setting.eventTooltipContent,"Default")){var a=$(this).data("tooltipcontent");void 0!==a.title&&(e+="<div class='cTooltipTitle'>"+a.title+"</div>"),void 0===a.startDateTime&&void 0!==a.endDateTime||(e+="<div class='cTooltipTime'>",void 0!==a.startDateTime&&(e+=a.startDateTime),void 0!==a.endDateTime&&(e+="<br/>"+a.endDateTime),e+="</div>")}else{var i=t.getEventWithId($(this).attr("data-id"));e=t.setting.eventTooltipContent.call(t,i)}return e},position:{my:"center bottom-15",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("tooltip-arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}}})},_makeEventDraggableInMonthView:function(e){var t,a,i,n=this;$.cf.compareStrings(n.setting.visibleView,"DetailedMonthView")?t=$.CalenStyle.extra.iEventHeights[n.setting.visibleView]:$.cf.compareStrings(n.setting.visibleView,"MonthView")&&(t=n._getHeightForAllDayEventInMonthView()),a=$(n.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").width(),i=$(n.elem).find(".cmvMonthTableRows").css("height"),$.cf.compareStrings(n.setting.visibleView,"MonthView")&&(i=$(n.elem).find(".cmvMonthTableRows").css("height")),i=parseInt(i.replace("px",""))||0;var s,r,o,l,d,c=$(n.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").offset().left,v=$(n.elem).find("#cmvMonthTableRow1 .cmvTableColumns:last").offset().left,g=$(n.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").offset().top,m=$(n.elem).find("#cmvMonthTableRow"+n.tv.iWkInMonth+" .cmvTableColumn0").offset().top+i-t;$.cf.compareStrings(n.setting.visibleView,"MonthView")&&(m-=2*t),$(n.elem).find(e).draggable({zIndex:100,scope:"Events",containment:[c,g,v,m],scroll:!1,revertDuration:300,start:function(){var e=(s=$(this)).clone();if($(e).removeClass("ui-draggable-dragging").addClass("cEventClone cEventBeingDragged"),s.parent().append(e),r=s.attr("data-id"),o=n.getEventWithId(r),".Event-"+r,l=null,s.hasClass("cEventOnlyText")?s.addClass("cEditingEvent"):s.addClass("cEditingEvent cEditingEventUI"),null!==o.start&&(l=o.start),n.tv.draggableParent="cmvDay-"+l.getDate()+"-"+l.getMonth()+"-"+l.getFullYear(),s.css({position:"absolute"}),s.css({width:a,height:t}),n.setting.hideExtraEvents){d=s.find(".cdmvEventTitle").width();var i=s.find(".cdmvEventIcon"),c=null!==i?i.outerWidth(!0):0,v=s.find(".cdmvEventTime"),g=null!==v?v.outerWidth(!0):0,m=0,D=s.find(".cdmvEventTimeRight");null!==D&&(m=null!==D?D.outerWidth(!0):0);var f=s.find(".cPartialEventLeft").outerWidth(!0)+s.find(".cPartialEventRight").outerWidth(!0),p=a-(c+g+m+10*$.CalenStyle.extra.iBorderOverhead+f);s.find(".cdmvEventTitle").css({width:p})}},revert:function(){return s=$(this),n.setting.hideExtraEvents&&s.find(".cdmvEventTitle").css({width:d}),$(n.elem).find(".cmvDay").removeClass("cActivatedCell"),n.tv.bDroppedInDifferent&&(n.setting.isTooltipInMonthView&&n._addTooltipInMonthView(".cEventTooltip"),n.setting.isDragNDropInMonthView&&n._makeEventDraggableInMonthView(".EventDraggable")),!0}})},adjustMonthTable:function(){var e=this,t=$(e.elem).outerWidth(),a=$(e.elem).outerHeight(),i=$.cf.getSizeValue($(e.elem),"max-width"),n=$.cf.getSizeValue($(e.elem).find(".cmvMonthTable"),"min-height")||0;e.tv.iDocHtPrev=$(document).height(),a+=2*$.CalenStyle.extra.iBorderOverhead,e._closeDialogOfEventsForDay(),t=i&&t>i?i:t;var s,r,o,l,d,c,v,g,m,D,f,p=a;e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right")?t-=e.setting.filterBarWidth:($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(p-=e.setting.filterBarHeight,$(e.elem).find(".cFilterBar").css({width:t}))),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$(e.elem).find(".calendarContInner").css({height:p}),$(e.elem).find(".calendarContInner").css({width:t}),e.__adjustHeader(),$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:t}),t>=300&&a>=300?($(e.elem).find(".cmvDayHeader").removeClass("cmvThinBorderBottom cmvThinBorder").addClass("cmvThinBorderBottom"),$(e.elem).find(".cmvWeekNumber").removeClass("cmvThinBorderRight cmvThinBorder").addClass("cmvThinBorderRight"),$(e.elem).find(".cmvTableContainerOuter").addClass("cmvThinBorder")):($(e.elem).find(".cmvWeekNumber").removeClass("cmvThinBorderRight cmvThinBorder").addClass("cmvThinBorder"),$(e.elem).find(".cmvTableContainerOuter").addClass("cmvThinBorder")),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ModifyEventList")&&e.tv.bCMVDisEvLst&&(e.setting.displayEventsInMonthView?(s=a/2)<300-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)&&(s=300-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)):a>t?s=t:(s=a/2)<300-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)&&(s=300-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)),0!==n&&(s=n),$(e.elem).find(".cmvMonthTableMain").css({height:s})),t>500&&a>500?($.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ModifyEventList")&&e.tv.bCMVDisEvLst?o=s:(o=a-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0),e.tv.bDisABar&&(o-=$(e.elem).find(".cActionBar").outerHeight()),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(o-=$(e.elem).find(".cFilterBar").outerHeight())),$(e.elem).find(".calendarCont").css({height:a}),$(e.elem).find(".cContHeader").length>0&&$(e.elem).find(".cContHeader").css({width:t}),d=(l=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerWidth():$(e.elem).find(".calendarContInner").outerWidth())/(e.setting.excludeNonBusinessHours?e.tv.iBsDays:7),e.setting.displayWeekNumInMonthView&&(d>50?(d=(l-50)/(e.setting.excludeNonBusinessHours?e.tv.iBsDays:7),$(e.elem).find(".cmvWeekNumber").css({width:50})):$(e.elem).find(".cmvWeekNumber").css({width:d})),$(e.elem).find(".cmvTableColumns").css({width:d}),c=$(e.elem).find(".cmvMonthTableRowDayHeader").outerHeight(),$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?r=(v=(o-c)/e.tv.iWkInMonth)-((g=$(e.elem).find(".cmvDayNumber").height()+2)>(m=$(e.elem).find(".cmvDisplayAllEvents").height())?g:m):$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(v=(o-c)/e.tv.iWkInMonth,(e.tv.bDisABar||e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(o+=$.CalenStyle.extra.iBorderOverhead)),$(e.elem).find(".cmvTableContainerOuter").css({height:o,width:l}),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(l-=$.CalenStyle.extra.iBorderOverhead,o-=$.CalenStyle.extra.iBorderOverhead),$(e.elem).find(".cmvTableContainer").css({height:o,width:l,top:-$.CalenStyle.extra.iBorderOverhead,left:-$.CalenStyle.extra.iBorderOverhead}),D=0,$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")?($(e.elem).find(".cmvMonthTableMain").css({top:-$.CalenStyle.extra.iBorderOverhead}),e.setting.hideExtraEvents&&($(e.elem).find(".cmvMonthTableRows").css({height:v}),e.tv.iMxEvRw=Math.floor((v-30)/$.CalenStyle.extra.iEventHeights[e.setting.visibleView]),(D=c+e.tv.iWkInMonth*v)>o&&(o=D))):($(e.elem).find(".cmvMonthTableRows").css({height:v}),v<60&&$(e.elem).find(".cmvMonthTableRows").css({"min-height":v}),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.eventIndicatorInMonthView,"Custom")&&(f=v-g,$(e.elem).find(".cmvMonthTableRowCustom").css({"max-height":f}))),$(e.elem).find(".cmvMonthTableMain").css({height:o,width:l}),$(e.elem).find(".cdmvEventContMain").css({height:o,width:l}),$(e.elem).find(".cmvDayHeader").removeClass("cmvThinBorderBottom cmvThinBorder").addClass("cmvThinBorderBottom")):($(e.elem).find(".cContHeader").length>0&&$(e.elem).find(".cContHeader").css({width:t}),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ModifyEventList")&&e.tv.bCMVDisEvLst?(o=s,$(e.elem).find(".cmvMonthTable").css({height:o})):e.tv.bDisABar||e.tv.bDisFBar?(o=a-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0),e.tv.bDisABar&&(o-=e.setting.actionBarHeight),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(o-=e.setting.filterBarHeight)):o=a-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0),d=(l=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerWidth():$(e.elem).find(".calendarContInner").outerWidth())/(e.setting.excludeNonBusinessHours?e.tv.iBsDays:7),e.setting.displayWeekNumInMonthView&&(d>50?(d=(l-50)/(e.setting.excludeNonBusinessHours?e.tv.iBsDays:7),$(e.elem).find(".cmvWeekNumber").css({width:50})):$(e.elem).find(".cmvWeekNumber").css({width:d})),$(e.elem).find(".cmvTableColumns").css({width:d}),c=$(e.elem).find(".cmvMonthTableRowDayHeader").outerHeight(),$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?r=(v=(o-c)/e.tv.iWkInMonth)-((g=$(e.elem).find(".cmvDayNumber").height()+2)>(m=$(e.elem).find(".cmvDisplayAllEvents").height())?g:m):e.setting.hideExtraEvents&&(v=(o-c)/e.tv.iWkInMonth),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(e.tv.bDisABar||e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(o+=$.CalenStyle.extra.iBorderOverhead),$(e.elem).find(".cmvTableContainerOuter").css({height:o,width:l}),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(l-=$.CalenStyle.extra.iBorderOverhead,o-=$.CalenStyle.extra.iBorderOverhead),$(e.elem).find(".cmvTableContainer").css({height:o,width:l,top:-$.CalenStyle.extra.iBorderOverhead,left:-$.CalenStyle.extra.iBorderOverhead}),D=0,$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")?($(e.elem).find(".cmvMonthTableMain").css({top:-$.CalenStyle.extra.iBorderOverhead}),e.setting.hideExtraEvents&&($(e.elem).find(".cmvMonthTableRows").css({height:v}),e.tv.iMxEvRw=Math.floor((v-30)/$.CalenStyle.extra.iEventHeights[e.setting.visibleView]),(D=c+e.tv.iWkInMonth*v)>o&&(o=D))):($(e.elem).find(".cmvMonthTableRows").css({height:v}),v<60&&$(e.elem).find(".cmvMonthTableRows").css({"min-height":v}),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.eventIndicatorInMonthView,"Custom")&&(f=v-g,$(e.elem).find(".cmvMonthTableRowCustom").css({"max-height":f}))),$(e.elem).find(".cmvMonthTableMain").css({height:o,width:l}),$(e.elem).find(".cdmvEventContMain").css({height:o,width:l}));var u=r/2;$(e.elem).find(".cmvEventContSmall").css({height:u}),$(e.elem).find(".cmvEventContAllDay").css({height:u});var h=e._getHeightForAllDayEventInMonthView(),y=e._getHeightForSmallEventInMonthView(),w=e._getMarginValueForSmallEventInMonthView(),C=w+"px "+w+"px;";$(e.elem).find(".cmvEventSmall").css({width:y,height:y,margin:C,top:0}),$(e.elem).find(".cmvEventAllDay").css({height:h}),t>=550?$(e.elem).find(".cmvMonthTableRows .cmvWeekNumber").addClass("clickableLink"):$(e.elem).find(".cmvMonthTableRows .cmvWeekNumber").removeClass("clickableLink");var S=$(e.elem).find(".calendarCont").height();e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(S-=$(e.elem).find(".cFilterBar").height());for(var T=0;T<e.setting.sectionsList.length;T++){var V=e.setting.sectionsList[T];$.cf.compareStrings(V,"Calendar")?(S-=($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)+4,S-=$(e.elem).find(".cmvMonthTable").height()):$.cf.compareStrings(V,"ActionBar")&&(S-=$(e.elem).find(".cActionBar").height()+1)}$(e.elem).find(".cListOuterCont").css({height:S});var b=$(e.elem).find(".cmvMonthTableMain").position().left;$(e.elem).find(".cContHeader").length>0?($(e.elem).find(".cContHeader").position().top,$(e.elem).find(".cContHeader").outerHeight()):$(e.elem).position().top,$(e.elem).find(".cdmvEventContMain").css({left:b,top:-$.CalenStyle.extra.iBorderOverhead}),e._adjustEventsInMonthView(),e.setCalendarBorderColor(),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&e.setting.isDragNDropInMonthView&&e._makeEventDraggableInMonthView(".EventDraggable"),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&(t<=400?$(e.elem).find(".cmvDisplayAllEvents").remove():0===$(e.elem).find(".cmvDisplayAllEvents").length&&$(e.elem).find(".cmvDay").prepend("<span class='cmvDisplayAllEvents'>..</span>"))},_getHeightForAllDayEventInMonthView:function(){var e=$(this.elem).find(".cmvEventContAllDay").height(),t=Math.floor(e/5);return t<2?t=2:t>4&&(t=4),t},_getHeightForSmallEventInMonthView:function(){var e=$(this.elem).find(".cmvEventContAllDay").height(),t=Math.floor(e/2);return t<2?t=2:t>10&&(t=10),t},_getMarginValueForSmallEventInMonthView:function(){var e=this._getHeightForSmallEventInMonthView();return e<=3?1:e>3?2:void 0},_setMonthStrings:function(){var e=this,t=$.cf.compareStrings(e.setting.visibleView,"DatePicker"),a=t?"cContHeaderLabelUnderline":"",i=t?"clickableLink":"",n="<span class='cContHeaderLabelMonth "+i+"'><span class='"+a+"'><b>"+e.getDateInFormat({iDate:{M:e.setting.selectedDate.getMonth()}},"MMMM",!1,!0)+"</b></span></span>";n+="<span class='cContHeaderLabelYear "+i+"'><span class='"+a+"'>"+e.getNumberStringInFormat(e.setting.selectedDate.getFullYear(),0,!0)+"</span></span>",e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,n,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(n),$.cf.compareStrings(e.setting.visibleView,"DatePicker")&&($(e.elem).find(".cContHeaderLabelMonth").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),new function(e,t){function a(){$(e.elem).find(".cmlvOuterCont").length>0?n():function(){var s="";s+="<div class='cmlvOuterCont "+(t?"cmlvPopup":"cmlvFull")+"'>",s+="<div class='cmlvCont'>",t&&(s+="<span class='cmlvContTooltip cmlvContTooltipBottom'></span>");s+="<table class='cmlvMonthListTable'>";for(var r=0,o=0;o<3;o++){s+="<tr>";for(var l=0;l<4;l++){var d="cmlvMonth"+r;e.setting.selectedDate.getMonth()===r?s+="<td id='"+d+"' class='cmlvMonth cmlvMonthCurrent'>"+e.getDateInFormat({iDate:{M:r}},"MMM",!1,!0)+"</td>":s+="<td id='"+d+"' class='cmlvMonth cmlvMonthOther clickableLink'>"+e.getDateInFormat({iDate:{M:r}},"MMM",!1,!0)+"</td>",r++}s+="</tr>"}s+="</table>",s+="</div>",s+="</div>",$(e.elem).find(".calendarCont").append(s),i(),e.setting.adjustViewOnWindowResize&&$(window).bind("resize."+e.tv.pluginId,function(e){i()});$.CalenStyle.extra.bTouchDevice||$(e.elem).find(".cmlvMonth").hover(function(t){var a=$(this).attr("id");(a=a.replace("cmlvMonth",""))!==e.setting.selectedDate.getMonth()&&$(this).addClass("cmlvMonthOtherHover")},function(t){var a=$(this).attr("id");(a=a.replace("cmlvMonth",""))!==e.setting.selectedDate.getMonth()&&$(this).removeClass("cmlvMonthOtherHover")});$(e.elem).find(".cmlvMonth").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation();var a=$(this).attr("id"),i=parseInt(a.replace("cmlvMonth",""));!function(t){var a=e.setting.selectedDate.getMonth();$(e.elem).find("#cmlvMonth"+a).removeClass("cmlvMonthCurrent cmlvMonthOtherHover").addClass("cmlvMonthOther clickableLink"),e.setting.selectedDate.setDate(1),e.setting.selectedDate.setMonth(t),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType=t===a-1?"Prev":t===a+1?"Next":"Load";e.modifyCalenStyleObject(e),$(e.elem).find("#cmlvMonth"+t).removeClass("cmlvMonthOther clickableLink cmlvMonthOtherHover").addClass("cmlvMonthCurrent"),setTimeout(function(){$.cf.compareStrings(e.setting.visibleView,"AgendaView")?(e.updateAgendaView(!0),e.adjustAgendaView()):(e.updateMonthTableAndContents(!0),e.adjustMonthTable()),n()},e.setting.transitionSpeed)}(i)}),$(e.elem).find(".cmlvOuterCont").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation(),a()})}(),$(document).on($.CalenStyle.extra.sClickHandler+".MonthPicker",function(e){n()})}function i(){var a=$(e.elem).find(".cmlvCont");if(t){var i=$(e.elem).find(".cContHeaderLabelMonth"),n=a.width()/2,s=$(e.elem).find(".calendarContInner").position().top+i.height()+4+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),r=i.width(),o=i.position().left||$(e.elem).find(".cContHeaderLabelOuter").position().left,l=o+r/2,d=$(e.elem).find(".calendarContInner").position().left+(l-n)-4;d=d<0?2:d,a.css({top:s,left:d}),$(".cmlvContTooltipBottom").css({left:n-5})}$(e.elem).find(".cContHeader").length>0?a.css({"font-size":$(e.elem).find(".cContHeader").css("font-size")}):a.css({"font-size":$(e.elem).css("font-size")}),e.setCalendarBorderColor()}function n(){e.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+e.tv.pluginId,i),$(e.elem).find(".cmlvOuterCont").remove()}this.showOrHideMonthList=a}(e,!1).showOrHideMonthList()}),$(e.elem).find(".cContHeaderLabelYear").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),new function(e,t){var a,i;function n(){$(e.elem).find(".cylvOuterCont").length>0?o():function(){var o=e.setting.selectedDate.getFullYear();i=12+(a=o-5);var l="";l+="<div class='cylvOuterCont "+(t?"cylvPopup":"cylvFull")+"'>",l+="<div class='cylvCont'>",t&&(l+="<span class='cylvContTooltip cylvContTooltipBottom'></span>");l+="<table class='cylvYearListOuterTable'>",l+="<tr class='cylvTableHeaderRow'>",l+="<td class='cylvTableColumns cylvPrevYears clickableLink cs-icon-Prev'></td>",l+="<td class='cylvTableColumns cylvSelectedYear clickableLink'>"+e.getNumberStringInFormat(o,0,!0)+"</td>",l+="<td class='cylvTableColumns cylvNextYears clickableLink cs-icon-Next'></td>",l+="</tr>",l+="<tr class='cylvTableContRow'>",l+="<td colspan='3'>",l+="<table class='cylvYearListTable cylvYearListTableMain'>",l+="</table>",l+="</td>",l+="</tr>",l+="</table>",l+="</div>",l+="</div>",$(e.elem).find(".calendarCont").append(l),$(e.elem).find(".cylvPrevYears").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),function(){$(e.elem).find(".cylvPrevYears").addClass("cylvTableColumnsHover");var t=$(e.elem).find(".cylvYearListTableMain"),n=t.position().top,s=t.position().left,o=t.width(),l=t.height(),d=t.clone();$(d).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(d).css({position:"absolute",top:n,left:s,height:l}),t.parent().append(d),s+=o,$(d).animate({left:s},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cylvYearListTableTemp").remove()},e.setting.transitionSpeed),$(e.elem).find(".cylvPrevYears").removeClass("cylvTableColumnsHover"),i=12+(a-=12),r()}()}),$(e.elem).find(".cylvSelectedYear").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),function(){var t=a,n=e.setting.selectedDate.getFullYear();if(i=12+(a=n-5),t!==a){$(e.elem).find(".cylvSelectedYear").addClass("cylvTableColumnsClick");var s=$(e.elem).find(".cylvYearListTableMain"),o=s.position().top,l=s.position().left,d=s.width(),c=s.height(),v=s.clone();$(v).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(v).css({position:"absolute",top:o,left:l,height:c}),s.parent().append(v),t<a?l-=d:l+=d,$(v).animate({left:l},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cylvYearListTableTemp").remove()},e.setting.transitionSpeed),$(e.elem).find(".cylvSelectedYear").removeClass("cylvTableColumnsClick"),r()}}()}),$(e.elem).find(".cylvNextYears").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),function(){$(e.elem).find(".cylvNextYears").addClass("cylvTableColumnsHover");var t=$(e.elem).find(".cylvYearListTableMain"),n=t.position().top,s=t.position().left,o=t.width(),l=t.height(),d=t.clone();$(d).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(d).css({position:"absolute",top:n,left:s,height:l}),t.parent().append(d),s-=o,$(d).animate({left:s},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cylvYearListTableTemp").remove()},e.setting.transitionSpeed),$(e.elem).find(".cylvNextYears").removeClass("cylvTableColumnsHover"),i=(a+=12)+12,r()}()}),s(),e.setting.adjustViewOnWindowResize&&$(window).bind("resize."+e.tv.pluginId,function(e){s()});$.CalenStyle.extra.bTouchDevice||($(e.elem).find(".cylvPrevYears, .cylvNextYears").hover(function(e){$(this).addClass("cylvTableColumnsHover")},function(e){$(this).removeClass("cylvTableColumnsHover")}),$(e.elem).find(".cylvSelectedYear").hover(function(e){$(this).addClass("cylvSelectedYearHover")},function(e){$(this).removeClass("cylvSelectedYearHover")}));r(),$(e.elem).find(".cylvOuterCont").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation(),n()})}(),$(document).on($.CalenStyle.extra.sClickHandler+".YearPicker",function(e){o()})}function s(){var a=$(e.elem).find(".cylvCont"),i=$(".cylvTableContRow").height();if($(".cylvYearListTable").css({height:i}),t){var n=$(e.elem).find(".cContHeaderLabelYear"),s=a.width()/2,r=$(e.elem).find(".calendarContInner").position().top+n.height()+4+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),o=n.width(),l=n.position().left||$(e.elem).find(".cContHeaderLabelOuter").position().left,d=l+o/2,c=$(e.elem).find(".calendarContInner").position().left+(d-s)-4;c=c<0?2:c,a.css({top:r,left:c}),$(".cylvContTooltipBottom").css({left:s-5})}$(e.elem).find(".cContHeader").length>0?a.css({"font-size":$(e.elem).find(".cContHeader").css("font-size")}):a.css({"font-size":$(e.elem).css("font-size")}),e.setCalendarBorderColor()}function r(){for(var t=e.setting.selectedDate.getFullYear(),n=0,s="",r=a;r<i;r++){0!==n&&4!==n&&8!==n||(s+="<tr class='cylvTableRow'>");var l="cylvYear"+r;s+=t===r?"<td id='"+l+"' class='cylvYear cylvYearCurrent'>"+e.getNumberStringInFormat(r,0,!0)+"</td>":"<td id='"+l+"' class='cylvYear cylvYearOther clickableLink'>"+e.getNumberStringInFormat(r,0,!0)+"</td>",3!==n&&7!==n&&11!==n||(s+="</tr>"),n++}$(e.elem).find(".cylvYearListTableMain").html(s),$(e.elem).find(".cylvYear").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation();var a=$(this).attr("id"),i=parseInt(a.replace("cylvYear",""));!function(t){var a=e.setting.selectedDate.getFullYear();$(e.elem).find("#cylvYear"+a).removeClass("cylvYearCurrent cylvYearOtherHover").addClass("cylvYearOther"),e.tv.sLoadType="Load",e.setting.selectedDate.setFullYear(t),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.modifyCalenStyleObject(e),setTimeout(function(){$.cf.compareStrings(e.setting.visibleView,"AgendaView")?(e.updateAgendaView(!0),e.adjustAgendaView()):(e.updateMonthTableAndContents(!0),e.adjustMonthTable()),$(e.elem).find("#cylvYear"+t).removeClass("cylvYearOther cylvYearOtherHover").addClass("cylvYearCurrent"),o()},e.setting.transitionSpeed)}(i)}),$.CalenStyle.extra.bTouchDevice||$(e.elem).find(".cylvYear").hover(function(t){$(this).html()!==e.setting.selectedDate.getFullYear()&&$(this).addClass("cylvYearOtherHover")},function(t){$(this).html()!==e.setting.selectedDate.getFullYear()&&$(this).removeClass("cylvYearOtherHover")})}function o(){e.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+e.tv.pluginId,s),$(e.elem).find(".cylvOuterCont").remove()}this.showOrHideYearList=n}(e,!1).showOrHideYearList()}))},__goToPrevMonthView:function(){var e=this;if($(e.elem).find(".cmlvOuterCont").length<=0&&$(e.elem).find(".cylvOuterCont").length<=0){if(e.setting.showTransition){var t=$(e.elem).find(".cmvMonthTableMain").width(),a=$(e.elem).find(".cmvMonthTableMain").position().left,i=0;($.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker"))&&(i=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top);var n,s,r,o=$(e.elem).find(".cmvMonthTableMain").clone();$(o).removeClass("cmvMonthTableMain").addClass("cmvMonthTableTemp"),$(o).css({position:"absolute",top:i,left:a}),$(e.elem).find(".cmvMonthTableMain").parent().append(o),$(o).css({"z-index":101}),a+=t,$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(n=$(e.elem).find(".cdmvEventContMain").position().left,s=$(e.elem).find(".cdmvEventContMain").width(),r=$(e.elem).find(".cdmvEventContMain").clone(),$(r).removeClass("cdmvEventContMain").addClass("cdmvEventContTemp"),$(e.elem).find(".cdmvEventContMain").parent().append(r),$(r).css({"z-index":102}),n+=s,$(r).animate({left:n},e.setting.transitionSpeed)),$(o).animate({left:a},e.setting.transitionSpeed),setTimeout(function(){$(o).remove(),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&$(r).remove()},e.setting.transitionSpeed)}e.tv.dCMDt=new Date(e.tv.dPMDt),e._setNextPreviousMonthDates();var l=e.tv.dCMDt.getMonth(),d=e.tv.dCMDt.getFullYear(),c=e.__getNumberOfDaysOfMonth(l,d),v=e.setting.selectedDate.getDate();v>c&&(v=c);var g=e.setting.selectedDate.getHours(),m=e.setting.selectedDate.getMinutes(),D=e.setting.selectedDate.getSeconds();e.setting.selectedDate=e.setDateInFormat({iDate:{y:d,M:l,d:v,H:g,m:m,s:D}},""),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.updateMonthTableAndContents(!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)}},__goToNextMonthView:function(){var e=this;if($(e.elem).find(".cmlvOuterCont").length<=0&&$(e.elem).find(".cylvOuterCont").length<=0){if(e.setting.showTransition){var t=$(e.elem).find(".cmvMonthTableMain").width(),a=$(e.elem).find(".cmvMonthTableMain").position().left,i=0;($.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker"))&&(i=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top);var n,s,r,o=$(e.elem).find(".cmvMonthTableMain").clone();$(o).removeClass("cmvMonthTableMain").addClass("cmvMonthTableTemp"),$(o).css({position:"absolute",top:i,left:a}),$(o).css({"z-index":101}),a-=t,$(e.elem).find(".cmvMonthTableMain").parent().append(o),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(n=$(e.elem).find(".cdmvEventContMain").position().left,s=$(e.elem).find(".cdmvEventContMain").width(),r=$(e.elem).find(".cdmvEventContMain").clone(),$(r).removeClass("cdmvEventContMain").addClass("cdmvEventContTemp"),$(e.elem).find(".cdmvEventContMain").parent().append(r),$(r).css({"z-index":102}),n-=s,$(r).animate({left:n},e.setting.transitionSpeed)),$(o).animate({left:a},e.setting.transitionSpeed),setTimeout(function(){$(o).remove(),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&$(r).remove()},e.setting.transitionSpeed)}e.tv.dCMDt=new Date(e.tv.dNMDt),e._setNextPreviousMonthDates();var l=e.tv.dCMDt.getMonth(),d=e.tv.dCMDt.getFullYear(),c=e.__getNumberOfDaysOfMonth(l,d),v=e.setting.selectedDate.getDate();v>c&&(v=c);var g=e.setting.selectedDate.getHours(),m=e.setting.selectedDate.getMinutes(),D=e.setting.selectedDate.getSeconds();e.setting.selectedDate=e.setDateInFormat({iDate:{y:d,M:l,d:v,H:g,m:m,s:D}},""),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.updateMonthTableAndContents(!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)}},highlightDatesInDatePicker:function(e){null===e&&void 0===e||(this.tv.dHighlightDPV=e,this.__highlightDaysInDatePicker())},__highlightDaysInDatePicker:function(){var e=this;if($(".cmvDay").removeClass("cDatePickerHighlightBg"),!($.cf.compareStrings(e.setting.parentObject.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.parentObject.setting.visibleView,"DetailedMonthView")||null===e.tv.dHighlightDPV&&void 0===e.tv.dHighlightDPV))for(var t=0;t<e.tv.dHighlightDPV.length;t++){var a=e.tv.dHighlightDPV[t],i="#cmvDay-"+a.getDate()+"-"+a.getMonth()+"-"+a.getFullYear();$(e.elem).find(i).addClass("cDatePickerHighlightBg")}}}),a.prototype=$.extend(a.prototype,{_getTimeSlotsArrayForCurrentView:function(){var e,t,a,i,n,s,r,o,l=this,d=$.cf.compareStrings(l.setting.visibleView,"DayEventDetailView")?1:l.tv.iNoVDay,c=24*l.tv.iUTmSlt;for(l.tv.bADVCur=[],l.tv.sADVInfo=[],t=0;t<d;t++){e=[];for(var v=0;v<24;v++)for(a=0;a<l.tv.iUTmSlt;a++)e.push(0);e.push(0),l.tv.bADVCur.push(e)}var g=new Date(l.tv.dVDSDt),m=l.tv.dVDSDt.getTime();for(t=0;t<d;t++){if(l.tv.bABsDays[g.getDay()]||!l.setting.excludeNonBusinessHours){e=l.tv.bADVCur[t];var D=l._getRestrictedSectionForCurrentView(g),f=l._getBusinessHoursForCurrentView(g);if(f.length>0)for(i=0;i<f.length;i++){var p=f[i],u=new Date(p[0]),h=new Date(p[1]);for(n=Math.floor((h.getTime()-u.getTime())/l.tv.iUTmMS),s=u.getHours(),r=u.getMinutes(),o=Math.floor(r/l.setting.unitTimeInterval),a=0;a<n;a++)e[0===s?o:s*l.tv.iUTmSlt+o]=1,r+=l.setting.unitTimeInterval,o=Math.floor(r/l.setting.unitTimeInterval),r>=60&&(r%=l.setting.unitTimeInterval,o=Math.floor(r/l.setting.unitTimeInterval),s+=1)}if(D.length>0)for(i=0;i<D.length;i++){var y=D[i],w=new Date(y.start),C=0===l.compareDates(g,w),S=new Date(y.end),T=0===l.compareDates(g,S);C||(w=l._normalizeDateTime(g,"START","T")),T||(S=l._normalizeDateTime(g,"END","T")),n=0===(n=Math.round((S.getTime()-w.getTime())/l.tv.iUTmMS))?1:n>c?c:n;var V,b=2,E=!1,I=!1,M=!1,A=y.backgroundColor,_=$.cf.isValid(A),k=y.class,H=$.cf.isValid(k);if(_||H){for(b=0;b<l.tv.sADVInfo.length;b++)if(V=l.tv.sADVInfo[b],E=_&&V.bgColor===A,I=H&&V.class===k,_&&H){if(E&&I){b=V.index,M=!0;break}}else if(E||I){b=V.index,M=!0;break}M||(V={},b=3+l.tv.sADVInfo.length,V.index=b,_&&(V.bgColor=A),H&&(V.class=k),l.tv.sADVInfo.push(V))}for(n===c&&(e[e.length-1]=b),s=w.getHours(),r=w.getMinutes(),o=Math.floor(r/l.setting.unitTimeInterval),a=0;a<n;a++)e[0===s?o:s*l.tv.iUTmSlt+o]=b,r+=l.setting.unitTimeInterval,o=Math.floor(r/l.setting.unitTimeInterval),r>=60&&(r%=l.setting.unitTimeInterval,o=Math.floor(r/l.setting.unitTimeInterval),s+=1)}l.tv.bADVCur[t]=e}m+=$.CalenStyle.extra.iMS.d,g=new Date(m)}},_getStartAndEndDatesOfEventWithId:function(e){var t=this.getEventWithId(e);return[t.start,t.end]},_getNumberOfHoursOfEventWithId:function(e){var t=this.getEventWithId(e);return this.__getNumberOfHoursOfEvent(t.isAllDay,t.start,t.end)},_getNumberOfDaysOfEventForWeek:function(e,t,a,i,n){var s,r=this;0===(s=e&&0===r.compareDateTimes(t,a)?new Date(a.getTime()+$.CalenStyle.extra.iMS.d):new Date(a)).getHours()&&0===s.getMinutes()&&s.setMinutes(s.getMinutes()-1);var o=0,l=r.__getStartAndEndDatesOfEventForView(e,t,s),d=l[0],c=l[1],v=Math.round((c.getTime()-d.getTime())/$.CalenStyle.extra.iMS.m),g=Math.round(v/60);if(v<0)console.log("Invalid Start And End Dates "+t+" "+s);else if(o=0,0!==r.compareDates(d,c)){var m=r.setDateInFormat({date:d},"START"),D=(r.setDateInFormat({date:c},"START").getTime()-m.getTime())/$.CalenStyle.extra.iMS.h;if(o=Math.round(D/24)+1,n){for(var f=new Date(m),p=0,u=0;u<o;u++)r.__findWhetherDateIsVisibleInCurrentView(f,e||g>23,d,c)&&p++,f.setDate(f.getDate()+1);o=p}}else n?r.__findWhetherDateIsVisibleInCurrentView(d,e||g>23,d,c)&&(o=1):o=1;return i?[o,g]:o},_getLeftPositionOfEventSeg:function(e){for(var t=this.tv.fADVDayLftPos.length,a=$(this.elem).find(".cdvTableColumns").width(),i=0,n=0;n<t;n++){var s=this.tv.fADVDayLftPos[n],r=s+a;if(s-=5,r-=5,n===t-1&&(r+=5),e>=s&&e<=r){i=this.tv.fADVDayLftPos[n];break}}return i},_getDateBasedOnLeftPosition:function(e){var t=this;if($.cf.compareStrings(t.setting.visibleView,"DayEventDetailView"))return t.setting.selectedDate;var a,i=$(t.elem).find(".cdvTableColumns").width(),n=t.tv.fADVDayLftPos.length,s=0,r=0;for(a=0;a<n;a++){var o=t.tv.fADVDayLftPos[a]-5,l=o+i-5;if(a===n-1&&(l+=5),e>=o&&e<=l){r=a+1;break}}for(a=0;a<t.tv.dAVDt.length;a++){var d=t.tv.dAVDt[a];if(t.__isDateInCurrentView(d)&&++s===r)return d}},_getDateForDayNumber:function(e,t){for(var a=t?0:this.tv.iNoVDay-1,i=0,n=0;n<this.tv.iNoVDay;n++){if(++i===e)return this.tv.dAVDt[a];a=t?a+1:a-1}},_createCopyOfArray:function(e){return[].concat(e)},_setPropertiesOfEventSeg:function(){for(var e,t,a,i,n=this,s=[],r=0;r<n.tv.dAVDt.length;r++){var o=[];o.push(["eventSegStart",n.tv.dAVDt[r]]);var l=n._getEventSegWith(o);l=n._sortEventSeg(n._createCopyOfArray(l)),a=[];for(var d=0;d<l.length;d++){var c=l[d],v=c.eventSegStart,g=c.eventSegEnd;if(a.length<=0)e=new Array(c),t=new Array(v,g,e),a.push(t);else{var m=0;for(i=0;i<a.length;i++){var D=a[i],f=D[0],p=D[1],u=0,h=0,$=0,y=0,w=n.compareDateTimes(v,f),C=n.compareDateTimes(v,p),S=n.compareDateTimes(g,f),T=n.compareDateTimes(g,p);if((w>0||0===w)&&(u=1),C<0&&(h=1),S>0&&($=1),(T<0||0===T)&&(y=1),1===u&&1===h||1===$&&1===y)D[2].push(c),m=1;w<0&&(D[0]=v),T>0&&C<0&&(D[1]=g)}0===m&&(e=new Array(c),t=new Array(v,g,e),a.push(t))}}s.push(a)}for(var V=[],b=0;b<s.length;b++){a=s[b];var E=[];for(i=0;i<a.length;i++){var I=a[i],M=I[2],A=n._assignEventSegToColumnsInDetailView(M);E.push([I[0],I[1],A])}V.push(E)}},_getEventSegWith:function(e){for(var t=[],a=0;a<this.tv.oASmEvSeg.length;a++){for(var i=this.tv.oASmEvSeg[a],n=0,s=0;s<e.length;s++){var r=e[s],o=r[0],l=r[1];$.cf.compareStrings(o,"eventSegStart")||$.cf.compareStrings(o,"eventSegEnd")?0===this.compareDates(i[o],l)&&n++:i[o]===l&&n++}n===e.length&&t.push(i)}return t},_sortEventSeg:function(e){var t=this,a=e.length;if(a>1)for(var i=0;i<a;i++)for(var n,s=e[i],r=parseInt(s.eventId),o=t._getStartAndEndDatesOfEventWithId(r)[0],l=i+1;l<a;l++){var d=e[l],c=parseInt(d.eventId);if(r!==c){var v=t._getStartAndEndDatesOfEventWithId(c)[0],g=t.compareDateTimes(o,v);if(g>0)n=s,s=d,d=n,e[i]=s,o=v,e[l]=d;else if(0===g){var m=t._getNumberOfHoursOfEventWithId(r);t._getNumberOfHoursOfEventWithId(c)>m&&(n=s,s=d,d=n,e[i]=s,o=s.eventSegStart,e[l]=d)}}}return e},_whetherEventsAreColliding:function(e,t){var a=e.eventSegStart,i=e.eventSegEnd,n=t.eventSegStart,s=t.eventSegEnd,r=0,o=0,l=0,d=0,c=this.compareDateTimes(a,n),v=this.compareDateTimes(a,s),g=this.compareDateTimes(i,n),m=this.compareDateTimes(i,s);return(c>0||0===c)&&(r=1),v<0&&(o=1),g>0&&(l=1),(m<0||0===m)&&(d=1),1===r&&1===o||1===l&&1===d},_removeEventSegWithId:function(e){var t=[];e=parseInt(e);for(var a=0;a<this.tv.oASmEvSeg.length;a++){var i=this.tv.oASmEvSeg[a];parseInt(i.eventId)!==parseInt(e)&&t.push(i)}this.tv.oASmEvSeg=[],this.tv.oASmEvSeg=t},_createAndAddEventSegForId:function(e,t,a,i){for(var n=this,s=n.__getStartAndEndDatesOfEventForView(t,a,i),r=s[0],o=s[1],l=n.__getNumberOfHoursOfEvent(t,a,i),d=n._getNumberOfDaysOfEventForWeek(t,a,i,!1,!0),c=n.setting.is24Hour?"HH:mm":"h[:m]sm",v=n.getDateInFormat({date:a},c,n.setting.is24Hour,!0),g=n.getDateInFormat({date:i},c,n.setting.is24Hour,!0),m=new Date(r);!n.__findWhetherDateIsVisibleInCurrentView(m,t||l>23,r,o);)m.setDate(m.getDate()+1),m=n.setDateInFormat({date:m},"START");r=new Date(m);for(var D=n.setDateInFormat({date:r},"START"),f=0;f<d;f++){var p=n.__getDayIndexInView(D),u={};u.iNumEvElem=d,u.iId=e,u.sId="Event-"+e,u.dStart=a,u.dEnd=i,u.dStartView=r,u.dEndView=o,u.dThisDate=D,u.iEventElem=f+1,u.iWkIndex=p;var h=n._createAndAddEventSeg(u),y="#"+h.sId,w=h.sElemTitle,C=h.iTopPos,S=h.iEventHeight,T=n.tv.fADVDayLftPos[p];n.tv.oDVEdtgEv!=={}&&$.cf.isValid(n.tv.oDVEdtgEv.dEditingDate)&&0===n.compareDates(n.tv.oDVEdtgEv.dEditingDate,D)&&(n.tv.oDVEdtgEv.iElemLeft=T);var V,b,E,I=$(n.elem).find(y);I.css({top:C,height:S,left:T}),I.attr("data-pos",h.sName),I.attr("title",w),V={},b=n.getEventDateTimeString(a,i,t,"&&").split("&&"),E=n.getEventWithId(e),V.title=E.title||"",V.startDateTime=b[0],V.endDateTime=b[1],I.data("tooltipcontent",V),C<0?I.find(".cEventLink").css({"margin-top":Math.abs(C)}):I.find(".cEventLink").css({"margin-top":0}),I.find(".cdvEventTime").html(v+"-"+g),D=new Date(D.getTime()+$.CalenStyle.extra.iMS.d)}},_createAndAddEventSeg:function(e){var t,a,i,n,s,r,o=this,l=e.iId,d=e.sId,c=e.dStart,v=e.dEnd,g=e.dThisDate,m=e.iEventElem,D=e.iWkIndex,f=($(o.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(o.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2/o.setting.unitTimeInterval,p=0,u=o.getDateInFormat({date:g},"object",!1,!1);o.setting.excludeNonBusinessHours?(s=o.setDateInFormat({iDate:{d:u.d,M:u.M,y:u.y,H:o.tv.oBsHours.startTime[0],m:o.tv.oBsHours.startTime[1],s:0,ms:0}},""),r=o.setDateInFormat({iDate:{d:u.d,M:u.M,y:u.y,H:o.tv.oBsHours.endTime[0],m:o.tv.oBsHours.endTime[1],s:0,ms:0}},"")):(s=o.setDateInFormat({iDate:u},"START"),r=o.setDateInFormat({iDate:u},"END"));var h=o.compareDateTimes(c,s)<0,y=o.compareDateTimes(v,r)>0,w=h?s:c,C=y?r:v,S=(C.getTime()-c.getTime())/$.CalenStyle.extra.iMS.m*f,T=(C.getTime()-w.getTime())/$.CalenStyle.extra.iMS.m*f,V=T;a=w.getHours(),t=w.getMinutes(),i=Math.floor(t/o.setting.unitTimeInterval)*o.setting.unitTimeInterval,n=o.getNumberStringInFormat(a,2,!1)+o.getNumberStringInFormat(i,2,!1),p=$(o.elem).find(".cdvTimeSlotTableRow"+n).position().top,h&&(V=S,p-=S-T);var b=n+"|"+D+"|"+p,E=c+"\n"+v,I=new function(e,t,a,i,n,s,r,o){this.dayNo=e,this.eventId=t,this.eventDisplayId=a,this.eventSegId=i,this.eventSegStart=n,this.eventSegEnd=s,this.segLeftColumn=r,this.segColumns=o}(D+1,l,E,d+="-"+m,w,C,0,0);o.tv.oASmEvSeg.push(I);var M={};return M.sElemTitle=E,M.sId=d,M.sName=b,M.iTopPos=p,M.iEventHeight=V,M},_setOpacityOfEventSeg:function(e,t){var a=this.compareDates(t,$.CalenStyle.extra.dToday)<0,i=$(this.elem).find(".Event-"+e).hasClass("cBlurredEvent");a&&!i&&$(this.elem).find(".Event-"+e).addClass("cBlurredEvent"),!a&&i&&$(this.elem).find(".Event-"+e).removeClass("cBlurredEvent")},_changeViewPropertiesWhileEditing:function(e,t){var a,i=this;$.cf.isValid(i.tv.oDVEdtgEv)&&($.cf.compareStrings(i.tv.oDVEdtgEv.type,"cdvEvent")?a=".Event-"+t:$.cf.compareStrings(i.tv.oDVEdtgEv.type,"cdvEventAllDay")&&(a="#Event-"+t),$.cf.compareStrings(e,"BEFORE")?$(i.elem).find(a).hasClass("cEditingEvent")||($.cf.compareStrings(i.tv.oDVEdtgEv.type,"cdvEvent")?$(i.elem).find(a).addClass("cEditingEvent cEditingEventUI"):$(i.elem).find(a).addClass("cEditingEvent cEditingEventUI cEditingEventAllDay")):$.cf.compareStrings(e,"AFTER")&&($(i.elem).find(a).removeClass("cEditingEvent cEditingEventAllDay cEditingEventUI"),i.tv.iTSEndEditing=$.cf.getTimestamp()))},__updateDetailViewTable:function(){var e,t,a=this,i=1===a.tv.iNoVDayDis?"cdvSingleColumn":"cdvMultiColumn";$.CalenStyle.extra.iScrollbarWidth;a._getTimeSlotsArrayForCurrentView(),$.cf.compareStrings(a.tv.sLoadType,"Prev")?a.tv.dLoadDt=a.tv.dAVDt[0]:$.cf.compareStrings(a.tv.sLoadType,"Next")&&(a.tv.dLoadDt=a.tv.dAVDt[a.tv.dAVDt.length-1]);var n="";for(n+="<tbody>",e=0;e<a.tv.iNoVDayDis;e++){var s="cdvCellDay"+e;t=i,e===a.tv.iNoVDayDis-1&&(t+=" cdvLastColumn"),n+="<tr id='"+s+"' class='cdvTableColumns "+t+"'>",$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")?n+="<table class='cTable cdlvDaysTable cdlvDaysTableMain' cellspacing='0'></table>":n+="&nbsp;",n+="</tr>"}n+="</tr>",n+="</tbody>",$(a.elem).find(".cdvDetailTableMain").html(n),$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")?a.__updateDayListViewTable(!1,!0):a._setDateStringsInDetailView(),a._addTimeSlotTable(),n="",$(a.elem).find(".cdvContRow3Main").append(n),a._takeActionOnTimeSlotTableClick()},__addEventsInDetailView:function(e){var t=this;($.cf.compareStrings(e,"AllDay")||$.cf.compareStrings(e,"Both"))&&$(t.elem).find(".cdvContRow2Main").length>0&&$(t.elem).find(".cdvContRow2Main .cdvEventAllDay").remove(),($.cf.compareStrings(e,"Small")||$.cf.compareStrings(e,"Both"))&&$(t.elem).find(".cdvContRow3Events").length>0&&$(t.elem).find(".cdvContRow3Events").html("");var a=t.getArrayOfEventsForView(t.tv.dVDSDt,t.tv.dVDEDt),i=$.cf.isValid(t.setting.hideEventIcon[t.setting.visibleView])?t.setting.hideEventIcon[t.setting.visibleView]:!!$.cf.isValid(t.setting.hideEventIcon.Default)&&t.setting.hideEventIcon.Default,n=$.cf.isValid(t.setting.hideEventTime[t.setting.visibleView])?t.setting.hideEventTime[t.setting.visibleView]:!!$.cf.isValid(t.setting.hideEventTime.Default)&&t.setting.hideEventTime.Default,s=t.setting.is24Hour?"HH:mm":"h[:m]sm";if(($.cf.compareStrings(e,"Small")||$.cf.compareStrings(e,"Both"))&&(t.tv.oASmEvSeg=[]),($.cf.compareStrings(e,"AllDay")||$.cf.compareStrings(e,"Both"))&&(t.tv.oAADEvSeg=[]),a.length>0){for(var r=[],o=0;o<a.length;o++){var l=a[o],d=null,c=null,v=0,g="",m="",D="",f=!1;null!==l.start&&(d=l.start),null!==l.end&&(c=l.end),null!==l.isAllDay&&(v=l.isAllDay),null!==l.title&&(g=l.title),null!==l.desc&&l.desc,null!==l.type&&l.type,null!==l.url&&(m=l.url),null!==l.droppableId&&(D=l.droppableId),null!==l.isMarked&&(f=l.isMarked),f&&(v=!0);var p,u=t.__getStartAndEndDatesOfEventForView(v,d,c),h=u[0],y=u[1],w=t.getNumberOfDaysOfEvent(v,d,c,!1,!1,!0),C=t._getNumberOfDaysOfEventForWeek(v,d,c,!1,!0),S=t.__getNumberOfHoursOfEvent(v,d,c);if(C>0){for(var T=new Date(h);!t.__findWhetherDateIsVisibleInCurrentView(T,v||S>23,h,y);)T.setDate(T.getDate()+1),T=t.setDateInFormat({date:T},"START");h=new Date(T);var V=t.setDateInFormat({date:h},"START"),b=V.getTime(),E=l.backgroundColor;E=$.cf.compareStrings(E,"")||$.cf.compareStrings(E,"transparent")?"transparent":E;var I=l.borderColor||$.cf.addHashToHexcode(t.setting.borderColor);I=$.cf.compareStrings(I,"")||$.cf.compareStrings(I,"transparent")?"transparent":I;var M=l.textColor||$.cf.addHashToHexcode(t.setting.textColor);M=$.cf.compareStrings(M,"")||$.cf.compareStrings(M,"transparent")?$.cf.addHashToHexcode(t.setting.textColor):M;var A="",_="",k="",H="",F="";f?l.fromSingleColor?(A+="background: "+E+"; ",A+="border-color: "+I+"; ",A+="color: "+M+"; ",F="color: "+M+"; ",k="background: "+M+"; color: #FFFFFF","background: "+M+"; "):(I=E,A+="background: "+$.cf.getRGBAString(E,.1)+"; ",A+="border-color: "+I+"; ",A+="color: "+E+"; ",F="color: "+E+"; ",k="background: "+E+"; color: "+M,"background: "+E+"; "):(A+="background: "+E+"; ",A+="border-color: "+I+"; ",A+="color: "+M+"; ",F="color: "+M+"; ",k="color: "+M+"; ","background: "+M+"; ",H="border-color: "+(l.fromSingleColor?M:"#000000")),"transparent"===I&&(A+="border-width: 0px; "),_=f?$.cf.isValid(l.icon)&&"Dot"!==l.icon?l.icon:"cs-icon-Mark":$.cf.isValid(l.icon)?l.icon:t.setting.eventIcon;var N,x,B,L,R,P,O,W=t.__getDayIndexInView(V),j=(t.tv.fADVDayLftPos[W],0);if(1===v||!0===v||S>23){if($.cf.compareStrings(e,"AllDay")||$.cf.compareStrings(e,"Both")){p="Event-"+l.calEventId;var z=$(t.elem).find("#"+p).length>0,Y=!1;if(z){var q=new Date($(t.elem).find("#"+p).data("startdate"));Y=0!==t.compareDates(q,h)}if(z&&Y||!z){var U,Q=C,Z=t.compareDates(d,h),J=t.compareDates(t.tv.dVDSDt,d),G=t.compareDates(t.tv.dVDEDt,d),X=J<=0&&G>=0,K=t.compareDates(t.tv.dVDSDt,c),ee=t.compareDates(t.tv.dVDEDt,c),te=K<=0&&ee>=0,ae=t.compareDates(c,y),ie=0;if(0===r.length)ie=1,(U=[]).push([h,y]),r.push([ie,U]);else{for(var ne=0,se=0;se<r.length;se++){var re=(U=r[se])[0];re>ne&&(ne=re);for(var oe=U[1],le=!1,de=0;de<oe.length;de++){var ce=oe[de];if(t.compareDates(h,ce[1])<=0){le=!1;break}le=!0}if(le){ie=re,oe.push([h,y]);break}}0===ie&&(ie=ne+1,(U=[]).push([h,y]),r.push([ie,U]))}t.tv.oAADEvSeg.push([p,Q,W,ie]),N="cdvEventAllDay ",t.compareDates(c,$.CalenStyle.extra.dToday)<0&&(N+="cBlurredEvent "),t.setting.isTooltipInDetailView&&(N+=" cEventTooltip"),f&&(N+=" cMarkedDayEvent"),B="<span id='"+p+"' class='"+N+"' style='"+A+"' data-startdate='"+h+"' "+($.cf.isValid(D)?"data-droppableid='"+D+"'":"")+" title='' data-id='"+l.calEventId+"'>",B+="<a class='cEventLink' style='"+F+"'>",f?(B+="<span class='cdvEventTitle'>"+g+"</span>",B+="<span class='cdvEventIcon "+_+"' style='"+k+"'></span>",$.cf.compareStrings(t.setting.visibleView,"DayEventListView")&&$.cf.isValid(l.status)&&(B+="<span class='cdvEventStatus' style='border-color: "+l.statusColor+";'></span>")):(0!==Z&&(B+="<span class='cPartialEvent cPartialEventLeft' style='"+H+"'></span>"),!n&&!v&&w>1&&X&&(B+="<span class='cdvEventTimeLeft'>"+t.getDateInFormat({date:d},s,t.setting.is24Hour,!0)+"</span>"),i||$.cf.compareStrings(_,"Dot")||(B+="<span class='cdvEventIcon "+_+"' style='"+k+"'></span>"),$.cf.compareStrings(t.setting.visibleView,"DayEventListView")&&$.cf.isValid(l.status)&&(B+="<span class='cdvEventStatus' style='border-color: "+l.statusColor+";'></span>"),B+="<span class='cdvEventTitle'>"+g+"</span>",!n&&!v&&w>1&&te&&(B+="<span class='cdvEventTimeRight'>"+t.getDateInFormat({date:c},s,t.setting.is24Hour,!0)+"</span>"),0!==ae&&(B+="<span class='cPartialEvent cPartialEventRight' style='"+H+"'></span>")),B+="</a>",B+="</span>",$(t.elem).find(".cdvContRow2Main").append(B),L="#"+p,P=(R=$(t.elem).find(L)).find(".cEventLink"),x={},O=t.getEventDateTimeString(d,c,v,"&&").split("&&"),x.title=g,x.startDateTime=O[0],x.endDateTime=O[1],R.data("tooltipcontent",x),t.setting.eventRendered&&t.setting.eventRendered.call(t,l,R,P,t.setting.visibleView,!1),($.cf.isValid(m)||t.setting.eventClicked)&&P.on($.CalenStyle.extra.sClickHandler,{url:m,eventId:l.calEventId,eventElemSelector:L,eventType:"AllDay",view:"DetailView",pluginId:t.tv.pluginId},t.__bindClick)}}}else if($.cf.compareStrings(e,"Small")||$.cf.compareStrings(e,"Both")){var ve="Event-"+l.calEventId;if(0===$(t.elem).find("."+ve).length)for(var ge=1;ge<=C;ge++){p=ve,W=t.__getDayIndexInView(V),t.tv.fADVDayLftPos[W],N="cdvEvent ",t.compareDates(c,$.CalenStyle.extra.dToday)<0&&(N+="cBlurredEvent "),N+=p,t.setting.isTooltipInDetailView&&(N+=" cEventTooltip");var me={};me.iNumEvElem=C,me.iId=l.calEventId,me.sId=p,me.dStart=d,me.dEnd=c,me.dStartView=h,me.dEndView=y,me.dThisDate=V,me.iEventElem=ge,me.iWkIndex=W;var De=t._createAndAddEventSeg(me),fe=De.sName;p=De.sId,De.iTopPos,j=De.iEventHeight;var pe=t.getDateInFormat({date:d},s,t.setting.is24Hour,!0)+" - "+t.getDateInFormat({date:c},s,t.setting.is24Hour,!0);B="",B+="<span id='"+p+"' class='"+N+"' style='"+(A+="left: 0px; top: 0px; height: "+parseInt(j)+"px; width: 10px;")+"' data-pos='"+fe+"' "+($.cf.isValid(D)?"data-droppableid='"+D+"'":"")+" title='' data-id='"+l.calEventId+"'>",B+="<a class='cEventLink' style='color: "+M+";'>",i||$.cf.compareStrings(_,"Dot")||(B+="<span class='cdvEventIcon "+_+"' style='"+k+"' align='left'></span>"),B+="<div class='cdvEventDetails'>",$.cf.compareStrings(t.setting.visibleView,"DayEventListView")&&$.cf.isValid(l.status)&&(B+="<span class='cdvEventStatus' style='border-color: "+l.statusColor+";'></span>"),B+="<div class='cdvEventTitle'>"+g+"</div>",n||(B+="<div class='cdvEventTime'>"+pe+"</div>"),B+="</div>",B+="</a>",B+="</span>",$(t.elem).find(".cdvContRow3Main .cdvContRow3Events").append(B),L="#"+p,P=(R=$(t.elem).find(L)).find(".cEventLink"),x={},O=t.getEventDateTimeString(d,c,v,"&&").split("&&"),x.title=g,x.startDateTime=O[0],x.endDateTime=O[1],R.data("tooltipcontent",x),b+=$.CalenStyle.extra.iMS.d,V.setTime(b),t.setting.eventRendered&&t.setting.eventRendered.call(t,l,R,P,t.setting.visibleView,!1),($.cf.isValid(m)||t.setting.eventClicked)&&P.on($.CalenStyle.extra.sClickHandler,{url:m,eventId:l.calEventId,eventElemSelector:L,eventType:"Small",view:"DetailView",pluginId:t.tv.pluginId},t.__bindClick)}}}}t.tv.dDrgSDt=null,t.tv.dDrgEDt=null,($.cf.compareStrings(e,"AllDay")||$.cf.compareStrings(e,"Both"))&&t._makeEventEditableInDetailView(".cdvEventAllDay"),($.cf.compareStrings(e,"Small")||$.cf.compareStrings(e,"Both"))&&(t._setPropertiesOfEventSeg(),t._makeEventEditableInDetailView(".cdvEvent")),t.setting.isTooltipInDetailView&&t._addTooltipInDetailView(),t.setting.eventsAddedInView&&t.setting.eventsAddedInView.call(t,t.setting.visibleView,".cdvEvent, .cdvEventAllDay")}else console.log("to.__addEventsInDetailView - No Events");t.addRemoveViewLoader(!1,"cEventLoaderBg"),t.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_takeActionOnTimeSlotTableClick:function(){var e=this;$(e.elem).find(".calendarCont").on($.CalenStyle.extra.sClickHandler,function(t){if(!$(e.elem).find(".cdvEvent").hasClass("cEditingEvent")&&e.setting.cellClicked){var a={};a.x=t.pageX||t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches[0].pageX,a.y=t.pageY||t.originalEvent.touches[0].pageY||t.originalEvent.changedTouches[0].pageY;for(var i,n,s,r,o=e.__getElementsAtPoint(a.x,a.y),l=0,d=0,c=0;c<o.length;c++){var v,g=$(o[c]),m=g.hasClass("cdvAllDayColumns"),D=g.hasClass("cdvTableColumns"),f=g.hasClass("cdvTimeSlotTableRow");if(m&&(v=g.attr("title"),i=new Date(v),n=!0),D&&(v=g.attr("title"),i=new Date(v),r=!0),f){var p=g.attr("class");p=(p=p.replace(/cdvTimeSlotTableRow/g,"")).replace(/ /g,""),l=parseInt(p.substr(0,2)),d=parseInt(p.substr(2,2)),s=!0}}e.setting.cellClicked&&(n?e.setting.cellClicked.call(e,e.setting.visibleView,i,!0,a):r&&s&&(i.setHours(l),i.setMinutes(d),e.setting.cellClicked.call(e,e.setting.visibleView,i,!1,a)))}t.stopPropagation(),e._makeEventNonEditableInDetailView(),e._callCommonEvents()})},_makeEventNonEditableInDetailView:function(){var e=this;if(null!==e.tv.oEvEdt){$("body").css("cursor","default");var t=e.tv.oEvEdt.calEventId,a=e.tv.oEvEdt.end;e._changeViewPropertiesWhileEditing("AFTER",t),e._setOpacityOfEventSeg(t,a),$.cf.compareStrings(e.tv.oDVEdtgEv.type,"cdvEvent")?(e._adjustEventsInDetailView(),$.CalenStyle.extra.bTouchDevice&&$(e.elem).find(".Event-"+t).hasClass("ui-resizable")&&$(e.elem).find(".Event-"+t).resizable("destroy")):e._adjustAllDayEventsInDetailView(),e.tv.oEvEdt=null,e.tv.oDVEdtgEv={}}},_makeEventEditableInDetailView:function(e){var t,a,i,n=this;$(n.elem).find(e).on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()}),$.cf.compareStrings(e,".cdvEvent")?(t="EventEditable",a="EventDraggable",i="EventResizable"):$.cf.compareStrings(e,".cdvEventAllDay")&&(t="EventAllDayEditable",a="EventAllDayDraggable",i="EventAllDayResizable");for(var s=$(n.elem).find(e),r=0;r<s.length;r++){var o=s[r],l=$(o).attr("data-id"),d=n.getEventWithId(l),c="";(d.isDragNDropInDetailView||d.isResizeInDetailView)&&(c+=t,d.isDragNDropInDetailView&&(c+=" "+a+" cDragNDrop"),d.isResizeInDetailView&&(c+=" "+i,$.CalenStyle.extra.bTouchDevice||(n.setting.isResizeInDetailView?n._makeEventResizableInDetailView(".Event-"+l):$(".cdvEvent").removeClass("EventResizable")))),$(o).addClass(c)}n.setting.isDragNDropInDetailView?n._makeEventDraggableInDetailView(e,a):($(".cdvEvent").removeClass("EventDraggable cDragNDrop"),$(".cdvEventAllDay").removeClass("EventAllDayDraggable cDragNDrop")),$(n.elem).find("."+t).each(function(){var a,i,s,r,o,l,d,c,v,g,m=!1,D=$.CalenStyle.extra.bTouchDevice?300:0,f=!1;$(this).on({mousedown:function(s){if($.cf.compareStrings(e,".cdvEvent")&&n.tv.bDVScrlg)return!1;v=s.timeStamp,m=!0,a=s.pageX,i=s.pageY,o=a-8,l=i-8,d=a+8,c=i+8,f=!1,setTimeout(function(){if(m){var a=s.pageX,i=s.pageY;if(null===n.tv.oEvEdt)o<=a&&a<=d&&(l<=i&&i<=c)&&(n.tv.bEvLgPresd=!0);if(n.tv.bEvLgPresd&&(m=!1,null===n.tv.oEvEdt)){for(var r=s.target,v=$(n.elem).find(r).hasClass(t);!v&&(r=$(n.elem).find(r).parent(),v=$(n.elem).find(r).hasClass(t),void 0!==$(n.elem).find(r).attr("class")););g=$(n.elem).find(r).attr("id"),$.cf.compareStrings(e,".cdvEvent")?f=n._setSmallEventBeingEditedInDetailView(f,g):$.cf.compareStrings(e,".cdvEventAllDay")&&n._setAllDayEventBeingEditedInDetailView(g)}}},D)},mousemove:function(p){if($.cf.compareStrings(e,".cdvEvent")&&n.tv.bDVScrlg)return!1;if(m){if(s=p.pageX,r=p.pageY,null===n.tv.oEvEdt)if(o<=s&&s<=d&&(l<=r&&r<=c))p.timeStamp-v>D&&(n.tv.bEvLgPresd=!0);if(n.tv.bEvLgPresd){var u=Math.abs(s-a)>5,h=Math.abs(r-i)>1;if(m&&(u||h)&&(m=!1,null===n.tv.oEvEdt)){for(var y=p.target,w=$(n.elem).find(y).hasClass(t);!w&&(y=$(n.elem).find(y).parent(),w=$(n.elem).find(y).hasClass(t),void 0!==$(n.elem).find(y).attr("class")););g=$(n.elem).find(y).attr("id"),$.cf.compareStrings(e,".cdvEvent")?f=n._setSmallEventBeingEditedInDetailView(f,g):$.cf.compareStrings(e,".cdvEventAllDay")&&n._setAllDayEventBeingEditedInDetailView(g)}}}},mouseup:function(){m=!1}})})},_setSmallEventBeingEditedInDetailView:function(e,t){var a=this,i="#"+t,n=$(a.elem).find(".cdvTableColumns").width()-5,s=$(a.elem).find(i).position().left,r=s,o=a._getDateBasedOnLeftPosition(s),l=t.split("-"),d=l[1],c=l[2],v=".Event-"+d;if(!e){r=a._getLeftPositionOfEventSeg(s),$(a.elem).find(".Event-"+d).css({width:n});var g=a.getEventWithId(d),m=g.start,D=g.end,f=g.isAllDay,p=a.__getStartAndEndDatesOfEventForView(f,m,D),u=p[0],h=p[1];$(a.elem).find(i).css({left:r});var y=a.compareDates(o,u),w=a.compareDates(o,h),C=0===y||0===w;if($(a.elem).find(".Event-"+d).length>1&&C){var S,T;0===y?(S=h,T="#Event-"+d+"-2"):0===w&&(S=u,T="#Event-"+d+"-1");var V=a.__getDayIndexInView(S),b=a.tv.fADVDayLftPos[V];$(a.elem).find(T).css({left:b})}e=!0,a.tv.oEvEdt=a.getEventWithId(d),a.tv.oDVEdtgEv={},a.tv.oDVEdtgEv.type="cdvEvent",a.tv.oDVEdtgEv.sEventId=d}return a.tv.oDVEdtgEv.iSegIndex=c,a.tv.oDVEdtgEv.dEditingDate=o,a.tv.oDVEdtgEv.iElemLeft=r,$.CalenStyle.extra.bTouchDevice&&(a._changeViewPropertiesWhileEditing("BEFORE",d),a.setting.isResizeInDetailView&&null!==a.tv.oEvEdt&&a.tv.oEvEdt.isResizeInDetailView&&a._makeEventResizableInDetailView(v)),e},_setAllDayEventBeingEditedInDetailView:function(e){var t=this,a=e.split("-")[1];t.tv.oEvEdt=t.getEventWithId(a),t.tv.oDVEdtgEv={},t.tv.oDVEdtgEv.type="cdvEventAllDay",t.tv.oDVEdtgEv.sEventId=a,t._changeViewPropertiesWhileEditing("BEFORE",a)},_getWhetherEventIsAllDay:function(e){var t=this.getEventWithId(e);return null!==t.isAllDay&&t.isAllDay},_makeEventDraggableInDetailView:function(e,t){var a,i=this;$.cf.compareStrings(e,".cdvEvent")?a="Events":$.cf.compareStrings(e,".cdvEventAllDay")&&(a="AllDayEvents");var n,s,r,o,l,d,c,v,g,m,D,f,p,u,h,y,w,C,S=i.setting.is24Hour?"HH:mm":"h[:m]sm";$.CalenStyle.extra.iScrollbarWidth;if($.cf.compareStrings(e,".cdvEvent")){var T=$(i.elem).find(".cdvTableColumns").width()-5;s=T;var V,b,E,I,M,A,_,k,H,F,N,x,B,L,R,P,O,W,j,z,Y=T+6,q=($(i.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(i.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2,U=i.tv.dDrgSDt,Q=i.tv.dDrgEDt,Z=!1;d=$(i.elem).css("margin-left"),v=(c=0+(d=parseInt(d.replace("px","")))+(r=$(i.elem).find(".cdvDetailTableColumnTime").width()))+($(i.elem).find(".cdvContRow3Events").width()-r),f=1440,D=-1440,o=!1,$(i.elem).find("."+t).draggable({zIndex:10,scope:a,grid:[Y,q],scroll:!1,containment:[c,D,v,f],delay:10,cursor:"move",revertDuration:300,start:function(e,t){if(i.tv.bDVResEv||i.tv.bDVScrlg)return!1;if(p=this,h=$(p).attr("id"),y=h.split("-"),w=y[1],C=y[2],$.CalenStyle.extra.bTouchDevice||i._changeViewPropertiesWhileEditing("BEFORE",w),!(o=null!==i.tv.oEvEdt&&i.tv.oDVEdtgEv.sEventId===w))return!1;i.tv.bDVDrgEv=!0;var a=i.getEventWithId(w);U=a.start,Q=a.end,B=a.isAllDay,x=i.__getStartAndEndDatesOfEventForView(B,U,Q),P=x[0],O=x[1],V=t.position.left,E=V,I=V,b=t.position.top,b,M=b,!0},drag:function(e,t){if(p=this,h=$(p).attr("id"),y=h.split("-"),w=y[1],C=y[2],B=i._getWhetherEventIsAllDay(w),!(o=null!==i.tv.oEvEdt&&i.tv.oDVEdtgEv.sEventId===w))return!1;var a,n=t.position.left,s=t.position.top,r=n>=40,l=Math.round((n-I)/Y),d=Math.round((s-b)/q),c=Math.abs(l),v=Math.abs(d),g=s!==M&&v>=1;if(!!(r&&n!==I&&c>=1)){var m=Math.round((n-V)/Y);Math.abs(m*Y);var D=n-E,f="None";D>0?f="Right":D<0&&(f="Left");var T=i.compareDates(i.tv.dVDSDt,i.tv.oDVEdtgEv.dEditingDate),J=i.compareDates(i.tv.dVDEDt,i.tv.oDVEdtgEv.dEditingDate),G=i.compareDates(U,i.tv.oDVEdtgEv.dEditingDate),X=i.compareDates(Q,i.tv.oDVEdtgEv.dEditingDate),K=i._getDateForDayNumber(2,!0),ee=i._getDateForDayNumber(2,!1),te=i.compareDates(K,i.tv.oDVEdtgEv.dEditingDate),ae=i.compareDates(ee,i.tv.oDVEdtgEv.dEditingDate);a=$(i.elem).find(".Event-"+w).length,$.cf.compareStrings(f,"Right")&&0!==J?(H=n+Y/2,i.tv.oDVEdtgEv.dEditingDate=i._getDateBasedOnLeftPosition(H),F=U.getTime(),F+=$.CalenStyle.extra.iMS.d,U=new Date(F),N=Q.getTime(),N+=$.CalenStyle.extra.iMS.d,Q=new Date(N),i.tv.dDrgSDt=U,i.tv.dDrgEDt=Q,x=i.__getStartAndEndDatesOfEventForView(B,U,Q),P=x[0],O=x[1],a>1?1===parseInt(C)&&(A=$(i.elem).find("#Event-"+w+"-2"),0===ae&&A.remove()):0===T&&0!==G&&(k="Event-"+w+"-2",$(this).attr("id",k),A=$(this).clone(),_="Event-"+w+"-1",A.attr("id",_),$(i.elem).find(".cdvContRow3Events").append(A),i._makeEventEditableInDetailView(".cdvEvent")),i._removeEventSegWithId(w),i._createAndAddEventSegForId(w,B,U,Q)):$.cf.compareStrings(f,"Left")&&0!==T&&(H=n+Y/2,i.tv.oDVEdtgEv.dEditingDate=i._getDateBasedOnLeftPosition(H),F=U.getTime(),F-=$.CalenStyle.extra.iMS.d,U=new Date(F),N=Q.getTime(),N-=$.CalenStyle.extra.iMS.d,Q=new Date(N),i.tv.dDrgSDt=U,i.tv.dDrgEDt=Q,x=i.__getStartAndEndDatesOfEventForView(B,U,Q),P=x[0],O=x[1],a>1?2===parseInt(C)&&(A=$(i.elem).find("#Event-"+w+"-1"),0===te&&A.remove()):0===J&&0!==X&&(A=$(this).clone(),_="Event-"+w+"-2",A.attr("id",_),$(i.elem).find(".cdvContRow3Events").append(A),i._makeEventEditableInDetailView(".cdvEvent")),i._removeEventSegWithId(w),i._createAndAddEventSegForId(w,B,U,Q)),L=i.getDateInFormat({date:U},S,i.setting.is24Hour,!0),R=i.getDateInFormat({date:Q},S,i.setting.is24Hour,!0),$(i.elem).find(".Event-"+w+" .cdvEventDetails .cdvEventTime").html(L+"-"+R),I=n}if(g){var ie,ne,se,re,oe,le,de=s-M,ce=Math.round(de/q),ve=ce*i.tv.iUTmMS;if(Math.abs(ce*q),z="None",de>0?z="Down":de<0&&(z="Up"),$.cf.compareStrings(z,"Up")){var ge=$(i.elem).find(".cdvTimeSlotTableRow").first().position().top+2*q;if(e.pageX,(ie=e.pageY-$(i.elem).find(".cdvContRow3Main").position().top)<ge,se=(ne=$(this).height())-Math.abs(s),re=1*q+ne%q,s<0&&se<re,s<0?$(this).find(".cEventLink").css({"margin-top":Math.abs(s)}):$(this).find(".cEventLink").css({"margin-top":0}),F=U.getTime(),F+=ve,U=new Date(F),N=Q.getTime(),N+=ve,Q=new Date(N),x=i.__getStartAndEndDatesOfEventForView(B,U,Q),P=x[0],O=x[1],W=i._getNumberOfDaysOfEventForWeek(B,U,Q,!1,!0),a=$(i.elem).find(".Event-"+w).length,i.__getDayIndexInView(i.tv.oDVEdtgEv.dEditingDate),a>0&&0===W)return $(this).remove(),!1;(a>0||W>0)&&(a>W&&(k="#Event-"+w+"-2",$(i.elem).find(k).remove(),i._performOperationsAfterDraggingStopsInDetailView(w,U,Q,!1)),a<W?(oe=i.compareDates(i.tv.oDVEdtgEv.dEditingDate,P),le=i.compareDates(i.tv.oDVEdtgEv.dEditingDate,O),i.tv.dDrgSDt=U,i.tv.dDrgEDt=Q,0===oe?_="Event-"+w+"-2":0===le&&(_="Event-"+w+"-1",k="Event-"+w+"-2",$(this).attr("id",k)),(A=$(this).clone()).attr("id",_),$(i.elem).find(".cdvContRow3Events").append(A),i._makeEventEditableInDetailView(".cdvEvent"),i._removeEventSegWithId(w),i._createAndAddEventSegForId(w,B,U,Q)):a===W&&(i._removeEventSegWithId(w),i._createAndAddEventSegForId(w,B,U,Q)))}else if($.cf.compareStrings(z,"Down")){var me=$(i.elem).find(".cdvTimeSlotTableRow").last().position().top,De=me+q,fe=me-1*q;e.pageX,(ie=e.pageY-$(i.elem).find(".cdvContRow3Main").position().top+$(i.elem).find(".cdvContRow3Main").scrollTop())>me,ie>fe,(ne=$(this).height())<=(re=1*q+ne%q),s<0?$(this).find(".cEventLink").css({"margin-top":Math.abs(s)}):$(this).find(".cEventLink").css({"margin-top":0}),F=U.getTime(),F+=ve,U=new Date(F),N=Q.getTime(),N+=ve,Q=new Date(N);var pe=s+(ne=$(this).height());if(pe>De&&(ne-=pe-De,$(this).css({height:ne})),x=i.__getStartAndEndDatesOfEventForView(B,U,Q),P=x[0],O=x[1],L=i.getDateInFormat({date:U},S,i.setting.is24Hour,!0),R=i.getDateInFormat({date:Q},S,i.setting.is24Hour,!0),W=i._getNumberOfDaysOfEventForWeek(B,U,Q,!1,!0),a=$(i.elem).find(".Event-"+w).length,i.__getDayIndexInView(i.tv.oDVEdtgEv.dEditingDate),a>0&&0===W)return $(this).remove(),!1;if(a>0||W>0)if(a>W){var ue="Event-"+w+"-1";k="#"+ue,$(i.elem).find(k).remove(),_="#Event-"+w+"-2",$(i.elem).find(_).attr("id",ue),i._performOperationsAfterDraggingStopsInDetailView(w,U,Q,!1)}else a<W?(oe=i.compareDates(i.tv.oDVEdtgEv.dEditingDate,P),le=i.compareDates(i.tv.oDVEdtgEv.dEditingDate,O),i.tv.dDrgSDt=U,i.tv.dDrgEDt=Q,0===oe?_="Event-"+w+"-2":0===le&&(_="Event-"+w+"-1",k="Event-"+w+"-2",$(this).attr("id",k)),(A=$(this).clone()).attr("id",_),$(i.elem).find(".cdvContRow3Events").append(A),i._makeEventEditableInDetailView(".cdvEvent"),i._removeEventSegWithId(w),i._createAndAddEventSegForId(w,B,U,Q)):a===W&&(i._removeEventSegWithId(w),i._createAndAddEventSegForId(w,B,U,Q))}M=s}i.tv.bDVDrgEv&&(t.position.left=i.tv.oDVEdtgEv.iElemLeft),E=n,s,i.tv.bChkDroppable&&(u=$(i.elem).find("#"+h+".ui-draggable-dragging"),W=i._getNumberOfDaysOfEventForWeek(B,U,Q,!1,!0),j=u.attr("data-droppableid"),(Z=i._findWhetherEventEnteredNonDroppableZone(U,Q,B,W,j))?(u.addClass("cCursorNotAllowed"),u.find(".cEventLink").addClass("cCursorNotAllowed")):(u.removeClass("cCursorNotAllowed"),u.find(".cEventLink").removeClass("cCursorNotAllowed")))},stop:function(e,t){if(p=this,h=$(p).attr("id"),y=h.split("-"),w=y[1],C=y[2],o=null!==i.tv.oEvEdt&&i.tv.oDVEdtgEv.sEventId===w,i.tv.bChkDroppable&&(u=$(i.elem).find("#"+h+".ui-draggable-dragging"),W=i._getNumberOfDaysOfEventForWeek(B,U,Q,!1,!0),j=u.attr("data-droppableid"),Z=i._findWhetherEventEnteredNonDroppableZone(U,Q,B,W,j),u.removeClass("cCursorNotAllowed"),u.find(".cEventLink").removeClass("cCursorNotAllowed")),Z)setTimeout(function(){if(i._performOperationsAfterDraggingStopsInDetailView(w,null,null,!0),i.tv.dDrgSDt=null,i.tv.dDrgEDt=null,!o)return!1},300);else{if(!o)return $.CalenStyle.extra.bTouchDevice||i._makeEventNonEditableInDetailView(),i.tv.dDrgSDt=null,i.tv.dDrgEDt=null,!1;i._performOperationsAfterDraggingStopsInDetailView(w,U,Q,!0),i.tv.bDVDrgEv=!1,i.tv.dDrgSDt=null,i.tv.dDrgEDt=null}},revert:function(e,t){return!!Z}})}else $.cf.compareStrings(e,".cdvEventAllDay")&&(n=$(i.elem).find(".cdvEventAllDay").height(),(s=$(i.elem).find(".cdvTableColumns").width())>140&&(s=140),r=$(i.elem).find(".cdvDetailTableColumnTime").width(),l=$(i.elem).position().left,d=$(i.elem).css("margin-left"),v=c=l+(d=parseInt(d.replace("px","")))+r,g=$(i.elem).position().top,m=$(i.elem).css("margin-top"),D=g+(m=parseInt(m.replace("px",""))),i.tv.bDisFBar&&$.cf.compareStrings(i.setting.filterBarPosition,"Top")&&(D+=i.setting.filterBarHeight),f=D+n,o=!1,$(i.elem).find("."+t).draggable({zIndex:100,scope:a,cursorAt:{top:5,left:5},containment:[c,D,v,f],cursor:"move",revertDuration:300,start:function(){if(u=$(this),h=u.attr("id"),y=h.split("-"),w=y[1],!(o=null!==i.tv.oEvEdt&&i.tv.oDVEdtgEv.sEventId===w))return!1;var e=u.clone();u.parent().append(e),$(e).removeClass("cEditingEvent").addClass("cEventBeingDragged"),u.find(".cPartialEventLeft, .cPartialEventRight, .cPartialEventBoth").remove(),u.css({width:s,height:n})},revert:function(){return!0}}))},_performOperationsAfterDraggingStopsInDetailView:function(e,t,a,i){var n=this,s=n.getEventWithId(e),r=s.isAllDay,o=s.start,l=s.end;$.cf.isValid(t)||(t=new Date(o)),$.cf.isValid(a)||(a=new Date(l)),s.start=t,s.end=a,n._removeEventSegWithId(e),n._createAndAddEventSegForId(e,r,t,a),n._setPropertiesOfEventSeg(),n.tv.oEvEdt=s,$(n.elem).find(".cdvEvent").removeClass("ui-draggable-dragging"),n.tv.bDVDrgEv=!1,n.setting.saveChangesOnEventDrop?(n._makeEventNonEditableInDetailView(),n.setting.saveChangesOnEventDrop.call(n,s,o,l,t,a)):i&&!$.CalenStyle.extra.bTouchDevice&&n._makeEventNonEditableInDetailView()},_adjustAllDayEventsInDetailView:function(){for(var e=this,t=e.tv.iNoVDayDis,a=$.CalenStyle.extra.iEventHeights[e.setting.visibleView],i=0,n=0,s=0,r=0,o=0;o<e.tv.oAADEvSeg.length;o++){var l=e.tv.oAADEvSeg[o],d=l[0],c=l[1],v=l[2];n=(l[3]-1)*(a+6)+6,s=e.tv.fADVDayLftPos[v];var g=v+c;i=(g>=t?e.tv.fADVDayLftPos[t-1]+e.tv.fDVDayWth+2:e.tv.fADVDayLftPos[g])-s-5;var m=$(e.elem).find("#"+d);m.css({top:n,left:s,width:i,height:a,"line-height":a+"px"}),n>r&&(r=n);var D=0;D+=m.find(".cdvEventIcon").outerWidth(!0),D+=m.find(".cPartialEventLeft").outerWidth(!0),D+=m.find(".cPartialEventRight").outerWidth(!0),D+=m.find(".cdvEventTimeLeft").outerWidth(!0),D+=m.find(".cdvEventTimeRight").outerWidth(!0),D+=m.find(".cdvEventStatus").outerWidth(!0);var f=i-(D+=10*$.CalenStyle.extra.iBorderOverhead);$(e.elem).find("#"+d).find(".cdvEventTitle").css({"max-height":a,"line-height":a+"px",width:f})}$(e.elem).find(".cdvDetailTableRow2").css({height:0}),$(e.elem).find(".cdvCellHeaderAllDay").css({height:0}),e._makeEventEditableInDetailView(".cdvEventAllDay")},_getLeftColumnAndWidthOfAnEventSegInDetailView:function(e){for(var t=this.tv.oASmEvSeg.length,a=0;a<t;a++){var i=this.tv.oASmEvSeg[a];if(i.eventSegId===e)return[i.segLeftColumn,i.segColumns]}return 0},_assignEventSegToColumnsInDetailView:function(e){var t,a,i=e.length,n=[],s=0;if(i>0){for(t=0;t<i;t++)if(a=e[t],0===t)s=1,a.segLeftColumn=s,n.push([s,[a]]);else if(1===t)s=2,a.segLeftColumn=s,n.push([s,[a]]);else{for(var r=!1,o=0;o<n.length;o++){for(var l=n[o],d=l[0],c=l[1],v=!1,g=0;g<c.length;g++){var m=c[g];if(this._whetherEventsAreColliding(a,m)){v=!0;break}}if(!v){a.segLeftColumn=d,c.push(a),r=!0;break}}r||(s++,a.segLeftColumn=s,n.push([s,[a]]))}for(t=0;t<i;t++)(a=e[t]).segColumns=s}return n},_addTimeSlotTable:function(){var e=this,t="",a=0;e.tv.fAHrTpPos=[],t+="<table class='cdvTimeSlotTable'>",t+="<thead>";for(var i=0;i<24*e.tv.iUTmSlt;i++){var n=Math.floor(i/e.tv.iUTmSlt),s=i%e.tv.iUTmSlt*e.setting.unitTimeInterval,r=new Date,o=new Date,l=new Date;if(r.setHours(n),r.setMinutes(s),o.setHours(e.tv.oBsHours.startTime[0]),o.setMinutes(e.tv.oBsHours.startTime[1]),l.setHours(e.tv.oBsHours.endTime[0]),l.setMinutes(e.tv.oBsHours.endTime[1]),!e.setting.excludeNonBusinessHours||e.compareDateTimes(r,o)>=0&&e.compareDateTimes(r,l)<0){var d=e.getNumberStringInFormat(n,2,!1)+e.getNumberStringInFormat(s,2,!1),c=e.getDateInFormat({iDate:{H:n,m:s}},"hh:mm",e.setting.is24Hour,!0);t+="<th class='"+("cdvTimeSlotTableRow cdvTimeSlotTableRow"+d)+"' title='"+c+"'>",t+="<p class='cdvDetailTableColumnTime'><span>"+c+"</span></p>",t+="</th>",e.tv.fAHrTpPos.push(a),a+=32}}t+="</thead>",t+="</table>",$(e.elem).find(".cdvContRow3Main").html(t),$(e.elem).find(".cdvContRow3Main").scroll(function(){e.tv.bDVScrlg=!0,setTimeout(function(){e.tv.bDVScrlg=!1},1e3)}),setTimeout(function(){e._showCurrentTimeIndicator()},100),e._makeViewDroppableInDetailView()},__updateTimeSlotTableView:function(){var e=this;$(e.elem).find(".cdvTableColumns").removeClass("cNonBusinessHoursBg cRestrictedSectionBg cBusinessHoursBg"),e._getTimeSlotsArrayForCurrentView();var t,a,i,n,s,r=24*e.tv.iUTmSlt;for(t=0;t<r;t++){var o=Math.floor(t/e.tv.iUTmSlt),l=t%e.tv.iUTmSlt*e.setting.unitTimeInterval,d=".cdvTimeSlotTableRow"+(e.getNumberStringInFormat(o,2,!1)+e.getNumberStringInFormat(l,2,!1)),c=$(e.elem).find(d);for(a=0;a<e.tv.iNoVDayDis;a++){i=e.tv.bADVCur[a][t];var v=$(c).find(".cdvDetailTableColumn"+a),g="";if(0===i)g="cNonBusinessHoursBg";else if(2===i)g="cRestrictedSectionBg";else if(1!==i){for(n=0;n<e.tv.sADVInfo.length;n++)if((s=e.tv.sADVInfo[n]).index===i){$.cf.isValid(s.class)&&(g+=" "+s.class),$.cf.isValid(s.bgColor)&&v.css({background:$.cf.addHashToHexcode(s.bgColor)});break}}else 1===i&&(g="cBusinessHoursBg");v.addClass(g)}}for(a=0;a<e.tv.iNoVDayDis;a++){i=e.tv.bADVCur[a][r];var m=$(e.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+a);if(2===i)m.addClass("cRestrictedSectionBg");else if(0!==i&&1!==i)for(n=0;n<e.tv.sADVInfo.length;n++)if((s=e.tv.sADVInfo[n]).index===i){$.cf.isValid(s.class)&&m.addClass(s.class),$.cf.isValid(s.bgColor)&&m.css({background:$.cf.addHashToHexcode(s.bgColor)});break}}},_makeViewDroppableInDetailView:function(){var e,t,a,i,n,s,r,o,l,d,c,v,g,m,D=this,f=!1;$(D.elem).find(".cdvDetailTableRow2 .cdvAllDayColumns").droppable({scope:"AllDayEvents",over:function(p,u){e=$(this).attr("id"),t=parseInt(e.replace("cdvAllDayColumn","")),a=u.draggable,i=$(D.elem).find(a).attr("id"),n=i.replace("Event-",""),s=D.getEventWithId(n),r=s.start,o=s.end,l=s.isAllDay,d=D.getNumberOfDaysOfEvent(l,r,o,!1,!1,!0),c=D.tv.dAVDt[t],v=D.setDateInFormat({iDate:{d:c.getDate(),M:c.getMonth(),y:c.getFullYear(),H:r.getHours(),m:r.getMinutes(),s:r.getSeconds()}},""),g=new Date(v.getTime()+(o.getTime()-r.getTime())),D.tv.bChkDroppable&&(m=$(D.elem).find("#"+i+".ui-draggable-dragging"),e=m.attr("data-droppableid"),(f=D._findWhetherEventEnteredNonDroppableZone(v,g,l,d,e))?(m.addClass("cCursorNotAllowed"),m.find(".cEventLink").addClass("cCursorNotAllowed")):(m.removeClass("cCursorNotAllowed"),m.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(D.elem).find(".cdvAllDayColumns").removeClass("cActivatedCell");for(var h=0;h<d;h++){var y=t+h;if(y<=D.tv.dAVDt.length-1){var w="#cdvAllDayColumn"+y;$(D.elem).find(w).addClass("cActivatedCell")}}},drop:function(p,u){if(e=$(this).attr("id"),t=parseInt(e.replace("cdvAllDayColumn","")),$(D.elem).find(".cdvAllDayColumns").removeClass("cActivatedCell"),a=u.draggable,i=$(D.elem).find(a).attr("id"),n=i.replace("Event-",""),s=D.getEventWithId(n),r=s.start,o=s.end,l=s.isAllDay,d=D.getNumberOfDaysOfEvent(l,r,o,!1,!1,!0),c=D.tv.dAVDt[t],v=D.setDateInFormat({iDate:{d:c.getDate(),M:c.getMonth(),y:c.getFullYear(),H:r.getHours(),m:r.getMinutes(),s:r.getSeconds()}},""),g=new Date(v.getTime()+(o.getTime()-r.getTime())),D.tv.bChkDroppable&&(m=$(D.elem).find("#"+i+".ui-draggable-dragging"),e=m.attr("data-droppableid"),f=D._findWhetherEventEnteredNonDroppableZone(v,g,l,d,e),m.removeClass("cCursorNotAllowed"),m.find(".cEventLink").removeClass("cCursorNotAllowed")),f)setTimeout(function(){return D.tv.bChkDroppable&&m.removeClass("cEventBeingDragged ui-draggable-dragging"),$(u.draggable).remove(),D._makeEventNonEditableInDetailView(),!1},300);else{if(!D.__updateEventWithId(n,v,g))return $(u.draggable).remove(),D._makeEventNonEditableInDetailView(),!1;$(D.elem).find(".cdvEventAllDay").remove(),D.__addEventsInDetailView("AllDay"),D._adjustAllDayEventsInDetailView(),D._makeEventNonEditableInDetailView()}D.tv.bDVDrgEv=!1,D.setting.saveChangesOnEventDrop&&D.setting.saveChangesOnEventDrop.call(D,s,r,o,v,g)}})},_canEditEventInDetailView:function(e){var t=e.split("-"),a=t[1],i=t[2];return[null!==this.tv.oEvEdt&&this.tv.oDVEdtgEv.sEventId===a,a,i]},_makeEventResizableInDetailView:function(e){var t,a,i,n,s,r,o,l,d,c,v,g,m,D,f=this,p=($(f.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(f.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2,u=p/4,h=46*p;$(f.elem).find(e).resizable({grid:p,distance:u,handles:"s",maxHeight:h,minHeight:p/2,containment:"parent",create:function(t,a){$(f.elem).find(e).find(".ui-resizable-handle").css({"text-align":"center"});var i=$(f.elem).find(e+" .ui-resizable-s");i.css({bottom:0}),i.addClass("cEventResizeHandle"),i.html("<div class ='cHandleSouth'></div>"),i.on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()})},start:function(e,t){if(f.tv.bDVDrgEv||f.tv.bDVScrlg)return!1;a=$(f.elem).find(t.element).attr("id"),$.CalenStyle.extra.bTouchDevice||(c=a.split("-"),v=c[1],f._changeViewPropertiesWhileEditing("BEFORE",v));var g=f._canEditEventInDetailView(a);g[0]&&(f.tv.bDVResEv=!0,a="#"+a,i=g[1],n=g[2],d=$(f.elem).find(a).height(),"Event-"+i,l=$(f.elem).find(a).position().top,s=f._getStartAndEndDatesOfEventWithId(i),r=new Date(s[0]),o=new Date(s[1]))},resize:function(e,s){if(f.tv.bDVDrgEv||f.tv.bDVScrlg)return!1;a=$(f.elem).find(s.element).attr("id");var c=f._canEditEventInDetailView(a);if(c[0]){t=f._getNumberOfDaysOfEventForWeek(0,r,o,!1,!0),a="#"+a;var v=$(f.elem).find(a).height(),p=l;$(f.elem).find(a).css({top:p});var u=0;if(p<0?v>=(u=p+d)-10&&v<=u+10&&(u=0):u=v,u>0&&Math.abs(v-d)>10){var h;if(v<d?(h=o.getTime(),h-=f.tv.iUTmMS,o=new Date(h)):v>d&&(h=o.getTime(),h+=f.tv.iUTmMS,o=new Date(h)),g=$(f.elem).find(a+".ui-resizable-resizing"),m=g.attr("data-droppableid"),D=f._findWhetherEventEnteredNonDroppableZone(r,o,!1,t,m))return g.addClass("cCursorNotAllowed"),g.find(".cEventLink").addClass("cCursorNotAllowed"),g.css({height:s.originalSize.height}),!1;if(g.removeClass("cCursorNotAllowed"),g.find(".cEventLink").removeClass("cCursorNotAllowed"),!D){if(p+v<=0)return f._performOperationsAfterResizingStopsInDetailView(i,r,o),!1;if(2===t&&1===n)return $(f.elem).find("#Event-"+i+"-2").remove(),(o=f.setDateInFormat({date:r},"END")).setMinutes(30),o.setSeconds(0),f._performOperationsAfterResizingStopsInDetailView(i,r,o),!1;d=v}}}},stop:function(e,t){if(f.tv.bDVDrgEv||f.tv.bDVScrlg)return!1;a=$(f.elem).find(t.element).attr("id");var n=f._canEditEventInDetailView(a);n[0]&&($.cf.isValid(g)&&(g.removeClass("cCursorNotAllowed"),g.find(".cEventLink").removeClass("cCursorNotAllowed")),D&&(s=f._getStartAndEndDatesOfEventWithId(i),r=new Date(s[0]),o=new Date(s[1])),f._performOperationsAfterResizingStopsInDetailView(i,r,o),f.tv.bDVResEv=!1),$.CalenStyle.extra.bTouchDevice||f._makeEventNonEditableInDetailView()}})},_performOperationsAfterResizingStopsInDetailView:function(e,t,a){var i=this,n=i.getEventWithId(e),s=n.isAllDay,r=n.start,o=n.end;n.start=t,n.end=a,i._removeEventSegWithId(e),i._createAndAddEventSegForId(e,s,t,a),i._setPropertiesOfEventSeg(),i.tv.oEvEdt=n,$(i.elem).find(".cdvEvent").removeClass("ui-resizable-resizing"),i.tv.bDVResEv=!1,i.setting.saveChangesOnEventResize&&i.setting.saveChangesOnEventResize.call(i,n,r,o,t,a)},__adjustDetailViewTable:function(){var e=this,t=$(e.elem).find(".cdvCalendarCont").css("max-height");t=parseInt(t.replace("px",""))||0;var a=$(e.elem).find(".cdvCalendarCont").css("min-height");a=parseInt(a.replace("px",""))||0;var i=$.CalenStyle.extra.iScrollbarWidth;if(t>0&&$(e.elem).height()>t?$(e.elem).css({height:t}):a>0&&$(e.elem).height()<a&&$(e.elem).css({height:a}),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight}),$(e.elem).find(".cdvCalendarCont").length>0&&!e.tv.bDVDrgEv&&!e.tv.bDVResEv){var n=$(e.elem).find(".calendarCont").parent().outerWidth(),s=$(e.elem).find(".calendarCont").outerHeight(),r=s;if(e.tv.bDisFBar)if($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right"))n-=e.setting.filterBarWidth;else if($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom")){var o=n;$(e.elem).find(".cFilterBar").css({width:o}),r-=$(e.elem).find(".cFilterBar").height()}$(e.elem).find(".calendarContInner").css({width:n,height:r}),e.__adjustHeader(),$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:n}),$(e.elem).find(".calendarCont").css("overflow","hidden");var l=n,d=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0;e.tv.bDisABar&&(s-=$(e.elem).find(".cActionBar").height()),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(s-=$(e.elem).find(".cFilterBar").height());var c=s-d;e.tv.bDisABar&&e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Bottom")?c-=$.CalenStyle.extra.iBorderOverhead:c+=$.CalenStyle.extra.iBorderOverhead,$(e.elem).find(".cdvDetailTableMain").css({height:c,width:l});var v=e.tv.iNoVDay*$.CalenStyle.extra.iBorderOverhead,g=$(e.elem).find(".cdvDetailTableColumnTime").width(),m=((g=60!==g?60:g)-i-v)/e.tv.iNoVDayDis;$(e.elem).find(".cdvTableColumns").css({width:m}),$(e.elem).find(".cdvAllDayColumns").css({width:m});var D=s-50,f=n-$.CalenStyle.extra.iBorderOverhead,p=$(e.elem).find(".cdvTimeSlotTable").prop("scrollHeight");D=D>p?p:D,$(e.elem).find(".cdvContRow3Main").css({left:55,top:50,height:D,width:f}),0===i?f+=1:f=i>v?f-i:f-v+i,$(e.elem).find(".cdvContRow3Events").css({height:p,width:f}),m=(n-(g=60!==(g=$(e.elem).find(".cdvDetailTableColumnTime").width())?60:g)-i-v)/e.tv.iNoVDayDis,$(e.elem).find(".cdvTableColumns").css({width:m}),$(e.elem).find(".cdvAllDayColumns").css({width:m}),$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")&&$(e.elem).find(".cdlvDaysTable").css({width:m}),e.tv.fDVDayWth=$(e.elem).find(".cdvTableColumns").width();var u=e._getTimeSlotLeftPosition();$(e.elem).find(".cdvContRow3Main .cTimeline").length>0&&$(e.elem).find(".cdvContRow3Main .cTimeline").css({left:u,width:e.tv.fDVDayWth}),e.tv.fADVDayLftPos=[];for(var h=0;h<e.tv.iNoVDayDis;h++){var y="#cdvCellDay"+h,w=$(e.elem).find(y).position().left;e.tv.fADVDayLftPos.push(w)}e._adjustEventsInDetailView(),e._adjustAllDayEventsInDetailView()}e.setCalendarBorderColor()},_adjustEventsInDetailView:function(){for(var e=this,t=$(e.elem).find(".cdvEvent"),a=0;a<t.length;a++){var i=t[a],n=$(e.elem).find(i).attr("data-pos").split("|"),s=parseInt(n[1]),r=$(e.elem).find(i),o=r.attr("id"),l=e._getLeftColumnAndWidthOfAnEventSegInDetailView(o),d=l[0],c=l[1],v=e.tv.fADVDayLftPos[s],g=parseInt(n[2]),m=100/c,D=e.tv.fDVDayWth*m/100;v+=(d-1)*D,D-=.05*D,r.css({left:v,top:g,width:D}),g<0&&r.find(".cEventLink").css({"margin-top":Math.abs(g)});var f=r.height()-r.find(".cdvEventTime").height()-10,p=r.find(".cdvEventTitle").css("min-height");(p=$.cf.isValid(p)?parseInt(p.replace("px","")):0)<f&&r.find(".cdvEventTitle").css({"max-height":f})}e._makeEventEditableInDetailView(".cdvEvent")},_displayWeekNumberInDetailView:function(){var e=this,t=e.__getWeekNumber(e.tv.dVSDt,e.tv.dVEDt);$(e.elem).find(".cdvCellWeekNumberLabel").html(e.setting.miscStrings.week),$(e.elem).find(".cdvCellWeekNumber").html(t)},_setDateStringsInDetailView:function(){var e,t=this,a=t.getDateInFormat({date:t.tv.dVSDt},"object",!1,!0),i=t.getDateInFormat({date:t.tv.dVEDt},"object",!1,!0);e=$.cf.compareStrings(t.setting.visibleView,"DayView")||$.cf.compareStrings(t.setting.visibleView,"CustomView")&&1===t.setting.daysInCustomView?"<b>"+t.getDateInFormat({iDate:a},"DDDD",!1,!0)+" "+t.getDateInFormat({iDate:i},"MMMM",!1,!0)+" "+t.getNumberStringInFormat(i.d,0,!0)+"</b>  "+t.getNumberStringInFormat(i.y,0,!0):a.y===i.y?a.M===i.M?"<b>"+t.getDateInFormat({iDate:a},"MMM",!1,!0)+" "+t.getNumberStringInFormat(a.d,0,!0)+"</b>  -  <b>"+t.getNumberStringInFormat(i.d,0,!0)+"</b>  "+t.getNumberStringInFormat(i.y,0,!0):"<b>"+t.getDateInFormat({iDate:a},"MMM",!1,!0)+"  "+t.getNumberStringInFormat(a.d,0,!0)+"</b>  -  <b>"+t.getDateInFormat({iDate:i},"MMM",!1,!0)+" "+t.getNumberStringInFormat(i.d,0,!0)+"</b>  "+t.getNumberStringInFormat(i.y,0,!0):"<b>"+t.getDateInFormat({iDate:a},"MMM",!1,!0)+"  "+t.getNumberStringInFormat(a.d,0,!0)+"</b>  "+t.getNumberStringInFormat(a.y,0,!0)+"  -  <b>"+t.getDateInFormat({iDate:i},"MMM",!1,!0)+" "+t.getNumberStringInFormat(i.d,0,!0)+"</b>  "+t.getNumberStringInFormat(i.y,0,!0),t.setting.modifyHeaderViewLabels&&t.setting.modifyHeaderViewLabels.call(t,t.tv.dVSDt,t.tv.dVEDt,t.setting.selectedDate,e,t.setting.visibleView),$(t.elem).find(".cContHeaderLabel").html(e);for(var n=0;n<t.tv.iNoVDayDis;n++){var s=t.tv.dAVDt[n],r=t.compareDates(s,$.CalenStyle.extra.dToday),o=s.getDay(),l=".cdvDetailTableMain #cdvCellDay"+n,d=s.getDate(),c=!t.tv.bABsDays[o],v=t.tv.bADVCur[n][24*t.tv.iUTmSlt];c&&0===r?$(t.elem).find(l).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(c&&$(t.elem).find(l).addClass("cNonBusinessHoursBg"),0===r&&$(t.elem).find(l).addClass("cTodayHighlightTextColor")),0===r?$(t.elem).find(l).html(`<span class='cdvCellDayLeft'><span>${t.getNumberStringInFormat(d,0,!0)}</span> ${t.setting.miscStrings.today}</span>`):$(t.elem).find(l).html(`<span class='cdvCellDayLeft'><span class=>${t.getNumberStringInFormat(d,0,!0)}</span> ${t.getDateInFormat({iDate:{D:o}},"DDD",!1,!0)}</span>`),c&&0===r?$(t.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+n).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(c&&$(t.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+n).addClass("cNonBusinessHoursBg"),0===r&&$(t.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+n).addClass("cTodayHighlightTextColor"),2===v&&$(t.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+n).addClass("cRestrictedSectionBg")),c&&0===r?$(t.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+n).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(c&&$(t.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+n).addClass("cNonBusinessHoursBg"),0===r&&$(t.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+n).addClass("cTodayHighlightTextColor"))}$.cf.compareStrings(t.setting.visibleView,"WeekView")&&t._displayWeekNumberInDetailView()},__goToPrevDetailView:function(){var e=this;if(e.setting.showTransition){var t=$(e.elem).find(".cdvDetailTableMain"),a=t.width(),i=t.position().left,n=0;n=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top;var s=t.clone();$(s).removeClass("cdvDetailTableMain").addClass("cdvDetailTableTemp"),$(s).css({position:"absolute",top:n,left:i}),t.parent().append(s),i+=a,$(e.elem).find(".cdvDetailTableTemp .cdlvDaysTableMain").removeClass("cdlvDaysTableMain").addClass("cdlvDaysTableTemp"),icdvContRow2Left=icdvContRow2Left;var r=$(e.elem).find(".cdvContRow3Main"),o=r.position().left,l=r.width(),d=r.clone();if($(d).removeClass(".cdvContRow3Main").addClass("cdvContRow3Temp"),r.parent().append(d),o+=l,$(e.elem).find(".cdvContRow3Main .cTimeline").remove(),!$.CalenStyle.extra.bTouchDevice&&$(e.elem).find(".cdvContRow3Temp .cTimeIndicator").length>0){var c=$(e.elem).find(".cdvContRow3Temp .cTimeIndicator").position().top-$(e.elem).find(".cdvContRow3Temp").height()/2;$(e.elem).find(".cdvContRow3Temp").scrollTop(c)}$(s).animate({left:i},e.setting.transitionSpeed),$(newElemCont2).animate({left:icdvContRow2Left},e.setting.transitionSpeed),$(d).animate({left:o},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cdvDetailTableTemp").remove(),$(e.elem).find(".cdvContRow2Temp").remove(),$(e.elem).find(".cdvContRow3Temp").remove()},e.setting.transitionSpeed)}if($.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")){var v=e.tv.iNoVDay+1,g=e.__setCurrentViewDatesArray(v,e.tv.dVSDt,null,"Prev");g.shift(),g.reverse(),e.setting.selectedDate=g[e.tv.iSelDay],e.setting.selectedDate=e.setDateInFormat({date:e.setting.selectedDate},"START")}else{var m=e.tv.dVSDt.getTime();7===e.setting.daysInCustomView?m-=e.tv.iNoVDay*$.CalenStyle.extra.iMS.d:m-=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(m)},"START")}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.__reloadCurrentView(!0,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__goToNextDetailView:function(){var e=this;if(e.setting.showTransition){var t=$(e.elem).find(".cdvDetailTableMain"),a=t.width(),i=t.position().left,n=0;n=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top;var s=t.clone();$(s).removeClass("cdvDetailTableMain").addClass("cdvDetailTableTemp"),$(s).css({position:"absolute",top:n,left:i}),t.parent().append(s),i-=a,$(e.elem).find(".cdvDetailTableTemp .cdlvDaysTableMain").removeClass("cdlvDaysTableMain").addClass("cdlvDaysTableTemp"),icdvContRow2Left=icdvContRow2Left;var r=$(e.elem).find(".cdvContRow3Main"),o=r.position().left,l=r.width(),d=r.clone();if($(d).removeClass(".cdvContRow3Main").addClass("cdvContRow3Temp"),r.parent().append(d),o-=l,$(e.elem).find(".cdvContRow3Main .cTimeline").remove(),!$.CalenStyle.extra.bTouchDevice&&$(e.elem).find(".cdvContRow3Temp .cTimeIndicator").length>0){var c=$(e.elem).find(".cdvContRow3Temp .cTimeIndicator").position().top-$(e.elem).find(".cdvContRow3Temp").height()/2;$(e.elem).find(".cdvContRow3Temp").scrollTop(c)}$(s).animate({left:i},e.setting.transitionSpeed),$(newElemCont2).animate({left:icdvContRow2Left},e.setting.transitionSpeed),$(d).animate({left:o},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cdvDetailTableTemp").remove(),$(e.elem).find(".cdvContRow2Temp").remove(),$(e.elem).find(".cdvContRow3Temp").remove()},e.setting.transitionSpeed)}if($.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")){var v=e.tv.iNoVDay+1,g=e.__setCurrentViewDatesArray(v,e.tv.dVEDt,null,"Next");g.shift(),e.setting.selectedDate=g[e.tv.iSelDay],e.setting.selectedDate=e.setDateInFormat({date:e.setting.selectedDate},"START")}else{var m=e.tv.dVEDt.getTime();m+=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(m)},"START")}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.__reloadCurrentView(!0,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},_showCurrentTimeIndicator:function(){for(var e,t=this,a=!1,i=0;i<$.CalenStyle.extra.oArrCalenStyle.length;i++){if($.CalenStyle.extra.oArrCalenStyle[i].tv.pluginId===t.tv.pluginId){a=!0;break}}if(a){var n=Math.floor(($(t.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(t.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2/t.setting.unitTimeInterval);if($.cf.compareStrings(t.setting.visibleView,"WeekView")||$.cf.compareStrings(t.setting.visibleView,"DayView")||$.cf.compareStrings(t.setting.visibleView,"CustomView")||$.cf.compareStrings(t.setting.visibleView,"DayEventDetailView")){var s=t._getCurrentDate(),r=s.getHours(),o=s.getMinutes(),l=n*(o%t.setting.unitTimeInterval);o-=l;var d=".cdvContRow3Main .cdvTimeSlotTableRow"+t.getNumberStringInFormat(r,2,!1)+t.getNumberStringInFormat(o,2,!1);if($(t.elem).find(d).length>0){var c,v=$(t.elem).find(d).position().top,g=0,m=0;t.tv.fDVDayWth>0&&(m=t.tv.fDVDayWth),v+=l,($.cf.compareStrings(t.setting.visibleView,"DayEventDetailView")?0===t.compareDates(t.setting.selectedDate,$.CalenStyle.extra.dToday):t.__isDateInCurrentView(s))?(g=t._getTimeSlotLeftPosition(),$(t.elem).find(".cdvContRow3Main .cTimeline").length>0?$(t.elem).find(".cdvContRow3Main .cTimeline").css({left:g,top:v,width:m}):(c="<div class='cTimeline'></div>",$(t.elem).find(".cdvContRow3Main .cdvTimeSlotTable").append(c),$(t.elem).find(".cdvContRow3Main .cTimeline").css({left:g,top:v,width:m}))):$(t.elem).find(".cdvContRow3Main .cTimeline").remove(),$(t.elem).find(".cdvContRow3Main .cTimeIndicator").length>0?$(t.elem).find(".cdvContRow3Main .cTimeIndicator").css({top:v}):(c="<div class='cTimeIndicator'></div>",$(t.elem).find(".cdvContRow3Main .cdvTimeSlotTable").append(c),$(t.elem).find(".cdvContRow3Main .cTimeIndicator").css({top:v})),$.CalenStyle.extra.bTouchDevice||setTimeout(function(){var e=v-$(t.elem).find(".cdvContRow3Main").height()/2;$(t.elem).find(".cdvContRow3Main").scrollTop(e)},500)}e=setTimeout(function(){t._showCurrentTimeIndicator()},$.CalenStyle.extra.iMS.m*t.setting.timeIndicatorUpdationInterval)}a=!1}else clearTimeout(e)},_getTimeSlotLeftPosition:function(){var e=this,t=0;if(e.tv.fADVDayLftPos.length>0)for(var a=0;a<e.tv.dAVDt.length;a++)if(0===e.compareDates($.CalenStyle.extra.dToday,e.tv.dAVDt[a])){t=$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")?e.tv.fADVDayLftPos[0]:e.tv.fADVDayLftPos[a];break}return t},_addTooltipInDetailView:function(){var e=this;$(e.elem).find(".cEventTooltip").tooltip({content:function(){var t="";if($.cf.compareStrings(e.setting.eventTooltipContent,"Default")){var a=$(this).data("tooltipcontent");void 0!==a.title&&(t+="<div class='cTooltipTitle'>"+a.title+"</div>"),void 0===a.startDateTime&&void 0!==a.endDateTime||(t+="<div class='cTooltipTime'>",void 0!==a.startDateTime&&(t+=a.startDateTime),void 0!==a.endDateTime&&(t+="<br/>"+a.endDateTime),t+="</div>")}else{var i=$(this).attr("data-id"),n=e.getEventWithId(i);t=e.setting.eventTooltipContent.call(e,n)}return t},position:{my:"left-25 bottom-15",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("tooltip-arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},track:!0})}}),a.prototype=$.extend(a.prototype,{__updateQuickAgendaView:function(){var e,t,a=this,i="",n=1===a.tv.iNoVDayDis?" cqavSingleColumn":" cqavMultiColumn";for(i+="<thead>",i+="<tr class='cqavTableRow1'>",e=0;e<a.tv.iNoVDayDis;e++){var s="cqavDayColumn"+e;t="cqavTableColumns",t+=n,e===a.tv.iNoVDayDis-1&&(t+=" cqavLastColumn"),i+="<td id='"+s+"' class='"+t+"'>&nbsp;</td>"}for(i+="</tr>",i+="</thead>",i+="<tbody>",i+="<tr class='cqavTableRow2'>",e=0;e<a.tv.iNoVDayDis;e++){var r="cqavDayColumn"+e;t="cqavTableColumns",e===a.tv.iNoVDayDis-1&&(t+=" cqavLastColumn"),i+="<td id='"+r+"' class='"+t+"' title='"+a.getDateInFormat({date:a.tv.dAVDt[e]},"dd-MMM-yyyy",a.setting.is24Hour,!0)+"'> &nbsp; </td>"}i+="</tr>",i+="</tbody>",$(a.elem).find(".cqavTableMain").html(i),a._setDateStringsInHeaderOfQuickAgendaView(),a._makeEventContDroppableInQuickAgendaView(),a._takeActionOnDayClickInQuickAgendaView()},_setDateStringsInHeaderOfQuickAgendaView:function(){for(var e=this,t=0;t<e.tv.iNoVDayDis;t++){var a,i=e.tv.dAVDt[t],n=e.compareDates(i,$.CalenStyle.extra.dToday),s=i.getDay(),r=".cqavTableRow1 #cqavDayColumn"+t,o=$(e.elem).find(r),l=i.getDate(),d=!e.tv.bABsDays[s],c=e._getRestrictedSectionForCurrentView(i),v="",g="";for(a=0;a<c.length;a++){var m=c[a],D=new Date(m.start),f=0===e.compareDates(i,D),p=new Date(m.end),u=0===e.compareDates(i,p);f||(D=e._normalizeDateTime(i,"START","T")),u||(p=e._normalizeDateTime(i,"END","T")),(Math.round((p.getTime()-D.getTime())/$.CalenStyle.extra.iMS.h)>23||m.isAllDay)&&($.cf.isValid(m.backgroundColor)&&(v=$.cf.addHashToHexcode(m.backgroundColor)),$.cf.isValid(m.class)&&(g=m.class))}d&&0===n?o.addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(d&&o.addClass("cNonBusinessHoursBg"),0===n&&o.addClass("cTodayHighlightTextColor"),$.cf.isValid(v)&&o.css({background:v}),$.cf.isValid(g)&&o.addClass(g)),0===n?$(e.elem).find(r).html("<span class='cqavDayColumnLeft'>"+e.setting.miscStrings.today+"</span><span class='cqavDayColumnRight'>"+e.getNumberStringInFormat(l,0,!0)+"</span>"):$(e.elem).find(r).html("<span class='cqavDayColumnLeft'>"+e.getDateInFormat({iDate:{D:s}},"DDD",!1,!0)+"</span><span class='cqavDayColumnRight'>"+e.getNumberStringInFormat(l,0,!0)+"</span>");var h=".cqavTableRow2 #cqavDayColumn"+t,y=$(e.elem).find(h);d&&0===n?y.addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(d&&y.addClass("cNonBusinessHoursBg"),0===n&&y.addClass("cTodayHighlightTextColor"),$.cf.isValid(v)&&y.css({background:v}),$.cf.isValid(g)&&y.addClass(g))}var w,C=e.getDateInFormat({date:e.tv.dVSDt},"object",!1,!0),S=e.getDateInFormat({date:e.tv.dVEDt},"object",!1,!0);w=$.cf.compareStrings(e.setting.quickAgendaViewDuration,"CustomDays")&&1===e.setting.daysInQuickAgendaView?"<b>"+e.getDateInFormat({iDate:C},"DDDD",!1,!0)+" "+e.getDateInFormat({iDate:S},"MMMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):C.y===S.y?C.M===S.M?"<b>"+e.getDateInFormat({iDate:C},"MMM",!1,!0)+" "+e.getNumberStringInFormat(C.d,0,!0)+"</b>  -  <b>"+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):"<b>"+e.getDateInFormat({iDate:C},"MMM",!1,!0)+"  "+e.getNumberStringInFormat(C.d,0,!0)+"</b>  -  <b>"+e.getDateInFormat({iDate:S},"MMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):"<b>"+e.getDateInFormat({iDate:C},"MMM",!1,!0)+"  "+e.getNumberStringInFormat(C.d,0,!0)+"</b>  "+e.getNumberStringInFormat(C.y,0,!0)+"  -  <b>"+e.getDateInFormat({iDate:S},"MMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0),e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,w,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(w)},_takeActionOnDayClickInQuickAgendaView:function(){var e=this;$(e.elem).find(".cqavContRow2Main").on($.CalenStyle.extra.sClickHandler,function(t){var a={};a.x=t.pageX||t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches[0].pageX,a.y=t.pageY||t.originalEvent.touches[0].pageY||t.originalEvent.changedTouches[0].pageY;var i=e._getDateBasedOnLeftPositionInQuickAgendaView(a.x-$(this).offset().left);e.setting.cellClicked&&e.setting.cellClicked.call(e,e.setting.visibleView,i,!0,a)})},__goToPrevQuickAgendaView:function(){var e,t=this;if(t.setting.showTransition){var a=$(t.elem).find(".cqavTableMain"),i=a.width(),n=a.position().left,s=0;s=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").position().top+$(t.elem).find(".cContHeader").outerHeight()-1:$(t.elem).position().top;var r=a.clone();$(r).removeClass("cqavTableMain").addClass("cqavTableTemp"),$(r).css({position:"absolute",top:s,left:n}),a.parent().append(r),n+=i;var o=$(t.elem).find(".cqavContRow2Main"),l=o.position().left,d=o.width(),c=o.clone();$(c).removeClass("cqavContRow2Main").addClass("cqavContRow2Temp"),o.parent().append(c),l+=d,$(r).animate({left:n},t.setting.transitionSpeed),$(c).animate({left:l},t.setting.transitionSpeed),setTimeout(function(){$(t.elem).find(".cqavTableTemp").remove(),$(t.elem).find(".cqavContRow2Temp").remove()},t.setting.transitionSpeed)}t.setting.navigateOneDayInQuickAgendaView?(e=t.tv.dVEDt.getTime(),e-=$.CalenStyle.extra.iMS.d):(e=t.tv.dVSDt.getTime(),7===t.setting.daysInQuickAgendaView?e-=t.tv.iNoVDay*$.CalenStyle.extra.iMS.d:e-=$.CalenStyle.extra.iMS.d),t.setting.selectedDate=t.setDateInFormat({date:new Date(e)},"START"),t.tv.dLoadDt=t.setDateInFormat({date:t.setting.selectedDate},"START"),t.tv.sLoadType="Prev",t.__reloadCurrentView(!1,!0),setTimeout(function(){t.__reloadDatePickerContentOnNavigation()},10)},__goToNextQuickAgendaView:function(){var e,t=this;if(t.setting.showTransition){var a=$(t.elem).find(".cqavTableMain"),i=a.width(),n=a.position().left,s=0;s=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").position().top+$(t.elem).find(".cContHeader").outerHeight()-1:$(t.elem).position().top;var r=a.clone();$(r).removeClass("cqavTableMain").addClass("cqavTableTemp"),$(r).css({position:"absolute",top:s,left:n}),a.parent().append(r),n-=i;var o=$(t.elem).find(".cqavContRow2Main"),l=o.position().left,d=o.width(),c=o.clone();$(c).removeClass("cqavContRow2Main").addClass("cqavContRow2Temp"),o.parent().append(c),l-=d,$(r).animate({left:n},t.setting.transitionSpeed),$(c).animate({left:l},t.setting.transitionSpeed),setTimeout(function(){$(t.elem).find(".cqavTableTemp").remove(),$(t.elem).find(".cqavContRow2Temp").remove()},t.setting.transitionSpeed)}t.setting.navigateOneDayInQuickAgendaView?(e=t.tv.dVSDt.getTime(),e+=$.CalenStyle.extra.iMS.d):(e=t.tv.dVEDt.getTime(),e+=$.CalenStyle.extra.iMS.d),t.setting.selectedDate=t.setDateInFormat({date:new Date(e)},"START"),t.tv.dLoadDt=t.setDateInFormat({date:t.setting.selectedDate},"START"),t.tv.sLoadType="Next",t.__reloadCurrentView(!1,!0),setTimeout(function(){t.__reloadDatePickerContentOnNavigation()},10)},__adjustQuickAgendaView:function(e){var t=this,a=$(t.elem).find(".cqavCalendarCont").css("max-height");a=parseInt(a.replace("px",""))||0;var i=$(t.elem).find(".cqavCalendarCont").css("min-height");if(i=parseInt(i.replace("px",""))||0,a>0&&$(t.elem).height()>a?$(t.elem).css({height:a}):i>0&&$(t.elem).height()<i&&$(t.elem).css({height:i}),0!==t.tv.iCalHeight&&$(t.elem).css({height:t.tv.iCalHeight}),$(t.elem).find(".cqavCalendarCont").length>0&&!t.tv.bDVDrgEv&&!t.tv.bDVResEv){var n=$(t.elem).find(".calendarCont").parent().outerWidth(),s=$(t.elem).find(".calendarCont").outerHeight(),r=s;if(t.tv.bDisFBar)if($.cf.compareStrings(t.setting.filterBarPosition,"Left")||$.cf.compareStrings(t.setting.filterBarPosition,"Right"))n-=t.setting.filterBarWidth;else if($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom")){var o=n;$(t.elem).find(".cFilterBar").css({width:o}),r-=$(t.elem).find(".cFilterBar").height()}$(t.elem).find(".calendarContInner").css({width:n,height:r}),t.__adjustHeader(),$.cf.compareStrings(t.setting.filterBarPosition,"Right")&&$(t.elem).find(".cFilterBar").css({left:n});var l=n,d=n;$(t.elem).find(".cContHeader").length>0&&$(t.elem).find(".cContHeader").css({width:d});var c=n,v=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").outerHeight():0;t.tv.bDisABar&&(s-=$(t.elem).find(".cActionBar").height()),t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&(s-=$(t.elem).find(".cFilterBar").height());var g=s-v;t.tv.bDisABar&&t.tv.bDisFBar&&$.cf.compareStrings(t.setting.filterBarPosition,"Bottom")?g-=$.CalenStyle.extra.iBorderOverhead:g+=$.CalenStyle.extra.iBorderOverhead,$(t.elem).find(".cqavTableMain").css({height:g,width:c});var m=$(t.elem).find(".cqavTableMain").position().top+$(t.elem).find(".cqavTableRow1").outerHeight(),D=$(t.elem).find(".cqavTableRow2").height();$(t.elem).find(".cqavContRow2Main").css({left:0,top:m,width:l,height:D});var f=(l-t.tv.iNoVDay*$.CalenStyle.extra.iBorderOverhead)/t.tv.iNoVDayDis;$(t.elem).find(".cqavTableColumns").css({width:f}),t.tv.fADVDayLftPos=[];for(var p=0;p<t.tv.iNoVDayDis;p++){var u=$(t.elem).find(".cqavTableRow2 #cqavDayColumn"+p).position().left;t.tv.fADVDayLftPos.push(u)}}t._adjustEventsInQuickAgendaView(),t.setting.isDragNDropInQuickAgendaView&&$.cf.isValid(e)&&e&&($(t.elem).find(".cqavEvent").hasClass("ui-draggable")&&$(t.elem).find(".cqavEvent").draggable("destroy"),$(t.elem).find(".cqavEvent").removeClass("ui-draggable-dragging"),t._makeEventDraggableInQuickAgendaView(".EventDraggable"))},__addEventsInQuickAgendaView:function(){var e=this;$(e.elem).find(".cqavContRow2Main")&&$(e.elem).find(".cqavContRow2Main").html("");var t=e.getArrayOfEventsForView(e.tv.dVSDt,e.tv.dVEDt),a=$.cf.isValid(e.setting.hideEventIcon[e.setting.visibleView])?e.setting.hideEventIcon[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventIcon.Default)&&e.setting.hideEventIcon.Default,i=$.cf.isValid(e.setting.hideEventTime[e.setting.visibleView])?e.setting.hideEventTime[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventTime.Default)&&e.setting.hideEventTime.Default,n=e.setting.is24Hour?"HH:mm":"h[:m]sm";if(e.tv.bAWkRw=[],t.length>0){for(var s=$.CalenStyle.extra.iEventHeights[e.setting.visibleView],r=0;r<t.length;r++){var o=t[r],l=null,d=null,c=0,v="",g="",m=!1,D=!1,f="",p="Event-"+o.calEventId;null!==o.start&&(l=o.start),null!==o.end&&(d=o.end),null!==o.isAllDay&&(c=o.isAllDay),null!==o.title&&(v=o.title),null!==o.desc&&o.desc,null!==o.type&&o.type,null!==o.url&&(g=o.url),null!==o.droppableId&&(f=o.droppableId),null!==o.isDragNDropInQuickAgendaView&&(m=o.isDragNDropInQuickAgendaView),null!==o.isMarked&&(D=o.isMarked),D&&(c=!0);var u=e.getNumberOfDaysOfEvent(c,l,d,!0,!0,!0),h=u[0],y=u[1];if(h>0){var w,C,S=h,T="",V=new Date(l),b=new Date(d);e.compareDates(l,e.tv.dVSDt)<0&&Math.abs(e.__getDifference("m",e.tv.dVSDt,l))>1&&(T="Left",V=new Date(e.tv.dVSDt)),e.compareDates(e.tv.dVEDt,d)<0&&Math.abs(e.__getDifference("m",e.tv.dVEDt,d))>1&&(T="Right",b=new Date(e.tv.dVEDt));for(var E=new Date(V),I=!0;!(e.__findWhetherDateIsVisibleInCurrentView(E,c||y>23,V,b)||(E.setDate(E.getDate()+1),I=!1,e.compareDates(E,b)>0)););if(V=new Date(E),"#cqavDayColumn"+(w=e._getDayNumberFromDateInQuickAgendaView(V)),S=(C=e.getNumberOfDaysOfEvent(c,V,b,!0,!0,I))[0],C[1]>0){var M="cqavEvent ",A=o.backgroundColor;A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A;var _=o.borderColor||$.cf.addHashToHexcode(e.setting.borderColor);_=$.cf.compareStrings(_,"")||$.cf.compareStrings(_,"transparent")?"transparent":_;var k=o.textColor||$.cf.addHashToHexcode(e.setting.textColor);k=$.cf.compareStrings(k,"")||$.cf.compareStrings(k,"transparent")?$.cf.addHashToHexcode(e.setting.textColor):k;var H=$.cf.isValid(o.nonAllDayEventsTextColor)?o.nonAllDayEventsTextColor:o.backgroundColor;H=!$.cf.isValid(H)||$.cf.compareStrings(H,"transparent")?o.backgroundColor:H;var F,N="",x="",B="",L="";!0===c||y>23?D?o.fromSingleColor?(N+="background: "+A+"; ",N+="border-color: "+_+"; ",N+="color: "+k+"; ",B+="color: "+k+"; ",x="background: "+k+"; color: #FFFFFF"):(_=A,N+="background: "+$.cf.getRGBAString(A,.1)+"; ",N+="border-color: "+_+"; ",N+="color: "+A+"; ",B+="color: "+A+"; ",x="background: "+A+"; color: "+k):(N+="background: "+A+"; ",N+="border-color: "+_+"; ",N+="color: "+k+"; ",B+="color: "+k+"; ",x="color: "+k+"; "):e.setting.onlyTextForNonAllDayEvents?(M+="cEventOnlyText ",N+="color: "+H+"; ",N+="border-color: transparent; ",S=1,T="",B+="color: "+H+"; ",x="color: "+H+"; "):(N+="background: "+A+"; ",N+="border-color: "+_+"; ",N+="color: "+k+"; ",B+="color: "+k+"; ",x="color: "+k+"; "),F="border-color: "+(o.fromSingleColor?k:"#000000"),L=D?$.cf.isValid(o.icon)&&"Dot"!==o.icon?o.icon:"cs-icon-Mark":$.cf.isValid(o.icon)?o.icon:e.setting.eventIcon,e.compareDates(d,e.tv.dAVDt[0])<0&&(M+="cBlurredEvent "),m&&(M+="EventDraggable cDragNDrop "),e.setting.isTooltipInQuickAgendaView&&(M+="cEventTooltip "),M+=p,D&&(M+=" cMarkedDayEvent");var R=0,P=0,O=-1,W=!1,j=!1;if($.cf.compareStrings(T,"Left")&&(W=!(R>0)),$.cf.compareStrings(T,"Right")&&(j=!0),!(R<S))break;var z=R>0?0:w,Y=S-R,q=e.tv.iNoVDayDis-z;Y>q&&(Y=q,j=!0),R>0&&(W=!0);for(var U,Q,Z=z+Y,J=0;J<e.tv.bAWkRw.length&&(U=e.tv.bAWkRw[J],-1===O);J++){var G=0;for(Q=z;Q<Z;Q++)if(0===U[Q]&&G<Y&&++G===Y){O=J;break}}-1===O&&(e.tv.bAWkRw.push([0,0,0,0,0,0,0]),O=e.tv.bAWkRw.length-1),U=e.tv.bAWkRw[O];var X=p+"-"+ ++P,K=N;K+="height: "+(s+"px")+"; ","transparent"===_&&(K+="border-width: 0px; ");var ee="<div id='"+X+"' class='"+M+"' style='"+K+"'  data-pos='"+(O+1+"|"+z+"|"+Y)+"' "+($.cf.isValid(f)?" data-droppableid='"+f+"'":"")+" title='' data-id='"+o.calEventId+"'>";if(ee+="<a class='cEventLink' style='"+B+"'>",D)ee+="<span class='cqavEventTitle'>"+v+"</span>",ee+="<span class='cqavEventIcon "+L+"' style='"+x+"'></span>";else{var te="";j&&W?(ee+="<span class='"+(te="cPartialEvent")+" cPartialEventLeft' style='"+F+"'></span>",ee+="<span class='"+te+" cPartialEventRight' style='"+F+"'></span>"):(j||W)&&(te="cPartialEvent",W&&(te+=" cPartialEventLeft"),j&&(te+=" cPartialEventRight"),ee+="<span class='"+te+"' style='"+F+"'></span>"),!i&&!1===c&&(1===P&&!W&&h>1||1===h)&&(ee+="<span class='cqavEventTime'>"+e.getDateInFormat({date:l},n,e.setting.is24Hour,!0)+"</span>"),a||$.cf.compareStrings(L,"Dot")||(ee+="<span class='cqavEventIcon "+L+"' style='"+x+"'></span>"),i||!1!==c||!(S>1||Y>1||y>23)||j||(ee+="<span class='cqavEventTimeRight'>"+e.getDateInFormat({date:d},n,e.setting.is24Hour,!0)+"</span>"),ee+="<span class='cqavEventTitle'>"+v+"</span>"}ee+="</a>",ee+="</div>",$(e.elem).find(".cqavContRow2Main").append(ee);var ae,ie="#"+X,ne=$(e.elem).find(ie),se=ne.find(".cEventLink");ae={};var re=e.getEventDateTimeString(l,d,c,"&&").split("&&");for(ae.title=v,ae.startDateTime=re[0],ae.endDateTime=re[1],ne.data("tooltipcontent",ae),e.setting.eventRendered&&e.setting.eventRendered.call(e,o,ne,se,e.setting.visibleView,!1),($.cf.isValid(g)||e.setting.eventClicked)&&se.on($.CalenStyle.extra.sClickHandler,{url:g,eventId:o.calEventId,eventElemSelector:ie,view:"QuickAgendaView",pluginId:e.tv.pluginId},e.__bindClick),Q=z;Q<Z;Q++)U[Q]=1,R++}}}e.setting.isTooltipInQuickAgendaView&&e._addTooltipInQuickAgendaView(".cEventTooltip"),e.setting.isDragNDropInQuickAgendaView&&e._makeEventDraggableInQuickAgendaView(".EventDraggable"),e.setting.eventsAddedInView&&e.setting.eventsAddedInView.call(e,e.setting.visibleView,".cqavEvent")}else console.log("to._addEventsInMonthView - No Events");e.addRemoveViewLoader(!1,"cEventLoaderBg"),e.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_adjustEventsInQuickAgendaView:function(){for(var e=this,t=$.CalenStyle.extra.iEventHeights[e.setting.visibleView]+2,a=$(e.elem).find(".cqavEvent"),i=0;i<a.length;i++){var n,s=a[i],r=$(e.elem).find(s).attr("data-pos").split("|"),o=parseInt(r[0]),l=parseInt(r[1]),d=parseInt(r[2]),c=10+(o-1)*t,v=$(e.elem).find("#cqavDayColumn"+l).position().left+2*$.CalenStyle.extra.iBorderOverhead;if(d>1){var g=l+(d-1);n=$(e.elem).find("#cqavDayColumn"+g).position().left+2*$.CalenStyle.extra.iBorderOverhead+$(e.elem).find("#cqavDayColumn"+g).width()-v}else n=$(e.elem).find("#cqavDayColumn"+l).width();n-=2*$.CalenStyle.extra.iBorderOverhead,$(s).css({left:v,top:c,width:n});var m=$(s).find(".cqavEventTitle"),D=$(s).height(),f=$(s).find(".cqavEventIcon"),p=null!==f?f.outerWidth(!0):0,u=$(s).find(".cqavEventTime"),h=null!==u?u.outerWidth(!0):0,y=0,w=$(s).find(".cqavEventTimeRight");null!==w&&(y=null!==w?w.outerWidth(!0):0);var C=$(s).find(".cPartialEventLeft").outerWidth(!0)+$(s).find(".cPartialEventRight").outerWidth(!0),S=n-(p+h+y+10*$.CalenStyle.extra.iBorderOverhead+C);m.css({height:D,"line-height":D+"px",width:S}),u.css({height:D,"line-height":D+"px"}),null!==w&&w.css({height:D,"line-height":D+"px"})}},_makeEventContDroppableInQuickAgendaView:function(){var e,t,a,i,n,s,r,o,l,d,c,v,g=this,m=null,D=null,f=0,p=!1,u=null,h=null;$(g.elem).find(".cqavTableRow2 .cqavTableColumns").droppable({scope:"Events",over:function(y,w){for(e=$(w.draggable),a=e.attr("id"),i=e.attr("data-id"),n=g.getEventWithId(i),s=".Event-"+i,m=null,D=null,f=!1,null!==n.start&&(m=n.start),null!==n.end&&(D=n.end),null!==n.isAllDay&&(f=n.isAllDay),r=g.getNumberOfDaysOfEvent(f,m,D,!0,!1,!0),o=r[0],r[1],l=g._getDateBasedOnLeftPositionInQuickAgendaView(w.position.left),d=g._getDayNumberFromDateInQuickAgendaView(l),u=g.setDateInFormat({iDate:{d:l.getDate(),M:l.getMonth(),y:l.getFullYear(),H:m.getHours(),m:m.getMinutes(),s:m.getSeconds()}},""),h=new Date(u.getTime()+(D.getTime()-m.getTime())),g.tv.bChkDroppable&&(e=$(g.elem).find("#"+a+".ui-draggable-dragging"),t=e.attr("data-droppableid"),(p=g._findWhetherEventEnteredNonDroppableZone(u,h,f,o,t))?(e.addClass("cCursorNotAllowed"),e.find(".cEventLink").addClass("cCursorNotAllowed")):(e.removeClass("cCursorNotAllowed"),e.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(g.elem).find(".cqavTableColumns").removeClass("cActivatedCell"),c=0;c<o;c++)(v=d+c)<=g.tv.dAVDt.length-1&&$(g.elem).find(".cqavTableRow2 #cqavDayColumn"+v).addClass("cActivatedCell")},drop:function(l,d){if(e=$(d.draggable),a=e.attr("id"),i=e.attr("data-id"),n=g.getEventWithId(i),s=".Event-"+i,m=null,D=null,f=!1,$(this).attr("id")===g.tv.draggableParent)return setTimeout(function(){$(s+".cEventBeingDragged").remove(),$(s).removeClass("ui-draggable-dragging cEditingEvent cEditingEventUI")},300),g.tv.iTSEndEditing=$.cf.getTimestamp(),!0;null!==n.start&&(m=n.start),null!==n.end&&(D=n.end),null!==n.isAllDay&&(f=n.isAllDay),r=g.getNumberOfDaysOfEvent(f,m,D,!0,!1,!0),o=r[0],r[1];var c=g._getDateBasedOnLeftPositionInQuickAgendaView(d.position.left);if(u=g.setDateInFormat({iDate:{d:c.getDate(),M:c.getMonth(),y:c.getFullYear(),H:m.getHours(),m:m.getMinutes(),s:m.getSeconds()}},""),h=new Date(u.getTime()+(D.getTime()-m.getTime())),g.tv.bChkDroppable&&(e=$(g.elem).find("#"+a+".ui-draggable-dragging"),t=e.attr("data-droppableid"),p=g._findWhetherEventEnteredNonDroppableZone(u,h,f,o,t),e.removeClass("cCursorNotAllowed"),e.find(".cEventLink").removeClass("cCursorNotAllowed")),p)setTimeout(function(){return g.tv.bChkDroppable&&e.removeClass("cEditingEvent cEventBeingDragged ui-draggable-dragging"),$("#"+a+".cEventClone").remove(),g.tv.iTSEndEditing=$.cf.getTimestamp(),!1},300);else{var v=g.compareDates(D,$.CalenStyle.extra.dToday);v>0?$(g.elem).find(s).css({opacity:1}):v<0&&$(g.elem).find(s).css({opacity:.7}),g.__updateEventWithId(i,u,h)&&(g.__addEventsInQuickAgendaView(),g._adjustEventsInQuickAgendaView()),$(g.elem).find(".cqavTableColumns").removeClass("cActivatedCell")}g.setting.saveChangesOnEventDrop&&g.setting.saveChangesOnEventDrop.call(g,n,m,D,u,h),g.tv.iTSEndEditing=$.cf.getTimestamp()}})},_makeEventDraggableInQuickAgendaView:function(e){var t=this,a=$(t.elem).find(".cqavEvent").height(),i=$(t.elem).find(".cqavTableColumns").width(),n=i+1,s=$(t.elem).position().left,r=$(t.elem).css("margin-left"),o=s+(r=parseInt(r.replace("px","")))+$(t.elem).find(".cqavContRow2Main").position().left,l=o+$(t.elem).find(".cqavContRow2Main").width()-i,d=$(t.elem).position().top,c=$(t.elem).css("margin-top"),v=d+(c=parseInt(c.replace("px","")))+$(t.elem).find(".cqavContRow2Main").position().top;t.tv.bDisFBar&&$.cf.compareStrings(t.setting.filterBarPosition,"Top")&&(v+=t.setting.filterBarHeight);var g=v+$(t.elem).find(".cqavContRow2Main").height()-a;$(t.elem).find(e).draggable({zIndex:100,scope:"Events",grid:[n,1],containment:[o,v,l,g],scroll:!1,cursor:"move",delay:300,revertDuration:300,start:function(){var e=$(this),n=e.attr("data-pos").split("|"),s=parseInt(n[1]);t.tv.draggableParent="cqavDayColumn"+s,e.removeClass("cPartialEventLeft cPartialEventRight cPartialEventBoth");var r=e.clone();e.parent().append(r),$(r).addClass("cEventBeingDragged cEventClone"),e.hasClass("cEventOnlyText")?e.addClass("cEditingEvent"):e.addClass("cEditingEvent cEditingEventUI"),e.css({width:i,height:a})},revert:function(){return $(t.elem).find(".cqavTableColumns").removeClass("cActivatedCell"),!0}})},_addTooltipInQuickAgendaView:function(e){var t=this;$(t.elem).find(e).tooltip({content:function(){var e="";if($.cf.compareStrings(t.setting.eventTooltipContent,"Default")){var a=$(this).data("tooltipcontent");void 0!==a.title&&(e+="<div class='cTooltipTitle'>"+a.title+"</div>"),void 0===a.startDateTime&&void 0!==a.endDateTime||(e+="<div class='cTooltipTime'>",void 0!==a.startDateTime&&(e+=a.startDateTime),void 0!==a.endDateTime&&(e+="<br/>"+a.endDateTime),e+="</div>")}else{var i=t.getEventWithId($(this).attr("data-id"));e=t.setting.eventTooltipContent.call(t,i)}return e},position:{my:"center bottom-15",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("tooltip-arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}}})},_getDateBasedOnLeftPositionInQuickAgendaView:function(e){for(var t=this,a=$(t.elem).find(".cqavTableColumns").width(),i=t.tv.fADVDayLftPos.length,n=0,s=0,r=0;r<i;r++){var o=t.tv.fADVDayLftPos[r]-5,l=o+a-5;if(r===i-1&&(l+=5),e>=o&&e<=l){s=r+1;break}}for(var d=0;d<t.tv.dAVDt.length;d++){var c=t.tv.dAVDt[d];if(t.__isDateInCurrentView(c)&&++n===s)return c}},_getDayNumberFromDateInQuickAgendaView:function(e){for(var t=0;t<this.tv.dAVDt.length;t++)if(0===this.compareDates(e,this.tv.dAVDt[t]))return t;return-1}}),a.prototype=$.extend(a.prototype,{__updateTaskPlannerView:function(e){var t,a,i,n=this,s="",r=1===n.tv.iNoVDayDis?" ctpvSingleColumn":" ctpvMultiColumn";for(s+="<thead>",s+="<tr class='ctpvTableRow1'>",t=0;t<n.tv.iNoVDayDis;t++)a="ctpvTableColumns "+(i="ctpvDayColumn"+t),a+=r,t===n.tv.iNoVDayDis-1&&(a+=" ctpvLastColumn"),s+="<td class='"+a+"'>&nbsp;</td>";if(s+="</tr>",s+="</thead>",s+="<tbody>",n.setting.addDaySummaryInTaskPlannerView){for(s+="<tr class='ctpvTableRowSummary'>",t=0;t<n.tv.iNoVDayDis;t++)i="ctpvSummaryColumn"+t,a="ctpvTableColumns",t===n.tv.iNoVDayDis-1&&(a+=" ctpvLastColumn"),s+="<td id='"+i+"' class='"+a+"'></td>";s+="</tr>"}for(s+="<tr class='ctpvTableRow2'>",t=0;t<n.tv.iNoVDayDis;t++)i="ctpvDayColumn"+t,a="ctpvTableColumns",t===n.tv.iNoVDayDis-1&&(a+=" ctpvLastColumn"),s+="<td id='"+i+"' class='"+a+"' title='"+n.getDateInFormat({date:n.tv.dAVDt[t]},"dd-MMM-yyyy",n.setting.is24Hour,!0)+"'> &nbsp; </td>";s+="</tr>",s+="</tbody>",$(n.elem).find(".ctpvTableMain").html(s),n._updateDaySummaryView(),n._setDateStringsInHeaderOfTaskPlannerView(),n._makeEventContDroppableInTaskPlannerView(),n._takeActionOnDayClickInTaskPlannerView()},_setDateStringsInHeaderOfTaskPlannerView:function(){for(var e=this,t=0;t<e.tv.iNoVDayDis;t++){var a,i=e.tv.dAVDt[t],n=e.compareDates(i,$.CalenStyle.extra.dToday),s=i.getDay(),r=".ctpvTableRow1 .ctpvDayColumn"+t,o=$(e.elem).find(r),l=i.getDate(),d=!e.tv.bABsDays[s],c=e._getRestrictedSectionForCurrentView(i),v="",g="";for(a=0;a<c.length;a++){var m=c[a],D=new Date(m.start),f=0===e.compareDates(i,D),p=new Date(m.end),u=0===e.compareDates(i,p);f||(D=e._normalizeDateTime(i,"START","T")),u||(p=e._normalizeDateTime(i,"END","T")),(Math.round((p.getTime()-D.getTime())/$.CalenStyle.extra.iMS.h)>23||m.isAllDay)&&($.cf.isValid(m.backgroundColor)&&(v=$.cf.addHashToHexcode(m.backgroundColor)),$.cf.isValid(m.class)&&(g=m.class))}d&&0===n?o.addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(d&&o.addClass("cNonBusinessHoursBg"),0===n&&o.addClass("cTodayHighlightTextColor"),$.cf.isValid(v)&&o.css({background:v}),$.cf.isValid(g)&&o.addClass(g)),0===n?$(e.elem).find(r).html("<span class='ctpvDayColumnLeft'>"+e.setting.miscStrings.today+"</span><span class='ctpvDayColumnRight'>"+e.getNumberStringInFormat(l,0,!0)+"</span>"):$(e.elem).find(r).html("<span class='ctpvDayColumnLeft'>"+e.getDateInFormat({iDate:{D:s}},"DDD",!1,!0)+"</span><span class='ctpvDayColumnRight'>"+e.getNumberStringInFormat(l,0,!0)+"</span>");var h=".ctpvTableRow2 #ctpvDayColumn"+t,y=$(e.elem).find(h);d&&0===n?y.addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(d&&y.addClass("cNonBusinessHoursBg"),0===n&&y.addClass("cTodayHighlightTextColor"),$.cf.isValid(v)&&y.css({background:v}),$.cf.isValid(g)&&y.addClass(g))}var w,C=e.getDateInFormat({date:e.tv.dVSDt},"object",!1,!0),S=e.getDateInFormat({date:e.tv.dVEDt},"object",!1,!0);w=$.cf.compareStrings(e.setting.TaskPlannerViewDuration,"CustomDays")&&1===e.setting.daysInTaskPlannerView?"<b>"+e.getDateInFormat({iDate:C},"DDDD",!1,!0)+" "+e.getDateInFormat({iDate:S},"MMMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):C.y===S.y?C.M===S.M?"<b>"+e.getDateInFormat({iDate:C},"MMM",!1,!0)+" "+e.getNumberStringInFormat(C.d,0,!0)+"</b>  -  <b>"+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):"<b>"+e.getDateInFormat({iDate:C},"MMM",!1,!0)+"  "+e.getNumberStringInFormat(C.d,0,!0)+"</b>  -  <b>"+e.getDateInFormat({iDate:S},"MMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):"<b>"+e.getDateInFormat({iDate:C},"MMM",!1,!0)+"  "+e.getNumberStringInFormat(C.d,0,!0)+"</b>  "+e.getNumberStringInFormat(C.y,0,!0)+"  -  <b>"+e.getDateInFormat({iDate:S},"MMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0),e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,w,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(w)},_takeActionOnDayClickInTaskPlannerView:function(){var e=this;$(e.elem).find(".ctpvTableRow2 .ctpvTableColumns").on($.CalenStyle.extra.sClickHandler,function(t){var a={};a.x=t.pageX||t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches[0].pageX,a.y=t.pageY||t.originalEvent.touches[0].pageY||t.originalEvent.changedTouches[0].pageY;var i=parseInt($(this).attr("id").replace("ctpvDayColumn","")),n=e.tv.dAVDt[i];e.setting.cellClicked&&e.setting.cellClicked.call(e,e.setting.visibleView,n,!0,a)})},__goToPrevTaskPlannerView:function(){var e,t=this;if(t.setting.showTransition){var a=$(t.elem).find(".ctpvTableMain"),i=a.width(),n=a.position().left,s=0;s=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").position().top+$(t.elem).find(".cContHeader").outerHeight()-1:$(t.elem).position().top;var r=a.clone();$(r).removeClass("ctpvTableMain").addClass("ctpvTableTemp"),$(r).css({position:"absolute",top:s,left:n}),a.parent().append(r),n+=i,$(r).animate({left:n},t.setting.transitionSpeed),setTimeout(function(){$(t.elem).find(".ctpvTableTemp").remove()},t.setting.transitionSpeed)}t.setting.navigateOneDayInTaskPlannerView?(e=t.tv.dVEDt.getTime(),e-=$.CalenStyle.extra.iMS.d):(e=t.tv.dVSDt.getTime(),7===t.setting.daysInTaskPlannerView?e-=t.tv.iNoVDay*$.CalenStyle.extra.iMS.d:e-=$.CalenStyle.extra.iMS.d),t.setting.selectedDate=t.setDateInFormat({date:new Date(e)},"START"),t.tv.dLoadDt=t.setDateInFormat({date:t.setting.selectedDate},"START"),t.tv.sLoadType="Prev",t.__reloadCurrentView(!1,!0),setTimeout(function(){t.__reloadDatePickerContentOnNavigation()},10)},__goToNextTaskPlannerView:function(){var e,t=this;if(t.setting.showTransition){var a=$(t.elem).find(".ctpvTableMain"),i=a.width(),n=a.position().left,s=0;s=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").position().top+$(t.elem).find(".cContHeader").outerHeight()-1:$(t.elem).position().top;var r=a.clone();$(r).removeClass("ctpvTableMain").addClass("ctpvTableTemp"),$(r).css({position:"absolute",top:s,left:n}),a.parent().append(r),n-=i,$(r).animate({left:n},t.setting.transitionSpeed),setTimeout(function(){$(t.elem).find(".ctpvTableTemp").remove()},t.setting.transitionSpeed)}t.setting.navigateOneDayInTaskPlannerView?(e=t.tv.dVSDt.getTime(),e+=$.CalenStyle.extra.iMS.d):(e=t.tv.dVEDt.getTime(),e+=$.CalenStyle.extra.iMS.d),t.setting.selectedDate=t.setDateInFormat({date:new Date(e)},"START"),t.tv.dLoadDt=t.setDateInFormat({date:t.setting.selectedDate},"START"),t.tv.sLoadType="Next",t.__reloadCurrentView(!1,!0),setTimeout(function(){t.__reloadDatePickerContentOnNavigation()},10)},__adjustTaskPlannerView:function(e){var t=this,a=$(t.elem).find(".ctpvCalendarCont").css("max-height");a=parseInt(a.replace("px",""))||0;var i=$(t.elem).find(".ctpvCalendarCont").css("min-height");if(i=parseInt(i.replace("px",""))||0,a>0&&$(t.elem).height()>a?$(t.elem).css({height:a}):i>0&&$(t.elem).height()<i&&$(t.elem).css({height:i}),0!==t.tv.iCalHeight&&$(t.elem).css({height:t.tv.iCalHeight}),$(t.elem).find(".ctpvCalendarCont").length>0&&!t.tv.bDVDrgEv&&!t.tv.bDVResEv){var n=$(t.elem).find(".calendarCont").parent().outerWidth(),s=$(t.elem).find(".calendarCont").outerHeight();if(t.tv.bDisFBar)if($.cf.compareStrings(t.setting.filterBarPosition,"Left")||$.cf.compareStrings(t.setting.filterBarPosition,"Right"))n-=t.setting.filterBarWidth;else if($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom")){var r=n;$(t.elem).find(".cFilterBar").css({width:r}),s-=$(t.elem).find(".cFilterBar").height()}$(t.elem).find(".calendarContInner").css({width:n,height:s}),t.__adjustHeader(),$.cf.compareStrings(t.setting.filterBarPosition,"Right")&&$(t.elem).find(".cFilterBar").css({left:n});var o=n,l=n;$(t.elem).find(".cContHeader").length>0&&$(t.elem).find(".cContHeader").css({width:l});var d=n,c=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").outerHeight():0;t.tv.bDisABar&&(s-=$(t.elem).find(".cActionBar").height());var v=s-c;if(t.tv.bDisABar&&t.tv.bDisFBar&&$.cf.compareStrings(t.setting.filterBarPosition,"Bottom")?v-=$.CalenStyle.extra.iBorderOverhead:v+=$.CalenStyle.extra.iBorderOverhead,t.setting.fixedHeightOfTaskPlannerView){$(t.elem).find(".ctpvTableMain").css({height:v,width:d});var g=v-$(t.elem).find(".ctpvTableRow1").height();$(t.elem).find(".ctpvTableMain tbody").css({height:g,width:d});var m=g-$(t.elem).find(".ctpvTableRowSummary").height();$(t.elem).find(".ctpvTableRow2").css({height:m-1});var D=$(t.elem).find(".ctpvTableMain tbody").width()-2;$(t.elem).find(".ctpvTableMain thead").css({width:D})}else v=$(t.elem).find(".ctpvTableRow1").height()+$(t.elem).find(".ctpvTableRow2").height()+$(t.elem).find(".ctpvTableRowSummary").height(),$(t.elem).find(".ctpvTableMain").css({height:v,width:d}),s=v,s+=$(t.elem).find(".cContHeader").height(),t.tv.bDisABar&&(s+=$(t.elem).find(".cActionBar").height()),$(t.elem).find(".calendarContInner").css({height:s}),t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&(s+=$(t.elem).find(".cFilterBar").height()),$(t.elem).css({height:s});var f=(o-t.tv.iNoVDay*$.CalenStyle.extra.iBorderOverhead)/t.tv.iNoVDayDis;$(t.elem).find(".ctpvTableColumns").css({width:f}),t.tv.fADVDayLftPos=[];for(var p=0;p<t.tv.iNoVDayDis;p++){var u=$(t.elem).find(".ctpvTableRow2 #ctpvDayColumn"+p).position().left;t.tv.fADVDayLftPos.push(u)}}t.setting.isDragNDropInTaskPlannerView&&$.cf.isValid(e)&&e&&($(t.elem).find(".ctpvEvent").hasClass("ui-draggable")&&$(t.elem).find(".ctpvEvent").draggable("destroy"),$(t.elem).find(".ctpvEvent").removeClass("ui-draggable-dragging"),t._makeEventDraggableInTaskPlannerView(".EventDraggable"))},__addEventsInTaskPlannerView:function(){var e=this;$(e.elem).find(".ctpvTableRow2")&&$(e.elem).find(".ctpvTableRow2 td").html("");var t=e.getArrayOfEventsForView(e.tv.dVSDt,e.tv.dVEDt),a=$.cf.isValid(e.setting.hideEventIcon[e.setting.visibleView])?e.setting.hideEventIcon[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventIcon.Default)&&e.setting.hideEventIcon.Default,i=$.cf.isValid(e.setting.hideEventTime[e.setting.visibleView])?e.setting.hideEventTime[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventTime.Default)&&e.setting.hideEventTime.Default;if(e.tv.bAWkRw=[],t.length>0){for(var n=0;n<t.length;n++){var s=t[n],r=null,o=null,l=0,d="",c="",v=!1,g=!1,m="",D="Event-"+s.calEventId;null!==s.start&&(r=s.start),null!==s.end&&(o=s.end),null!==s.isAllDay&&(l=s.isAllDay),null!==s.title&&(d=s.title),null!==s.desc&&s.desc,null!==s.type&&s.type,null!==s.url&&(c=s.url),null!==s.droppableId&&(m=s.droppableId),null!==s.isDragNDropInTaskPlannerView&&(v=s.isDragNDropInTaskPlannerView),null!==s.isMarked&&(g=s.isMarked),g&&(l=!0);var f=e.getNumberOfDaysOfEvent(l,r,o,!0,!0,!0),p=f[0],u=f[1];if(p>0){var h,y,w,C,S="",T=new Date(r),V=new Date(o);e.compareDates(r,e.tv.dVSDt)<0&&Math.abs(e.__getDifference("m",e.tv.dVSDt,r))>1&&(T=new Date(e.tv.dVSDt)),e.compareDates(e.tv.dVEDt,o)<0&&Math.abs(e.__getDifference("m",e.tv.dVEDt,o))>1&&(V=new Date(e.tv.dVEDt));for(var b=new Date(T),E=!0;!(e.__findWhetherDateIsVisibleInCurrentView(b,l||u>23,T,V)||(b.setDate(b.getDate()+1),E=!1,e.compareDates(b,V)>0)););if(T=new Date(b),y=(w=e.getNumberOfDaysOfEvent(l,T,V,!0,!0,E))[0],w[1]>0){var I="ctpvEvent ",M=s.backgroundColor;M=$.cf.compareStrings(M,"")||$.cf.compareStrings(M,"transparent")?"transparent":M;var A=s.borderColor||$.cf.addHashToHexcode(e.setting.borderColor);A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A;var _=s.textColor||$.cf.addHashToHexcode(e.setting.textColor);_=$.cf.compareStrings(_,"")||$.cf.compareStrings(_,"transparent")?$.cf.addHashToHexcode(e.setting.textColor):_;var k=$.cf.isValid(s.nonAllDayEventsTextColor)?s.nonAllDayEventsTextColor:s.backgroundColor;k=!$.cf.isValid(k)||$.cf.compareStrings(k,"transparent")?s.backgroundColor:k;var H="",F="",N="";g?s.fromSingleColor?(H+="border-color: "+_+"; ",F="background: "+_+"; color: #FFFFFF"):(H+="border-color: "+M+"; ",F="background: "+M+"; color: "+_):(H+="border-color: "+_+"; ",F="color: "+_+"; "),N=g?$.cf.isValid(s.icon)&&"Dot"!==s.icon?s.icon:"cs-icon-Mark":$.cf.isValid(s.icon)?s.icon:e.setting.eventIcon,e.compareDates(o,e.tv.dAVDt[0])<0&&(I+="cBlurredEvent "),v&&(I+="EventDraggable cDragNDrop "),e.setting.isTooltipInTaskPlannerView&&(I+="cEventTooltip "),I+=D,g&&(I+=" cMarkedDayEvent"),h=e._getDayNumberFromDateInTaskPlannerView(T);for(var x=new Date(T),B=1;B<=y;B++){C=e.getEventDateTimeDataForTaskPlannerView(r,o,l,x),S="#ctpvDayColumn"+h;var L=D+"-"+B,R="<div id='"+L+"' class='"+I+"' style='"+H+"' "+($.cf.isValid(m)?" data-droppableid='"+m+"'":"")+" title='' data-id='"+s.calEventId+"'>";R+="<a class='cEventLink'>",R+="<div class='ctpvEventTitle'>"+d+"</div>",R+="<div class='ctpvEventExtra'>",$.cf.isValid(s.status)&&(R+="<span class='ctpvEventStatus' style='background: "+s.statusColor+";'></span>"),g?($.cf.isValid(s.status)&&(R+="<span class='ctpvEventStatus' style='border-color: "+s.statusColor+";'></span>"),R+="<span class='ctpvEventIcon "+N+"' style='"+F+"'></span>"):(i||!1!==l||(R+="<span class='ctpvEventTime'>"+C+"</span>"),a||$.cf.compareStrings(N,"Dot")||(R+="<span class='ctpvEventIcon "+N+"' style='"+F+"'></span>")),R+="</div>",R+="</a>",R+="</div>",$(e.elem).find(".ctpvTableRow2 "+S).append(R);var P,O="#"+L,W=$(e.elem).find(O),j=W.find(".cEventLink");P={};var z=e.getEventDateTimeString(r,o,l,"&&").split("&&");P.title=d,P.startDateTime=z[0],P.endDateTime=z[1],W.data("tooltipcontent",P),e.setting.eventRendered&&e.setting.eventRendered.call(e,s,W,j,e.setting.visibleView,!1),($.cf.isValid(c)||e.setting.eventClicked)&&j.on($.CalenStyle.extra.sClickHandler,{url:c,eventId:s.calEventId,eventElemSelector:O,view:"TaskPlannerView",pluginId:e.tv.pluginId},e.__bindClick),h++,x=new Date(x.getTime()+$.CalenStyle.extra.iMS.d),1===B&&(x=e._normalizeDateTime(x,"START","T"))}}}}e.setting.isTooltipInTaskPlannerView&&e._addTooltipInTaskPlannerView(".cEventTooltip"),e.setting.isDragNDropInTaskPlannerView&&e._makeEventDraggableInTaskPlannerView(".EventDraggable"),e.setting.eventsAddedInView&&e.setting.eventsAddedInView.call(e,e.setting.visibleView,".ctpvEvent")}else console.log("to._addEventsInMonthView - No Events");e._updateDaySummaryView(),e.addRemoveViewLoader(!1,"cEventLoaderBg"),e.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_makeEventContDroppableInTaskPlannerView:function(){var e,t,a,i,n,s,r,o,l,d,c,v,g,m=this,D=null,f=null,p=0,u=!1,h=null,y=null;$(m.elem).find(".ctpvTableRow2 .ctpvTableColumns").droppable({scope:"Events",over:function(w,C){for(e=$(C.draggable),a=e.attr("id"),i=e.attr("data-id"),n=m.getEventWithId(i),s=".Event-"+i,D=null,f=null,p=!1,g=$(this).attr("id"),null!==n.start&&(D=n.start),null!==n.end&&(f=n.end),null!==n.isAllDay&&(p=n.isAllDay),r=m.getNumberOfDaysOfEvent(p,D,f,!0,!1,!0),o=r[0],r[1],d=parseInt(g.replace("ctpvDayColumn","")),l=m.tv.dAVDt[d],h=m.setDateInFormat({iDate:{d:l.getDate(),M:l.getMonth(),y:l.getFullYear(),H:D.getHours(),m:D.getMinutes(),s:D.getSeconds()}},""),y=new Date(h.getTime()+(f.getTime()-D.getTime())),m.tv.bChkDroppable&&(e=$(m.elem).find("#"+a+".ui-draggable-dragging"),t=e.attr("data-droppableid"),(u=m._findWhetherEventEnteredNonDroppableZone(h,y,p,o,t))?(e.addClass("cCursorNotAllowed"),e.find(".cEventLink").addClass("cCursorNotAllowed")):(e.removeClass("cCursorNotAllowed"),e.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(m.elem).find(".ctpvTableColumns").removeClass("cActivatedCell"),c=0;c<o;c++)(v=d+c)<=m.tv.dAVDt.length-1&&$(m.elem).find(".ctpvTableRow2 #ctpvDayColumn"+v).addClass("cActivatedCell")},drop:function(l,c){if(e=$(c.draggable),a=e.attr("id"),i=e.attr("data-id"),n=m.getEventWithId(i),s=".Event-"+i,D=null,f=null,p=!1,(g=$(this).attr("id"))===m.tv.draggableParent)return setTimeout(function(){$(s+".cEventBeingDragged").remove(),$(s).removeClass("ui-draggable-dragging cEditingEvent cEditingEventUI")},300),m.tv.iTSEndEditing=$.cf.getTimestamp(),!0;null!==n.start&&(D=n.start),null!==n.end&&(f=n.end),null!==n.isAllDay&&(p=n.isAllDay),r=m.getNumberOfDaysOfEvent(p,D,f,!0,!1,!0),o=r[0],r[1],d=parseInt(g.replace("ctpvDayColumn",""));var v=new Date(m.tv.dAVDt[d]);if(h=m.setDateInFormat({iDate:{d:v.getDate(),M:v.getMonth(),y:v.getFullYear(),H:D.getHours(),m:D.getMinutes(),s:D.getSeconds()}},""),y=new Date(h.getTime()+(f.getTime()-D.getTime())),m.tv.bChkDroppable&&(e=$(m.elem).find("#"+a+".ui-draggable-dragging"),t=e.attr("data-droppableid"),u=m._findWhetherEventEnteredNonDroppableZone(h,y,p,o,t),e.removeClass("cCursorNotAllowed"),e.find(".cEventLink").removeClass("cCursorNotAllowed")),u)setTimeout(function(){return m.tv.bChkDroppable&&e.removeClass("cEditingEvent cEventBeingDragged ui-draggable-dragging"),m.tv.iTSEndEditing=$.cf.getTimestamp(),!1},300);else{var w=m.compareDates(f,$.CalenStyle.extra.dToday);w>0?$(m.elem).find(s).css({opacity:1}):w<0&&$(m.elem).find(s).css({opacity:.7}),m.__updateEventWithId(i,h,y)&&(m.__addEventsInTaskPlannerView(),m.setting.addDaySummaryInTaskPlannerView&&m.__adjustTaskPlannerView()),$(m.elem).find(".ctpvTableColumns").removeClass("cActivatedCell")}m.setting.saveChangesOnEventDrop&&m.setting.saveChangesOnEventDrop.call(m,n,D,f,h,y),m.tv.iTSEndEditing=$.cf.getTimestamp()}})},_makeEventDraggableInTaskPlannerView:function(e){var t=this,a=$(t.elem).find(".ctpvEvent").height(),i=$(t.elem).find("#ctpvDayColumn0").width(),n=i+1,s=$(t.elem).position().left,r=$(t.elem).css("margin-left"),o=s+(r=parseInt(r.replace("px","")))+$(t.elem).find(".ctpvTableMain").position().left,l=o+$(t.elem).find(".ctpvTableMain").width()-i,d=$(t.elem).position().top,c=$(t.elem).css("margin-top"),v=d+(c=parseInt(c.replace("px","")))+$(t.elem).find(".ctpvTableMain").position().top;t.tv.bDisFBar&&$.cf.compareStrings(t.setting.filterBarPosition,"Top")&&(v+=t.setting.filterBarHeight);var g=v+$(t.elem).find(".ctpvTableMain").height()-a;i-=10,$(t.elem).find(e).draggable({zIndex:100,scope:"Events",grid:[n,1],containment:[o,v,l,g],scroll:!1,cursor:"move",delay:300,revertDuration:300,start:function(){var e=$(this);t.tv.draggableParent=e.closest(".ctpvDayColumns").attr("id"),e.hasClass("cEventOnlyText")?e.addClass("cEditingEvent"):e.addClass("cEditingEvent cEditingEventUI"),i=$(t.elem).find(".ctpvTableColumns").width()-10,e.css({width:i})},revert:function(){return $(t.elem).find(".ctpvTableColumns").removeClass("cActivatedCell"),!0}})},_addTooltipInTaskPlannerView:function(e){var t=this;$(t.elem).find(e).tooltip({content:function(){var e="";if($.cf.compareStrings(t.setting.eventTooltipContent,"Default")){var a=$(this).data("tooltipcontent");void 0!==a.title&&(e+="<div class='cTooltipTitle'>"+a.title+"</div>"),void 0===a.startDateTime&&void 0!==a.endDateTime||(e+="<div class='cTooltipTime'>",void 0!==a.startDateTime&&(e+=a.startDateTime),void 0!==a.endDateTime&&(e+="<br/>"+a.endDateTime),e+="</div>")}else{var i=t.getEventWithId($(this).attr("data-id"));e=t.setting.eventTooltipContent.call(t,i)}return e},position:{my:"center bottom-15",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("tooltip-arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}}})},_getDayNumberFromDateInTaskPlannerView:function(e){for(var t=0;t<this.tv.dAVDt.length;t++)if(0===this.compareDates(e,this.tv.dAVDt[t]))return t;return-1},getEventDateTimeDataForTaskPlannerView:function(e,t,a,i){var n=this;return a?0===n.compareDates(e,t)?"<span class='ctpvEventTimeTop ctpvEventTimeLabel'>"+n.setting.miscStrings.allDay+"</span>":"<span class='ctpvEventTimeTop ctpvEventTimeLabel'>"+n.setting.miscStrings.allDay+"</span><span class='ctpvEventTimeBottom ctpvEventTimeDuration'> "+($.cf.compareStrings(n.setting.duration,"Default")?n.__getDurationBetweenDates(i,t,"d",!1,!1):n.setting.duration.call(n,i,t,"d"))+"</span>":0===n.compareDates(e,t)?"<span class='ctpvEventTimeTop'>"+n.getDateInFormat({date:e},"hh:mm",n.setting.is24Hour,!0)+"</span><span class='ctpvEventTimeBottom ctpvEventTimeDuration'> "+($.cf.compareStrings(n.setting.duration,"Default")?n.__getDurationBetweenDates(e,t,"dhm",!1,!1):n.setting.duration.call(n,e,t,"dhm"))+"</span>":0===n.compareDates(e,i)?"<span class='ctpvEventTimeTop'>"+n.getDateInFormat({date:e},"hh:mm",n.setting.is24Hour,!0)+"</span><span class='ctpvEventTimeBottom ctpvEventTimeDuration'> "+($.cf.compareStrings(n.setting.duration,"Default")?n.__getDurationBetweenDates(e,t,"dhm",!1,!1):n.setting.duration.call(n,e,t,"dhm"))+"</span>":0===n.compareDates(t,i)?"<span class='ctpvEventTimeTop ctpvEventTimeLabel'>"+n.setting.miscStrings.ends+"</span><span class='ctpvEventTimeBottom'> "+n.getDateInFormat({date:t},"hh:mm",n.setting.is24Hour,!0)+"</span>":"<span class='ctpvEventTimeTop ctpvEventTimeLabel'>"+n.setting.miscStrings.allDay+"</span><span class='ctpvEventTimeBottom ctpvEventTimeDuration'> "+($.cf.compareStrings(n.setting.duration,"Default")?n.__getDurationBetweenDates(i,t,"dhm",!1,!1):n.setting.duration.call(n,i,t,"dhm"))+"</span>"},_updateDaySummaryView:function(){var e=this;if(e.setting.addDaySummaryInTaskPlannerView)for(var t=0;t<e.tv.iNoVDayDis;t++)e.setting.addDaySummaryInTaskPlannerView.call(e,e.tv.dAVDt[t],$(e.elem).find("#ctpvSummaryColumn"+t))},updateDaySummaryViewForDate:function(e){var t=this;if(t.setting.addDaySummaryInTaskPlannerView){var a=t._getDayNumberFromDateInTaskPlannerView(e);-1!==a&&t.setting.addDaySummaryInTaskPlannerView.call(t,e,$(t.elem).find("#ctpvSummaryColumn"+a))}else console.log("Please write a definition for addDaySummaryInTaskPlannerView callback function to update view for date")}}),a.prototype=$.extend(a.prototype,{updateAgendaView:function(e){var t,a,i,n,s,r,o=this,l=o.tv.dAVDt.length,d=$.cf.isValid(o.setting.hideEventIcon[o.setting.visibleView])?o.setting.hideEventIcon[o.setting.visibleView]:!!$.cf.isValid(o.setting.hideEventIcon.Default)&&o.setting.hideEventIcon.Default,c=$.cf.isValid(o.setting.hideEventTime[o.setting.visibleView])?o.setting.hideEventTime[o.setting.visibleView]:!!$.cf.isValid(o.setting.hideEventTime.Default)&&o.setting.hideEventTime.Default;o.__getCurrentViewDates(),$.cf.compareStrings(o.tv.sLoadType,"Prev")?o.tv.dLoadDt=o.tv.dAVDt[0]:$.cf.compareStrings(o.tv.sLoadType,"Next")&&(o.tv.dLoadDt=o.tv.dAVDt[l-1]),o._setDateStringsInHeaderOfAgendaView(),o.__parseData(e,function(){var e,v,g,m,D,f,p=0,u="",h="",y=null,w=null,C=null,S=0,T="",V="",b="",E=!1,I=null,M=null,A="",_="",k="",H="",F="",N="",x="",B="",L="",R="",P="",O="";if(o.setting.displayEventsForPeriodInListInAgendaView){var W={};W.viewStartDate=o.tv.dVSDt,W.viewEndDate=o.tv.dVEDt;var j=0,z=[];for(t=0;t<l;t++){i=o.tv.dAVDt[t],n=o.setDateInFormat({date:i},"START"),s=o.setDateInFormat({date:i},"END"),r=o.getArrayOfEventsForView(n,s);var Y={};Y.date=n;var q=[];for(a=0;a<r.length;a++)q.push(r[a]),j++;Y.events=q,z.push(Y)}W.eventCount=j,W.eventList=z,m=o.setting.displayEventsForPeriodInListInAgendaView.call(o,W),$(o.elem).find(".cListOuterCont").html(m)}else{if(l>0&&(o.compareDates(o.setting.selectedDate,o.tv.dAVDt[0])>=0||o.compareDates(o.setting.selectedDate,o.tv.dAVDt[l-1])<=0)&&(e="#Date-"+o.getDateInFormat({date:o.setting.selectedDate},"dd-MM-yyyy",!1,!0)),$.cf.compareStrings(o.setting.agendaViewTheme,"Timeline1"))for($(o.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),g=4,d&&g--,c&&g--,t=0;t<l;t++)if(i=o.tv.dAVDt[t],n=o.setDateInFormat({date:i},"START"),s=o.setDateInFormat({date:i},"END"),r=o.getArrayOfEventsForView(n,s),D=0===o.compareDates(i,$.CalenStyle.extra.dToday),v="Date-"+o.getDateInFormat({date:n},"dd-MM-yyyy",!1,!0),u=D?"cagvDate cagvDateToday":"cagvDate",0===t&&void 0===e&&(e="#"+v),0!==r.length)for($(o.elem).find(".cagvTable").append("<tr><td colspan='"+g+"'><div id='"+v+"' class='"+u+"'>"+o.getDateInFormat({date:n},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>"),a=0;a<r.length;a++)w=null,C=null,S=0,T="",V="",A="",b="",R="",P="",A="",_="",k="","",H="",F="",N="",x="",null!==(y=r[a]).start&&(w=y.start),null!==y.end&&(C=y.end),null!==y.isAllDay&&(S=y.isAllDay),null!==y.title&&(T=y.title),null!==y.desc&&(b=y.desc),null!==y.url&&(V=y.url),null!==y.isMarked&&(E=y.isMarked),E&&(S=!0),""===(M=(I=o.getEventDateTimeDataForAgendaView(w,C,S,n))[0])&&(M=o.setting.miscStrings.allDay),A=y.fromSingleColor?y.textColor:y.backgroundColor,A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A,R="Event"+ ++p,H=I[1],x="background: "+A+"; ",E?(L="border-right: 12px solid "+A,B="border-color: "+A+";"):(L="",B=""),O="cagvEvent",E?(O+=" cMarkedDayEvent",F=$.cf.isValid(y.icon)&&"Dot"!==y.icon?y.icon:"cs-icon-Mark"):F=$.cf.isValid(y.icon)?y.icon:o.setting.eventIcon,m="",m+="<tr id='"+R+"' class='cagvEvent'>",E?m+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconFont "+F+"' style='"+x+"'></span></td>":d||($.cf.compareStrings(F,"Dot")?m+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconDot' style='"+x+"'></span></td>":m+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconFont "+F+"' style='"+x+"'></span></td>"),m+="<td class='cagvContDetails'>",m+="<div class='cagvEventCard' style='"+B+"'>",m+="<span class='cagvEventCardBefore' style='"+L+"'></span>",c||(m+="<div class='cagvEventTime'>"+M+"</div>"),m+="<div class='cagvEventContent'>",m+="<div class='cagvEventTitle'>"+T+"</div>",m+="<div class='cagvEventDesc'>"+b+"</div>",m+="</div>",m+="</div>",m+="</td>",m+="</tr>",$(o.elem).find(".cagvTable").append(m),E&&0===(f=$(o.elem).find("#"+v)).find(".cMarkedDayIndicator").length&&f.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>"),($.cf.isValid(V)||o.setting.eventClicked)&&(P="#"+R,$(o.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:V,eventId:y.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:o.tv.pluginId},o.__bindClick));else o.setting.showDaysWithNoEventsInAgendaView&&(m="<tr><td colspan='"+g+"'><div id='"+v+"' class='"+u+"'>"+o.getDateInFormat({date:n},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>",m+="<tr><td colspan='"+g+"'><div class='cagvNoEvent'>No Events</div></td></tr>",$(o.elem).find(".cagvTable").append(m));else if($.cf.compareStrings(o.setting.agendaViewTheme,"Timeline2"))for($(o.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),t=0;t<l;t++){i=o.tv.dAVDt[t],n=o.setDateInFormat({date:i},"START"),s=o.setDateInFormat({date:i},"END"),r=o.getArrayOfEventsForView(n,s),D=0===o.compareDates(i,$.CalenStyle.extra.dToday);var U=!1;if(v="Date-"+o.getDateInFormat({date:n},"dd-MM-yyyy",!1,!0),u=D?"cagvDate cagvDateToday":"cagvDate",h=D?"cagvDay cagvDateToday":"cagvDay",0===t&&void 0===e&&(e="#"+v),0!==r.length)for(a=0;a<r.length;a++)w=null,C=null,S=0,T="",V="",A="",b="",R="",P="",A="",_="",k="","",H="",F="",N="",x="",null!==(y=r[a]).start&&(w=y.start),null!==y.end&&(C=y.end),null!==y.isAllDay&&(S=y.isAllDay),null!==y.title&&(T=y.title),null!==y.desc&&(b=y.desc),null!==y.url&&(V=y.url),null!==y.isMarked&&(E=y.isMarked),E&&(S=!0),A=y.backgroundColor,A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A,_=y.borderColor||$.cf.addHashToHexcode(o.setting.borderColor),_=$.cf.compareStrings(_,"")||$.cf.compareStrings(_,"transparent")?"transparent":_,k=y.textColor||$.cf.addHashToHexcode(o.setting.textColor),"background: "+A+"; border-color: "+_+"; color: "+(k=$.cf.compareStrings(k,"")||$.cf.compareStrings(k,"transparent")?$.cf.addHashToHexcode(o.setting.textColor):k)+"; ","transparent"===_&&"border-width: 0px; ",""===(M=(I=o.getEventDateTimeDataForAgendaView(w,C,S,n))[0])&&(M=o.setting.miscStrings.allDay),R="Event"+ ++p,H=I[1],E?(N="color: "+k+"; border-color: "+_+"; background: "+A+"; ",x=y.fromSingleColor?"background: "+k:"color: "+k+"; background: "+A):(N="color: "+k+"; border-color: "+_+"; background: "+A+"; ",x="color: "+k+"; "),m="",m+="<tr id='"+R+"'>",m+="<td id='"+v+"' class='cagvContDate'>",U||(m+="<div class='"+u+"'>"+o.getDateInFormat({date:i},"d",!1,!0)+"</div>",m+="<div class='"+h+"'>"+o.getDateInFormat({date:i},"DDD",!1,!0)+"</div>",U=!0),m+="</td>",O="cagvEvent",E?(O+=" cMarkedDayEvent",F=$.cf.isValid(y.icon)&&"Dot"!==y.icon?y.icon:"cs-icon-Mark"):F=$.cf.isValid(y.icon)?y.icon:o.setting.eventIcon,m+="<td class='"+O+"'>",m+="<div class='cagvContDetails' style='"+N+"'>",m+="<div class='cagvContTitle'>",E?(m+="<span class='cagvEventIcon cagvEventIconFont "+F+"' style='"+x+"'></span>",m+="<span class='cagvEventTitle'>"+T+"</span>",m+="</div>"):(d||($.cf.compareStrings(F,"Dot")?m+="<span class='cagvEventIcon cagvEventIconDot' style='"+(x="background: "+k+"; ")+"'></span>":m+="<span class='cagvEventIcon cagvEventIconFont "+F+"' style='"+x+"'></span>"),m+="<span class='cagvEventTitle'>"+T+"</span>",m+="</div>",m+="<div class='cagvContTime'>",c||(m+="<span class='cagvEventTime'>"+M+"</span>"),m+="</div>"),m+="</div>",m+="</td>",m+="</tr>",a===r.length-1&&(m+="<tr><td class='cagvDaySeparator' colspan='2'><hr/></td></tr>"),$(o.elem).find(".cagvTable").append(m),P="#"+R,$(o.elem).find(P+" .cagvEventTimeLabel").css({background:k}),($.cf.isValid(V)||o.setting.eventClicked)&&$(o.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:V,eventId:y.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:o.tv.pluginId},o.__bindClick);else o.setting.showDaysWithNoEventsInAgendaView&&(m="",m+="<tr>",m+="<td id='"+v+"' class='cagvContDate'>",U||(m+="<div class='cagvDate'>"+o.getDateInFormat({date:i},"d",!1,!0)+"</div>",m+="<div class='cagvDay'>"+o.getDateInFormat({date:i},"DDD",!1,!0)+"</div>",U=!0),m+="</td>",m+="<td class='cagvNoEvent'>No Events</td>",m+="</tr>",m+="<tr><td class='cagvDaySeparator' colspan='2'><hr/></td></tr>",$(o.elem).find(".cagvTable").append(m))}else if($.cf.compareStrings(o.setting.agendaViewTheme,"Timeline3"))for($(o.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),g=4,d&&g--,c&&g--,t=0;t<l;t++)if(i=o.tv.dAVDt[t],n=o.setDateInFormat({date:i},"START"),s=o.setDateInFormat({date:i},"END"),r=o.getArrayOfEventsForView(n,s),D=0===o.compareDates(i,$.CalenStyle.extra.dToday),v="Date-"+o.getDateInFormat({date:n},"dd-MM-yyyy",!1,!0),u=D?"cagvDate cagvDateToday":"cagvDate",0===t&&void 0===e&&(e="#"+v),0!==r.length)for($(o.elem).find(".cagvTable").append("<tr><td colspan='"+g+"'><div id='"+v+"' class='"+u+"'>"+o.getDateInFormat({date:n},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>"),a=0;a<r.length;a++)w=null,C=null,S=0,T="",V="",A="",b="",R="",P="",A="",_="",k="","",H="",F="",N="",x="",null!==(y=r[a]).start&&(w=y.start),null!==y.end&&(C=y.end),null!==y.isAllDay&&(S=y.isAllDay),null!==y.title&&(T=y.title),null!==y.desc&&(b=y.desc),null!==y.url&&(V=y.url),null!==y.isMarked&&(E=y.isMarked),E&&(S=!0),""===(M=(I=o.getEventDateTimeDataForAgendaView(w,C,S,n))[0])&&(M=o.setting.miscStrings.allDay),A=y.fromSingleColor?y.textColor:y.backgroundColor,A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A,R="Event"+ ++p,H=I[1],O="cagvEvent",E?(O+=" cMarkedDayEvent",F=$.cf.isValid(y.icon)&&"Dot"!==y.icon?y.icon:"cs-icon-Mark",x="background: "+A+";"):(F=$.cf.isValid(y.icon)?y.icon:o.setting.eventIcon,x="background: "+A+"; "),m="",m+="<tr id='"+R+"' class='"+O+"'>",m+="<td class='cagvEventColor'><span style='background:"+A+"; height:"+H+";'></span></td>",c||(m+="<td class='cagvEventTime'>"+M+"</td>"),E?m+="<td class='cagvEventIcon'><span class='cagvEventIconFont "+F+"' style='"+x+"'></span></td>":d||($.cf.compareStrings(F,"Dot")?m+="<td class='cagvEventIcon'><span class='cagvEventIconDot' style='"+x+"'></span></td>":m+="<td class='cagvEventIcon'><span class='cagvEventIconFont "+F+"' style='"+x+"'></span></td>"),m+="<td class='cagvEventContent'>",m+="<div class='cagvEventTitle'>"+T+"</div>",m+="<div class='cagvEventDesc'>"+b+"</div>",m+="</td>",m+="</tr>",m+="<tr class='cagvEventSeparator'><td colspan='"+g+"'><hr/></td></tr>",$(o.elem).find(".cagvTable").append(m),E&&0===(f=$(o.elem).find("#"+v)).find(".cMarkedDayIndicator").length&&f.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>"),($.cf.isValid(V)||o.setting.eventClicked)&&(P="#"+R,$(o.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:V,eventId:y.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:o.tv.pluginId},o.__bindClick));else o.setting.showDaysWithNoEventsInAgendaView&&(m="<tr><td colspan='"+g+"'><div id='"+v+"' class='"+u+"'>"+o.getDateInFormat({date:n},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>",m+="<tr><td colspan='"+g+"'><div class='cagvNoEvent'>No Events</div></td></tr>",$(o.elem).find(".cagvTable").append(m));setTimeout(function(){$(o.elem).find(".cListOuterCont").scrollTop(0),void 0!==e&&$(o.elem).find(".cListOuterCont").animate({scrollTop:$(o.elem).find(e).position().top},300)},0)}o.addRemoveViewLoader(!1,"cEventLoaderBg"),o.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),o.setting.eventListAppended&&o.setting.eventListAppended.call(o),o.adjustAgendaView(),o.__modifyFilterBarCallback()})},_setDateStringsInHeaderOfAgendaView:function(){var e=this,t="";if($.cf.compareStrings(e.setting.agendaViewDuration,"Month")){var a=e.getDateInFormat({date:e.setting.selectedDate},"object",!1,!0);t="<span class='cContHeaderLabelMonth'><b>"+e.getDateInFormat({iDate:a},"MMMM",!1,!0)+"</b></span></span>",t+="<span class='cContHeaderLabelYear'>"+e.getNumberStringInFormat(a.y,0,!0)+"</span></span>"}else{var i=e.getDateInFormat({date:e.tv.dVSDt},"object",!1,!0),n=e.getDateInFormat({date:e.tv.dVEDt},"object",!1,!0);t=e.tv.iNoVDay>1?i.y===n.y?e.getDateInFormat({iDate:i},"MMM",!1,!0)+" "+e.getNumberStringInFormat(i.d,0,!0)+"  -  "+e.getDateInFormat({iDate:n},"MMM",!1,!0)+" "+e.getNumberStringInFormat(n.d,0,!0)+",  "+e.getNumberStringInFormat(n.y,0,!0):e.getDateInFormat({iDate:i},"MMM",!1,!0)+" "+e.getNumberStringInFormat(i.d,0,!0)+",  "+e.getNumberStringInFormat(i.y,0,!0)+"  -  "+e.getDateInFormat({iDate:n},"MMM",!1,!0)+" "+e.getNumberStringInFormat(n.d,0,!0)+",  "+e.getNumberStringInFormat(n.y,0,!0):e.getDateInFormat({iDate:i},"DDDD",!1,!0)+" "+e.getDateInFormat({iDate:n},"MMMM",!1,!0)+" "+e.getNumberStringInFormat(n.d,0,!0)+",  "+e.getNumberStringInFormat(n.y,0,!0)}e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,t,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(t)},getEventDateTimeDataForAgendaView:function(e,t,a,i,n){var s,r=this,o="48px",l="",d=r.setDateInFormat({iDate:{y:i.getFullYear(),M:i.getMonth(),d:i.getDate()+1}},"START"),c="",v=r.setting.is24Hour?"HH:mm":"h[:m]sm";$.cf.compareStrings(r.setting.visibleView,"AgendaView")&&!$.cf.isValid(r.setting.displayEventsForPeriodInListInAgendaView)&&(n="cagvEventTime");var g=n+"Top",m=n+"Middle",D=n+"Bottom",f=n+"Label",p=n+"Duration";if($.cf.compareStrings(r.setting.agendaViewTheme,"Timeline2")&&!$.cf.isValid(r.setting.displayEventsForPeriodInListInAgendaView)&&$.cf.compareStrings(r.setting.visibleView,"AgendaView")||(c="<br/>"),a)l=0===r.compareDates(e,t)?"<span class='"+m+" "+f+" cagvEventTimeAllDay'>"+r.setting.miscStrings.allDay+"</span>":"<span class='"+g+" "+f+" cagvEventTimeAllDay'>"+r.setting.miscStrings.allDay+"</span>"+c+"<span class='"+D+" "+p+"'>"+($.cf.compareStrings(r.setting.duration,"Default")?r.__getDurationBetweenDates(i,t,"d",!1,!1):r.setting.duration.call(r,i,t,"d"))+"</span>";else if(0===r.compareDates(e,t))o=(s=(s=r.__getDurationBetweenDates(e,t,"h",!1,!0).h/24*48)<1?1:s)+"px",l="<span class='"+g+"'>"+r.getDateInFormat({date:e},v,r.setting.is24Hour,!0)+"</span>"+c+"<span class='"+D+" "+p+"'>"+($.cf.compareStrings(r.setting.duration,"Default")?r.__getDurationBetweenDates(e,t,"dhm",!1,!1):r.setting.duration.call(r,e,t,"dhm"))+"</span>";else{var u=r.compareDateTimes(e,i)>=0&&r.compareDateTimes(e,d)<=0?e:i,h=r.compareDateTimes(t,d)<=0?t:d;o=(s=(s=r.__getDurationBetweenDates(u,h,"h",!1,!0).h/24*48)<1?1:s)+"px",l=0===r.compareDates(e,i)?"<span class='"+g+"'>"+r.getDateInFormat({date:e},v,r.setting.is24Hour,!0)+"</span>"+c+"<span class='"+D+" "+p+"'>"+($.cf.compareStrings(r.setting.duration,"Default")?r.__getDurationBetweenDates(e,t,"dhm",!1,!1):r.setting.duration.call(r,e,t,"dhm"))+"</span>":0===r.compareDates(t,i)?"<span class='"+g+" "+f+"'>"+r.setting.miscStrings.ends+"</span>"+c+"<span class='"+D+"'>"+r.getDateInFormat({date:t},v,r.setting.is24Hour,!0)+"</span>":"<span class='"+g+" "+f+" cagvEventTimeAllDay'>"+r.setting.miscStrings.allDay+"</span>"+c+"<span class='"+D+" "+p+"'>"+($.cf.compareStrings(r.setting.duration,"Default")?r.__getDurationBetweenDates(i,t,"dhm",!1,!1):r.setting.duration.call(r,i,t,"dhm"))+"</span>"}return[l,o]},__goToPrevAgendaView:function(){var e=this;if($.cf.compareStrings(e.setting.agendaViewDuration,"Month")){var t=e.tv.dVSDt.getMonth();e.tv.dVSDt.setMonth(t-1),e.setting.selectedDate=e.setDateInFormat({date:e.tv.dVSDt},"START")}else{var a=e.tv.dVSDt.getTime();7===e.setting.daysInAgendaView?a-=e.tv.iNoVDay*$.CalenStyle.extra.iMS.d:a-=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(a)},"START")}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.__reloadCurrentView(!1,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__goToNextAgendaView:function(){var e=this;if($.cf.compareStrings(e.setting.agendaViewDuration,"Month")){var t=e.tv.dVSDt.getMonth();e.tv.dVSDt.setMonth(t+1),e.setting.selectedDate=e.setDateInFormat({date:e.tv.dVSDt},"START")}else{var a=e.tv.dVEDt.getTime();a+=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(a)},"START")}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.__reloadCurrentView(!1,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},adjustAgendaView:function(){var e=this,t=$(e.elem).find(".cagvCalendarCont").css("max-height");t=parseInt(t.replace("px",""))||0;var a=$(e.elem).find(".cagvCalendarCont").css("min-height");a=parseInt(a.replace("px",""))||0,t>0&&$(e.elem).height()>t?$(e.elem).css({height:t}):a>0&&$(e.elem).height()<a&&$(e.elem).css({height:a}),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight});var i=$(e.elem).find(".calendarCont").parent().outerWidth(),n=$(e.elem).find(".calendarCont").outerHeight();($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right"))&&(i-=e.setting.filterBarWidth),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&($(e.elem).find(".cFilterBar").css({width:i}),n-=$(e.elem).find(".cFilterBar").height()),$(e.elem).find(".calendarContInner").css({width:i,height:n}),e.__adjustHeader(),e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:i}),n-=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0,e.tv.bDisABar&&(n-=$(e.elem).find(".cActionBar").outerHeight()),$(e.elem).find(".cListOuterCont").css({height:n}),$(e.elem).find(".cagvTable").css({width:i-$.CalenStyle.extra.iScrollbarWidth});var s=i,r=$(e.elem).find(".cagvEventColor").outerWidth(!0),o=$(e.elem).find(".cagvEventTime span"),l=Math.max.apply(null,$(o).map(function(){return $(this).outerWidth(!0)}).get());l+=10,$(e.elem).find(".cagvEventTime").css({"min-width":l});var d=s-(r+l)-10;$.cf.compareStrings(e.setting.agendaViewTheme,"Timeline1")?(d-=$(e.elem).find(".cagvEventIcon").width()+40,$(e.elem).find(".cagvEventContent").css({width:d})):$.cf.compareStrings(e.setting.agendaViewTheme,"Timeline2")?$(e.elem).find(".cagvEventTitle").css({"max-width":d-40}):$.cf.compareStrings(e.setting.agendaViewTheme,"Timeline3")&&$(e.elem).find(".cagvEventContent").css({width:d})}}),a.prototype=$.extend(a.prototype,{updateWeekPlannerView:function(e){var t,a,i,n,s,r,o=this,l="",d=[],c="",v=$.cf.isValid(o.setting.hideEventIcon[o.setting.visibleView])?o.setting.hideEventIcon[o.setting.visibleView]:!!$.cf.isValid(o.setting.hideEventIcon.Default)&&o.setting.hideEventIcon.Default,g=$.cf.isValid(o.setting.hideEventTime[o.setting.visibleView])?o.setting.hideEventTime[o.setting.visibleView]:!!$.cf.isValid(o.setting.hideEventTime.Default)&&o.setting.hideEventTime.Default;for(o.__getCurrentViewDates(),$.cf.compareStrings(o.tv.sLoadType,"Prev")?o.tv.dLoadDt=o.tv.dAVDt[0]:$.cf.compareStrings(o.tv.sLoadType,"Next")&&(o.tv.dLoadDt=o.tv.dAVDt[o.tv.dAVDt.length-1]),o._setDateStringsInHeaderOfWeekPlannerView(),t=0;t<o.tv.dAVDt.length;t++)c=o.getDateInFormat({date:o.tv.dAVDt[t]},"dd-MM-yyyy",!1,!0),d.push("cwpvDate-"+c);l+="<tr class='cwpvRowTwoColumn'>",l+="<td id='"+d[0]+"' class='cwpvColumn'></td>",l+="<td id='"+d[1]+"' class='cwpvColumn'></td>",l+="</tr>",l+="<tr class='cwpvRowTwoColumn'>",l+="<td id='"+d[2]+"' class='cwpvColumn'></td>",l+="<td id='"+d[3]+"' class='cwpvColumn'></td>",l+="</tr>",l+="<tr class='cwpvRowTwoColumn'>",l+="<td id='"+d[4]+"' class='cwpvColumn'></td>",l+="<td id='"+d[5]+"' class='cwpvColumn'></td>",l+="</tr>",l+="<tr class='cwpvRowOneColumn'>",l+="<td id='"+d[6]+"' class='cwpvColumn' colspan='2'></td>",l+="</tr>",$(o.elem).find(".cwpvTableMain").html(l),o.adjustWeekPlannerView(),o.__parseData(e,function(){var e=0,l="",d="",c="",m=!1,D="",f="",p=null,u=null,h=null,y=0,w="",C="",S=!1,T=null,V=null,b="",E="",I="",M="",A="",_="",k="",H="",F="",N=null;for(t=0;t<o.tv.dAVDt.length;t++)if(i=o.tv.dAVDt[t],n=o.setDateInFormat({date:i},"START"),s=o.setDateInFormat({date:i},"END"),r=o.getArrayOfEventsForView(n,s),l=o.getDateInFormat({date:n},"dd-MM-yyyy",!1,!0),m=0===o.compareDates(i,$.CalenStyle.extra.dToday),d="cwpvDate-"+l,N=$(o.elem).find("#"+d),t===o.tv.dAVDt.length-1?(D=m?"cwpvDate cwpvDateToday":"cwpvDate",f=m?"cwpvDay cwpvDateToday":"cwpvDay",c+="<div class='"+D+"'>"+o.getDateInFormat({date:i},"d",!1,!0),c+="<div class='"+f+"'>"+o.getDateInFormat({date:i},"DDD",!1,!0)+"</div>",c+="</div>",N.append(c)):(D=m?"cwpvDate cwpvDateToday":"cwpvDate",N.append("<div class='"+D+"'>"+o.getDateInFormat({date:n},"DDD, MMM dd",!1,!0)+"</div>")),r.length>0)for(N.append("<div class='cwpvEventCont'></div>"),a=0;a<r.length;a++){if(u=null,h=null,y=0,w="",C="",b="","",S=!1,k="",H="",b="",E="",I="",M="","",A="","",_="",S=!1,null!==(p=r[a]).start&&(u=p.start),null!==p.end&&(h=p.end),null!==p.isAllDay&&(y=p.isAllDay),null!==p.title&&(w=p.title),null!==p.desc&&p.desc,null!==p.url&&(C=p.url),null!==p.isMarked&&(S=p.isMarked),S&&(y=!0),""===(V=T=o.getEventDateTimeDataForWeekPlannerView(u,h,y,n))&&(V=o.setting.miscStrings.allDay),b=p.backgroundColor,b=$.cf.compareStrings(b,"")||$.cf.compareStrings(b,"transparent")?"transparent":b,E=p.borderColor||$.cf.addHashToHexcode(o.setting.borderColor),E=$.cf.compareStrings(E,"")||$.cf.compareStrings(E,"transparent")?"transparent":E,I=p.textColor||$.cf.addHashToHexcode(o.setting.textColor),I=$.cf.compareStrings(I,"")||$.cf.compareStrings(I,"transparent")?$.cf.addHashToHexcode(o.setting.textColor):I,k="Event-"+ ++e,T[1],M="",F="cwpvEvent",S?(F+=" cMarkedDayEvent",A=$.cf.isValid(p.icon)&&"Dot"!==p.icon?p.icon:"cs-icon-Mark",p.fromSingleColor?(M+="background: "+b+"; ",_="color: "+I+";"):(M+="background: "+$.cf.getRGBAString(b,.1)+"; ",_="color: "+b+";")):A=$.cf.isValid(p.icon)?p.icon:o.setting.eventIcon,c="",c+="<div id='"+k+"' class='"+F+"' style='"+M+"'>",S?(c+="<div class='cwpvEventContent'>",c+="<div class='cwpvEventTitle'>"+w+"</div>",c+="</div>",c+="<div class='cwpvEventIcon' style='"+_+"'><span class='cwpvEventIconFont "+A+"' style='"+_+"'></span></div>"):(v||($.cf.compareStrings(A,"Dot")?c+="<div class='cwpvEventIcon'><span class='cwpvEventIconDot' style='"+(_="background: "+I+"; ")+"'></span></div>":c+="<div class='cwpvEventIcon'><span class='cwpvEventIconFont "+A+"' style='"+(_="color: "+I+"; ")+"'></span></div>"),c+="<div class='cwpvEventContent'>",c+="<div class='cwpvEventTitle'>"+w+"</div>",g||(c+="<div class='cwpvEventTime'>"+V+"</div>"),c+="</div>"),c+="</div>",N.find(".cwpvEventCont").append(c),S){var x=N.find(".cwpvDate");0===x.find(".cMarkedDayIndicator").length&&x.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>")}c="",H="#"+k,($.cf.isValid(C)||o.setting.eventClicked)&&N.find(H).on($.CalenStyle.extra.sClickHandler,{url:C,eventId:p.calEventId,eventElemSelector:H,view:"AgendaView",pluginId:o.tv.pluginId},o.__bindClick)}else N.append("<div class='cwpvNoEvents'>No Events</div>");o.addRemoveViewLoader(!1,"cEventLoaderBg"),o.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),o.adjustWeekPlannerView(),o.__modifyFilterBarCallback()})},_setDateStringsInHeaderOfWeekPlannerView:function(){var e=this,t="",a=e.getDateInFormat({date:e.tv.dVSDt},"object",!1,!0),i=e.getDateInFormat({date:e.tv.dVEDt},"object",!1,!0);t=a.y===i.y?e.getDateInFormat({iDate:a},"MMM",!1,!0)+" "+e.getNumberStringInFormat(a.d,0,!0)+"  -  "+e.getDateInFormat({iDate:i},"MMM",!1,!0)+" "+e.getNumberStringInFormat(i.d,0,!0)+",  "+e.getNumberStringInFormat(i.y,0,!0):e.getDateInFormat({iDate:a},"MMM",!1,!0)+" "+e.getNumberStringInFormat(a.d,0,!0)+",  "+e.getNumberStringInFormat(a.y,0,!0)+"  -  "+e.getDateInFormat({iDate:i},"MMM",!1,!0)+" "+e.getNumberStringInFormat(i.d,0,!0)+",  "+e.getNumberStringInFormat(i.y,0,!0),e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,t,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(t)},getEventDateTimeDataForWeekPlannerView:function(e,t,a,i){var n=this;return a?0===n.compareDates(e,t)?"<span class='cwpvEventTimeTop cwpvEventTimeLabel'>"+n.setting.miscStrings.allDay+"</span>":"<span class='cwpvEventTimeTop cwpvEventTimeLabel'>"+n.setting.miscStrings.allDay+"</span><span class='cwpvEventTimeBottom cwpvEventTimeDuration'>"+($.cf.compareStrings(n.setting.duration,"Default")?n.__getDurationBetweenDates(i,t,"d",!1,!1):n.setting.duration.call(n,i,t,"d"))+"</span>":0===n.compareDates(e,t)?"<span class='cwpvEventTimeTop'>"+n.getDateInFormat({date:e},"hh:mm",n.setting.is24Hour,!0)+"</span><span class='cwpvEventTimeBottom cwpvEventTimeDuration'>"+($.cf.compareStrings(n.setting.duration,"Default")?n.__getDurationBetweenDates(e,t,"dhm",!1,!1):n.setting.duration.call(n,e,t,"dhm"))+"</span>":0===n.compareDates(e,i)?"<span class='cwpvEventTimeTop'>"+n.getDateInFormat({date:e},"hh:mm",n.setting.is24Hour,!0)+"</span><span class='cwpvEventTimeBottom cwpvEventTimeDuration'>"+($.cf.compareStrings(n.setting.duration,"Default")?n.__getDurationBetweenDates(e,t,"dhm",!1,!1):n.setting.duration.call(n,e,t,"dhm"))+"</span>":0===n.compareDates(t,i)?"<span class='cwpvEventTimeTop cwpvEventTimeLabel'>"+n.setting.miscStrings.ends+"</span><span class='cwpvEventTimeBottom'>"+n.getDateInFormat({date:t},"hh:mm",n.setting.is24Hour,!0)+"</span>":"<span class='cwpvEventTimeTop cwpvEventTimeLabel'>"+n.setting.miscStrings.allDay+"</span><span class='cwpvEventTimeBottom cwpvEventTimeDuration'>"+($.cf.compareStrings(n.setting.duration,"Default")?n.__getDurationBetweenDates(i,t,"dhm",!1,!1):n.setting.duration.call(n,i,t,"dhm"))+"</span>"},__goToPrevWeekPlannerView:function(){var e=this,t=e.tv.dVSDt.getTime();t-=e.tv.iNoVDay*$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(t)},"START"),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.__reloadCurrentView(!1,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__goToNextWeekPlannerView:function(){var e=this,t=e.tv.dVEDt.getTime();t+=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(t)},"START"),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.__reloadCurrentView(!1,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},adjustWeekPlannerView:function(){var e=this,t=$(e.elem).find(".cwpvCalendarCont").css("max-height");t=parseInt(t.replace("px",""))||0;var a=$(e.elem).find(".cwpvCalendarCont").css("min-height");a=parseInt(a.replace("px",""))||0,t>0&&$(e.elem).height()>t?$(e.elem).css({height:t}):a>0&&$(e.elem).height()<a&&$(e.elem).css({height:a}),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight});var i=$(e.elem).find(".calendarCont").parent().outerWidth(),n=$(e.elem).find(".calendarCont").outerHeight();($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right"))&&(i-=e.setting.filterBarWidth),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&($(e.elem).find(".cFilterBar").css({width:i}),n-=$(e.elem).find(".cFilterBar").height()),$(e.elem).find(".calendarContInner").css({width:i,height:n}),e.setting.fixedHeightOfWeekPlannerViewCells||$(e.elem).find(".cwpvTableOuterCont").css({width:i}),i-=1,e.setting.fixedHeightOfWeekPlannerViewCells,$(e.elem).find(".cwpvTableMain").css({width:i}),$(e.elem).find(".cwpvRowTwoColumn .cwpvColumn").css({width:i/2}),e.__adjustHeader(),e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:i}),n-=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0,e.tv.bDisABar&&(n-=$(e.elem).find(".cActionBar").outerHeight()),e.setting.fixedHeightOfWeekPlannerViewCells?$(e.elem).find(".cwpvTableMain").css({height:n}):$(e.elem).find(".cwpvTableOuterCont").css({height:n});var s=$(e.elem).find(".cwpvRowTwoColumn .cwpvColumn").width(),r=$(e.elem).find(".cwpvRowOneColumn .cwpvColumn").width(),o=$(e.elem).find(".cwpvRowOneColumn .cwpvDate").width();if($(e.elem).find(".cwpvRowTwoColumn .cwpvEventContent").css({width:s-35}),$(e.elem).find(".cwpvRowOneColumn .cwpvEventContent").css({width:r-(o+50)}),$(e.elem).find(".cwpvRowOneColumn .cwpvEventCont").css({width:r-(o+17)}),e.setting.fixedHeightOfWeekPlannerViewCells){var l=.8*n/3,d=.2*n,c=$(e.elem).find(".cwpvRowTwoColumn"),v=$(e.elem).find(".cwpvRowOneColumn"),g=l-v.find(".cwpvDate").height();c.css({height:l}),v.css({height:d}),c.find(".cwpvEventCont").css({height:g}),v.find(".cwpvEventCont").css({height:d-25})}}}),a.prototype=$.extend(a.prototype,{setEventOrTaskStatusForCurrentView:function(){var e=this;e.tv.bEvTskStatus=!1,e.tv.oAEvTaskStatus=[];var t,a,i,n,s=e.getArrayOfEventsForView(e.tv.dVSDt,e.tv.dVEDt);for(t=0;t<s.length;t++)if(a=s[t],$.cf.isValid(a.status))for(i=0;i<e.setting.eventOrTaskStatusIndicators.length;i++)if(n=e.setting.eventOrTaskStatusIndicators[i],$.cf.compareStrings(a.status,n.name)){e.tv.bEvTskStatus=!0;break}if(e.tv.bEvTskStatus){var r,o,l,d,c,v,g,m;for(r=0;r<e.tv.iNoVDay;r++){for(o=e.tv.dAVDt[r],(l={}).date=o,l.statuscount=[],i=0;i<e.setting.eventOrTaskStatusIndicators.length;i++)l.statuscount.push(0);e.tv.oAEvTaskStatus.push(l)}for(t=0;t<s.length;t++)if(a=s[t],$.cf.isValid(a.status))for(i=0;i<e.setting.eventOrTaskStatusIndicators.length;i++)if(n=e.setting.eventOrTaskStatusIndicators[i],$.cf.compareStrings(a.status,n.name))for(a.statusColor=$.cf.addHashToHexcode(n.color),d=$.cf.isValid(a.start)?a.start:null,c=$.cf.isValid(a.end)?a.end:null,v=!!$.cf.isValid(a.isAllDay)&&a.isAllDay,g=e.getNumberOfDaysOfEvent(v,d,c,!1,!0,!0),o=new Date(d),o=e.setDateInFormat({date:o},"START"),r=0;r<g;r++)-1!==(m=e.__getDateIndexInView(o))&&(e.tv.oAEvTaskStatus[m].statuscount[i]=++e.tv.oAEvTaskStatus[m].statuscount[i],o=new Date(o.getTime()+$.CalenStyle.extra.iMS.d))}},__updateDayListViewTable:function(e,t){var a=this;if(t){$.cf.compareStrings(a.tv.sLoadType,"Prev")?a.tv.dLoadDt=a.tv.dAVDt[0]:$.cf.compareStrings(a.tv.sLoadType,"Next")&&(a.tv.dLoadDt=a.tv.dAVDt[a.tv.dAVDt.length-1]);var i="";i+="<tr class='cdlvDaysTableRow'>";for(var n=0;n<a.tv.iNoVDay;n++){i+="<td id='"+("cdlvRowDay"+n)+"' class='cdlvTableColumns clickableLink'>",i+="<div class='cdlvDaysTableRowDays'> &nbsp; </div>",i+="<div class='cdlvDaysTableRowDates'><span>&nbsp;</span></div>",$.cf.compareStrings(a.setting.visibleView,"DayEventListView")&&$.cf.compareStrings(a.setting.eventIndicatorInDayListView,"Custom")&&(i+="<div class='cdlvDaysTableRowCustom' >&nbsp;</div>"),i+="</td>"}i+="</tr>",$(a.elem).find(".cdlvDaysTableMain").html(i)}a.__setDateStringsForDayListView(a.tv.iNoVDay,a.tv.dAVDt,0),$.cf.compareStrings(a.setting.visibleView,"DayEventListView")&&a.__parseData(e,function(){if(a.setEventOrTaskStatusForCurrentView(),a.tv.bEvTskStatus){for(var e=0;e<a.tv.iNoVDay;e++)$(a.elem).find("#cdlvRowDay"+e).append("<div class='cdlvTableRowStatusGroup'> &nbsp; </div>");a.__displayEventOrTaskStatusForDayListView()}a.__setDateStringsForDayListView(a.tv.iNoVDay,a.tv.dAVDt,0);var t="";a.setting.displayEventsForPeriodInList&&(t=a.setting.displayEventsForPeriodInList.call(a,a.setDateInFormat({date:a.setting.selectedDate},"START"),a.setDateInFormat({date:a.setting.selectedDate},"END"))),$(a.elem).find(".cListOuterCont").html(t),a.addRemoveViewLoader(!1,"cEventLoaderBg"),a.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),a.setting.eventListAppended&&a.setting.eventListAppended.call(a),a.__modifyFilterBarCallback()})},__displayEventOrTaskStatusForDayListView:function(){var e,t,a,i,n,s,r,o=this,l="";for(e=0;e<o.tv.iNoVDay;e++){for(o.tv.dAVDt[e],t=o.tv.oAEvTaskStatus[e],l="",a=0;a<o.setting.eventOrTaskStatusIndicators.length;a++)n="cdlvStatus cdlvStatus"+(i=o.setting.eventOrTaskStatusIndicators[a]).name,s="background: "+$.cf.addHashToHexcode(i.color),(r=t.statuscount[a])>0&&(l+="<span class='"+n+"' style='"+s+"'>"+o.getNumberStringInFormat(r,0,!0)+"</span>");$(o.elem).find("#cdlvRowDay"+e+" .cdlvTableRowStatusGroup").html(l)}$(o.elem).find(".cdlvDaysTableRowIndicator").remove()},__setDateStringsForDayListView:function(e,t,a){for(var i=this,n=a;n<e;n++){var s=t[n],r=0===i.compareDates(s,$.CalenStyle.extra.dToday),o=0===i.compareDates(s,i.setting.selectedDate),l=0===i.compareDates(i.setting.selectedDate,$.CalenStyle.extra.dToday),d=s.getDay(),c=".cdlvDaysTableMain #cdlvRowDay"+n,v=s.getDate(),g=s.getMonth(),m=s.getFullYear(),D=s.getTime(),f=$(i.elem).find(c);if(r?(l&&f.find(".cdlvDaysTableRowDays").addClass("cdlvTodayHighlightSelectedText"),f.find(".cdlvDaysTableRowDays").addClass("cdlvTodayHighlightText"),f.find(".cdlvDaysTableRowDates span").addClass("cdlvTodayHighlightCircle")):o&&(f.find(".cdlvDaysTableRowDays").addClass("cdlvCurrentHighlightText"),f.find(".cdlvDaysTableRowDates span").addClass("cdlvCurrentHighlightCircle")),f.find(".cdlvDaysTableRowDays").html(i.getDateInFormat({iDate:{D:d}},"DDD",!1,!0)),f.find(".cdlvDaysTableRowDates span").html(i.getNumberStringInFormat(v,0,!0)),f.bind($.CalenStyle.extra.sClickHandler,{iThisDateMS:D,iDateIndex:n,pluginId:i.tv.pluginId},i._makeDayClickableInDayListView),!i.tv.bEvTskStatus){var p=new Date(m,g,v,0,0,0,0),u=new Date(m,g,v,23,59,59,0),h=i.getEventCountAndIsMarkedDay(p,u),y=h[0],w=h[1],C=h[2],S="cdlvDaysTableRowIndicator ",T="";0!==y&&(y<i.setting.averageEventsPerDayForDayHighlightView?y*=100/i.setting.averageEventsPerDayForDayHighlightView:y=100,y>100&&(y=100)),$(i.elem).find("#cdlvRowDay"+n+" .cdlvDaysTableRowIndicator").remove(),T="width:"+y+"%; ",w&&(S+="cMarkedDayLineIndicator",$.cf.isValid(C)&&(T+="background: "+C+";")),$.cf.compareStrings(i.setting.visibleView,"DayEventListView")?$.cf.compareStrings(i.setting.eventIndicatorInDayListView,"DayHighlight")&&$(i.elem).find("#cdlvRowDay"+n).append("<div class='"+S+"'><span style='"+T+"'>&nbsp;</span></div>"):$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")&&$(i.elem).find("#cdlvRowDay"+n).append("<div class='"+S+"'><span style='"+T+"'>&nbsp;</span></div>")}}i.tv.bEvTskStatus&&$.cf.compareStrings(i.setting.visibleView,"DayEventListView")&&$.cf.compareStrings(i.setting.eventIndicatorInDayListView,"Custom")&&i.setting.modifyCustomView&&i.setting.modifyCustomView.call(i,t),i._setDateStringsInHeaderForDayListView(),$.CalenStyle.extra.bTouchDevice||i._addHoverClassesForDayListView()},_setDateStringsInHeaderForDayListView:function(){var e=this,t=e.getDateInFormat({date:e.setting.selectedDate},"object",!1,!0),a="<b>"+e.getDateInFormat({iDate:t},"MMMM",!1,!0)+" "+e.getNumberStringInFormat(t.d,0,!0)+"</b>  "+e.getNumberStringInFormat(t.y,0,!0);e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,a,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(a)},_addHoverClassesForDayListView:function(){$(this.elem).find(".cdlvTableColumns").hover(function(e){var t=$(this).find(".cdlvDaysTableRowDays .cTodayHighlightTextColor").length>0,a=$(this).find(".cdlvDaysTableRowDays").hasClass("cCurrentDateHighlightBg");t||a||($(this).find(".cdlvDaysTableRowDays").addClass("cdlvDaysTableRowDatesHover"),$(this).find(".cdlvDaysTableRowDates").addClass("cdlvDaysTableRowDatesHover"))},function(e){$(this).find(".cdlvDaysTableRowDays").removeClass("cdlvDaysTableRowDatesHover"),$(this).find(".cdlvDaysTableRowDates").removeClass("cdlvDaysTableRowDatesHover")})},__goToPrevDayListView:function(){var e=this;if(e.setting.showTransition){var t=$(e.elem).find(".cdlvDaysTableMain"),a=t.width(),i=t.position().left,n=0;n=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top;var s=t.clone();$(s).removeClass("cdlvDaysTableMain").addClass("cdlvDaysTableTemp"),$(s).css({position:"absolute",top:n,left:i}),$(s).css({"z-index":101}),t.parent().append(s),i+=a,$(s).animate({left:i},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cdlvDaysTableTemp").remove()},e.setting.transitionSpeed)}var r=[],o=e.tv.iNoVDay+1;(r=7===e.setting.daysInDayListView?e.__setCurrentViewDatesArray(o,e.tv.dVSDt,null,"Prev"):e.__setCurrentViewDatesArray(o,e.tv.dVEDt,null,"Prev")).shift(),r.reverse(),e.setting.selectedDate=r[e.tv.iSelDay],e.setting.selectedDate=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.__reloadCurrentView(!1,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__goToNextDayListView:function(){var e=this;if(e.setting.showTransition){var t=$(e.elem).find(".cdlvDaysTableMain"),a=t.width(),i=t.position().left,n=0;n=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top;var s=t.clone();$(s).removeClass("cdlvDaysTableMain").addClass("cdlvDaysTableTemp"),$(s).css({"z-index":101}),$(s).css({position:"absolute",top:n,left:i}),t.parent().append(s),i-=a,$(s).animate({left:i},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cdlvDaysTableTemp").remove()},e.setting.transitionSpeed)}var r=[],o=e.tv.iNoVDay+1;(r=7===e.setting.daysInDayListView?e.__setCurrentViewDatesArray(o,e.tv.dVEDt,null,"Next"):e.__setCurrentViewDatesArray(o,e.tv.dVSDt,null,"Next")).shift(),e.setting.selectedDate=r[e.tv.iSelDay],e.setting.selectedDate=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.__reloadCurrentView(!1,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__adjustDayListView:function(){var e=this,t=$(e.elem).find(".cdlvCalendarCont").css("max-height");t=parseInt(t.replace("px",""))||0;var a=$(e.elem).find(".cdlvCalendarCont").css("min-height");a=parseInt(a.replace("px",""))||0,t>0&&$(e.elem).height()>t?$(e.elem).css({height:t}):a>0&&$(e.elem).height()<a&&$(e.elem).css({height:a}),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight});var i,n,s=$(e.elem).find(".calendarCont").parent().outerWidth(),r=$(e.elem).find(".calendarCont").outerHeight();if(($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right"))&&(s-=e.setting.filterBarWidth),$.cf.compareStrings(e.setting.visibleView,"DayEventListView")){if(e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))){var o=s;$(e.elem).find(".cFilterBar").css({width:o}),r-=$(e.elem).find(".cFilterBar").height()}$(e.elem).find(".calendarContInner").css({width:s,height:r}),e.__adjustHeader(),$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:s}),r-=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0,e.tv.bDisABar&&(r-=$(e.elem).find(".cActionBar").outerHeight()),i=s;var l=$(e.elem).find(".cdlvDaysTableRowCustom").height();$(e.elem).find(".cdlvDaysTableMain").css({width:i,height:l}),n=i/e.tv.iNoVDay,$(e.elem).find(".cdlvTableColumns").css({width:n}),r-=$(e.elem).find(".cdlvDaysTableMain").height(),$(e.elem).find(".cListOuterCont").css({height:r}),e.setCalendarBorderColor()}else if($.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")){i=s-$(e.elem).find(".cdvDetailTableColumnTime").width()-$.CalenStyle.extra.iScrollbarWidth,$(e.elem).find(".cdlvDaysTableMain").css({width:i}),n=i/e.tv.iNoVDay,$(e.elem).find(".cdlvTableColumns").css({width:n})}},_makeDayClickableInDayListView:function(e){var t,a=e.data,i=$.CalenStyle.extra.oArrCalenStyle[a.pluginId-1],n=new Date(a.iThisDateMS),s=a.iDateIndex;if(7===i.setting.daysInDayListView||$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")){if(t=i.compareDates(i.setting.selectedDate,n),i.tv.sLoadType=0===t||t<0?"Next":"Prev",i.tv.bDyClDLV=!0,i.tv.iSelDay=s,i.setting.selectedDate=i.setDateInFormat({date:n},"START"),i.tv.dLoadDt=i.setDateInFormat({date:i.setting.selectedDate},"START"),i.tv.dVDSDt=i.setDateInFormat({date:i.setting.selectedDate},"START"),i.tv.dVDEDt=i.setDateInFormat({date:i.setting.selectedDate},"END"),$.cf.compareStrings(i.setting.visibleView,"DayEventListView")){var r="";i.setting.displayEventsForPeriodInList&&(r=i.setting.displayEventsForPeriodInList.call(i,i.setDateInFormat({date:n},"START"),i.setDateInFormat({date:n},"END"))||""),$(i.elem).find(".cListOuterCont").html(r),i.setting.eventListAppended&&i.setting.eventListAppended.call(i)}else $.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")&&i.__reloadCurrentView(!0,!0);i._setDateStringsInHeaderForDayListView(),$(i.elem).find(".cdlvTableColumns .cdlvDaysTableRowDays").removeClass("cdlvTodayHighlightText cdlvTodayHighlightSelectedText cdlvCurrentHighlightText cdlvDaysTableRowDatesHover"),$(i.elem).find(".cdlvTableColumns .cdlvDaysTableRowDates span").removeClass("cdlvTodayHighlightCircle cdlvCurrentHighlightCircle cdlvDaysTableRowDatesHover"),0===i.compareDates(n,$.CalenStyle.extra.dToday)?(0===i.compareDates(i.setting.selectedDate,$.CalenStyle.extra.dToday)&&$(i.elem).find(".cdlvDaysTableMain #cdlvRowDay"+a.iDateIndex+" .cdlvDaysTableRowDays").addClass("cdlvTodayHighlightSelectedText"),$(i.elem).find(".cdlvDaysTableMain #cdlvRowDay"+a.iDateIndex+" .cdlvDaysTableRowDays").addClass("cdlvTodayHighlightText"),$(i.elem).find(".cdlvDaysTableMain #cdlvRowDay"+a.iDateIndex+" .cdlvDaysTableRowDates span").addClass("cdlvTodayHighlightCircle")):($(i.elem).find(".cdlvDaysTableMain #cdlvRowDay"+a.iDateIndex+" .cdlvDaysTableRowDays").addClass("cdlvCurrentHighlightText"),$(i.elem).find(".cdlvDaysTableMain #cdlvRowDay"+a.iDateIndex+" .cdlvDaysTableRowDates span").addClass("cdlvCurrentHighlightCircle")),i.tv.bDyClDLV=!1}else 0!==(t=i.compareDates(i.setting.selectedDate,n))&&(t<0?i.tv.sLoadType="Next":t>0&&(i.tv.sLoadType="Prev"),i.setting.selectedDate=new Date(n),i.__reloadCurrentView(!1,!0),i.__reloadDatePickerContentOnNavigation())}}),a.prototype=$.extend(a.prototype,{_getSlotAvailabilityForCurrentView:function(e){for(var t=this,a=[],i=0;i<t.tv.oASltAvail.length;i++){var n=t.tv.oASltAvail[i],s=new Date(n.start),r=new Date(n.end);0===t.compareDates(e,s)&&0===t.compareDates(e,r)&&t.compareDateTimes(s,r)<0&&a.push(n)}return a},__updateAppointmentTable:function(){var e,t=this;$.cf.compareStrings(t.tv.sLoadType,"Prev")?t.tv.dLoadDt=t.tv.dAVDt[0]:$.cf.compareStrings(t.tv.sLoadType,"Next")&&(t.tv.dLoadDt=t.tv.dAVDt[t.tv.dAVDt.length-1]);var a="";for(a+="<thead>",a+="<tr class='cavTableRow cavTableRow1'>",e=0;e<t.tv.iNoVDay;e++){var i="cavRowDay"+e,n="";e===t.tv.iNoVDay-1&&(n="cavLastColumn"),a+="<td id='"+i+"' class='cavTableColumns cavTableColumn1 "+n+"'>",a+="<div class='cavTableRowDays'> &nbsp; </div>",a+="<div class='cavTableRowDates'><span>&nbsp;</span></div>",a+="</td>"}for($.CalenStyle.extra.iScrollbarWidth>0&&(a+="<td class='cavTableScroll'> &nbsp; </td>"),a+="</tr>",a+="</thead>",a+="<tbody>",a+="<tr class='cavTableRow cavTableRow2'>",e=0;e<t.tv.iNoVDay;e++)a+="<td id='cavRowSlotCont"+e+"' class='cavTableColumns cavTableColumnTimes'>  &nbsp; </td>";$.CalenStyle.extra.iScrollbarWidth>0&&(a+="<td class='cavTableScroll'> &nbsp; </td>"),a+="</tr>",a+="</tbody>",$(t.elem).find(".cavTableMain").html(a),a="",a+="<table class='cavSlotTable cavSlotTableMain'>";for(var s=0;s<4;s++){var r="";0===s?r="Night":1===s?r="Morning":2===s?r="Afternoon":3===s&&(r="Evening"),a+="<tr class='cavSlotTableRow' title='"+r+"'>",a+="<td class='cavSlotTableSection' colspan='"+t.tv.iNoVDay+"'>"+r+"</td>",a+="</tr>",a+="<tr class='cavSlotTableRow cavSlotTableRow"+(s+1)+"' title='"+r+"'>";for(var o=1;o<t.tv.iNoVDay+1;o++){a+="<td class='cavSlotTableColumns cavSlotTableCol"+o+"'>";for(var l=0;l<3;l++)a+="<div class='cavSlotTableSubColumns cavSlotTableSubCol"+l+"'> &nbsp; </div>";a+="</td>"}a+="</tr>"}a+="</table>",$(t.elem).find(".cavContRow2Main").html(a),t._setDateStringsInAppointmentView()},_setDateStringsInAppointmentView:function(){for(var e=this,t=0;t<e.tv.iNoVDay;t++){var a=e.tv.dAVDt[t],i=".cavTableMain #cavRowDay"+t;0===e.compareDates(a,$.CalenStyle.extra.dToday)&&($(e.elem).find(i+" .cavTableRowDays").addClass("cTodayHighlightTextColor"),$(e.elem).find(i+" .cavTableRowDates span").addClass("cTodayHighlightCircle")),$(e.elem).find(i+" .cavTableRowDays").html(e.getDateInFormat({date:a},"DDD",!1,!0)),$(e.elem).find(i+" .cavTableRowDates span").html(e.getNumberStringInFormat(a.getDate(),0,!0))}var n,s=e.getDateInFormat({date:e.tv.dVSDt},"object",e.setting.is24Hour,!0),r=e.getDateInFormat({date:e.tv.dVEDt},"object",e.setting.is24Hour,!0);n=e.tv.iNoVDay>1?s.y===r.y?s.M===r.M?"<b>"+e.getDateInFormat({iDate:s},"MMM",!1,!0)+" "+e.getNumberStringInFormat(s.d,0,!0)+"</b>  -  <b>"+e.getNumberStringInFormat(r.d,0,!0)+"</b>  "+e.getNumberStringInFormat(r.y,0,!0):"<b>"+e.getDateInFormat({iDate:s},"MMM",!1,!0)+"  "+e.getNumberStringInFormat(s.d,0,!0)+"</b>  -  <b>"+e.getDateInFormat({iDate:r},"MMM",!1,!0)+" "+e.getNumberStringInFormat(r.d,0,!0)+"</b>  "+e.getNumberStringInFormat(r.y,0,!0):"<b>"+e.getDateInFormat({iDate:s},"MMM",!1,!0)+" "+e.getNumberStringInFormat(s.d,0,!0)+"</b>  "+e.getNumberStringInFormat(s.y,0,!0)+"  -  <b>"+e.getDateInFormat({iDate:r},"MMM",!1,!0)+" "+e.getNumberStringInFormat(r.d,0,!0)+"</b>  "+e.getNumberStringInFormat(r.y,0,!0):"<b>"+e.getDateInFormat({iDate:s},"DDDD",!1,!0)+" "+e.getDateInFormat({iDate:r},"MMMM",!1,!0)+" "+e.getNumberStringInFormat(r.d,0,!0)+"</b>  "+e.getNumberStringInFormat(r.y,0,!0),e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,n,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(n)},__displayAppointments:function(){var e,t,a,i=this,n=0,s=0,r=[];for(e=0;e<i.tv.iNoVDay;e++){t=i.tv.dAVDt[e];var o=(a=i._getSlotAvailabilityForCurrentView(t)).length;s<o&&(s=o),r.push(a)}for($(i.elem).find(".cavSlotTableMain .cavSlotTableRow .cavSlotTableSubColumns").html(""),e=0;e<i.tv.iNoVDay;e++){t=i.tv.dAVDt[e],a=r[e];for(var l=2,d=2,c=2,v=0;v<a.length;v++){var g,m,D=a[v],f=D.start,p=i.getDateInFormat({date:f},"hh:mm",i.setting.is24Hour,!0),u=D.status;f.getHours()>=0&&f.getHours()<6?(g=1,m=++l):f.getHours()>=6&&f.getHours()<12?(g=2,m=++l):f.getHours()>=12&&f.getHours()<18?(g=3,m=++d):f.getHours()>=18&&f.getHours()<24&&(g=4,m=++c);var h=".cavSlotTableMain .cavSlotTableRow"+g+" .cavSlotTableCol"+(e+1)+" .cavSlotTableSubCol"+m%3,y="cavSlot",w="";if(i.setting.isTooltipInAppointmentView&&i.setting.slotTooltipContent&&(w=i.setting.slotTooltipContent.call(i,D),y+=" cTimeSlotTooltip"),$.cf.compareStrings(u,"Free")?y+=" cavStatusFree":$.cf.compareStrings(u,"Busy")&&(y+=" cavStatusBusy"),$.cf.compareStrings(u,"Free")||$.cf.compareStrings(u,"Busy")){var C="cavSlot"+ ++n,S="<div id='"+C+"' class='"+y+"' title='' data-tooltipcontent='"+w+"'>"+p+"</div>";$(i.elem).find(h).append(S),i.setting.clickedAppointmentSlot&&$(i.elem).find("#"+C).bind($.CalenStyle.extra.sClickHandler,{oTempStatus:D,pluginId:i.tv.pluginId},i._makeAppointmentSlotClickable)}}}for(var T=1;T<5;T++){var V=$(i.elem).find(".cavSlotTableRow"+T);V.length>0&&0===V.find(".cavSlot").length&&V.remove()}i.addRemoveViewLoader(!1,"cEventLoaderBg"),i.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),i.setting.isTooltipInAppointmentView&&i._addTooltipInAppointmentView(),i.setting.timeSlotsAddedInView&&i.setting.timeSlotsAddedInView.call(i,i.setting.visibleView,".cavSlot")},_addTooltipInAppointmentView:function(e){($.cf.isValid(e)?$(e):$(this.elem).find(".cTimeSlotTooltip")).tooltip({content:function(){var e=$(this).data("tooltipcontent");return""!==e&&"<div class='title'>"+e+"</div>"},position:{my:"center bottom-10",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("tooltip-arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}}})},_makeAppointmentSlotClickable:function(e){var t=e.data,a=$.CalenStyle.extra.oArrCalenStyle[t.pluginId-1],i=e.target,n=t.oTempStatus;a.setting.clickedAppointmentSlot&&a.setting.clickedAppointmentSlot.call(a,n,i)},modifyAppointmentSlot:function(e,t){$.cf.isValid(e)&&($.cf.compareStrings(e.status,"Free")&&$.cf.isValid(e.count)&&(0===e.count?e.status="Busy":$(t).data("ui-tooltip")&&$(t).tooltip("destroy")),$.cf.compareStrings(e.status,"Busy")&&$(t).hasClass("cavStatusFree")&&($(t).data("ui-tooltip")&&$(t).tooltip("destroy"),$(t).data("tooltipcontent",""),$(t).removeClass("cavStatusFree cTimeSlotTooltip").addClass("cavStatusBusy")),$.cf.compareStrings(e.status,"Free")&&$(t).data("tooltipcontent",this.setting.slotTooltipContent.call(this,e)),this.setting.isTooltipInAppointmentView&&this._addTooltipInAppointmentView(t))},__goToPrevAppointmentView:function(){var e=this;if(e.setting.showTransition){var t=$(e.elem).find(".cavTableMain"),a=t.width(),i=t.position().left,n=0;n=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top;var s=t.clone();$(s).removeClass(".cavTableMain").addClass("cavTableTemp"),$(s).css({position:"absolute",top:n,left:i}),t.parent().append(s),i+=a;var r=$(e.elem).find(".cavContRow2Main"),o=r.position().left,l=r.width(),d=r.clone();$(d).removeClass("cavContRow2Main").addClass("cavContRow2Temp"),r.parent().append(d),o+=l,$(e.elem).find(".cavContRow2Temp .cavSlotTableMain").removeClass("cavSlotTableMain").addClass("cavSlotTableTemp"),$(s).animate({left:i},e.setting.transitionSpeed),$(d).animate({left:o},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cavTableTemp").remove(),$(e.elem).find(".cavContRow2Temp").remove()},e.setting.transitionSpeed)}var c=e.tv.dVSDt.getTime();7===e.setting.daysInAppointmentView?c-=e.tv.iNoVDay*$.CalenStyle.extra.iMS.d:c-=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(c)},"START"),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.__reloadCurrentView(!0,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__goToNextAppointmentView:function(){var e=this;if(e.setting.showTransition){var t=$(e.elem).find(".cavTableMain"),a=t.width(),i=t.position().left,n=0;n=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top;var s=t.clone();$(s).removeClass(".cavTableMain").addClass("cavTableTemp"),$(s).css({position:"absolute",top:n,left:i}),t.parent().append(s),i-=a;var r=$(e.elem).find(".cavContRow2Main"),o=r.position().left,l=r.width(),d=r.clone();$(d).removeClass("cavContRow2Main").addClass("cavContRow2Temp"),r.parent().append(d),o-=l,$(s).animate({left:i},e.setting.transitionSpeed),$(d).animate({left:o},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cavTableTemp").remove(),$(e.elem).find(".cavContRow2Temp").remove()},e.setting.transitionSpeed)}var c=e.tv.dVEDt.getTime();c+=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(c)},"START"),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.__reloadCurrentView(!0,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__adjustAppointmentTable:function(){var e=this,t=$(e.elem).find(".cavCalendarCont").css("max-height");t=parseInt(t.replace("px",""))||0;var a=$(e.elem).find(".cavCalendarCont").css("min-height");a=parseInt(a.replace("px",""))||0,t>0&&$(e.elem).height()>t?$(e.elem).css({height:t}):a>0&&$(e.elem).height()<a&&$(e.elem).css({height:a}),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight});var i=$(e.elem).find(".calendarCont").parent().outerWidth(),n=$(e.elem).find(".calendarCont").outerHeight();($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right"))&&(i-=e.setting.filterBarWidth),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&($(e.elem).find(".cFilterBar").css({width:i}),n-=$(e.elem).find(".cFilterBar").height()),$(e.elem).find(".calendarContInner").css({width:i,height:n}),e.__adjustHeader(),$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:i}),n-=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0,e.tv.bDisABar&&(n-=$(e.elem).find(".cActionBar").outerHeight());var s=$(e.elem).find(".cavTableRow1").height();D=n-s,$(e.elem).find(".cavTableRow2").css({height:D});var r=i;$(e.elem).find(".cavTableMain").css({width:r}),$(e.elem).find(".cavTableScroll").css({width:$.CalenStyle.extra.iScrollbarWidth+$.CalenStyle.extra.iBorderOverhead}),r-=$.CalenStyle.extra.iScrollbarWidth,$(e.elem).find(".cavTableColumns").css({width:r/e.tv.iNoVDay});var o=$(e.elem).find(".cavTableMain").position().top+s,l=$(e.elem).find(".cavTableMain").position().left,d=$(e.elem).find(".cavTableMain").width()-$.CalenStyle.extra.iBorderOverhead,c=D-$.CalenStyle.extra.iBorderOverhead;$(e.elem).find(".cavContRow2").css({top:o,left:l,width:d,height:c});var v=d-$.CalenStyle.extra.iScrollbarWidth;$(e.elem).find(".cavSlotTableMain").css({width:v});var g=(d-$.CalenStyle.extra.iScrollbarWidth)/e.tv.iNoVDay;$(e.elem).find(".cavSlotTableMain .cavSlotTableColumns").css({width:g});var m=$(e.elem).find(".cavSlotTable").height(),D=$(e.elem).find(".cavTableRow2").height();if(!$(".calendarCont").hasClass("calendarContMobile")&&!e._isFullScreen()&&m<D){$(e.elem).find(".cavContRow2Main").css({height:m}),$(e.elem).find(".cavTableRow2").css({height:m+1});var f=$(e.elem).find(".cavTable").height(),p=($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)+f;$(e.elem).find(".calendarContInner").css({height:p}),n=p,e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(n+=$(e.elem).find(".cFilterBar").height(),$.cf.compareStrings(e.setting.filterBarPosition,"Bottom")&&$(e.elem).find(".cFilterBar").css({top:p})),$(e.elem).css({height:n}),r=$(e.elem).find(".cavTable").width(),$(e.elem).find(".cavTableScroll").css({width:0}),$(e.elem).find(".cavTableColumns").css({width:r/e.tv.iNoVDay})}e.setCalendarBorderColor()}}),a.prototype=$.extend(a.prototype,{__addEventCalendarToEventFilterCriteriaArray:function(){for(var e,t,a,i,n,s,r=this,o={},l=!1,d=[],c=[],v=[],g=[],m=0;m<r.setting.eventFilterCriteria.length;m++){var D=r.setting.eventFilterCriteria[m];if($.cf.compareStrings(D.keyName,"calendarId")){o=D,l=!0;break}}if(l){for(d=o.values,c=o.selectedValues,v=o.displayValues,g=o.displayStatus,a=0;a<r.tv.oAECalendar.length;a++){for(n=(i=r.tv.oAECalendar[a]).calendarId,s=!1,e=0;e<d.length;e++)t=d[e],$.cf.compareStrings(n,t)&&(s=!0);s||(d.push(n),c.push(n),v.push(i.calendar),i.displayStatus&&g.push(i.displayStatus))}var f=[];for(e=0;e<d.length;e++){for(t=d[e],s=!1,a=0;a<r.tv.oAECalendar.length;a++)n=(i=r.tv.oAECalendar[a]).calendarId,$.cf.compareStrings(n,t)&&(s=!0);s||(f.push(t),d[e]="remove",g.length>0&&(g[e]="remove"),v.length>0&&(v[e]="remove"))}var p=[],u=[],h=[];for(e=0;e<d.length;e++)$.cf.compareStrings(d[e],"remove")||(p.push(d[e]),h.push(v[e]),u.push(g[e]));d=p,v=h,g=u;var y=[];for(e=0;e<c.length;e++){for(var w=!1,C=0;C<f.length;C++)$.cf.compareStrings(c[e],f[C])&&(w=!0);w||y.push(c[e])}c=y,o.values=d,o.selectedValues=c,o.displayValues=v,o.displayStatus=g}else{for(a=0;a<r.tv.oAECalendar.length;a++)i=r.tv.oAECalendar[a],d.push(i.calendarId),c.push(i.calendarId),v.push(i.calendar),i.displayStatus&&g.push(i.displayStatus);o.keyName="calendarId",o.keyDisplayName="Calendars",o.dataType="String",o.values=d,o.selectedValues=c,o.displayValues=v,o.displayStatus=g,r.setting.eventFilterCriteria.unshift(o)}},_changeEventCalendarAfterApplicationOfFilter:function(){for(var e=null,t=0;t<this.setting.eventFilterCriteria.length;t++){var a=this.setting.eventFilterCriteria[t];if($.cf.compareStrings(a.keyName,"calendar")){e=a;break}}if(null!==e)for(var i=e.selectedValues,n=0;n<i.length;n++)for(var s=i[n],r=0;r<this.tv.oAECalendar.length;r++){var o=this.tv.oAECalendar[r];$.cf.compareStrings(o.calendar,s)&&(o.isSelected=!0)}},__whetherToDisplayAnEventOnCalendar:function(e){var t=this.setting.eventFilterCriteria;if(t.length<=0)return!0;var a,i,n,s=!1,r=!0,o=[];for(a=0;a<t.length;a++)if((n=(i=t[a]).selectedValues).length>0){r=!1;break}for(a=0;a<t.length;a++){var l=(i=t[a]).keyName,d=i.dataType,c=i.values,v=!0;if((n=i.selectedValues).length>0&&(v=!1),s=!1,r&&$.cf.compareStrings(this.setting.noneSelectedFilterAction,"SelectNone"))s=!1;else if(c.length===n.length||v)s=!0;else{var g=e[l];if(null!==g||void 0!==g)for(var m=0;m<n.length;m++){var D=n[m];if($.cf.compareStrings(d,"Array"))for(var f=0;f<g.length;f++){var p=g[f];$.cf.compareStrings(D,p)&&(s=!0)}else $.cf.compareStrings(d,"String")?$.cf.compareStrings(D,g)&&(s=!0):D===g&&(s=!0)}}o.push(s)}s=!1;for(var u=0;u<o.length;u++){if(!o[u]){s=!1;break}s=!0}return s},applyFilter:function(e,t){this.setting.eventFilterCriteria=e,null!==t&&void 0!==t&&t.length>0?this.reloadData(t):this.__reloadCurrentView(!0,!1)},__setEventCountBasedOnCriteria:function(e){var t=this;if(t.setting.eventFilterCriteria.length<=0)return null;t.tv.oAEvFltrCnt=[];for(var a=0;a<t.setting.eventFilterCriteria.length;a++){var i=t.setting.eventFilterCriteria[a],n=i.keyName,s=i.values,r={};r.keyName=n;for(var o=0;o<s.length;o++){for(var l=0,d=s[o],c=0;c<e.length;c++){d===e[c][n]&&l++}r[d]=l}t.tv.oAEvFltrCnt.push(r)}}})}();