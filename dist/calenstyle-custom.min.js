/* ----------------------------------------------------------------------------- 

  CalenStyle - Responsive Event Calendar
  Version 2.0.8
  Copyright (c)2023 Lajpat Shah
  Contributors : https://github.com/nehakadam/CalenStyle/contributors
  Repository : https://github.com/nehakadam/CalenStyle
  Homepage : https://nehakadam.github.io/CalenStyle

 ----------------------------------------------------------------------------- */


!function(){"use strict";function e(e,t,i,n,a,s,r,o){this.id=e,this.isAllDay=t,this.start=i,this.end=n,this.type=a,this.title=s,this.desc=r,this.url=o}var t;function i(e,t){var i=this;i.elem=e;var n=$.cf.isValid(t.language)?t.language:$.CalenStyle.defaults.language;i.setting=$.extend({},$.CalenStyle.defaults,t,$.CalenStyle.i18n[n]),i.tv=$.extend({},$.CalenStyle.tempDefaults),i.tv.pluginId=$.CalenStyle.extra.iCalenStyleObjCount,i.tv.iUTmMS=i.setting.unitTimeInterval*$.CalenStyle.extra.iMS.m,i.tv.iUTmSlt=60/i.setting.unitTimeInterval,i.tv.iCalHeight=$(i.elem).height(),i.setting.initialize&&i.setting.initialize.call(i),$.CalenStyle.extra.dToday=i._getCurrentDate(),0===i.compareDates(i.setting.selectedDate,new Date)&&(i.setting.selectedDate=new Date($.CalenStyle.extra.dToday)),i.tv.dLoadDt=new Date($.CalenStyle.extra.dToday),i.tv.dVSDt=new Date($.CalenStyle.extra.dToday),i.tv.dVEDt=new Date($.CalenStyle.extra.dToday),i.tv.dVDSDt=new Date($.CalenStyle.extra.dToday),i.tv.dVDEDt=new Date($.CalenStyle.extra.dToday),i.tv.dCMDt=new Date($.CalenStyle.extra.dToday),i.tv.dPMDt=new Date($.CalenStyle.extra.dToday),i.tv.dNMDt=new Date($.CalenStyle.extra.dToday),i.tv.dPLSDt=new Date($.CalenStyle.extra.dToday),i.tv.dPLEDt=new Date($.CalenStyle.extra.dToday),i.tv.dNLSDt=new Date($.CalenStyle.extra.dToday),i.tv.dNLEDt=new Date($.CalenStyle.extra.dToday),$.CalenStyle.extra.oArrCalenStyle.push(i),i._setHeightForEvents()}$.CalenStyle=$.CalenStyle||{name:"CalenStyle",version:"1.0.0",i18n:{},defaults:{sectionsList:["Header","Calendar"],language:"",veryShortDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],numbers:["0","1","2","3","4","5","6","7","8","9"],eventTooltipContent:"Default",formatDates:{},slotTooltipContent:function(e){return"Busy"===e.status?"":"Free"===e.status?void 0===e.count||null===e.count?"<div class=cavTooltipBookNow>Book Now</div>":"<div class=cavTooltipSlotCount>"+e.count+" slots available</div><div class=cavTooltipBookNow>Book Now</div>":void 0},miscStrings:{today:"Today",week:"Week",allDay:"All Day",ends:"Ends",emptyEventTitle:"(No Title)",emptyGoogleCalendarEventTitle:"Busy"},duration:"Default",durationStrings:{y:["year ","years "],M:["month ","months "],w:["w ","w "],d:["d ","d "],h:["h ","h "],m:["m ","m "],s:["s ","s "]},viewsToDisplay:[{viewName:"DetailedMonthView",viewDisplayName:"Month"},{viewName:"WeekView",viewDisplayName:"Week"},{viewName:"DayView",viewDisplayName:"Day"},{viewName:"AgendaView",viewDisplayName:"Agenda"}],visibleView:"DetailedMonthView",selectedDate:new Date,headerComponents:{DatePickerIcon:"<span class='cContHeaderButton cContHeaderDatePickerIcon clickableLink cs-icon-Calendar'></span>",FullscreenButton:function(e){return"<span class='cContHeaderButton cContHeaderFullscreen clickableLink "+(e?"cs-icon-Contract":"cs-icon-Expand")+"'></span>"},PreviousButton:"<span class='cContHeaderButton cContHeaderNavButton cContHeaderPrevButton clickableLink cs-icon-Prev'></span>",NextButton:"<span class='cContHeaderButton cContHeaderNavButton cContHeaderNextButton clickableLink cs-icon-Next'></span>",TodayButton:"<span class='cContHeaderButton cContHeaderToday clickableLink'></span>",HeaderLabel:"<span class='cContHeaderLabelOuter'><span class='cContHeaderLabel'></span></span>",HeaderLabelWithDropdownMenuArrow:"<span class='cContHeaderLabelOuter clickableLink'><span class='cContHeaderLabel'></span><span class='cContHeaderButton cContHeaderDropdownMenuArrow'></span></span>",MenuSegmentedTab:"<span class='cContHeaderMenuSegmentedTab'></span>",MenuDropdownIcon:"<span class='cContHeaderButton cContHeaderMenuButton clickableLink'>&#9776;</span>"},headerSectionsList:{left:["DatePickerIcon","PreviousButton","NextButton"],center:["HeaderLabel"],right:["MenuSegmentedTab"]},dropdownMenuElements:["ViewsToDisplay"],parentObject:null,datePickerObject:null,formatSeparatorDateTime:" ",formatSeparatorDate:"-",formatSeparatorTime:":",is24Hour:!1,inputDateTimeFormat:"dd-MM-yyyy HH:mm:ss",eventDuration:30,allDayEventDuration:1,timeIndicatorUpdationInterval:15,unitTimeInterval:30,timeLabels:"Hour",inputTZOffset:"+05:30",tz:"Asia/Calcutta",outputTZOffset:"+05:30",weekStartDay:1,weekNumCalculation:"US",daysInCustomView:4,daysInDayListView:7,daysInAppointmentView:4,agendaViewDuration:"Month",daysInAgendaView:15,agendaViewTheme:"Timeline2",showDaysWithNoEventsInAgendaView:!1,fixedHeightOfWeekPlannerViewCells:!0,quickAgendaViewDuration:"Week",daysInQuickAgendaView:5,navigateOneDayInQuickAgendaView:!1,taskPlannerViewDuration:"Week",daysInTaskPlannerView:5,fixedHeightOfTaskPlannerView:!0,navigateOneDayInTaskPlannerView:!1,transitionSpeed:600,showTransition:!1,fixedNumOfWeeksInMonthView:!1,displayWeekNumInMonthView:!1,actionOnDayClickInMonthView:"ModifyEventList",eventIndicatorInMonthView:"Events",eventIndicatorInDatePicker:"DayNumberBold",eventIndicatorInDayListView:"DayHighlight",averageEventsPerDayForDayHighlightView:5,hideExtraEvents:!0,hiddenEventsIndicatorLabel:"+(count) more",hiddenEventsIndicatorAction:"ShowEventDialog",addEventsInMonthView:!0,displayEventsInMonthView:!0,isDragNDropInMonthView:!0,isTooltipInMonthView:!1,isDragNDropInDetailView:!0,isResizeInDetailView:!0,isTooltipInDetailView:!1,isDragNDropInQuickAgendaView:!0,isTooltipInQuickAgendaView:!1,isDragNDropInTaskPlannerView:!0,isTooltipInTaskPlannerView:!1,isTooltipInAppointmentView:!0,actionBarHeight:30,filterBarPosition:"Top",filterBarHeight:200,filterBarWidth:200,eventFilterCriteria:[],noneSelectedFilterAction:"SelectNone",calendarBorderColor:"FFFFFF",changeCalendarBorderColorInJS:!1,extraMonthsForDataLoading:1,deleteOldDataWhileNavigating:!0,datasetModificationRule:"Default",changeColorBasedOn:"EventCalendar",borderColor:"",textColor:"FFFFFF",onlyTextForNonAllDayEvents:!0,eventColorsArray:["C0392B","D2527F","674172","4183D7","336E7B","36D7B7","68C3A3","E87E04","6C7A89","F9690E"],eventIcon:"Dot",hideEventIcon:{Default:!1,DetailedMonthView:!1,MonthView:!1,WeekView:!1,DayView:!1,CustomView:!1,QuickAgendaView:!1,TaskPlannerView:!1,DayEventDetailView:!1,AgendaView:!1,WeekPlannerView:!1},hideEventTime:{Default:!1,DetailedMonthView:!1,MonthView:!1,WeekView:!1,DayView:!1,CustomView:!1,QuickAgendaView:!1,TaskPlannerView:!1,DayEventDetailView:!1,AgendaView:!1,WeekPlannerView:!1},businessHoursSource:[{day:1,times:[{startTime:"10:00",endTime:"17:00"}]},{day:2,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]},{day:3,times:[{startTime:"10:00",endTime:"17:00"}]},{day:4,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]},{day:5,times:[{startTime:"10:00",endTime:"17:00"}]},{day:6,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]}],excludeNonBusinessHours:!1,isNonBusinessHoursDroppable:!0,isRestrictedSectionDroppable:!0,eventOrTaskStatusIndicators:[{name:"Overdue",color:"E74C3C"},{name:"Completed",color:"27AE60"},{name:"InProgress",color:"F1C40F"}],calDataSource:[],datePickerCalDataSource:[{config:{sourceCountType:"Event"}}],adjustViewOnWindowResize:!0,useHammerjsAsGestureLibrary:!1,initialize:null,modifyHeaderViewLabels:null,addEventHandlersInHeader:null,dataLoadingStart:null,dataLoadingEnd:null,cellClicked:null,viewLoaded:null,previousButtonClicked:null,nextButtonClicked:null,todayButtonClicked:null,visibleViewChanged:null,modifyCustomView:null,displayEventsForPeriodInList:null,displayEventsForPeriodInListInAgendaView:null,eventListAppended:null,displayEventListDialog:null,eventInADialogClicked:null,eventRendered:null,eventsAddedInView:null,timeSlotsAddedInView:null,eventClicked:null,timeSlotClicked:null,saveChangesOnEventDrop:null,saveChangesOnEventResize:null,modifyFilterBarView:null,modifyActionBarView:null,addDaySummaryInTaskPlannerView:null},tempDefaults:{sLoadType:"Load",iLoadCnt:0,dLoadDt:new Date,bViewLoaded:!1,dHighlightDPV:[],bDisFBar:!1,bDisMenu:!1,iMaxEvId:0,iMxEvRw:0,oAEvents:[],oASmEvSeg:[],oAADEvSeg:[],oASrcCnt:[],oAResSec:[],oASltAvail:[],oAECalendar:[],oAEvTaskStatus:[],bEvTskStatus:!1,oSURLParams:[],iDocHtPrev:0,iUTmMS:0,iUTmSlt:0,dVSDt:new Date,dVEDt:new Date,dVDSDt:new Date,dVDEDt:new Date,dCMDt:new Date,dPMDt:new Date,dNMDt:new Date,dPLSDt:new Date,dPLEDt:new Date,dNLSDt:new Date,dNLEDt:new Date,dDrgSDt:null,dDrgEDt:null,dAVDt:[],dAVDDt:[],iNoVDay:0,iNoVDayDis:0,iSelDay:0,bAWkRw:[],bADVCur:[],sADVInfo:[],iBsDays:0,bABsDays:[],oBsHours:{start:"",end:""},bChkDroppable:!1,iWkInMonth:6,bDVResEv:!1,bDVDrgEv:!1,bEvLgPresd:!1,bUrlClk:!1,oEvEdt:null,oDVEdtgEv:null,bDVScrlg:!1,fDVDayWth:0,fADVDayLftPos:[],fAHrTpPos:[],bCMVDisEvLst:!1,bDisABar:!1,oAEvFltrCnt:[],iCalHeight:0,bDyClDLV:!1},extra:{iCalenStyleObjCount:0,iBorderOverhead:1,iEventHeightOverhead:4,iScrollbarWidth:0,dToday:new Date,iMS:{m:6e4,h:36e5,d:864e5,w:6048e5},sArrInputDateTimeFormats:["DateObject","UnixTimestamp","ISO8601","ISO8601Compact","dd-MM-yyyy hh:mm:ss AA","dd-MM-yyyy HH:mm:ss","MM-dd-yyyy hh:mm:ss AA","MM-dd-yyyy HH:mm:ss","yyyy-MM-dd hh:mm:ss AA","yyyy-MM-dd HH:mm:ss"],sArrViewsTypes:["DetailedMonthView","MonthView","WeekView","DayView","AgendaView","WeekPlannerView","QuickAgendaView","TaskPlannerView","CustomView","DayEventListView","DayEventDetailView","AppointmentView","DatePicker"],bTouchDevice:"ontouchstart"in document.documentElement,sClickHandler:(document.documentElement,"click"),sClickHandlerButtons:"ontouchstart"in document.documentElement?"touchstart":"click",oArrCalenStyle:[],iEventHeights:{DetailedMonthView:18,WeekView:18,DayView:18,CustomView:18,DayEventDetailView:18,QuickAgendaView:18},oEventClass:{DetailedMonthView:"cdmvEvent",WeekView:"cdvEventAllDay",DayView:"cdvEventAllDay",CustomView:"cdvEventAllDay",DayEventDetailView:"cdvEventAllDay",QuickAgendaView:"cqavEvent"}}},$.cf={isValid:function(e){return void 0!==e&&null!==e&&""!==e},compareStrings:function(e,t){return null!==e&&void 0!==e&&null!==t&&void 0!==t?"string"==typeof e&&"string"==typeof t&&e.toLocaleLowerCase()===t.toLocaleLowerCase():null===e&&null===t||void 0===e&&void 0===t},getTimestamp:function(){return(new Date).getTime()},getRGBAString:function(e,t){var i=0,n=0,a=0,s=e.match(/rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)/i),r=e.match(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})/i);return $.cf.isValid(s)&&s.length>0?(i=s[0],n=s[1],a=s[2]):$.cf.isValid(r)&&r.length>0?(i=r[0],n=r[1],a=r[2]):3===(e=(e="#"===e.charAt(0)?e.substring(1,7):e).match(/([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/)[0]).length?(i=e.substring(0,1),i+=i,i=parseInt(i,16),n=e.substring(1,2),n+=n,n=parseInt(n,16),a=e.substring(2,3),a+=a,a=parseInt(a,16)):6===e.length&&(i=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16)),"rgba("+i+", "+n+", "+a+", "+t+")"},addHashToHexcode:function(e){if($.cf.isValid(e)){var t=e.match(/(rgba)/i),i=e.match(/(#+([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}))/),n=e.match(/([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/);return $.cf.isValid(t)&&t.length>0?e:$.cf.isValid(i)&&i.length>0?i[0]:$.cf.isValid(n)&&n.length>0?"#"+n[0]:"#000000"}return e},getSizeValue:function(e,t){var i,n=e.css(t);return void 0!==n&&null!==n&&""!==n&&(-1!==n.indexOf("px")?i=parseInt(n.replace("px","")):-1!==n.indexOf("%")&&(i=parseInt(n.replace("%",""))%100*e.closest().width()),!(i<=0)&&i)}},t=function(e){e.fn.CalenStyle=function(t){var n,a,s=e(this).data(),r=Object.keys(s);if(null===t||void 0===t)if(r.length>0){for(n in r)if(-1!==(a=r[n]).search("plugin_CalenStyle_"))return s[a]}else console.log("No CalenStyle Object Defined For This Element");else{if("string"!=typeof t)return this.each(function(){if(e.CalenStyle.extra.iCalenStyleObjCount++,e.data(this,"plugin_CalenStyle_"+e.CalenStyle.extra.iCalenStyleObjCount))if(r.length>0){for(n in r)if(-1!==(a=r[n]).search("plugin_CalenStyle_"))return s[a]}else console.log("No CalenStyle Object Defined For This Element");else s=new i(this,t),e.data(this,"plugin_CalenStyle_"+e.CalenStyle.extra.iCalenStyleObjCount,s),s.loadView(),console.log("Calendar Object "),console.log(s)});if(e.cf.isValid(s)&&"destroy"===t)if(r.length>0){for(n in r)if(-1!==(a=r[n]).search("plugin_CalenStyle_")){e(this).children().remove(),e(".cElemDatePickerBg").remove(),e(this).removeData(),e(this).unbind(),e(this).removeClass("elem-CalenStyle"),e(document).unbind(e.CalenStyle.extra.sClickHandler+".CalenStyle"),e(document).unbind(e.CalenStyle.extra.sClickHandler+".CalenStyleDialog"),e(document).unbind(e.CalenStyle.extra.sClickHandler+".MonthPicker"),e(document).unbind(e.CalenStyle.extra.sClickHandler+".YearPicker"),s=s[a],e(window).unbind("resize."+s.tv.pluginId),e(window).unbind("resize.CSDP."+s.tv.pluginId);for(var o=[],l=0;l<e.CalenStyle.extra.oArrCalenStyle.length;l++){var d=e.CalenStyle.extra.oArrCalenStyle[l];d.tv.pluginId!==s.tv.pluginId&&d.tv.pluginId!==s.setting.datePickerObject.tv.pluginId&&o.push(d)}e.CalenStyle.extra.oArrCalenStyle=o,console.log("Destroyed CalenStyle Object"),console.log(s);break}}else console.log("No CalenStyle Object Defined For This Element")}}},"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery),i.prototype={modifyCalenStyleObject:function(e){},setLanguage:function(e,t){var i=this;i.setting.language=e,i.setting=$.extend({},i.setting,$.CalenStyle.i18n[e]);for(var n=0;n<i.setting.viewsToDisplay.length;n++)i.setting.viewsToDisplay[n].viewDisplayName=i.setting.viewDisplayNames[i.setting.viewsToDisplay[n].viewName];return i.setting.datePickerObject.setting=$.extend({},i.setting.datePickerObject.setting,$.CalenStyle.i18n[e]),t?i.reloadData():(i.refreshView(),i.setting.datePickerObject.refreshView()),i},changeOutputTimezone:function(e,t,i){var n,a=this,s=a.setting.tz,r=a.setting.outputTZOffset;if(a.setting.tz=e,a.setting.outputTZOffset=t,i||a.tv.bGCData&&s!==e)a.reloadData();else if(r!==t){for(n=0;n<a.tv.oAEvents.length;n++){var o=a.tv.oAEvents[n];o.isAllDay||(o.start=a.normalizeDateTimeWithOffset(o.start,r,t),o.end=a.normalizeDateTimeWithOffset(o.end,r,t))}for(n=0;n<a.tv.oAResSec.length;n++){var l=a.tv.oAResSec[n];l.isAllDay||(l.start=a.normalizeDateTimeWithOffset(l.start,r,t),l.end=a.normalizeDateTimeWithOffset(l.end,r,t))}for(n=0;n<a.tv.oASltAvail.length;n++){var d=a.tv.oASltAvail[n];d.isAllDay||(d.start=a.normalizeDateTimeWithOffset(d.start,r,t),d.end=a.normalizeDateTimeWithOffset(d.end,r,t))}a.refreshView()}},addRemoveLoaderIndicators:function(e,t){var i=this;$.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"DatePicker")?e?$(i.elem).find(".cmvMonthTableMain tbody").addClass(t):$(i.elem).find(".cmvMonthTableMain tbody").removeClass(t):$.cf.compareStrings(i.setting.visibleView,"WeekView")||$.cf.compareStrings(i.setting.visibleView,"DayView")||$.cf.compareStrings(i.setting.visibleView,"CustomView")?e?$(i.elem).find(".cdvDetailTableMain tbody").addClass(t):$(i.elem).find(".cdvDetailTableMain tbody").removeClass(t):$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")?e?($(i.elem).find(".cdvDetailTableMain tbody").addClass(t),$(i.elem).find(".cdlvDaysTableMain tbody").addClass(t)):($(i.elem).find(".cdvDetailTableMain tbody").removeClass(t),$(i.elem).find(".cdlvDaysTableMain tbody").removeClass(t)):$.cf.compareStrings(i.setting.visibleView,"DayEventListView")?e?$(i.elem).find(".cdlvDaysTableMain tbody").addClass(t):$(i.elem).find(".cdlvDaysTableMain tbody").removeClass(t):$.cf.compareStrings(i.setting.visibleView,"QuickAgendaView")?e?$(i.elem).find(".cqavTableMain tbody").addClass(t):$(i.elem).find(".cqavTableMain tbody").removeClass(t):$.cf.compareStrings(i.setting.visibleView,"TaskPlannerView")?e?$(i.elem).find(".ctpvTableMain tbody").addClass(t):$(i.elem).find(".ctpvTableMain tbody").removeClass(t):$.cf.compareStrings(i.setting.visibleView,"AppointmentView")?e?$(i.elem).find(".cavTableMain").addClass(t):$(i.elem).find(".cavTableMain").removeClass(t):$.cf.compareStrings(i.setting.visibleView,"AgendaView")?e?$(i.elem).find(".cListOuterCont").addClass(t):$(i.elem).find(".cListOuterCont").removeClass(t):$.cf.compareStrings(i.setting.visibleView,"WeekPlannerView")&&(e?$(i.elem).find(".cwpvTableOuterCont").addClass(t):$(i.elem).find(".cwpvTableOuterCont").removeClass(t))},addRemoveViewLoader:function(e,t){if(e){"cViewLoaderBg"===t?$(this.elem).parent().append("<div class='"+t+"'><div class='cViewLoaderBody'></div></div>"):"cEventLoaderBg"===t&&$(this.elem).parent().append("<div class='"+t+"'><div class='cEventLoaderIcon'></div></div>"),$(".cContHeaderMenuDropdownBg").css({background:"rgba(0, 0, 0, 0)"});var i=$(this.elem),n=$.cf.getSizeValue(i,"margin-left"),a=$.cf.getSizeValue(i,"margin-top"),s=i.position().left+n,r=i.position().top+a,o=$.cf.getSizeValue(i,"max-width"),l=$.cf.getSizeValue(i,"min-width"),d=i.width(),c=i.height();if(d=o&&d>o?o:d,d=l&&d<l?l:d,$("."+t).css({left:s,top:r,width:d,height:c}),"cViewLoaderBg"===t){var v=$(this.elem).find(".cContHeader").height(),g=c-v,m=v;$(".cViewLoaderBody").css({height:g,"margin-top":m})}$("."+t).on("click touchstart touchmove",function(e){e.stopPropagation()})}else $("."+t).remove()},__setHoverClass:function(e,t){e.on("touchstart",function(i){e.addClass(t)}),e.on("touchend",function(i){e.removeClass(t)})},_callCommonEvents:function(){this._hideDatePicker(),this._collapseSubmenu()},_resetSourceFetch:function(){for(var e=0;e<this.setting.calDataSource.length;e++){this.setting.calDataSource[e].fetched=!1}},reloadData:function(e){var t=this;t.tv.sLoadType="Load",t.tv.dLoadDt=new Date(t.setting.selectedDate),t.tv.oSURLParams=t.__parseJson(e)||[],t._resetSourceFetch(),t.__reloadCurrentView(!0,!0)},_setDisplayTimeLabelsArray:function(){var e,t=this,i="Array";if($.cf.compareStrings(t.setting.timeLabels,"Hour")||$.cf.compareStrings(t.setting.timeLabels,"All"))i=t.setting.timeLabels;else if($.isArray(t.setting.timeLabels)&&t.setting.timeLabels.length===t.tv.iUTmSlt)for(i="No",e=0;e<t.tv.iUTmSlt;e++)if(!$.cf.compareStrings(typeof t.setting.timeLabels[e],"boolean")){i="Array";break}if(!$.cf.compareStrings(i,"No"))for(t.setting.timeLabels=[],e=0;e<t.tv.iUTmSlt;e++)$.cf.compareStrings(i,"Hour")||$.cf.compareStrings(i,"Array")?0===e?t.setting.timeLabels.push(!0):t.setting.timeLabels.push(!1):$.cf.compareStrings(i,"All")&&t.setting.timeLabels.push(!0)},_getRestrictedSectionForCurrentView:function(e){var t,i=this,n=[];for(t=0;t<i.tv.oAResSec.length;t++){var a=i.tv.oAResSec[t],s=i.compareDates(new Date(a.start),e)<=0,r=i.compareDates(new Date(a.end),e)>=0;s&&r&&n.push(a)}var o=n.length;if(o>1)for(t=0;t<o-1;t++){var l=n[t],d=n[t+1];0===i.compareDateTimes(new Date(l[0]),new Date(d[0]))&&(n[t]=d,n[t+1]=l)}return n},_getBusinessDaysForWeek:function(){var e,t,i=this;for(i.setting.businessHoursSource=i.__parseJson(i.setting.businessHoursSource),i.tv.iBsDays=0,i.tv.bABsDays=[!1,!1,!1,!1,!1,!1,!1],e=0;e<i.setting.businessHoursSource.length;e++){var n=i.setting.businessHoursSource[e],a=n.times;if($.cf.isValid(n.day)&&(i.tv.bABsDays[n.day]=!0),$.cf.isValid(n.days))for(t=0;t<n.days.length;t++)i.tv.bABsDays[n.days[t]]=!0;for(var s=0;s<a.length;s++){var r=a[s];$.cf.isValid(i.tv.oBsHours.start)?i._compareHours(r.startTime,i.tv.oBsHours.start)<0&&(i.tv.oBsHours.start=r.startTime):i.tv.oBsHours.start=r.startTime,$.cf.isValid(i.tv.oBsHours.end)?i._compareHours(r.endTime,i.tv.oBsHours.end)>0&&(i.tv.oBsHours.end=r.endTime):i.tv.oBsHours.end=r.endTime}}i.tv.oBsHours.startTime=i._getHourAndMinuteFromString(i.tv.oBsHours.start),i.tv.oBsHours.endTime=i._getHourAndMinuteFromString(i.tv.oBsHours.end);var o=(60*i.tv.oBsHours.startTime[0]+i.tv.oBsHours.startTime[1])%i.setting.unitTimeInterval,l=(60*i.tv.oBsHours.endTime[0]+i.tv.oBsHours.endTime[1])%i.setting.unitTimeInterval;for(0!==o&&(i.tv.oBsHours.startTime[1]=i.tv.oBsHours.startTime[1]+o,i.tv.oBsHours.start=i.tv.oBsHours.startTime[0]+":"+i.tv.oBsHours.startTime[1]),0!==l&&(i.tv.oBsHours.endTime[1]=i.tv.oBsHours.endTime[1]+l,i.tv.oBsHours.end=i.tv.oBsHours.endTime[0]+":"+i.tv.oBsHours.endTime[1]),e=0;e<i.tv.bABsDays.length;e++)i.tv.bABsDays[e]&&i.tv.iBsDays++},_compareHours:function(e,t){var i=this._getHourAndMinuteFromString(e),n=this._getHourAndMinuteFromString(t),a=new Date,s=new Date;return a.setHours(parseInt(i[0])),a.setMinutes(parseInt(i[1])),s.setHours(parseInt(n[0])),s.setMinutes(parseInt(n[1])),this.compareDateTimes(a,s)},_getBusinessHoursForCurrentView:function(e){var t,i=this,n=i.getDateInFormat({date:e},"object",!1,!0),a=[];for(t=0;t<i.setting.businessHoursSource.length;t++){var s=i.setting.businessHoursSource[t];if($.cf.isValid(s.day)&&n.D===parseInt(s.day)||$.cf.isValid(s.days)&&-1!==s.days.indexOf(n.D)){for(var r=0;r<s.times.length;r++){var o=s.times[r],l=i._getHourAndMinuteFromString(o.startTime),d=i._getHourAndMinuteFromString(o.endTime),c=i.setDateInFormat({iDate:{d:n.d,M:n.M,y:n.y,H:parseInt(l[0]),m:parseInt(l[1]),s:0}},""),v=i.setDateInFormat({iDate:{d:n.d,M:n.M,y:n.y,H:parseInt(d[0]),m:parseInt(d[1]),s:0}},"");i.compareDateTimes(c,v)<0&&a.push([c,v])}break}}var g=a.length;if(g>1)for(t=0;t<g-1;t++){var m=a[t],D=a[t+1];0!==i.compareDateTimes(m[0],D[0])&&(a[t]=D,a[t+1]=m)}return a},_getHourAndMinuteFromString:function(e){var t=e.split(" "),i=t[0].split(this.setting.formatSeparatorTime),n=i[0],a=i[1];return t.length>1&&($.cf.compareStrings(t[1],"AM")&&12===n&&(n=0),$.cf.compareStrings(t[1],"PM")&&n<12&&(n+=12)),[n,a]},_checkAllowDroppable:function(){var e=this;e.tv.bChkDroppable=!1,e.setting.isNonBusinessHoursDroppable||e.setting.isNonBusinessHoursDroppable||(e.tv.bChkDroppable=!0);var t,i=e.setting.isDragNDropInMonthView||e.setting.isDragNDropInDetailView||e.setting.isDragNDropInQuickAgendaView||e.setting.isDragNDropInTaskPlannerView;if(!e.tv.bChkDroppable&&e.tv.oAResSec.length>0&&i)for(t=0;t<e.tv.oAResSec.length;t++){var n=e.tv.oAResSec[t];if($.cf.isValid(n.isDroppable)&&n.isDroppable){e.tv.bChkDroppable=!0;break}}},_findWhetherEventEnteredNonDroppableZone:function(e,t,i,n,a){var s=this,r=!1,o=$.cf.isValid(a)?a.split(","):[];if($.cf.isValid(e)&&$.cf.isValid(t)&&n>0){var l,d,c,v,g,m,D,f,u,p=24*s.tv.iUTmSlt;g=0===(g=Math.round((t.getTime()-e.getTime())/s.tv.iUTmMS))?1:g,a=$.cf.isValid(a)?a:"";var h=s._normalizeDateTime(e,"START","T"),y=h.getTime();for(l=0;l<n;l++){if(s.tv.bABsDays[h.getDay()]||!s.setting.excludeNonBusinessHours){for(m=0;m<s.tv.dAVDt.length&&s.tv.dAVDt[m].getDay()!==h.getDay();m++);v=[];for(var C=0;C<24;C++)for(d=0;d<s.tv.iUTmSlt;d++)v.push(0);v.push(0);var w=s._getRestrictedSectionForCurrentView(h),S=s._getBusinessHoursForCurrentView(h),V=!1,b=!1;if(w.length>0){for(r=!1,c=0;c<w.length;c++){var E=w[c],T=new Date(E.start),M=new Date(E.end),I=!!$.cf.isValid(E.isAllDay)&&E.isAllDay,A=$.cf.isValid(E.droppableId)?E.droppableId:"",_=$.cf.isValid(E.isDroppable)?E.isDroppable:s.setting.isRestrictedSectionDroppable,k=$.cf.isValid(E.allowedDroppables)?E.allowedDroppables:[],H=s.compareDateTimes(T,e),F=s.compareDateTimes(M,t),N=s.compareDateTimes(T,t),x=s.compareDateTimes(M,e),B=0===s.compareDates(h,T),L=0===s.compareDates(h,M),O=0;if(B||(T=s._normalizeDateTime(h,"START","T")),L||(M=s._normalizeDateTime(h,"END","T")),O=0===(O=Math.round((M.getTime()-T.getTime())/s.tv.iUTmMS))?1:O>p?p:O,i||g>=p){if(i&&I||0===H&&0===F)return!0}else if(H<=0&&F>=0){if(_||(b=!0),!(H>0&&F>0&&N<0)||H<0&&F<0&&x>0)if(_){var P=!1;if(0===k.length)V=!0;else{for(D=0;D<k.length;D++)if($.cf.compareStrings(k[D],"All")){P=!0,V=!0;break}if(!P)if($.cf.isValid(a))if(1===o.length&&a===A)V=!0;else for(f=0;f<o.length;f++){var R=o[f];if(R!==A){var W=!1;for(u=0;u<k.length;u++)if($.cf.compareStrings(k[u],R)){W=!0,V=!0;break}W||(b=!0)}else V=!0}else b=!0}}else b=!0}else(H>=0&&F>=0&&N<0||H<=0&&F<=0&&x>0)&&(b=!0)}if(V)return!1;if(b)return!0;if($.cf.isValid(a))return!0}if(S.length>0&&!s.setting.isNonBusinessHoursDroppable){for(r=!0,c=0;c<S.length;c++){var j=S[c],z=new Date(j[0]),Y=new Date(j[1]),q=s.compareDateTimes(z,e),U=s.compareDateTimes(Y,t);if(i){if(!s.tv.bABsDays[h.getDay()])return!0;r=!1}r=!(q<=0&&U>=0)&&r}if(r)return!0}else if(!s.setting.isNonBusinessHoursDroppable)return!0}y+=$.CalenStyle.extra.iMS.d,h=new Date(y)}}return r},modifySettings:function(e){var t=this,i=t.tv.pluginId;t.setting=$.extend({},$.CalenStyle.defaults,e),t.tv=$.extend({},$.CalenStyle.tempDefaults),t.tv.pluginId=i,t.tv.iUTmMS=t.setting.unitTimeInterval*$.CalenStyle.extra.iMS.m,t.tv.iUTmSlt=60/t.setting.unitTimeInterval},loadView:function(){var e=this;if($(e.elem).hasClass("cElemDatePicker")||$(e.elem).addClass("elem-CalenStyle"),$(e.elem).html("<div class='calendarCont'></div>"),e.setting.viewsToDisplay.length>1)for(var t=0;t<e.setting.viewsToDisplay.length;t++){var i=e.setting.viewsToDisplay[t].viewName||"";$.cf.compareStrings(i,e.setting.visibleView)&&(e.tv.bDisMenu=!0)}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.bViewLoaded=!1,e._getBusinessDaysForWeek(),e._checkAllowDroppable(),e._setDisplayTimeLabelsArray(),e._resetSourceFetch();var n,a=navigator.userAgent,s="br-other";if(/(ipod|iphone|ipad)/i.test(a)?s="br-ios":/opera|opr/i.test(a)?s="br-opera":/msie|trident/i.test(a)?s="br-ie":/chrome.+? edge/i.test(a)?s="br-ie":/chrome|crios|crmo/i.test(a)?s="br-chrome":/firefox|iceweasel/i.test(a)?s="br-firefox":/safari/i.test(a)&&(s="br-safari"),$("body").addClass(s),$.CalenStyle.extra.bTouchDevice)n=2,$(".calendarCont").addClass("calendarContMobile");else{if("WebkitAppearance"in document.documentElement.style)n=5;else{var r=document.createElement("div");r.innerHTML="<div style='width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;'><div style='width:1px;height:100px;'></div></div>",r=r.firstChild,document.body.appendChild(r);var o=r.offsetWidth-r.clientWidth;document.body.removeChild(r),n=o}$(".calendarCont").addClass("calendarContWeb")}$.CalenStyle.extra.iScrollbarWidth=n,e.setCurrentView(e.setting.visibleView,!0)},setCurrentView:function(e,t){var i=this;i.setting.visibleView=e;var n=$(i.elem).find(".calendarCont");n.removeClass("cmvCalendarCont cdvCalendarCont cdlvCalendarCont cagvCalendarCont cagvTimeline1 cagvTimeline2 cagvTimeline3 cavCalendarCont cqavCalendarCont"),$(i.elem).find(".calendarCont").html(""),n.css({width:"100%",height:"100%"}),n.removeClass("cmvCalendarContWithBorders"),$.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(i.setting.visibleView,"DatePicker")?(n.addClass("cmvCalendarCont"),$.cf.compareStrings(i.setting.visibleView,"DatePicker")||n.addClass("cmvCalendarContWithBorders")):$.cf.compareStrings(i.setting.visibleView,"DayEventListView")?(n.addClass("cdlvCalendarCont"),i.tv.iNoVDay=i.setting.daysInDayListView,7===i.tv.iNoVDay&&i.setting.excludeNonBusinessHours&&(i.tv.iNoVDay-=i.tv.iNoVDay-i.tv.iBsDays),i.tv.iSelDay=Math.floor(i.tv.iNoVDay/2),i.tv.iNoVDayDis=1):$.cf.compareStrings(i.setting.visibleView,"AppointmentView")?(n.addClass("cavCalendarCont"),i.tv.iNoVDay=i.setting.daysInAppointmentView,7===i.tv.iNoVDay&&i.setting.excludeNonBusinessHours&&(i.tv.iNoVDay-=i.tv.iNoVDay-i.tv.iBsDays),i.tv.iNoVDayDis=i.tv.iNoVDay):$.cf.compareStrings(i.setting.visibleView,"AgendaView")?(n.addClass("cagvCalendarCont"),$.cf.isValid(i.setting.displayEventsForPeriodInListInAgendaView)||($.cf.compareStrings(i.setting.agendaViewTheme,"Timeline1")?n.addClass("cagvTimeline1"):$.cf.compareStrings(i.setting.agendaViewTheme,"Timeline2")?n.addClass("cagvTimeline2"):$.cf.compareStrings(i.setting.agendaViewTheme,"Timeline3")&&n.addClass("cagvTimeline3")),$.cf.compareStrings(i.setting.agendaViewDuration,"Month")||($.cf.compareStrings(i.setting.agendaViewDuration,"Week")?i.tv.iNoVDay=7:$.cf.compareStrings(i.setting.agendaViewDuration,"CustomDays")&&(i.tv.iNoVDay=i.setting.daysInAgendaView),7===i.tv.iNoVDay&&i.setting.excludeNonBusinessHours&&(i.tv.iNoVDay-=i.tv.iNoVDay-i.tv.iBsDays),i.tv.iNoVDayDis=i.tv.iNoVDay)):$.cf.compareStrings(i.setting.visibleView,"WeekPlannerView")?(n.addClass("cwpvCalendarCont"),i.tv.iNoVDay=7,i.tv.iNoVDayDis=i.tv.iNoVDay):$.cf.compareStrings(i.setting.visibleView,"QuickAgendaView")?(n.addClass("cqavCalendarCont"),$.cf.compareStrings(i.setting.quickAgendaViewDuration,"Week")?i.tv.iNoVDay=7:$.cf.compareStrings(i.setting.quickAgendaViewDuration,"CustomDays")&&(i.tv.iNoVDay=i.setting.daysInQuickAgendaView),7===i.tv.iNoVDay&&i.setting.excludeNonBusinessHours&&(i.tv.iNoVDay-=i.tv.iNoVDay-i.tv.iBsDays),i.tv.iNoVDayDis=i.tv.iNoVDay):$.cf.compareStrings(i.setting.visibleView,"TaskPlannerView")?(n.addClass("ctpvCalendarCont"),$.cf.compareStrings(i.setting.taskPlannerViewDuration,"Week")?i.tv.iNoVDay=7:$.cf.compareStrings(i.setting.taskPlannerViewDuration,"CustomDays")&&(i.tv.iNoVDay=i.setting.daysInTaskPlannerView),7===i.tv.iNoVDay&&i.setting.excludeNonBusinessHours&&(i.tv.iNoVDay-=i.tv.iNoVDay-i.tv.iBsDays),i.tv.iNoVDayDis=i.tv.iNoVDay):(n.addClass("cdvCalendarCont"),$.cf.compareStrings(i.setting.visibleView,"WeekView")?(i.tv.iNoVDay=7,7===i.tv.iNoVDay&&i.setting.excludeNonBusinessHours&&(i.tv.iNoVDay-=i.tv.iNoVDay-i.tv.iBsDays),i.tv.iNoVDayDis=i.tv.iNoVDay):$.cf.compareStrings(i.setting.visibleView,"DayView")?(i.tv.iNoVDay=1,i.tv.iNoVDayDis=1):$.cf.compareStrings(i.setting.visibleView,"CustomView")?(i.tv.iNoVDay=i.setting.daysInCustomView,7===i.tv.iNoVDay&&i.setting.excludeNonBusinessHours&&(i.tv.iNoVDay-=i.tv.iNoVDay-i.tv.iBsDays),i.tv.iNoVDayDis=i.tv.iNoVDay):$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")&&(i.tv.iNoVDay=i.setting.daysInDayListView,7===i.tv.iNoVDay&&i.setting.excludeNonBusinessHours&&(i.tv.iNoVDay-=i.tv.iNoVDay-i.tv.iBsDays),i.tv.iNoVDayDis=1)),i.__getCurrentViewDates(),i._addCommonView(t)},_addContHeader:function(){var e,t,i=this,n="";for(n+="<div class='cContHeaderSections cContHeaderSectionLeft'>",t=i.setting.headerSectionsList.left||[],e=0;e<t.length;e++)n+=i._addHeaderSections(t[e]);for(n+="</div>",n+="<div class='cContHeaderSections cContHeaderSectionRight'>",t=i.setting.headerSectionsList.right||[],e=0;e<t.length;e++)n+=i._addHeaderSections(t[e]);for(n+="</div>",n+="<div class='cContHeaderSections cContHeaderSectionCenter'>",t=i.setting.headerSectionsList.center||[],e=0;e<t.length;e++)n+=i._addHeaderSections(t[e]);return n+="</div>"},_addHeaderSections:function(e){var t=this,i="",n=t._isFullScreen();return $.cf.compareStrings(e,"DatePickerIcon")?i+=t.setting.headerComponents.DatePickerIcon:$.cf.compareStrings(e,"FullscreenButton")?i+=t.setting.headerComponents.FullscreenButton(n):$.cf.compareStrings(e,"PreviousButton")?i+=t.setting.headerComponents.PreviousButton:$.cf.compareStrings(e,"NextButton")?i+=t.setting.headerComponents.NextButton:$.cf.compareStrings(e,"TodayButton")?i+=t.setting.headerComponents.TodayButton:$.cf.compareStrings(e,"HeaderLabel")?i+=t.setting.headerComponents.HeaderLabel:$.cf.compareStrings(e,"HeaderLabelWithDropdownMenuArrow")?i+=t.setting.headerComponents.HeaderLabelWithDropdownMenuArrow:$.cf.compareStrings(e,"MenuSegmentedTab")&&t.tv.bDisMenu?i+=t.setting.headerComponents.MenuSegmentedTab:$.cf.compareStrings(e,"MenuDropdownIcon")&&t.tv.bDisMenu&&(i+=t.setting.headerComponents.MenuDropdownIcon),i},_updateViewSelectionMenu:function(){var e,t=this,i="";for(i+="<ul class='cContHeaderMenuSections'>",t.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(t.setting.dropdownMenuElements[0],"DatePicker")&&(i+="<li id='cContHeaderMenuDatePicker' name='DatePicker' class='cContHeaderButton clickableLink'>Date Picker</li>"),e=0;e<t.setting.viewsToDisplay.length;e++){var n=t.setting.viewsToDisplay[e],a=n.viewName||"",s=n.viewDisplayName||"";$.cf.compareStrings(s,"")&&($.cf.compareStrings(a,"DetailedMonthView")||$.cf.compareStrings(a,"MonthView")||$.cf.compareStrings(a,"DatePicker")?s="Month":$.cf.compareStrings(a,"WeekView")?s="Week":$.cf.compareStrings(a,"DayView")||$.cf.compareStrings(a,"DayEventListView")||$.cf.compareStrings(a,"DayEventDetailView")?s="Day":$.cf.compareStrings(a,"CustomView")?s=t.setting.daysInCustomView+" Days":$.cf.compareStrings(a,"QuickAgendaView")?s="Quick Agenda":$.cf.compareStrings(a,"TaskPlannerView")?s="Task Planner":$.cf.compareStrings(a,"AppointmentView")?s="Appointment":$.cf.compareStrings(a,"AgendaView")?s="Agenda":$.cf.compareStrings(a,"WeekPlannerView")&&(s="Week Planner")),i+="<li id='cContHeaderMenu"+a+"' name='"+a+"' class='cContHeaderButton clickableLink'>"+s+"</li>"}return t.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(t.setting.dropdownMenuElements[1],"DatePicker")&&(i+="<li id='cContHeaderMenuDatePicker' name='DatePicker' class='cContHeaderButton clickableLink'>Date Picker</li>"),i+="</ul>"},_refreshHeader:function(){var e=this;$(e.elem).find(".cContHeader").length>0&&$(e.elem).find(".cContHeader").html(e._addContHeader()),e._addMenuItemsInSegmentedTab(),e._addEventsToHeaderElements(),e._adjustViewSelectionMenu()},_addEventsToHeaderElements:function(){var e=this;if($(e.elem).find(".cContHeaderMenuDropdown .cContHeaderMenuSections li").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()}),$(e.elem).find(".cContHeaderPrevButton").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation(),e.navigateToPrevView()}),$(e.elem).find(".cContHeaderNextButton").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation(),e.navigateToNextView()}),$(e.elem).find(".cContHeaderToday").html(e.getNumberStringInFormat($.CalenStyle.extra.dToday.getDate(),0,!0)),$(e.elem).find(".cContHeaderToday").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation(),e.navigateToToday()}),e._addEventsForMenu(),$(e.elem).find(".cContHeaderMenuButton").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),$(e.elem).find(".cContHeaderMenuDropdown").length>0?e._collapseSubmenu():e._expandSubmenu()}),$(e.elem).find(".cContHeaderDatePickerIcon").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),e._showOrHideDatePicker()}),$(e.elem).find(".cContHeaderDropdownMenuArrow").length>0){1===e.setting.dropdownMenuElements.length&&$.cf.compareStrings(e.setting.dropdownMenuElements[0],"DatePicker")&&$(e.elem).find(".cContHeaderLabelOuter").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),e._showOrHideDatePicker()});for(var t=!1,i=0;i<e.setting.dropdownMenuElements.length;i++)if($.cf.compareStrings(e.setting.dropdownMenuElements[i],"ViewsToDisplay")){t=!0;break}t&&$(e.elem).find(".cContHeaderLabelOuter").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),$(e.elem).find(".cContHeaderMenuDropdown").length>0?e._collapseSubmenu():e._expandSubmenu()})}if($(e.elem).find(".cContHeaderFullscreen").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation(),e._toggleFullscreen()}),e.setting.addEventHandlersInHeader&&e.setting.addEventHandlersInHeader.call(e),e.setting.useHammerjsAsGestureLibrary){var n=new Hammer(e.elem,{threshold:0,velocity:0});n.on("swiperight",function(t){e.navigateToPrevView()}),n.on("swipeleft",function(t){e.navigateToNextView()})}},_addMenuItemsInSegmentedTab:function(){$(this.elem).find(".cContHeaderMenuSegmentedTab").html(this._updateViewSelectionMenu())},_expandSubmenu:function(){var e=this,t="";if(t+="<div class='cContHeaderMenuDropdownBg'>",t+="<div class='cContHeaderMenuDropdown'>",t+=e._updateViewSelectionMenu(),t+="</div>",t+="</div>",$(e.elem).find(".calendarContInner").append(t),$(e.elem).find(".cContHeaderMenuDropdownBg").length>0){var i,n,a,s,r,o=$(e.elem);0,0,i=o.width(),n=o.height(),$(e.elem).find(".cContHeaderMenuDropdownBg").css({left:0,top:0,width:i,height:n});var l=$(e.elem).find(".cContHeaderMenuButton"),d=$(e.elem).find(".cContHeaderDropdownMenuArrow"),c=0+i;if(r=$(e.elem).find(".cContHeaderMenuDropdown").width(),l.length>0)0+(a=l.position().left-5+$(e.elem).find(".calendarContInner").position().left)+r>c&&(a=i-r-5),s=l.height()+5+$(e.elem).find(".calendarContInner").position().top+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),$(".cContHeaderMenuDropdown").css({left:a,top:s});else if(d.length>0){var v=$(e.elem).find(".cContHeaderLabelOuter"),g=v.width();(a=v.position().left+g/2-r/2)<0&&(a=5),a+r>c&&(a=i-r-5),s=$(e.elem).find(".cContHeaderLabelOuter").height()+$(e.elem).find(".calendarContInner").position().top+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),$(".cContHeaderMenuDropdown").css({left:a,top:s})}}e._addEventsForMenu()},_collapseSubmenu:function(){var e=$(this.elem).find(".cContHeaderMenuDropdownBg");e.length>0&&(e.hide(10),setTimeout(function(){e.remove()},10)),this.addRemoveViewLoader(!1,"cViewLoaderBg")},_addEventsForMenu:function(){var e=this;$(e.elem).find(".cContHeaderMenuSegmentedTab .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuSegmentedTab #cContHeaderMenu"+e.setting.visibleView).addClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuDropdownBg .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuDropdownBg #cContHeaderMenu"+e.setting.visibleView).addClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuSections li").on($.CalenStyle.extra.sClickHandlerButtons,function(t){t.stopPropagation();var i=$(this).attr("name");$(e.elem).find(".cContHeaderMenuSegmentedTab .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuSegmentedTab #cContHeaderMenu"+i).addClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuDropdownBg .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(e.elem).find(".cContHeaderMenuDropdownBg #cContHeaderMenu"+i).addClass("cSelectedMenu"),$.cf.compareStrings(i,"DatePicker")?(e._collapseSubmenu(),setTimeout(function(){e._showOrHideDatePicker()},100)):$.cf.compareStrings(i,e.setting.visibleView)||(e.addRemoveViewLoader(!0,"cViewLoaderBg"),setTimeout(function(){e.setCurrentView(i,!1),e.setting.visibleViewChanged&&e.setting.visibleViewChanged.call(e,e.setting.visibleView,e.setting.selectedDate,e.tv.dAVDt),e._reloadDatePickerContent(),e._collapseSubmenu()},2))}),$(e.elem).find(".cContHeaderMenuDropdownBg").on($.CalenStyle.extra.sClickHandler,function(t){e._collapseSubmenu()}),$.cf.compareStrings(e.setting.visibleView,"DatePicker")||(null===e.setting.datePickerObject?e._addDatePicker():e.setting.datePickerObject.refreshView())},navigateToToday:function(){var e=this;e.setting.selectedDate=e.setDateInFormat({date:e._getCurrentDate()},"START"),e.reloadData(),e.setting.todayButtonClicked&&e.setting.todayButtonClicked.call(e,e.setting.selectedDate,e.tv.dAVDt),e.__reloadDatePickerContentOnNavigation()},navigateToPrevView:function(){var e=this;$(e.elem).find(".cListOuterCont").html(""),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?e.__goToPrevMonthView():$.cf.compareStrings(e.setting.visibleView,"WeekView")||$.cf.compareStrings(e.setting.visibleView,"DayView")||$.cf.compareStrings(e.setting.visibleView,"CustomView")||$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")?e.__goToPrevDetailView():$.cf.compareStrings(e.setting.visibleView,"DayEventListView")?e.__goToPrevDayListView():$.cf.compareStrings(e.setting.visibleView,"QuickAgendaView")?e.__goToPrevQuickAgendaView():$.cf.compareStrings(e.setting.visibleView,"TaskPlannerView")?e.__goToPrevTaskPlannerView():$.cf.compareStrings(e.setting.visibleView,"AppointmentView")?e.__goToPrevAppointmentView():$.cf.compareStrings(e.setting.visibleView,"AgendaView")?e.__goToPrevAgendaView():$.cf.compareStrings(e.setting.visibleView,"WeekPlannerView")&&e.__goToPrevWeekPlannerView(),e.setting.previousButtonClicked&&e.setting.previousButtonClicked.call(e,e.setting.selectedDate,e.tv.dAVDt)},navigateToNextView:function(){var e=this;$(e.elem).find(".cListOuterCont").html(""),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?e.__goToNextMonthView():$.cf.compareStrings(e.setting.visibleView,"WeekView")||$.cf.compareStrings(e.setting.visibleView,"DayView")||$.cf.compareStrings(e.setting.visibleView,"CustomView")||$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")?e.__goToNextDetailView():$.cf.compareStrings(e.setting.visibleView,"DayEventListView")?e.__goToNextDayListView():$.cf.compareStrings(e.setting.visibleView,"QuickAgendaView")?e.__goToNextQuickAgendaView():$.cf.compareStrings(e.setting.visibleView,"TaskPlannerView")?e.__goToNextTaskPlannerView():$.cf.compareStrings(e.setting.visibleView,"AppointmentView")?e.__goToNextAppointmentView():$.cf.compareStrings(e.setting.visibleView,"AgendaView")?e.__goToNextAgendaView():$.cf.compareStrings(e.setting.visibleView,"WeekPlannerView")&&e.__goToNextWeekPlannerView(),e.setting.nextButtonClicked&&e.setting.nextButtonClicked.call(e,e.setting.selectedDate,e.tv.dAVDt)},getVisibleDates:function(){return this.tv.dAVDt},_adjustViewSelectionMenu:function(){var e,t;if($(this.elem).find(".cContHeaderMenuSegmentedTab").length>0){var i=$(this.elem).find(".cContHeaderMenuSections li"),n=0;for(e=0;e<i.length;e++){t=i[e];var a=$(t).width();n=a>n?a:n}for(n+=25,e=0;e<i.length;e++)t=i[e],$(t).css({width:n})}this._adjustDatePicker()},_addDatePicker:function(){var e=this,t=$(e.elem).find(".cContHeaderDatePickerIcon").length>0,i=$(e.elem).find(".cContHeaderDropdownMenuArrow").length>0,n=$(e.elem).find(".cContHeaderMenuButton").length>0,a=e.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(e.setting.dropdownMenuElements[0],"DatePicker")||e.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(e.setting.dropdownMenuElements[1],"DatePicker");if((t||(i||n)&&a)&&e.setting.addEventsInMonthView&&!$.cf.compareStrings(e.setting.visibleView,"DatePicker")&&!$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ChangeDate")&&0===$(".cElemDatePickerBg").length){var s="";s+="<div class='cElemDatePickerBg'>",s+="<div class='cElemDatePickerCont'>",t&&(s+="<span class='cElemDatePickerTooltip cElemDatePickerTooltipBottom'></span>"),s+="<div class='cElemDatePicker'>",s+="</div>",s+="</div>",s+="</div>",$(e.elem).parent().append(s),$(".cElemDatePicker").CalenStyle({visibleView:"DatePicker",headerSectionsList:{left:["TodayButton"],center:["HeaderLabel"],right:["PreviousButton","NextButton"]},transitionSpeed:0,selectedDate:e.setting.selectedDate,shortDayNames:e.setting.veryShortDayNames,shortMonthNames:e.setting.shortMonthNames,fullMonthNames:e.setting.shortMonthNames,numbers:e.setting.numbers,businessHoursSource:e.setting.businessHoursSource,inputTZOffset:e.setting.inputTZOffset,outputTZOffset:e.setting.outputTZOffset,parentObject:e,eventIndicatorInDatePicker:e.setting.eventIndicatorInDatePicker,initialize:function(){e.setting.datePickerObject=this},viewLoaded:function(t,i){e.setting.datePickerObject.highlightDatesInDatePicker(e.tv.dAVDt)},cellClicked:function(t,i,n,a){e._showOrHideDatePicker(),e.addRemoveViewLoader(!0,"cViewLoaderBg"),setTimeout(function(){e.setting.selectedDate=i,e.reloadData(),e.setting.datePickerObject.highlightDatesInDatePicker(e.tv.dAVDt),e.addRemoveViewLoader(!1,"cViewLoaderBg")},4)},calDataSource:e.setting.datePickerCalDataSource,useHammerjsAsGestureLibrary:e.setting.useHammerjsAsGestureLibrary}),$(".cElemDatePickerBg").on($.CalenStyle.extra.sClickHandler,function(t){t.preventDefault(),e._hideDatePicker()}),$(".cElemDatePicker, .cElemDatePicker *").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()}),$(".cElemDatePickerBg *").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()})}},_showOrHideDatePicker:function(){var e=this;"none"===$(".cElemDatePickerBg").css("display")?($(".cElemDatePickerBg").show(0),e.setting.adjustViewOnWindowResize&&$(window).bind("resize.CSDP."+e.tv.pluginId,function(t){e._adjustDatePicker()}),e._reloadDatePickerContent(),e._adjustDatePicker()):e._hideDatePicker()},_hideDatePicker:function(){"none"!==$(".cElemDatePickerBg").css("display")&&$(".cElemDatePickerBg").css({display:"none"}),this.setting.adjustViewOnWindowResize&&$(window).unbind("resize.CSDP."+this.tv.pluginId)},_reloadDatePickerContent:function(){var e=this,t=$(e.elem).find(".cContHeaderDatePickerIcon").length>0,i=$(e.elem).find(".cContHeaderDropdownMenuArrow").length>0,n=$(e.elem).find(".cContHeaderMenuButton").length>0,a=e.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(e.setting.dropdownMenuElements[0],"DatePicker")||e.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(e.setting.dropdownMenuElements[1],"DatePicker");(t||(i||n)&&a)&&null!==e.setting.datePickerObject&&(e.setting.datePickerObject.setting.selectedDate=e.setting.selectedDate,e.setting.datePickerObject.reloadData(),e.setting.datePickerObject.highlightDatesInDatePicker(e.tv.dAVDt)),e._adjustDatePicker()},__reloadDatePickerContentOnNavigation:function(){var e=this;e._reloadDatePickerContent(),$.cf.compareStrings(e.setting.visibleView,"DatePicker")?e.__highlightDaysInDatePicker():$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ChangeDate")&&e.__highlightDaysInDatePicker()},_adjustDatePicker:function(){var e,t,i,n,a,s,r,o=this;if(!$.cf.compareStrings(o.setting.visibleView,"DatePicker")){var l=$(o.elem),d=l.css("margin-left");d=parseInt(d.replace("px",""));var c=l.css("margin-top");c=parseInt(c.replace("px","")),e=l.position().left+d,t=l.position().top+c,i=l.width(),n=l.height(),$(".cElemDatePickerBg").css({left:e,top:t,width:i,height:n})}var v=$(o.elem).find(".cContHeaderDatePickerIcon"),g=$(o.elem).find(".cContHeaderDropdownMenuArrow"),m=$(o.elem).find(".cContHeaderMenuButton"),D=e+i;if(r=$(".cElemDatePickerCont").width(),v.length>0)e+(a=v.position().left-5+$(o.elem).find(".calendarContInner").position().left)+r>D&&(a=i-r-5),s=v.height()+5+$(o.elem).find(".calendarContInner").position().top+($.cf.compareStrings(o.setting.sectionsList[0],"ActionBar")?$(o.elem).find(".cActionBar").height():0),$(".cElemDatePickerCont").css({left:a,top:s});else if(g.length>0||m.length>0){var f=$(o.elem).find(".cContHeaderLabelOuter"),u=f.width(),p=f.position().left+u/2,h=r/2;!$.CalenStyle.extra.bTouchDevice&&i>480?((a=p-h)<0&&(a=5),a+r>D&&(a=i-r-5)):a=(i-r)/2,s=$(o.elem).find(".cContHeaderLabelOuter").height()+10+$(o.elem).find(".calendarContInner").position().top+($.cf.compareStrings(o.setting.sectionsList[0],"ActionBar")?$(o.elem).find(".cActionBar").height():0),$(".cElemDatePickerCont").css({left:a,top:s})}},_isFullScreen:function(){return $(this.elem).hasClass("cFullscreenCont")},_toggleFullscreen:function(){var e=this;e._isFullScreen()?($(e.elem).removeClass("cFullscreenCont"),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight})):$(e.elem).addClass("cFullscreenCont"),e._adjustViews(!0)},__adjustHeader:function(){var e=this;e._isFullScreen()?$(e.elem).find(".cContHeaderFullscreen").removeClass("cs-icon-Expand").addClass("cs-icon-Contract"):$(e.elem).find(".cContHeaderFullscreen").removeClass("cs-icon-Contract").addClass("cs-icon-Expand");var t=$(e.elem).find(".calendarContInner");t.outerWidth(),t.outerHeight();$(e.elem).find(".cContHeader, .cContHeaderDatePickerIcon, .cContHeaderFullscreen, .cContHeaderNavButton").css({height:45,"line-height":"45px"})},_addCommonView:function(e){var t,i,n=this,a=!0,s=0,r=$(n.elem).find(".calendarCont"),o=0,l=0,d=0,c=0,v="";for(t=0;t<n.setting.sectionsList.length;t++)if(i=n.setting.sectionsList[t],$.cf.compareStrings(i,"FilterBar")){n.tv.bDisFBar=!0;break}if(n.tv.bDisFBar){var g,m,D,f,u=r.outerWidth(),p=r.outerHeight();$.cf.compareStrings(n.setting.filterBarPosition,"Top")||$.cf.compareStrings(n.setting.filterBarPosition,"Bottom")?(D=u,d=u,c=p-(f=n.setting.filterBarHeight),g=0,o=0,$.cf.compareStrings(n.setting.filterBarPosition,"Top")?(m=0,l=n.setting.filterBarHeight-$.CalenStyle.extra.iBorderOverhead):$.cf.compareStrings(n.setting.filterBarPosition,"Bottom")&&(l=0,m=c),D="100%",f+="px"):($.cf.compareStrings(n.setting.filterBarPosition,"Left")||$.cf.compareStrings(n.setting.filterBarPosition,"Right"))&&(f=p,d=u-(D=n.setting.filterBarWidth),c=p,m=0,l=0,$.cf.compareStrings(n.setting.filterBarPosition,"Left")?(g=0,o=n.setting.filterBarWidth):$.cf.compareStrings(n.setting.filterBarPosition,"Right")&&(o=0,g=d),D+="px",f="100%"),v+="<div class='cFilterBar' style='left: "+g+"px; top: "+m+"px; width: "+D+"; height: "+f+";'></div>"}for(v+="<div class='calendarContInner' style='left: "+o+"px; top: "+l+"px; width: "+d+"px; height: "+c+"px;'></div>",r.append(v),t=0;t<n.setting.sectionsList.length;t++)i=n.setting.sectionsList[t],$.cf.compareStrings(i,"ActionBar")?n.tv.bDisABar=!0:$.cf.compareStrings(i,"EventList")&&($.cf.compareStrings(n.setting.visibleView,"MonthView")||$.cf.compareStrings(n.setting.visibleView,"DayEventListView"))&&(n.tv.bCMVDisEvLst=!0);for(v="",t=0;t<n.setting.sectionsList.length;t++)i=n.setting.sectionsList[t],$.cf.compareStrings(i,"Header")?(a?a=!1:s-=1,v+="<div class='cContHeader' style='top: "+s+"px;'>",v+=n._addContHeader(s),v+="</div>"):$.cf.compareStrings(i,"Calendar")?(a?a=!1:s-=1,$.cf.compareStrings(n.setting.visibleView,"MonthView")||$.cf.compareStrings(n.setting.visibleView,"DatePicker")?(n.tv.bDisABar?s-=1:s-=2,v+="<table class='cTable cmvMonthTable cmvMonthTableMain' cellspacing='0' style='top: "+s+"px;'></table>"):$.cf.compareStrings(n.setting.visibleView,"DetailedMonthView")?(v+="<div class='cmvTableContainerOuter'>",v+="<div class='cmvTableContainer' style='overflow: hidden;'>",v+="<table class='cTable cmvMonthTable cmvMonthTableMain' cellspacing='0'></table>",$.cf.compareStrings(n.setting.visibleView,"DetailedMonthView")&&(v+="<div class='cdmvEventCont cdmvEventContMain'></div>"),v+="</div>",v+="</div>"):$.cf.compareStrings(n.setting.visibleView,"WeekView")||$.cf.compareStrings(n.setting.visibleView,"DayView")||$.cf.compareStrings(n.setting.visibleView,"CustomView")||$.cf.compareStrings(n.setting.visibleView,"DayEventDetailView")?(2===n.setting.sectionsList.length?s-=3:s-=2,v+="<table class='cTable cdvDetailTable cdvDetailTableMain' cellspacing='0' style='top: "+s+"px;'></table>",v+="<div class='cdvContRow2 cdvContRow2Main'></div>",v+="<div class='cdvContRow3 cdvContRow3Main'></div>",s-=1):$.cf.compareStrings(n.setting.visibleView,"QuickAgendaView")?(2===n.setting.sectionsList.length?s-=3:s-=2,v+="<table class='cTable cqavTable cqavTableMain' cellspacing='0' style='top: "+s+"px;'></table>",v+="<div class='cqavContRow2 cqavContRow2Main'></div>",s-=1):$.cf.compareStrings(n.setting.visibleView,"TaskPlannerView")?(2===n.setting.sectionsList.length?s-=3:s-=2,v+="<table class='cTable ctpvTable ctpvTableMain' cellspacing='0' style='top: "+s+"px;'></table>",s-=1):$.cf.compareStrings(n.setting.visibleView,"DayEventListView")?v+="<table class='cTable cdlvDaysTable cdlvDaysTableList cdlvDaysTableMain' cellspacing='0' style='top: "+(s-=2)+"px;'></table>":$.cf.compareStrings(n.setting.visibleView,"AppointmentView")?(v+="<table class='cTable cavTable cavTableMain' cellspacing='0' style='top: "+(s-=2)+"px;'></table>",v+="<div class='cavContRow2 cavContRow2Main'></div>"):$.cf.compareStrings(n.setting.visibleView,"WeekPlannerView")&&(s-=2,$.CalenStyle.extra.bTouchDevice?v+="<table class='cTable cwpvTable cwpvTableMain' cellspacing='0' style='top: "+s+"px;'></table>":v+="<div class='cwpvTableOuterCont' style='top: "+s+"px;'><table class='cTable cwpvTable cwpvTableMain' cellspacing='0'></table></div>")):$.cf.compareStrings(i,"ActionBar")?(a?a=!1:$.cf.compareStrings(n.setting.visibleView,"MonthView")||(s-=1),v+="<div class='cActionBar' style='height: "+n.setting.actionBarHeight+"px; top: "+s+"px;'></div>"):$.cf.compareStrings(i,"EventList")&&($.cf.compareStrings(n.setting.visibleView,"MonthView")||$.cf.compareStrings(n.setting.visibleView,"DayEventListView"))&&(a?a=!1:s-=1,$.cf.compareStrings(n.setting.visibleView,"DayEventListView")&&(s-=1),v+="<div class='cListOuterCont'></div>");($.cf.compareStrings(n.setting.visibleView,"DayEventListView")&&!n.tv.bCMVDisEvLst||$.cf.compareStrings(n.setting.visibleView,"AgendaView"))&&(a||(s-=2),n.tv.bCMVDisEvLst=!0,v+="<div class='cListOuterCont' style='top: "+s+"px;'></div>"),$(n.elem).find(".calendarContInner").append(v),n._addMenuItemsInSegmentedTab(),n._addEventsToHeaderElements(),n._adjustViewSelectionMenu(),e?n.reloadData():n.__reloadCurrentView(!0,!1),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyle",function(e){n._callCommonEvents()})},refreshView:function(){var e=this;e.tv.oAEvents=e._sortEvents(e.tv.oAEvents),e._refreshHeader(),e.__reloadCurrentView(!0,!1)},_adjustViews:function(e){var t=this;$.cf.compareStrings(t.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(t.setting.visibleView,"MonthView")||$.cf.compareStrings(t.setting.visibleView,"DatePicker")?t.adjustMonthTable():$.cf.compareStrings(t.setting.visibleView,"WeekView")||$.cf.compareStrings(t.setting.visibleView,"DayView")||$.cf.compareStrings(t.setting.visibleView,"CustomView")?t.__adjustDetailViewTable():$.cf.compareStrings(t.setting.visibleView,"DayEventDetailView")?t.__adjustDetailViewTable():$.cf.compareStrings(t.setting.visibleView,"DayEventListView")?t.__adjustDayListView():$.cf.compareStrings(t.setting.visibleView,"QuickAgendaView")?t.__adjustQuickAgendaView(e):$.cf.compareStrings(t.setting.visibleView,"TaskPlannerView")?t.__adjustTaskPlannerView(e):$.cf.compareStrings(t.setting.visibleView,"AppointmentView")?t.__adjustAppointmentTable():$.cf.compareStrings(t.setting.visibleView,"AgendaView")?t.adjustAgendaView():$.cf.compareStrings(t.setting.visibleView,"WeekPlannerView")&&t.adjustWeekPlannerView()},__reloadCurrentView:function(e,t){var i=this;i.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+i.tv.pluginId),i.__getCurrentViewDates(),$.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"DatePicker")?(i.updateMonthTableAndContents(t),i.setting.adjustViewOnWindowResize&&$(window).bind("resize."+i.tv.pluginId,function(e){$.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")&&i.setting.hideExtraEvents?($(i.elem).find(".cdmvEvent").remove(),$(i.elem).find(".cHiddenEventsIndicator").remove(),$(i.elem).find(".cHiddenEventsCont").remove(),i.adjustMonthTable(),i._addEventContInMonthView(null)):i.adjustMonthTable()})):$.cf.compareStrings(i.setting.visibleView,"WeekView")||$.cf.compareStrings(i.setting.visibleView,"DayView")||$.cf.compareStrings(i.setting.visibleView,"CustomView")||$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")?e&&($(i.elem).find(".cdvContRow2Main").html(""),$(i.elem).find(".cdvContRow3Main").html(""),i.__updateDetailViewTable(),i.__adjustDetailViewTable(),i.setting.adjustViewOnWindowResize&&$(window).bind("resize."+i.tv.pluginId,function(e){i.__adjustDetailViewTable()}),i.__parseData(t,function(){if($.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")){if(i.setEventOrTaskStatusForCurrentView(),i.tv.bEvTskStatus){for(var e=0;e<i.tv.iNoVDay;e++)$(i.elem).find("#cdlvRowDay"+e).append("<div class='cdlvTableRowStatusGroup'> &nbsp; </div>");i.__displayEventOrTaskStatusForDayListView()}i.__setDateStringsForDayListView(i.tv.iNoVDay,i.tv.dAVDt,0)}i.__updateTimeSlotTableView(),i.__addEventsInDetailView("Both"),i.__adjustDetailViewTable(),i.__adjustDetailViewTable(),i.__modifyFilterBarCallback()})):$.cf.compareStrings(i.setting.visibleView,"QuickAgendaView")?($(i.elem).find(".cqavContRow2Main").html(""),i.__updateQuickAgendaView(),i.__adjustQuickAgendaView(),i.setting.adjustViewOnWindowResize&&$(window).bind("resize."+i.tv.pluginId,function(e){i.__adjustQuickAgendaView(!0)}),i.__parseData(t,function(){i.__addEventsInQuickAgendaView(),i.__adjustQuickAgendaView(),i.__modifyFilterBarCallback()})):$.cf.compareStrings(i.setting.visibleView,"TaskPlannerView")?($(i.elem).find(".ctpvTableRow2 td").html(""),i.__updateTaskPlannerView(),i.__adjustTaskPlannerView(),i.setting.adjustViewOnWindowResize&&$(window).bind("resize."+i.tv.pluginId,function(e){i.__adjustTaskPlannerView(!0)}),i.__parseData(t,function(){i.setEventOrTaskStatusForCurrentView(),i.__addEventsInTaskPlannerView(),i.__adjustTaskPlannerView(),i.__modifyFilterBarCallback()})):$.cf.compareStrings(i.setting.visibleView,"DayEventListView")?(i.__updateDayListViewTable(t,!0),e||i.__adjustDayListView(),i.__adjustDayListView(),i.setting.adjustViewOnWindowResize&&$(window).bind("resize."+i.tv.pluginId,function(e){i.__adjustDayListView()})):$.cf.compareStrings(i.setting.visibleView,"AppointmentView")?(i.__updateAppointmentTable(),i.__adjustAppointmentTable(),i.setting.adjustViewOnWindowResize&&$(window).bind("resize."+i.tv.pluginId,function(e){i.__adjustAppointmentTable()}),i.__parseData(t,function(){i.__updateAppointmentTable(),i.__displayAppointments(),i.__adjustAppointmentTable(),i.__adjustAppointmentTable(),i.__modifyFilterBarCallback()})):$.cf.compareStrings(i.setting.visibleView,"AgendaView")?(i.updateAgendaView(t),i.adjustAgendaView(),i.setting.adjustViewOnWindowResize&&$(window).bind("resize."+i.tv.pluginId,function(e){i.adjustAgendaView()})):$.cf.compareStrings(i.setting.visibleView,"WeekPlannerView")&&(i.updateWeekPlannerView(t),i.adjustWeekPlannerView(),i.setting.adjustViewOnWindowResize&&$(window).bind("resize."+i.tv.pluginId,function(e){i.adjustWeekPlannerView()})),i.setting.modifyFilterBarView&&i.setting.modifyFilterBarView.call(i,$(i.elem).find(".cFilterBar"),i.setting.eventFilterCriteria,i.tv.oAEvFltrCnt),i.tv.bDisABar&&i.setting.modifyActionBarView&&i.setting.modifyActionBarView.call(i,$(i.elem).find(".cActionBar"),i.setting.visibleView),i.tv.bViewLoaded||(i.setting.viewLoaded&&i.setting.viewLoaded.call(i,i.setting.selectedDate,i.tv.dAVDt),i.tv.bViewLoaded=!0)},__modifyFilterBarCallback:function(){var e=this;e.setting.modifyFilterBarView&&e.setting.modifyFilterBarView.call(e,$(e.elem).find(".cFilterBar"),e.setting.eventFilterCriteria,e.tv.oAEvFltrCnt)},__adjustFontSize:function(){var e=this,t=$(e.elem).find(".calendarContInner"),i=t.outerWidth(),n=t.outerHeight(),a="cFontLarge cFontMedium cFontSmall cFontExtraSmall";$.cf.compareStrings(e.setting.visibleView,"WeekView")||$.cf.compareStrings(e.setting.visibleView,"DayView")||$.cf.compareStrings(e.setting.visibleView,"CustomView")||$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")||$.cf.compareStrings(e.setting.visibleView,"QuickAgendaView")||$.cf.compareStrings(e.setting.visibleView,"TaskPlannerView")?i<=360||n<=360?t.removeClass(a).addClass("cFontSmall"):i<=710?t.removeClass(a).addClass("cFontMedium"):t.removeClass(a).addClass("cFontLarge"):$.cf.compareStrings(e.setting.visibleView,"DayEventListView")||$.cf.compareStrings(e.setting.visibleView,"AppointmentView")||$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")?i<=310||n<=310?t.removeClass(a).addClass("cFontSmall"):i<=410||n<=410?t.removeClass(a).addClass("cFontMedium"):t.removeClass(a).addClass("cFontLarge"):($.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker"))&&(e.tv.bCMVDisEvLst?i<=310||n<=310?t.removeClass(a).addClass("cFontSmall"):i<=400||n<=400?t.removeClass(a).addClass("cFontMedium"):t.removeClass(a).addClass("cFontLarge"):i<=310||n<=310?t.removeClass(a).addClass("cFontSmall"):i<=410||n<=410?t.removeClass(a).addClass("cFontMedium"):t.removeClass(a).addClass("cFontLarge"))},setCalendarBorderColor:function(){var e=this;if(e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Left")?$(e.elem).find(".cFilterBar").css({"border-right":"1px solid #DDD"}):$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({"border-left":"1px solid #DDD"})),e.setting.changeCalendarBorderColorInJS){var t,i="";t=$.cf.compareStrings(e.setting.calendarBorderColor,"transparent")?e.setting.calendarBorderColor:"#"+e.setting.calendarBorderColor,i+=".calendarCont",i+=", .calendarContInner",$(".cElemDatePickerTooltipBottom").css({"border-color":"transparent transparent "+t+" transparent"}),$.cf.compareStrings(e.setting.visibleView,"WeekView")||$.cf.compareStrings(e.setting.visibleView,"DayView")||$.cf.compareStrings(e.setting.visibleView,"CustomView")||$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")?(i+=", .cdvCalendarCont td",i+=", .cdvDetailTable"):$.cf.compareStrings(e.setting.visibleView,"QuickAgendaView")?(i+=", .cqavCalendarCont td",i+=", .cqavTable"):$.cf.compareStrings(e.setting.visibleView,"TaskPlannerView")?(i+=", .ctpvCalendarCont td",i+=", .ctpvTable"):$.cf.compareStrings(e.setting.visibleView,"AppointmentView")?(i+=", .cavCalendarCont .cavTable td",i+=", .cavCalendarCont .cavTable td:last-child",i+=", .cavTableList"):$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?(i+=", .cmvCalendarContWithBorders td",i+=", .cmvThinBorderTop",i+=", .cmvThinBorderRight",i+=", .cmvThinBorderBottom",i+=", .cmvThinBorderLeft",i+=", .cmvThinBorder",i+=", .cdlvDaysTableList"):$.cf.compareStrings(e.setting.visibleView,"DayEventListView")&&(i+=", .cdlvDaysTableList"),i+=", .cContHeader",i+=", .cFilterBar",i+=", .cActionBar",i+=", .cListOuterCont",$(e.elem).find(i).css({"border-color":t})}},setDateInFormat:function(e,t){var i;return void 0===e.date&&void 0===e.iDate&&(e.date=this._getCurrentDate()),void 0===e.iDate?e.iDate={d:e.date.getDate(),M:e.date.getMonth(),y:e.date.getFullYear(),H:e.date.getHours(),m:e.date.getMinutes(),s:e.date.getSeconds(),ms:e.date.getMilliseconds()}:e.iDate={d:void 0!==e.iDate.d?e.iDate.d:$.CalenStyle.extra.dToday.getDate(),M:void 0!==e.iDate.M?e.iDate.M:$.CalenStyle.extra.dToday.getMonth(),y:void 0!==e.iDate.y?e.iDate.y:$.CalenStyle.extra.dToday.getFullYear(),H:void 0!==e.iDate.H?e.iDate.H:0,m:void 0!==e.iDate.m?e.iDate.m:0,s:void 0!==e.iDate.s?e.iDate.s:0,ms:void 0!==e.iDate.ms?e.iDate.ms:0},null===t||void 0===t||""===t?i=new Date(e.iDate.y,e.iDate.M,e.iDate.d,e.iDate.H,e.iDate.m,e.iDate.s,e.iDate.ms):"START"===t?i=new Date(e.iDate.y,e.iDate.M,e.iDate.d,0,0,0,0):"END"===t&&(i=new Date(e.iDate.y,e.iDate.M,e.iDate.d,23,59,59,999)),i},_getCurrentDate:function(){return this.getDateByAddingOutputTZOffset(this.convertToUTC(new Date),this.setting.outputTZOffset)},convertToUTC:function(e,t){return new Date(e.getTime()-(void 0===t||""===t||null===t?-e.getTimezoneOffset()*$.CalenStyle.extra.iMS.m:this._getTZOffsetInMS(t)))},_getTZOffsetInMS:function(e){var t=0;if(void 0===e||""===e||null===e)t=-$.CalenStyle.extra.dToday.getTimezoneOffset()*$.CalenStyle.extra.iMS.m;else{var i=e.match(/^([+|-]{1})([0-1]{0,1}[0-9]{1}):([0-6]{0,1}[0-9]{1})$/);t=parseInt(i[2])*$.CalenStyle.extra.iMS.h+parseInt(i[3])*$.CalenStyle.extra.iMS.m,t="+"===i[1]?t:-t}return t},getDateByAddingOutputTZOffset:function(e,t){return new Date(e.getTime()+this._getTZOffsetInMS(t))},normalizeDateTimeWithOffset:function(e,t,i){var n=new Date(e);return t!==i&&(n=this.getDateByAddingOutputTZOffset(this.convertToUTC(e,t),i)),n},_getDateObjectFromString:function(e,t,i,n,a,s,r){var o,l=this,d={}.toString.call(e);if("[object Date]"===d)o=t?l.convertToUTC(e,r):l.normalizeDateTimeWithOffset(e,r,l.setting.outputTZOffset);else if("[object Number]"===d)o=t?l.convertToUTC(new Date(e),"+00:00"):l.normalizeDateTimeWithOffset(new Date(e),"+00:00",l.setting.outputTZOffset);else{var c,v=0,g=0,m=0,D=0,f=0,u=0,p=e.match(/^([0-9]{4})(-([0-1]{1}[0-9]{1}))(-([0-3]{1}[0-9]{1}))$/),h=e.match(/^([0-9]{4})(-([0-1]{1}[0-9]{1})(-([0-3]{1}[0-9]{1})([T]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/),y=e.match(/^([0-9]{4})(([0-1]{1}[0-9]{1})(([0-3]{1}[0-9]{1})([T]([0-9]{2})([0-9]{2})(([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(null!==p)c=l.setDateInFormat({iDate:{y:parseInt(p[1]),M:parseInt(p[3])-1,d:parseInt(p[5])}},"START"),o=t?c:l.getDateByAddingOutputTZOffset(c,l.setting.outputTZOffset);else if(null!==h)c=l.setDateInFormat({iDate:{y:parseInt(h[1]),M:parseInt(h[3])-1,d:parseInt(h[5]),H:parseInt(h[7]),m:parseInt(h[8]),s:parseInt(h[10])}},""),o="Z"===h[13]?l.getDateByAddingOutputTZOffset(c,l.setting.outputTZOffset):l.normalizeDateTimeWithOffset(c,h[13],l.setting.outputTZOffset);else if(null!==y)c=l.setDateInFormat({iDate:{y:parseInt(y[1]),M:parseInt(y[3])-1,d:parseInt(y[5]),H:parseInt(y[7]),m:parseInt(y[8]),s:parseInt(y[9])}},""),o="Z"===y[13]?l.getDateByAddingOutputTZOffset(c,l.setting.outputTZOffset):l.normalizeDateTimeWithOffset(c,y[13],l.setting.outputTZOffset);else{var C=i||l.setting.inputDateTimeFormat;if($.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[1]))o=new Date(parseInt(e));else{var w,S=n||l.setting.formatSeparatorDateTime,V=a||l.setting.formatSeparatorDate,b=s||l.setting.formatSeparatorTime,E=e.split(S),T=E[0],M=E[1],I=T.split(V);if($.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[4])||$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[5])?(v=parseInt(I[0]),g=parseInt(I[1])-1,m=parseInt(I[2])):$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[6])||$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[7])?(g=parseInt(I[0])-1,v=parseInt(I[1]),m=parseInt(I[2])):($.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[8])||$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[9]))&&(m=parseInt(I[0]),g=parseInt(I[1])-1,v=parseInt(I[2])),$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[4])||$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[6])||$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[8])){var A=M.split(" ");w=A[0].split(b),D=parseInt(w[0]),f=parseInt(w[1]),isNaN(f)&&(f=0),w.length>2&&(u=parseInt(w[2])),$.cf.compareStrings(A[1],"AM")&&12===D&&(D=0),$.cf.compareStrings(A[1],"PM")&&D<12&&(D+=12)}else($.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[5])||$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[7])||$.cf.compareStrings(C,$.CalenStyle.extra.sArrInputDateTimeFormats[9]))&&(w=M.split(b),D=parseInt(w[0]),f=parseInt(w[1]),isNaN(f)&&(f=0),w.length>2&&(u=parseInt(w[2])));o=l.setDateInFormat({iDate:{y:m,M:g,d:v,H:D,m:f,s:u}},"")}o=t?o:l.normalizeDateTimeWithOffset(o,r,l.setting.outputTZOffset)}}return t&&(o=l.setDateInFormat({date:o},"START")),o},__getNumberOfDaysOfMonth:function(e,t){return t%4==0?[31,29,31,30,31,30,31,31,30,31,30,31][e]:[31,28,31,30,31,30,31,31,30,31,30,31][e]},__findWhetherDateIsVisibleInCurrentView:function(e,t,i,n){var a=this;if(a.setting.excludeNonBusinessHours){for(var s=0;s<a.tv.dAVDt.length;s++)if(0===a.compareDates(a.tv.dAVDt[s],e)){if(t)return!0;var r=new Date(e),o=new Date(e);r.setHours(a.tv.oBsHours.startTime[0]),r.setMinutes(a.tv.oBsHours.startTime[1]),o.setHours(a.tv.oBsHours.endTime[0]),o.setMinutes(a.tv.oBsHours.endTime[1]);var l=new Date(i),d=new Date(n);return a.compareDateTimes(r,i)>0&&(l=new Date(r)),a.compareDateTimes(o,n)<0&&(d=new Date(o)),a.compareDateTimes(l,d)<0}return!1}return!0},__getCurrentViewDates:function(){var e,t,i,n=this,a=n.setDateInFormat({date:n.setting.selectedDate},"START");if(!n.tv.bDyClDLV){if(n.tv.dAVDt=[],n.setting.excludeNonBusinessHours&&!$.cf.compareStrings(n.setting.visibleView,"WeekPlannerView")&&n.tv.iBsDays>0)if($.cf.compareStrings(n.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(n.setting.visibleView,"MonthView")||$.cf.compareStrings(n.setting.visibleView,"DatePicker")||$.cf.compareStrings(n.setting.visibleView,"AgendaView")&&$.cf.compareStrings(n.setting.agendaViewDuration,"Month"))for(;0===n._getBusinessHoursForCurrentView(n.setting.selectedDate).length;)n.setting.selectedDate.setDate(n.setting.selectedDate.getDate()+1);else{for(;0===n._getBusinessHoursForCurrentView(a).length;)"Next"===n.tv.sLoadType||"Load"===n.tv.sLoadType?a.setDate(a.getDate()+1):"Prev"===n.tv.sLoadType&&a.setDate(a.getDate()-1);n.setting.selectedDate=new Date(a)}if($.cf.compareStrings(n.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(n.setting.visibleView,"MonthView")||$.cf.compareStrings(n.setting.visibleView,"DatePicker")){t=n.setDateInFormat({iDate:{d:1,M:a.getMonth(),y:a.getFullYear()}},"START"),i=n.setDateInFormat({iDate:{d:n.__getNumberOfDaysOfMonth(a.getMonth(),a.getFullYear()),M:a.getMonth(),y:a.getFullYear()}},"START"),n.tv.dVSDt=n.setDateInFormat({date:n._getWeekForDate(t,!1)[0]},"START"),n.setting.fixedNumOfWeeksInMonthView||(n.tv.iWkInMonth=Math.round((n._getWeekForDate(i,!1)[0].getTime()-n.tv.dVSDt.getTime())/$.CalenStyle.extra.iMS.w)+1),n.tv.iNoVDay=0;for(var s=n.tv.dVSDt.getTime(),r=n.setting.excludeNonBusinessHours?n.tv.iBsDays*n.tv.iWkInMonth:7*n.tv.iWkInMonth,o=n.tv.dVSDt.getTimezoneOffset(),l=0;l<7*n.tv.iWkInMonth;l++){var d=new Date(s),c=d.getTimezoneOffset();o!==c&&(d=new Date(s+(c-o)*$.CalenStyle.extra.iMS.m)),n.setting.excludeNonBusinessHours?n._getBusinessHoursForCurrentView(d).length>0&&(n.tv.dAVDt.push(d),n.tv.iNoVDay++,1===n.tv.dAVDt.length&&(n.tv.dVSDt=new Date(d)),n.tv.dAVDt.length===r&&(n.tv.dVEDt=new Date(d))):(n.tv.dAVDt.push(d),n.tv.iNoVDay++,1===n.tv.dAVDt.length&&(n.tv.dVSDt=new Date(d)),n.tv.dAVDt.length===r&&(n.tv.dVEDt=new Date(d))),s+=$.CalenStyle.extra.iMS.d}n.tv.dVEDt=n.setDateInFormat({date:n.tv.dVEDt},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt)}else if($.cf.compareStrings(n.setting.visibleView,"QuickAgendaView"))$.cf.compareStrings(n.setting.quickAgendaViewDuration,"Week")?(e=n._getWeekForDate(a,!1),n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,e[0],null,"Next"),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt)):$.cf.compareStrings(n.setting.quickAgendaViewDuration,"CustomDays")&&("Next"===n.tv.sLoadType||"Load"===n.tv.sLoadType?n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Next"):"Prev"===n.tv.sLoadType&&(n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Prev"),n.tv.dAVDt.reverse()),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt));else if($.cf.compareStrings(n.setting.visibleView,"TaskPlannerView"))$.cf.compareStrings(n.setting.taskPlannerViewDuration,"Week")?(e=n._getWeekForDate(a,!1),n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,e[0],null,"Next"),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt)):$.cf.compareStrings(n.setting.taskPlannerViewDuration,"CustomDays")&&("Next"===n.tv.sLoadType||"Load"===n.tv.sLoadType?n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Next"):"Prev"===n.tv.sLoadType&&(n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Prev"),n.tv.dAVDt.reverse()),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt));else if($.cf.compareStrings(n.setting.visibleView,"AgendaView"))$.cf.compareStrings(n.setting.agendaViewDuration,"Month")?((t=new Date(a)).setDate(1),n.tv.iNoVDay=n.__getNumberOfDaysOfMonth(t.getMonth(),t.getFullYear()),(i=new Date(a)).setDate(n.tv.iNoVDay),n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,t,i,"Next"),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt)):$.cf.compareStrings(n.setting.agendaViewDuration,"Week")?(e=n._getWeekForDate(a,!1),n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,e[0],null,"Next"),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt)):$.cf.compareStrings(n.setting.agendaViewDuration,"CustomDays")&&("Next"===n.tv.sLoadType||"Load"===n.tv.sLoadType?n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Next"):"Prev"===n.tv.sLoadType&&(n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Prev"),n.tv.dAVDt.reverse()),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt));else if($.cf.compareStrings(n.setting.visibleView,"AppointmentView"))"Next"===n.tv.sLoadType||"Load"===n.tv.sLoadType?n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Next"):"Prev"===n.tv.sLoadType&&(n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Prev"),n.tv.dAVDt.reverse()),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END");else if($.cf.compareStrings(n.setting.visibleView,"DayEventListView")||$.cf.compareStrings(n.setting.visibleView,"DayEventDetailView")){if(7===n.setting.daysInDayListView){e=n._getWeekForDate(a,!1),n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,e[0],null,"Next");for(var v=0;v<n.tv.iNoVDay;v++)if(0===n.compareDates(a,n.tv.dAVDt[v])){n.tv.iSelDay=v;break}n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END")}else{var g,m=n.__setCurrentViewDatesArray(n.tv.iSelDay+1,a,null,"Prev"),D=n.tv.iNoVDay-(n.tv.iSelDay+1)+1;m.reverse(),(g=n.__setCurrentViewDatesArray(D,a,null,"Next")).shift(),n.tv.dAVDt=m.concat(g),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END")}n.tv.dVDSDt=n.setDateInFormat({date:n.setting.selectedDate},"START"),n.tv.dVDEDt=n.setDateInFormat({date:n.setting.selectedDate},"END")}else $.cf.compareStrings(n.setting.visibleView,"WeekView")?(e=n._getWeekForDate(a,!1),n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,e[0],null,"Next"),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt)):$.cf.compareStrings(n.setting.visibleView,"DayView")?(n.tv.dVSDt=n.setDateInFormat({date:a},"START"),n.tv.dVEDt=n.setDateInFormat({date:a},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt),n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Next")):$.cf.compareStrings(n.setting.visibleView,"CustomView")?("Next"===n.tv.sLoadType||"Load"===n.tv.sLoadType?n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Next"):"Prev"===n.tv.sLoadType&&(n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,a,null,"Prev"),n.tv.dAVDt.reverse()),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt)):$.cf.compareStrings(n.setting.visibleView,"WeekPlannerView")&&(e=n._getWeekForDate(a,!1),n.tv.dAVDt=n.__setCurrentViewDatesArray(n.tv.iNoVDay,e[0],null,"Next"),n.tv.dVSDt=n.setDateInFormat({date:n.tv.dAVDt[0]},"START"),n.tv.dVEDt=n.setDateInFormat({date:n.tv.dAVDt[n.tv.iNoVDay-1]},"END"),n.tv.dVDSDt=new Date(n.tv.dVSDt),n.tv.dVDEDt=new Date(n.tv.dVEDt))}},__setCurrentViewDatesArray:function(e,t,i,n){for(var a=t.getTime(),s=[],r=t.getTimezoneOffset(),o=0;o<e;o++){var l=new Date(a),d=l.getTimezoneOffset();if(r!==d&&(l=new Date(a+(d-r)*$.CalenStyle.extra.iMS.m)),this.setting.excludeNonBusinessHours?this._getBusinessHoursForCurrentView(l).length>0?s.push(l):o--:s.push(l),null!==i&&0===this.compareDates(l,i))break;$.cf.compareStrings(n,"Prev")?a-=$.CalenStyle.extra.iMS.d:$.cf.compareStrings(n,"Next")&&(a+=$.CalenStyle.extra.iMS.d)}return s},__getDayIndexInView:function(e){for(var t=-1,i=0;i<this.tv.dAVDt.length;i++){var n=this.tv.dAVDt[i];if(0===this.compareDates(e,n)){t=i;break}}return $.cf.compareStrings(this.setting.visibleView,"DayEventDetailView")&&(t=0),t},_getWeekForDate:function(e,t){var i=e.getDay()-(t?0:this.setting.weekStartDay);i<0&&(i=7+i);var n=$.CalenStyle.extra.iMS.d*i,a=e.getTime()-n,s=a+6*$.CalenStyle.extra.iMS.d;return[this.setDateInFormat({date:new Date(a)},"START"),this.setDateInFormat({date:new Date(s)},"END")]},_getThursdayInAWeek:function(e){var t=e.getDay(),i=t>4?7-t+4:4-t,n=e.getTime()+$.CalenStyle.extra.iMS.d*i;return new Date(n)},__getWeekNumber:function(e,t){var i,n=this,a=n._normalizeDateTime(e,"START","y"),s=n._normalizeDateTime(e,"END","y");if($.cf.compareStrings(n.setting.weekNumCalculation,"US")){var r=n._getWeekForDate(a,!0)[0].getTime(),o=n._getWeekForDate(e,!0)[0],l=Math.ceil((o.getTime()-r)/$.CalenStyle.extra.iMS.w)+1,d=n._getWeekForDate(t,!0)[0],c=Math.ceil((d.getTime()-r)/$.CalenStyle.extra.iMS.w)+1;i=0===n.setting.weekStartDay?n.compareDates(t,s)>0?n.getNumberStringInFormat(l,0,!0)+"/"+n.getNumberStringInFormat(1,0,!0):n.getNumberStringInFormat(l,0,!0):l!==c?n.compareDates(t,s)>0?n.getNumberStringInFormat(l,0,!0)+"/"+n.getNumberStringInFormat(1,0,!0):n.getNumberStringInFormat(l,0,!0)+"/"+n.getNumberStringInFormat(c,0,!0):n.getNumberStringInFormat(l,0,!0)}else if($.cf.compareStrings(n.setting.weekNumCalculation,"Europe/ISO")){if(e.getFullYear()!==t.getFullYear()){var v=new Date(t);v.setDate(1),v.setMonth(0);var g=new Date(e);g.setDate(1),g.setMonth(0),a=t.getDate()>=3?v:g}var m=n._getThursdayInAWeek(a),D=n._getThursdayInAWeek(e);i=Math.ceil((D.getTime()-m.getTime())/$.CalenStyle.extra.iMS.w)+1,i=n.getNumberStringInFormat(i,0,!0)}return i},__isDateInCurrentView:function(e){var t=!1;if(this.tv.dAVDt.length>0)for(var i=0;i<this.tv.dAVDt.length;i++){var n=this.tv.dAVDt[i];0===this.compareDates(n,e)&&(t=!0)}return t},_normalizeDateTime:function(e,t,i){var n,a={d:e.getDate(),M:e.getMonth(),y:e.getFullYear(),H:e.getHours(),m:e.getMinutes(),s:e.getSeconds()};switch(i){case"s":"START"===t?n=new Date(a.y,a.M,a.d,a.H,a.M,0,0):"END"===t&&(n=new Date(a.y,a.M,a.d,a.H,a.M,59,999));break;case"m":"START"===t?n=new Date(a.y,a.M,a.d,a.H,0,0,0):"END"===t&&(n=new Date(a.y,a.M,a.d,a.H,59,59,999));break;case"h":case"T":"START"===t?n=new Date(a.y,a.M,a.d,0,0,0,0):"END"===t&&(n=new Date(a.y,a.M,a.d,23,59,59,999));break;case"d":case"dE":"START"===t?n=new Date(a.y,a.M,1,0,0,0,0):"END"===t&&(n=new Date(a.y,a.M,this.__getNumberOfDaysOfMonth(a.M,a.y),0,0,0,0));break;case"M":case"ME":case"y":case"yE":"START"===t?n=new Date(a.y,0,1,0,0,0,0):"END"===t&&(n=new Date(a.y,11,this.__getNumberOfDaysOfMonth(11,a.y),0,0,0,0))}return"dE"!==i&&"ME"!==i&&"yE"!==i||(n=this._normalizeDateTime(n,"END","T")),n},__getDifference:function(e,t,i){var n,a=t.getTime()-i.getTime();return"ms"===e?n=a:"s"===e?n=a/$.CalenStyle.extra.iMS.s:"m"===e?n=a/$.CalenStyle.extra.iMS.m:"h"===e?n=a/$.CalenStyle.extra.iMS.h:"d"===e?n=a/$.CalenStyle.extra.iMS.d:"M"===e?n=a/$.CalenStyle.extra.iMS.m:"y"===e&&(n=a/$.CalenStyle.extra.iMS.y),n},compareDates:function(e,t){e=this._normalizeDateTime(e,"START","T"),t=this._normalizeDateTime(t,"START","T");var i=this.__getDifference("d",e,t);return 0===i?i:i/Math.abs(i)},compareDateTimes:function(e,t){var i=this.__getDifference("m",e,t);return 0===i?i:i/Math.abs(i)},_getMonthAndYear:function(e,t,i,n){for(var a=e,s=t,r=0;r<i;r++)$.cf.compareStrings(n,"Prev")?-1===(a-=1)&&(a=11,s-=1):$.cf.compareStrings(n,"Next")&&12===(a+=1)&&(a=0,s+=1);return[a,s]},getNumberStringInFormat:function(e,t,i){var n,a="",s=e.toString(),r=s.length;if(0!==t)for(n=0;n<t-r;n++)a+=i?this.setting.numbers[0]:"0";if(i)for(n=0;n<r;n++)a+=this.setting.numbers[parseInt(s.charAt(n))];else a+=s;return a},getDateInFormat:function(e,t,i,n){var a,s=this,r="",o=s.setting.formatSeparatorDate,l=s.setting.formatSeparatorTime,d=s.setting.formatSeparatorDateTime,c=n?s.setting.veryShortDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],v=n?s.setting.shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],g=n?s.setting.fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],m=n?s.setting.shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],D=n?s.setting.fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"];return void 0===e.date&&void 0===e.iDate&&(e.date=s._getCurrentDate()),void 0===e.iDate&&(e.iDate={D:e.date.getDay(),d:e.date.getDate(),M:e.date.getMonth(),y:e.date.getFullYear(),H:e.date.getHours(),m:e.date.getMinutes(),s:e.date.getSeconds(),ms:e.date.getMilliseconds()}),e.iDate.h=e.iDate.H>12?e.iDate.H-12:0===e.iDate.H?12:e.iDate.H,e.iDate.me=e.iDate.H<12?"am":"pm",e.iDate.sm=e.iDate.H<12?"a":"p",i&&(t=(t=(t=(t=(t=t.replace("hh","HH")).replace("h","H")).replace(" me","","i")).replace(" sm","","i")).replace("sm","","i")),"object"===t?r=e.iDate:"d"===t?r=void 0!==s.setting.formatDates.d?s.setting.formatDates.d.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.d,0,n):"M"===t?r=void 0!==s.setting.formatDates.M?s.setting.formatDates.M.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.M+1,0,n):"y"===t?r=void 0!==s.setting.formatDates.y?s.setting.formatDates.y.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.y,0,n):"H"===t?r=void 0!==s.setting.formatDates.H?s.setting.formatDates.H.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.H,0,n):"h"===t?r=void 0!==s.setting.formatDates.h?s.setting.formatDates.h.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.h,0,n):"m"===t?r=void 0!==s.setting.formatDates.m?s.setting.formatDates.m.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.m,0,n):"s"===t&&(r=void 0!==s.setting.formatDates.s?s.setting.formatDates.s.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.s,0,n)),"dd"===t?r=void 0!==s.setting.formatDates.dd?s.setting.formatDates.dd.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.d,2,n):"MM"===t?r=void 0!==s.setting.formatDates.MM?s.setting.formatDates.MM.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.M+1,2,n):"yyyy"===t?r=void 0!==s.setting.formatDates.yyyy?s.setting.formatDates.yyyy.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.y,2,n):"HH"===t?r=void 0!==s.setting.formatDates.HH?s.setting.formatDates.HH.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.H,2,n):"hh"===t?r=void 0!==s.setting.formatDates.hh?s.setting.formatDates.hh.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.h,2,n):"mm"===t?r=void 0!==s.setting.formatDates.mm?s.setting.formatDates.mm.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.m,2,n):"ss"===t?r=void 0!==s.setting.formatDates.ss?s.setting.formatDates.ss.call(s,e.iDate):s.getNumberStringInFormat(e.iDate.s,2,n):"DD"===t?r=c[e.iDate.D]:"DDD"===t?r=v[e.iDate.D]:"DDDD"===t?r=g[e.iDate.D]:"MMM"===t?r=m[e.iDate.M]:"MMMM"===t?r=D[e.iDate.M]:"dd-MM-yyyy"===t?r=void 0!==s.setting.formatDates["dd-MM-yyyy"]?s.setting.formatDates["dd-MM-yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd",i,n)+o+s.getDateInFormat({iDate:e.iDate},"MM",i,n)+o+s.getDateInFormat({iDate:e.iDate},"yyyy",i,n):"dd MMM"===t?r=void 0!==s.setting.formatDates["dd MMM"]?s.setting.formatDates["dd MMM"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"MMM",i,n):"dd-MMM-yyyy"===t?r=void 0!==s.setting.formatDates["dd-MMM-yyyy"]?s.setting.formatDates["dd-MMM-yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd",i,n)+o+s.getDateInFormat({iDate:e.iDate},"MMM",i,n)+o+s.getDateInFormat({iDate:e.iDate},"yyyy",i,n):"DDD MMM dd, yyyy"===t?r=void 0!==s.setting.formatDates["DDD MMM dd, yyyy"]?s.setting.formatDates["DDD MMM dd, yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"DDD",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"MMM",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"dd",i,n)+", "+s.getDateInFormat({iDate:e.iDate},"yyyy",i,n):"DDD MMM dd yyyy"===t?r=void 0!==s.setting.formatDates["DDD MMM dd yyyy"]?s.setting.formatDates["DDD MMM dd yyyy"].call(s,e.iDate):"<b>"+s.getDateInFormat({iDate:e.iDate},"DDD",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"MMM",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"dd",i,n)+"</b> "+s.getDateInFormat({iDate:e.iDate},"yyyy",i,n):"DDDD MMM dd yyyy"===t?r=void 0!==s.setting.formatDates["DDDD MMM dd yyyy"]?s.setting.formatDates["DDDD MMM dd yyyy"].call(s,e.iDate):"<b>"+s.getDateInFormat({iDate:e.iDate},"DDDD",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"MMM",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"dd",i,n)+"</b> "+s.getDateInFormat({iDate:e.iDate},"yyyy",i,n):"DDDD MMMM dd yyyy"===t?r=void 0!==s.setting.formatDates["DDDD MMMM dd yyyy"]?s.setting.formatDates["DDDD MMMM dd yyyy"].call(s,e.iDate):"<b>"+s.getDateInFormat({iDate:e.iDate},"DDDD",i,n)+" - "+s.getDateInFormat({iDate:e.iDate},"MMMM",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"dd",i,n)+"</b> "+s.getDateInFormat({iDate:e.iDate},"yyyy",i,n):"yyyy-MM-dd"===t?r=void 0!==s.setting.formatDates["yyyy-MM-dd"]?s.setting.formatDates["yyyy-MM-dd"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"yyyy",i,n)+o+s.getDateInFormat({iDate:e.iDate},"MM",i,n)+o+s.getDateInFormat({iDate:e.iDate},"dd",i,n):"ISO8601Date"===t?r=void 0!==s.setting.formatDates.ISO8601Date?s.setting.formatDates.ISO8601Date.call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"yyyy",i,n)+"-"+s.getDateInFormat({iDate:e.iDate},"MM",i,n)+"-"+s.getDateInFormat({iDate:e.iDate},"dd",i,n):"DDD, MMM dd"===t?r=void 0!==s.setting.formatDates["DDD, MMM dd"]?s.setting.formatDates["DDD, MMM dd"].call(s,e.iDate):"<b>"+s.getDateInFormat({iDate:e.iDate},"DDD",i,n)+", "+s.getDateInFormat({iDate:e.iDate},"MMM",i,n)+" "+s.getDateInFormat({iDate:e.iDate},"dd",i,n):"hh:mm sm"===t||"hh:mm SM"===t?r=void 0!==s.setting.formatDates["hh:mm"]?s.setting.formatDates["hh:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh",i,n)+l+s.getDateInFormat({iDate:e.iDate},"mm",i,n)+" "+("hh:mm SM"===t?e.iDate.sm.toUpperCase():e.iDate.sm):"hh:mmsm"===t||"hh:mmSM"===t?r=void 0!==s.setting.formatDates["hh:mm"]?s.setting.formatDates["hh:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh",i,n)+l+s.getDateInFormat({iDate:e.iDate},"mm",i,n)+("hh:mmSM"===t?e.iDate.sm.toUpperCase():e.iDate.sm):"h[:m]sm"===t||"h[:m]SM"===t?(a=0!==e.iDate.m?l+s.getDateInFormat({iDate:e.iDate},"m",i,n):"",r=void 0!==s.setting.formatDates["h:m"]?s.setting.formatDates["h:m"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"h",i,n)+a+("h:mSM"===t?e.iDate.sm.toUpperCase():e.iDate.sm)):"hh:mm"===t||"hh:mm me"===t||"hh:mm ME"===t?r=void 0!==s.setting.formatDates["hh:mm"]?s.setting.formatDates["hh:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh",i,n)+l+s.getDateInFormat({iDate:e.iDate},"mm",i,n)+" "+("hh:mm ME"===t?e.iDate.me.toUpperCase():e.iDate.me):"hh:mm:ss"===t||"hh:mm:ss me"===t||"hh:mm:ss ME"===t?r=void 0!==s.setting.formatDates["hh:mm:ss"]?s.setting.formatDates["hh:mm:ss"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh",i,n)+l+s.getDateInFormat({iDate:e.iDate},"mm",i,n)+l+s.getDateInFormat({iDate:e.iDate},"ss",i,n)+" "+("hh:mm:ss ME"===t?e.iDate.me.toUpperCase():e.iDate.me):"HH:mm"===t?r=void 0!==s.setting.formatDates["HH:mm"]?s.setting.formatDates["HH:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"HH",i,n)+l+s.getDateInFormat({iDate:e.iDate},"mm",i,n):"H[:m]"===t?(a=0!==e.iDate.m?l+s.getDateInFormat({iDate:e.iDate},"m",i,n):"",r=void 0!==s.setting.formatDates["H:m"]?s.setting.formatDates["H:m"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"H",i,n)+a):"HH:mm:ss"===t?r=void 0!==s.setting.formatDates["HH:mm:ss"]?s.setting.formatDates["HH:mm:ss"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"HH",i,n)+l+s.getDateInFormat({iDate:e.iDate},"mm",i,n)+l+s.getDateInFormat({iDate:e.iDate},"ss",i,n):"ISO8601Time"===t?r=void 0!==s.setting.formatDates.ISO8601Time?s.setting.formatDates.ISO8601Time.call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"HH",i,n)+":"+s.getDateInFormat({iDate:e.iDate},"mm",i,n)+":"+s.getDateInFormat({iDate:e.iDate},"ss",i,n):"dd-MM-yyyy HH:mm"===t?r=void 0!==s.setting.formatDates["dd-MM-yyyy HH:mm"]?s.setting.formatDates["dd-MM-yyyy HH:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd-MM-yyyy",i,n)+d+s.getDateInFormat({iDate:e.iDate},"HH:mm",i,n):"dd-MM-yyyy hh:mm"===t?r=void 0!==s.setting.formatDates["dd-MM-yyyy hh:mm"]?s.setting.formatDates["dd-MM-yyyy hh:mm"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"dd-MM-yyyy",i,n)+d+s.getDateInFormat({iDate:e.iDate},"hh:mm",i,n):"HH:mm dd-MMM-yyyy"===t?r=void 0!==s.setting.formatDates["HH:mm dd-MMM-yyyy"]?s.setting.formatDates["HH:mm dd-MMM-yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"HH:mm",i,n)+d+s.getDateInFormat({iDate:e.iDate},"dd-MMM-yyyy",i,n):"hh:mm dd-MMM-yyyy"===t?r=void 0!==s.setting.formatDates["hh:mm dd-MMM-yyyy"]?s.setting.formatDates["hh:mm dd-MMM-yyyy"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"hh:mm",i,n)+d+s.getDateInFormat({iDate:e.iDate},"dd-MMM-yyyy",i,n):"yyyy-MM-ddTHH:mm:ss"===t?r=void 0!==s.setting.formatDates["yyyy-MM-ddTHH:mm:ss"]?s.setting.formatDates["yyyy-MM-ddTHH:mm:ss"].call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"yyyy-MM-dd",i,n)+"T"+s.getDateInFormat({iDate:e.iDate},"HH:mm:ss",i,n):"ISO8601DateTime"===t&&(r=void 0!==s.setting.formatDates.ISO8601DateTime?s.setting.formatDates.ISO8601DateTime.call(s,e.iDate):s.getDateInFormat({iDate:e.iDate},"ISO8601Date",i,n)+"T"+s.getDateInFormat({iDate:e.iDate},"ISO8601Time",i,n)),r},getEventDateTimeString:function(e,t,i,n){var a=this,s="";return i?0===a.compareDates(e,t)?s=a.getDateInFormat({date:e},"dd-MMM-yyyy",!1,!0):0===t.getHours()&&0===t.getMinutes()?(t.setTime(t.getTime()-$.CalenStyle.extra.iMS.m),s=0===a.compareDates(e,t)?a.getDateInFormat({date:e},"dd-MMM-yyyy",!1,!0):a.getDateInFormat({date:e},"hh:mm dd-MMM-yyyy",a.setting.is24Hour,!0)+n+a.getDateInFormat({date:t},"hh:mm dd-MMM-yyyy",a.setting.is24Hour,!0)):s=a.getDateInFormat({date:e},"hh:mm dd-MMM-yyyy",a.setting.is24Hour,!0)+n+a.getDateInFormat({date:t},"hh:mm dd-MMM-yyyy",a.setting.is24Hour,!0):s=0===a.compareDates(e,t)?a.getDateInFormat({date:e},"hh:mm",a.setting.is24Hour,!0)+n+a.getDateInFormat({date:t},"hh:mm",a.setting.is24Hour,!0):a.getDateInFormat({date:e},"hh:mm dd-MMM-yyyy",a.setting.is24Hour,!0)+n+a.getDateInFormat({date:t},"hh:mm dd-MMM-yyyy",a.setting.is24Hour,!0),s},__getDurationBetweenDates:function(e,t,i,n,a){for(var s=this,r=Math.abs(t.getTime()-e.getTime()),o={},l="",d=0;d<i.length;d++)o[i.charAt(d)]=0;return void 0!==o.y&&(o.y=Math.floor(r/$.CalenStyle.extra.iMS.y),r%=$.CalenStyle.extra.iMS.y,a||void 0===o.y||!n&&0===o.y||(l+=o.y+(1===o.y?s.setting.durationStrings.y[0]:s.setting.durationStrings.y[1]))),void 0!==o.M&&(o.M=Math.floor(r/$.CalenStyle.extra.iMS.m),r%=$.CalenStyle.extra.iMS.m,a||void 0===o.M||!n&&0===o.M||(l+=o.M+(1===o.M?s.setting.durationStrings.M[0]:s.setting.durationStrings.M[1]))),void 0!==o.w&&(o.w=Math.floor(r/$.CalenStyle.extra.iMS.w),r%=$.CalenStyle.extra.iMS.w,a||void 0===o.w||!n&&0===o.w||(l+=o.w+(1===o.w?s.setting.durationStrings.w[0]:s.setting.durationStrings.w[1]))),void 0!==o.d&&(o.d=Math.floor(r/$.CalenStyle.extra.iMS.d),r%=$.CalenStyle.extra.iMS.d,a||void 0===o.d||!n&&0===o.d||(l+=o.d+(1===o.d?s.setting.durationStrings.d[0]:s.setting.durationStrings.d[1]))),void 0!==o.h&&(o.h=Math.floor(r/$.CalenStyle.extra.iMS.h),r%=$.CalenStyle.extra.iMS.h,a||void 0===o.h||!n&&0===o.h||(l+=o.h+(1===o.h?s.setting.durationStrings.h[0]:s.setting.durationStrings.h[1]))),void 0!==o.m&&(o.m=Math.floor(r/$.CalenStyle.extra.iMS.m),r%=$.CalenStyle.extra.iMS.m,a||void 0===o.m||!n&&0===o.m||(l+=o.m+(1===o.m?s.setting.durationStrings.m[0]:s.setting.durationStrings.m[1]))),void 0!==o.s&&(o.s=Math.floor(r/$.CalenStyle.extra.iMS.s),r%=$.CalenStyle.extra.iMS.s,a||void 0===o.s||!n&&0===o.s||(l+=o.s+(1===o.s?s.setting.durationStrings.s[0]:s.setting.durationStrings.s[1]))),a?o:l.trim()},__isValidUrl:function(e){return!!e.match(/(((ftp|http|https):\/\/)|(\/)|(..\/)|())(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/)},_isGoogleCalendarUrl:function(e){return!!e.match("https://www.googleapis.com/calendar/v3/calendars/")},_convertToISO8601Date:function(e,t){return this.getDateInFormat({date:e},"ISO8601DateTime",!1,!0)+(t||this.setting.inputTZOffset)},incrementDataLoadingCount:function(e){this.tv.iLoadCnt=this.tv.iLoadCnt+e,1===this.tv.iLoadCnt&&this._startDataLoading()},_startDataLoading:function(){var e=this;e.tv.iLoadCnt>=1&&(e.addRemoveLoaderIndicators(!0,"cEventLoaderIndicator"),e.addRemoveViewLoader(!0,"cEventLoaderBg"),e.setting.dataLoadingStart&&e.setting.dataLoadingStart.call(e,e.setting.visibleView))},_stopDataLoading:function(e,t,i){var n=this;n.tv.iLoadCnt--,0===n.tv.iLoadCnt&&(n.setting.dataLoadingEnd&&n.setting.dataLoadingEnd.call(n,n.setting.visibleView),n.setting.deleteOldDataWhileNavigating&&n._dataCleaning(e,t),i())},__parseJson:function(e){return $.cf.compareStrings(typeof e,"string")?$.parseJSON(e):e},parseDataSource:function(e,t,i,n,a,s,r){var o=this;t=o.__parseJson(t),$.cf.compareStrings(e,"eventSource")&&r?o._getModifiedEventsArray(t,s,r,!1):t.length>0?$.cf.compareStrings(e,"eventCalendarSource")?o._getModifiedEventCalendarsArray(t):$.cf.compareStrings(e,"eventSource")?o._getModifiedEventsArray(t,s,r,!1):$.cf.compareStrings(e,"sourceCount")?o._getModifiedSourceCountArray(t,s):$.cf.compareStrings(e,"restrictedSectionSource")?o._getModifiedRestrictedSectionArray(t,s):$.cf.compareStrings(e,"slotAvailabilitySource")&&o._getModifiedSlotAvailabilityArray(t,s):$.cf.compareStrings(e,"eventCalendarSource")?o.tv.oAECalendar=[]:$.cf.compareStrings(e,"eventSource")?o.tv.oAEvents=[]:$.cf.compareStrings(e,"sourceCount")?o.tv.oASrcCnt=[]:$.cf.compareStrings(e,"restrictedSectionSource")?o.tv.oAResSec=[]:$.cf.compareStrings(e,"slotAvailabilitySource")&&(o.tv.oASltAvail=[]),o._stopDataLoading(i,n,a)},_parseAllDataSources:function(e,t,i,n,a,s){var r=this,o=0;i&&o++,void 0!==e.eventCalendarSource&&o++,void 0!==e.eventSource&&o++,void 0!==e.sourceCount&&o++,void 0!==e.restrictedSectionSource&&o++,void 0!==e.slotAvailabilitySource&&o++,r.incrementDataLoadingCount(o),i&&r.parseDataSource("eventSource",e,n,a,s,t,i),void 0!==e.eventCalendarSource&&r.parseDataSource("eventCalendarSource",e.eventCalendarSource,n,a,s,t,i),void 0!==e.eventSource&&r.parseDataSource("eventSource",e.eventSource,n,a,s,t,i),void 0!==e.sourceCount&&r.parseDataSource("sourceCount",e.sourceCount,n,a,s,t,i),void 0!==e.restrictedSectionSource&&r.parseDataSource("restrictedSectionSource",e.restrictedSectionSource,n,a,s,t,i),void 0!==e.slotAvailabilitySource&&r.parseDataSource("slotAvailabilitySource",e.slotAvailabilitySource,n,a,s,t,i),0===o&&r._stopDataLoading(n,a,s)},__parseData:function(e,t){var i=this;if(e){var n,a,s,r,o=null,l=null,d=null,c=null,v=!1,g=!1;for(n=0;n<i.setting.calDataSource.length;n++)a=i.setting.calDataSource[n],$.cf.compareStrings(a.sourceFetchType,"All")&&!a.fetched&&(v=!0),$.cf.compareStrings(a.sourceFetchType,"DateRange")&&(g=!0);var m=!1;if(g){if($.cf.compareStrings(i.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(i.setting.visibleView,"MonthView")||$.cf.compareStrings(i.setting.visibleView,"AgendaView")&&$.cf.compareStrings(i.setting.agendaViewDuration,"Month"))m=!0;else if($.cf.compareStrings(i.tv.sLoadType,"Prev")){var D=!1;i.compareDateTimes(i.tv.dLoadDt,i.tv.dPLSDt)>=0&&(D=!0);var f=!1;i.compareDateTimes(i.tv.dLoadDt,i.tv.dPLEDt)<=0&&(f=!0),D&&f&&(m=!0)}else if($.cf.compareStrings(i.tv.sLoadType,"Next")){var u=!1;i.compareDateTimes(i.tv.dLoadDt,i.tv.dNLSDt)>=0&&(u=!0);var p=!1;i.compareDateTimes(i.tv.dLoadDt,i.tv.dNLEDt)<=0&&(p=!0),u&&p&&(m=!0)}else m=!0;if(m){var h=i.tv.dLoadDt.getMonth(),y=i.tv.dLoadDt.getFullYear(),C=i._getMonthAndYear(h,y,1,"Prev"),w=C[0],S=C[1],V=i.__getNumberOfDaysOfMonth(w,S);i.tv.dPLSDt=i.setDateInFormat({iDate:{d:1,M:w,y:S}},"START"),i.tv.dPLEDt=i.setDateInFormat({iDate:{d:V,M:w,y:S}},"START");var b=i._getMonthAndYear(h,y,1,"Next"),E=b[0],T=b[1],M=i.__getNumberOfDaysOfMonth(E,T);i.tv.dNLSDt=i.setDateInFormat({iDate:{d:1,M:E,y:T}},"START"),i.tv.dNLEDt=i.setDateInFormat({iDate:{d:M,M:E,y:T}},"START");var I=i._getMonthAndYear(h,y,i.setting.extraMonthsForDataLoading,"Prev"),A=I[0],_=I[1],k=i.__getNumberOfDaysOfMonth(A,_),H=i._getMonthAndYear(h,y,i.setting.extraMonthsForDataLoading,"Next"),F=H[0],N=H[1],x=i.__getNumberOfDaysOfMonth(F,N);$.cf.compareStrings(i.tv.sLoadType,"Load")||$.cf.compareStrings(i.setting.datasetModificationRule,"ReplaceAll")?(d=o=i.setDateInFormat({iDate:{d:1,M:A,y:_}},"START"),c=l=i.setDateInFormat({iDate:{d:x,M:F,y:N}},"END")):$.cf.compareStrings(i.tv.sLoadType,"Prev")?(o=i.setDateInFormat({iDate:{d:1,M:A,y:_}},"START"),l=i.setDateInFormat({iDate:{d:k,M:A,y:_}},"END"),d=new Date(o),c=i.setDateInFormat({iDate:{d:x,M:F,y:N}},"END")):$.cf.compareStrings(i.tv.sLoadType,"Next")&&(o=i.setDateInFormat({iDate:{d:1,M:F,y:N}},"START"),l=i.setDateInFormat({iDate:{d:x,M:F,y:N}},"END"),d=i.setDateInFormat({iDate:{d:1,M:A,y:_}},"START"),c=new Date(l))}}if(m||v)for($.cf.compareStrings(i.tv.sLoadType,"Load")&&(i.tv.oAECalendar=[],i.tv.oAEvents=[],i.tv.oASrcCnt=[],i.tv.oAResSec=[],i.tv.oASltAvail=[],i.tv.iMaxEvId=0),n=0;n<i.setting.calDataSource.length;n++){var B=(a=i.setting.calDataSource[n]).config||{},L=null,O=null,P=null,R=null;if($.cf.compareStrings(a.sourceFetchType,"DateRange")&&(L=o,O=l,P=d,R=c),$.cf.compareStrings(a.sourceType,"JSON")){var W=i.__parseJson(a.source);i._parseAllDataSources(W,B,!1,P,R,t)}else if($.cf.compareStrings(a.sourceType,"FUNCTION"))a.source.call(i,L,O,P,R,B,t);else if($.cf.compareStrings(a.sourceType,"URL"))if(i.__isValidUrl(a.source)){for(var j=a.source,z=i._isGoogleCalendarUrl(j),Y={},q={},U=B.tzOffset||"",Q=0;Q<i.tv.oSURLParams.length;Q++){var Z=i.tv.oSURLParams[Q];Z.sourceId===a.sourceId&&(q=Z.params)}if(z){for(j+="/events?callback=?",Y.sortOrder="ascending",Y.singleEvents="true",Y.timeZone=i.setting.tz,Y.maxResults=1e3,Y.key=B.googleCalendarApiKey||"",s=0;s<q.length;s++)Y[(r=q[s]).keyName]=r.values;$.cf.compareStrings(a.sourceFetchType,"DateRange")&&null!==L&&null!==O&&(Y.timeMin=i._convertToISO8601Date(L,U),Y.timeMax=i._convertToISO8601Date(O,U))}else{for(s=0;s<q.length;s++)Y[(r=q[s]).keyName]=r.values;$.cf.compareStrings(a.sourceFetchType,"DateRange")&&(Y.callback="?",null!==L&&null!==O&&(Y.startdate=i.getDateInFormat({date:L},"yyyy-MM-dd",!1,!1),Y.enddate=i.getDateInFormat({date:O},"yyyy-MM-dd",!1,!1),Y.startdatetime=i.getDateInFormat({date:i.convertToUTC(L,U)},"yyyy-MM-ddTHH:mm:ss",!1,!1),Y.enddatetime=i.getDateInFormat({date:i.convertToUTC(O,U)},"yyyy-MM-ddTHH:mm:ss",!1,!1)))}i._requestJson(j,Y,B,z,P,R,t)}else console.log("Invalid Event Source String");else console.log("Invalid Event Source.");a.fetched=!0}else t()}else t()},_requestJson:function(e,t,i,n,a,s,r){var o=this;console.log("sBaseUrl : "+e),console.log(t),o.incrementDataLoadingCount(1),$.getJSON(e,t).done(function(e){o.tv.iLoadCnt--,e=o.__parseJson(e),o._parseAllDataSources(e,i,n,a,s,r)}).fail(function(e,t,i){o._stopDataLoading(a,s,r),console.log("Request Failed : "+t+"  :  "+i)})},_getModifiedEventCalendarsArray:function(e){var t=this;$.cf.compareStrings(t.setting.datasetModificationRule,"Default")?t.tv.oAECalendar=t.tv.oAECalendar.concat(e):$.cf.compareStrings(t.setting.datasetModificationRule,"ReplaceAll")&&(t.tv.oAECalendar=e),t.__addEventCalendarToEventFilterCriteriaArray()},_getRecurringEventsArray:function(e){for(var t=[],i=0;i<e.length;i++){for(var n=e[i].iCalUID,a=0,s=0;s<t.length;s++){var r=t[s],o=r[0],l=parseInt(r[1]);if(n===o){a=++l,t[s]=[o,a];break}}0===a&&t.push([n,1])}return t},_getModifiedEventsArray:function(t,i,n,a){var s,r,o,l,d,c,v,g,m=this,D=[],f=0,u=i.inputDateTimeFormat||"",p=i.formatSeparatorDateTime||"",h=i.formatSeparatorDate||"",y=i.formatSeparatorTime||"",C=i.inputTZOffset||m.setting.inputTZOffset,w=!1;$.cf.isValid(i.singleColor)?(w=!0,l=$.cf.addHashToHexcode(i.singleColor),d=$.cf.getRGBAString(l,.1),c=l,v=l,g=l):(d=i.backgroundColor||"",d=$.cf.compareStrings(d,"")||$.cf.compareStrings(d,"transparent")?"transparent":d,c=i.borderColor||"",c=$.cf.compareStrings(c,"")||$.cf.compareStrings(c,"transparent")?"transparent":c,v=i.textColor||"",v=$.cf.compareStrings(v,"")||$.cf.compareStrings(v,"transparent")?m.setting.textColor:v,g=i.nonAllDayEventsTextColor||"",g=$.cf.compareStrings(g,"transparent")?"transparent":$.cf.compareStrings(g,"")?d:g,d=$.cf.addHashToHexcode(d),c=$.cf.addHashToHexcode(c),v=$.cf.addHashToHexcode(v),g=$.cf.addHashToHexcode(g));var S,V=null;if(V=$.cf.isValid(i.icon)?i.icon:m.setting.eventIcon,n){var b=t,E=b.summary,T=b.items||[],M=m._getRecurringEventsArray(T);t=[];for(var I=0;I<M.length;I++)for(var A=M[I],_=A[0],k=A[1],H=1,F=0;F<T.length;F++){var N=T[F],x=N.iCalUID;if(_===x){x=x.replace("@google.com","");var B=!!N.start.date;if(s=new e(x,B,B?N.start.date:N.start.dateTime,B?N.end.date:N.end.dateTime,E,N.summary||m.setting.miscStrings.emptyGoogleCalendarEventTitle,"",N.htmlLink||""),t.push(s),++H>k)break}}}for(r=0;r<t.length;r++){if(null!==(o=t[r]).start){if(f++,null!==o.start&&(o.start=m._getDateObjectFromString(o.start,o.isAllDay,u,p,h,y,C)),null!==o.end?(o.end=m._getDateObjectFromString(o.end,o.isAllDay,u,p,h,y,C),o.endSpecified=!0):(o.end=m._getUnspecifiedEndDateOfEvent(o.isAllDay,o.start),o.endSpecified=!1),S=!1,$.cf.compareStrings(m.setting.datasetModificationRule,"ReplaceSpecified"))for(var L=0;L<m.tv.oAEvents.length;L++)if(s=m.tv.oAEvents[L],parseInt(s.id)===parseInt(o.id)){o.calEventId=s.calEventId,S=!0;break}S||(o.calEventId=++m.tv.iMaxEvId)}else o.id="DEL";""===o.title&&(o.title=m.setting.miscStrings.emptyEventTitle)}if(0!==t.length-f){var O=[];for(r=0;r<t.length;r++)o=t[r],$.cf.compareStrings(o.id,"DEL")||O.push(o);t=O}var P,R=i.changeColorBasedOn||m.setting.changeColorBasedOn||"Event";if($.cf.compareStrings(R,"EventCalendar")){D=[];for(var W=0;W<m.tv.oAECalendar.length;W++){var j=m.tv.oAECalendar[W];j.fromSingleColor=!1,$.cf.isValid(j.singleColor)?(l=$.cf.addHashToHexcode(j.singleColor),j.fromSingleColor=!0,j.backgroundColor=$.cf.getRGBAString(l,.1),j.borderColor=l,j.textColor=l,j.nonAllDayEventsTextColor=l,D.push(l)):$.cf.isValid(j.backgroundColor)?D.push(j.backgroundColor):(P=m._generateUniqueColor(D),D.push(P),j.backgroundColor=$.cf.addHashToHexcode(P)),V=$.cf.isValid(j.icon)?j.icon:m.setting.eventIcon}}for($.cf.compareStrings(R,"EventSource")&&(d=d||m._generateUniqueColor(D),D.push(d)),r=0;r<t.length;r++){o=t[r];var z=m._getEventCalendarObject(o.calendar);$.cf.compareStrings(R,"Event")||$.cf.compareStrings(R,"EventCalendar")&&!$.cf.isValid(z)?($.cf.isValid(o.singleColor)?(l=$.cf.addHashToHexcode(o.singleColor),o.fromSingleColor=!0,o.backgroundColor=$.cf.getRGBAString(l,.1),o.borderColor=l,o.textColor=l,o.nonAllDayEventsTextColor=l,D.push(l)):$.cf.isValid(o.backgroundColor)?(o.backgroundColor=$.cf.addHashToHexcode(o.backgroundColor),o.borderColor=$.cf.addHashToHexcode(o.borderColor),o.textColor=$.cf.addHashToHexcode(o.textColor),o.nonAllDayEventsTextColor=$.cf.addHashToHexcode(o.nonAllDayEventsTextColor),D.push(o.backgroundColor)):(P=m._generateUniqueColor(D),D.push(P),o.backgroundColor=$.cf.addHashToHexcode(P)),V=$.cf.isValid(o.isMarked)&&o.isMarked?$.cf.isValid(o.icon)?o.icon:"cs-icon-Mark":$.cf.isValid(o.icon)?o.icon:m.setting.eventIcon):$.cf.compareStrings(R,"EventCalendar")&&$.cf.isValid(z)?(o.fromSingleColor=z.fromSingleColor,o.backgroundColor=$.cf.addHashToHexcode(z.backgroundColor),o.borderColor=$.cf.addHashToHexcode(z.borderColor),o.textColor=$.cf.addHashToHexcode(z.textColor),o.nonAllDayEventsTextColor=$.cf.addHashToHexcode(z.nonAllDayEventsTextColor),o.icon=z.icon):$.cf.compareStrings(R,"EventSource")&&(o.fromSingleColor=w,o.backgroundColor=d,o.borderColor=c,o.textColor=v,o.nonAllDayEventsTextColor=g,o.icon=V),o.isDragNDropInMonthView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isDragNDropInMonthView)?o.isDragNDropInMonthView:$.cf.isValid(i.isDragNDropInMonthView)?i.isDragNDropInMonthView:z&&$.cf.isValid(z.isDragNDropInMonthView)?z.isDragNDropInMonthView:m.setting.isDragNDropInMonthView),o.isDragNDropInQuickAgendaView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isDragNDropInQuickAgendaView)?o.isDragNDropInQuickAgendaView:$.cf.isValid(i.isDragNDropInQuickAgendaView)?i.isDragNDropInQuickAgendaView:z&&$.cf.isValid(z.isDragNDropInQuickAgendaView)?z.isDragNDropInQuickAgendaView:m.setting.isDragNDropInQuickAgendaView),o.isDragNDropInTaskPlannerView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isDragNDropInTaskPlannerView)?o.isDragNDropInTaskPlannerView:$.cf.isValid(i.isDragNDropInTaskPlannerView)?i.isDragNDropInTaskPlannerView:z&&$.cf.isValid(z.isDragNDropInTaskPlannerView)?z.isDragNDropInTaskPlannerView:m.setting.isDragNDropInTaskPlannerView),o.isDragNDropInDetailView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isDragNDropInDetailView)?o.isDragNDropInDetailView:$.cf.isValid(i.isDragNDropInDetailView)?i.isDragNDropInDetailView:z&&$.cf.isValid(z.isDragNDropInDetailView)?z.isDragNDropInDetailView:m.setting.isDragNDropInDetailView),o.isResizeInDetailView=(!$.cf.isValid(o.isMarked)||!o.isMarked)&&($.cf.isValid(o.isResizeInDetailView)?o.isResizeInDetailView:$.cf.isValid(i.isResizeInDetailView)?i.isResizeInDetailView:z&&$.cf.isValid(z.isResizeInDetailView)?z.isResizeInDetailView:m.setting.isResizeInDetailView)}if(a)m.tv.oAEvents=m.tv.oAEvents.concat(t);else if($.cf.compareStrings(m.setting.datasetModificationRule,"Default"))m.tv.oAEvents=m.tv.oAEvents.concat(t);else if($.cf.compareStrings(m.setting.datasetModificationRule,"ReplaceAll"))m.tv.oAEvents=t;else if($.cf.compareStrings(m.setting.datasetModificationRule,"ReplaceSpecified"))for(var Y=0;Y<t.length;Y++){var q=t[Y];S=!1;for(var U=0;U<m.tv.oAEvents.length;U++){var Q=m.tv.oAEvents[U];if(parseInt(Q.id)===parseInt(q.id)){Q=q,S=!0;break}}S||m.tv.oAEvents.push(q)}m.tv.oAEvents=m._sortEvents(m.tv.oAEvents)},_getModifiedSourceCountArray:function(e,t){for(var i=this,n=t.inputDateTimeFormat||"",a=t.formatSeparatorDateTime||"",s=t.formatSeparatorDate||"",r=t.formatSeparatorTime||"",o=t.inputTZOffset||i.setting.inputTZOffset,l=[],d=0;d<e.length;d++){var c=e[d];$.cf.isValid(c.date)&&(c.date=i._getDateObjectFromString(c.date,!0,n,a,s,r,o),$.cf.isValid(c.date)&&l.push(c))}if($.cf.compareStrings(i.setting.datasetModificationRule,"Default"))i.tv.oASrcCnt=i.tv.oASrcCnt.concat(l);else if($.cf.compareStrings(i.setting.datasetModificationRule,"ReplaceAll"))i.tv.oASrcCnt=l;else if($.cf.compareStrings(i.setting.datasetModificationRule,"ReplaceSpecified"))for(var v=0;v<l.length;v++){for(var g=!1,m=l[v],D=0;D<i.tv.oASrcCnt.length;D++){var f=i.tv.oASrcCnt[D];0===i.compareDateTimes(m.date,f.date)&&(f=m,g=!0)}g||i.tv.oASrcCnt.append(m)}return l},_getModifiedRestrictedSectionArray:function(e,t){for(var i=this,n=t.inputDateTimeFormat||"",a=t.formatSeparatorDateTime||"",s=t.formatSeparatorDate||"",r=t.formatSeparatorTime||"",o=t.inputTZOffset||i.setting.inputTZOffset,l=0;l<e.length;l++){var d=e[l];null!==d.start&&(null!==d.start&&(d.start=i._getDateObjectFromString(d.start,d.isAllDay,n,a,s,r,o)),null!==d.end&&(d.end=i._getDateObjectFromString(d.end,d.isAllDay,n,a,s,r,o)),d.isAllDay&&(d.start=i.setDateInFormat({date:d.start},"START"),d.end=i.setDateInFormat({date:d.end},"END"),d.end=i._normalizeEndDateTime(d.end)))}$.cf.compareStrings(i.setting.datasetModificationRule,"Default")?i.tv.oAResSec=i.tv.oAResSec.concat(e):$.cf.compareStrings(i.setting.datasetModificationRule,"ReplaceAll")&&(i.tv.oAResSec=e),i._checkAllowDroppable()},_getModifiedSlotAvailabilityArray:function(e,t){for(var i=this,n=t.inputDateTimeFormat||"",a=t.formatSeparatorDateTime||"",s=t.formatSeparatorDate||"",r=t.formatSeparatorTime||"",o=t.inputTZOffset||i.setting.inputTZOffset,l=[],d=0;d<e.length;d++){var c=e[d];null!==c.start&&null!==c.end&&(null!==c.start&&(c.start=i._getDateObjectFromString(c.start,c.isAllDay,n,a,s,r,o)),null!==c.end&&(c.end=i._getDateObjectFromString(c.end,c.isAllDay,n,a,s,r,o)),""!==c.start&&""!==c.end&&(c.isAllDay&&(c.start=i.setDateInFormat({date:c.start},"START"),c.end=i.setDateInFormat({date:c.end},"END")),c.end=i._normalizeEndDateTime(c.end),l.push(c)))}if($.cf.compareStrings(i.setting.datasetModificationRule,"Default"))i.tv.oASltAvail=i.tv.oASltAvail.concat(l);else if($.cf.compareStrings(i.setting.datasetModificationRule,"ReplaceAll"))i.tv.oASltAvail=l;else if($.cf.compareStrings(i.setting.datasetModificationRule,"ReplaceSpecified"))for(var v=0;v<l.length;v++){for(var g=!1,m=l[v],D=0;D<i.tv.oASltAvail.length;D++){var f=i.tv.oASltAvail[D];0===i.compareDateTimes(m.start,f.start)&&0===i.compareDateTimes(m.end,f.end)&&$.cf.compareStrings(m.status,f.status)&&(f=m,g=!0)}g||i.tv.oASltAvail.append(m)}},_dataCleaning:function(e,t){var i=this;$.cf.compareStrings(i.tv.sLoadType,"Load")?i.tv.oAEvents.length>0&&(i.tv.oAEvents=i._sortEvents(i.tv.oAEvents)):($.cf.compareStrings(i.tv.sLoadType,"Prev")||$.cf.compareStrings(i.tv.sLoadType,"Next"))&&(i.tv.oAEvents.length>0&&(null!==e&&null!==t&&i._deleteEventsOutOfDuration(e,t),i.tv.oAEvents=i._sortEvents(i.tv.oAEvents)),i.tv.oASrcCnt.length>0&&null!==e&&null!==t&&i._deleteSourceCountOutOfDuration(e,t),i.tv.oAResSec.length>0&&null!==e&&null!==t&&i._deleteRestrictedSectionsOutOfDuration(e,t),i.tv.oASltAvail.length>0&&null!==e&&null!==t&&i._deleteSlotAvailabilityOutOfDuration(e,t))},_deleteEventsOutOfDuration:function(e,t){var i,n,a=this;for(i=0;i<a.tv.oAEvents.length;i++)n=a.tv.oAEvents[i],$.cf.compareStrings(a.tv.sLoadType,"Prev")?a.compareDateTimes(n.start,t)>0&&(n.id="DEL"):$.cf.compareStrings(a.tv.sLoadType,"Next")&&a.compareDateTimes(n.end,e)<0&&(n.id="DEL");var s=[];for(i=0;i<a.tv.oAEvents.length;i++)n=a.tv.oAEvents[i],$.cf.compareStrings(n.id,"DEL")||s.push(n);a.tv.oAEvents=s},_deleteSourceCountOutOfDuration:function(e,t){var i,n,a=this;for(i=0;i<a.tv.oASrcCnt.length;i++){n=a.tv.oASrcCnt[i];var s=new Date(n.date);$.cf.compareStrings(a.tv.sLoadType,"Prev")?a.compareDates(s,t)>0&&(n.date="DEL"):$.cf.compareStrings(a.tv.sLoadType,"Next")&&a.compareDates(s,e)<0&&(n.date="DEL")}var r=[];for(i=0;i<a.tv.oASrcCnt.length;i++)n=a.tv.oASrcCnt[i],$.cf.compareStrings(n.date,"DEL")||r.push(n);a.tv.oASrcCnt=r},_deleteRestrictedSectionsOutOfDuration:function(e,t){var i,n,a=this;for(i=0;i<a.tv.oAResSec.length;i++)n=a.tv.oAResSec[i],$.cf.compareStrings(a.tv.sLoadType,"Prev")?a.compareDateTimes(n.start,t)>0&&(n.start="DEL"):$.cf.compareStrings(a.tv.sLoadType,"Next")&&a.compareDateTimes(n.end,e)<0&&(n.start="DEL");var s=[];for(i=0;i<a.tv.oAResSec.length;i++)n=a.tv.oAResSec[i],$.cf.compareStrings(n.start,"DEL")||s.push(n);a.tv.oAResSec=s},_deleteSlotAvailabilityOutOfDuration:function(e,t){var i,n,a=this;for(i=0;i<a.tv.oASltAvail.length;i++){n=a.tv.oASltAvail[i];var s=new Date(n.start),r=new Date(n.end);if($.cf.compareStrings(a.tv.sLoadType,"Prev"))a.compareDateTimes(s,t)>0&&(n.start="DEL");else if($.cf.compareStrings(a.tv.sLoadType,"Next")){var o=a.compareDateTimes(s,e),l=a.compareDateTimes(r,t);o<0&&l<0&&(n.start="DEL")}}var d=[];for(i=0;i<a.tv.oASltAvail.length;i++)n=a.tv.oASltAvail[i],$.cf.compareStrings(n.start,"DEL")||d.push(n);a.tv.oASltAvail=d},addEventsForSource:function(e,t){var i=this;e=i.__parseJson(e);for(var n=0;n<i.setting.calDataSource.length;n++){var a=i.setting.calDataSource[n];if(a.sourceId===t){e.length>0&&i._getModifiedEventsArray(e,a.config||{},"string"==typeof a.source&&i._isGoogleCalendarUrl(a.source),!0);break}}},_replaceEventWithId:function(e,t){for(var i=0;i<this.tv.oAEvents.length;i++){var n=this.tv.oAEvents[i];if(parseInt(e)===parseInt(n.id)){n=t;break}}},_replaceEventsWithRule:function(e,t){this._removeEventsWithRule(e),this.tv.oAEvents=this.tv.oAEvents.concat(t)},replaceEvents:function(e){for(var t=0;t<e.length;t++){var i=e[t],n=i.replaceId,a=i.replaceRule;$.cf.isValid(n)?this._replaceEventWithId(n,i.event):$.cf.isValid(a)&&this._replaceEventsWithRule(a,i.events)}},revertToOriginalEvent:function(e,t,i){this.__updateEventWithId(e.calEventId,t,i)&&this.__reloadCurrentView(!0,!1)},_removeEventsWithIds:function(e){for(var t=[],i=0;i<e.length;i++)for(var n=0;n<this.tv.oAEvents.length;n++){var a=this.tv.oAEvents[n];parseInt(a.id)!==parseInt(e[i])&&t.push(a.id)}this.tv.oAEvents=t},_removeEventsWithRule:function(e){for(var t=[],i=0;i<this.tv.oAEvents.length;i++){var n=this.tv.oAEvents[i];e(n)||t.push(n)}this.tv.oAEvents=t},removeEvents:function(e){for(var t=0;t<e.length;t++){var i=e[t],n=i.removeIds,a=i.removeRule;$.cf.isValid(n)&&this._removeEventsWithIds(n),$.cf.isValid(a)&&this._removeEventsWithRule(a)}},_getEventCalendarObject:function(e){for(var t=0;t<this.tv.oAECalendar.length;t++){var i=this.tv.oAECalendar[t];if($.cf.compareStrings(e,i.calendar))return i}return null},getEventWithId:function(e){for(var t=0;t<this.tv.oAEvents.length;t++){var i=this.tv.oAEvents[t];if(i.calEventId===parseInt(e))return i}return{}},__updateEventWithId:function(e,t,i){for(var n=this,a=!1,s=0;s<n.tv.oAEvents.length;s++){var r=n.tv.oAEvents[s];if(r.calEventId===parseInt(e)){r.start=t,r.end=null!==i?i:new Date(t.getTime()+30*$.CalenStyle.extra.iMS.m),n.tv.oAEvents[s]=r,a=!0;break}}return n.tv.oAEvents=n._sortEvents(n.tv.oAEvents),a},_normalizeEndDateTime:function(e){return 0===e.getHours()&&0===e.getMinutes()&&0===e.getSeconds()&&(e=new Date(e.getTime()-$.CalenStyle.extra.iMS.m)),e},_getUnspecifiedEndDateOfEvent:function(e,t){return e?new Date(t.getFullYear(),t.getMonths(),t.getDate()+(this.setting.allDayEventDuration-1),0,0,0,0):new Date(t.getTime()+this.setting.eventDuration*$.CalenStyle.extra.iMS.m)},_getStartAndEndDatesOfEvent:function(e,t,i){var n,a;return e?(n=this.setDateInFormat({date:t},"START"),a=null!==i?this.setDateInFormat({date:i},"START"):this._getUnspecifiedEndDateOfEvent(e,n)):(n=new Date(t),a=null!==i?new Date(i):this._getUnspecifiedEndDateOfEvent(e,n)),[n,a]},__getStartAndEndDatesOfEventForView:function(e,t,i){var n=this,a=n._getStartAndEndDatesOfEvent(e,t,i),s=new Date(a[0]),r=new Date(a[1]),o=n.compareDates(s,n.tv.dVDSDt),l=n.compareDates(r,n.tv.dVDEDt),d=new Date(s),c=new Date(r);return o<0&&(d=n.tv.dVDSDt),l>0&&(c=n.tv.dVDEDt),[d,c]},getDurationOfEventInHHmmFormat:function(e,t){var i=Math.ceil((t.getTime()-e.getTime())/$.CalenStyle.extra.iMS.m);return[Math.floor(i/60),i%60]},__getNumberOfHoursOfEvent:function(e,t,i){var n=this._getStartAndEndDatesOfEvent(e,t,i),a=n[0],s=n[1].getTime()-a.getTime(),r=Math.round(s/$.CalenStyle.extra.iMS.h);return r<=0&&s>0&&(r=1),r},__getDateIndexInView:function(e){for(var t=0;t<this.tv.iNoVDay;t++){var i=this.tv.dAVDt[t];if(0===this.compareDates(i,e))return t}return-1},getNumberOfDaysOfEvent:function(e,t,i,n,a,s){var r,o=this;0===(r=e&&0===o.compareDateTimes(t,i)&&s?new Date(i.getTime()+$.CalenStyle.extra.iMS.d):new Date(i)).getHours()&&0===r.getMinutes()&&r.setMinutes(r.getMinutes()-1);var l=0,d=o.__getNumberOfHoursOfEvent(e,t,r),c=o._getStartAndEndDatesOfEvent(e,t,r),v=c[0],g=c[1],m=o.compareDates(v,g);if(d<=0)e&&m<=0?(d=24,l=1):console.log("Invalid Start And End Dates "+t+" "+r);else if(m<0){var D=o.setDateInFormat({date:v},"START"),f=(o.setDateInFormat({date:g},"START").getTime()-D.getTime())/$.CalenStyle.extra.iMS.h;if(l=Math.round(f/24)+1,a){for(var u=new Date(D),p=0,h=0;h<l;h++)o.__findWhetherDateIsVisibleInCurrentView(u,e||d>23,v,g)&&p++,u.setDate(u.getDate()+1);l=p}}else 0===m&&(a?o.__findWhetherDateIsVisibleInCurrentView(v,e||d>23,v,g)&&(l=1):l=1);return n?[l,d]:l},_sortEvents:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=i.start,a=this.__getNumberOfHoursOfEvent(i.isAllDay,i.start,i.end),s=i.isAllDay||a>23||$.cf.isValid(i.isMarked)&&i.isMarked,r=t+1;r<e.length;r++){var o,l=e[r],d=l.start,c=this.__getNumberOfHoursOfEvent(l.isAllDay,l.start,l.end),v=l.isAllDay||c>23||$.cf.isValid(l.isMarked)&&l.isMarked,g=this.compareDates(n,d),m=this.compareDateTimes(n,d),D=0===g,f=!s&&v,u=s&&v,p=!s&&!v;(g>0||D&&f||D&&m>0&&(u||p)||D&&(f||u||p)&&0===m&&a<c)&&(o=i,i=l,l=o,e[t]=i,e[r]=l,n=i.start,a=c,s=v)}return e},_whetherEventIsBetweenDates:function(e,t,i){var n=e.start,a=e.end,s=e.isAllDay,r=this.compareDates(a,t),o=this.compareDates(n,i);if(0===r&&0===a.getHours()&&0===a.getMinutes())if(s){var l=this.__getNumberOfHoursOfEvent(s,n,a)>0,d=this.__getNumberOfHoursOfEvent(s,t,a)>0;l&&!d&&(r=-1)}else r=-1;return!(!(o<=0)||!(r>=0))},getArrayOfEventsForView:function(e,t){var i=this;e=i.setDateInFormat({date:e},"START"),t=i.setDateInFormat({date:t},"END");for(var n=[],a=[],s=0;s<i.tv.oAEvents.length;s++){var r=i.tv.oAEvents[s];i._whetherEventIsBetweenDates(r,e,t)&&(n.push(r),i.setting.eventFilterCriteria.length>0?i.__whetherToDisplayAnEventOnCalendar(r)&&a.push(r):a.push(r))}return i.setting.eventFilterCriteria.length>0&&i.__setEventCountBasedOnCriteria(n),a},__getSourceCountForDate:function(e){var t,i,n,a,s,r,o,l,d,c=this,v=0;if(c.tv.oASrcCnt.length>0){for(t=0;t<c.tv.oASrcCnt.length;t++)if(n=c.tv.oASrcCnt[t],0===c.compareDates(n.date,e)){v=n.count;break}}else if(null!==c.setting.parentObject)for(i=0;i<c.setting.calDataSource.length;i++)if(a=c.setting.calDataSource[i].config.sourceCountType,$.cf.compareStrings(a,"Event"))for(t=0;t<c.setting.parentObject.tv.oAEvents.length;t++)r=(s=c.setting.parentObject.tv.oAEvents[t]).start,o=s.end,l=c.compareDates(e,r)>=0,d=c.compareDates(e,o)<=0,l&&d&&v++;else if($.cf.compareStrings(a,"FreeTimeSlot")||$.cf.compareStrings(a,"BusyTimeSlot"))for(t=0;t<c.setting.parentObject.tv.oASltAvail.length;t++)r=(s=c.setting.parentObject.tv.oASltAvail[t]).start,o=s.end,l=c.compareDates(e,r)>=0,d=c.compareDates(e,o)<=0,l&&d&&($.cf.compareStrings(a,"FreeTimeSlot")&&$.cf.compareStrings(s.status,"Free")||$.cf.compareStrings(a,"BusyTimeSlot")&&$.cf.compareStrings(s.status,"Busy"))&&v++;return v},getEventCountAndIsMarkedDay:function(e,t){var i,n,a=this.getArrayOfEventsForView(e,e),s=a.length;for(i=0;i<s;i++)if(n=a[i],$.cf.isValid(n.isMarked)&&n.isMarked){var r=n.fromSingleColor?n.textColor:n.backgroundColor;return[s,!0,r=$.cf.compareStrings(r,"")||$.cf.compareStrings(r,"transparent")?"transparent":r]}return[s,!1,""]},_setHeightForEvents:function(){for(var e=0;e<this.setting.viewsToDisplay.length;e++){var t=this.setting.viewsToDisplay[e].viewName,i=$.CalenStyle.extra.oEventClass[t];if($.cf.isValid(i)){var n=$("<div class="+i+"></div>").hide().appendTo("body"),a=$.cf.getSizeValue(n,"height");n.remove(),$.cf.isValid(a)&&a>2&&($.CalenStyle.extra.iEventHeights[t]=a)}}},_generateUniqueColor:function(e){var t,i="";if(this.setting.eventColorsArray.length>e.length)for(var n=0;n<this.setting.eventColorsArray.length;n++){var a=this.setting.eventColorsArray[n];t=!1;for(var s=0;s<e.length;s++){if(a===e[s]){t=!0;break}}t||(i=a)}if($.cf.compareStrings(i,"")){t=!0;for(;t;){if(t=!1,i=this._generateColor(),e.length>0)for(var r=0;r<e.length;r++)if(i===e[r]){t=!0;break}1}}return i},_generateColor:function(){var e=Math.floor(100*Math.random())+100,t=Math.floor(100*Math.random())+100,i=Math.floor(100*Math.random())+100,n=e.toString(16);n=1===n.length?"0"+n:n;var a=t.toString(16);a=1===a.length?"0"+a:a;var s=i.toString(16);return n+a+(s=1===n.length?"0"+s:s)},__bindClick:function(e){for(var t,i=e.data,n=0;n<$.CalenStyle.extra.oArrCalenStyle.length;n++){var a=$.CalenStyle.extra.oArrCalenStyle[n];a.tv.pluginId===i.pluginId&&(t=a)}e.stopPropagation();var s=$(t.elem).find(i.eventElemSelector).hasClass("cEditingEvent"),r=$.cf.getTimestamp()-t.tv.iTSEndEditing,o=$("body").hasClass("br-ie")?900:100;s||!s&&r<o||(t.setting.eventClicked?t.setting.eventClicked.call(t,t.setting.visibleView,i.eventElemSelector,t.getEventWithId(i.eventId)):$.cf.compareStrings(i.url,"")||window.open(i.url,"_blank"))},__getElementsAtPoint:function(e,t){return $("body").find("*").filter(function(){var i=$(this).offset().left,n=i+$(this).width(),a=$(this).offset().top,s=a+$(this).height();return e>=i&&e<=n&&t>=a&&t<=s})}},i.prototype=$.extend(i.prototype,{_arrayContains:function(e,t){for(var i=0;i<e.length;i++)if(e[i]===t)return 1;return 0},_setNextPreviousMonthDates:function(){var e=new Date(this.tv.dCMDt.getTime()-30*$.CalenStyle.extra.iMS.d);e.setDate(15),this.tv.dPMDt=new Date(e);var t=new Date(this.tv.dCMDt.getTime()+30*$.CalenStyle.extra.iMS.d);t.setDate(15),this.tv.dNMDt=new Date(t)},_updateMonthTable:function(){var e=this;e.__getCurrentViewDates();var t="";t+="<thead>",t+="<tr class='cmvMonthTableRowDayHeader'>",e.setting.displayWeekNumInMonthView&&(t+="<td class='cmvDayHeader cmvWeekNumber cmvThinBorderRight cmvFirstColumn'></td>");var i,n=e.setting.weekStartDay,a=e.setting.excludeNonBusinessHours?e.tv.iBsDays:7;for(i=0;i<7;i++){var s="";e.setting.displayWeekNumInMonthView||0!==i||(s="cmvFirstColumn"),(e.setting.excludeNonBusinessHours&&e.tv.bABsDays[n]||!e.setting.excludeNonBusinessHours)&&(t+="<td id='cmvDayName"+(n+1)+"' class='cmvDayHeader cmvTableColumns "+s+"'>"+e.getDateInFormat({iDate:{D:n}},"DDD",!1,!0)+"</td>"),++n>6&&(n=0)}t+="</tr>",t+="</thead>",e.tv.dCMDt=new Date(e.setting.selectedDate),e.tv.dCMDt.setDate(15),e._setNextPreviousMonthDates();var r=$.CalenStyle.extra.dToday.getDate(),o=$.CalenStyle.extra.dToday.getMonth(),l=$.CalenStyle.extra.dToday.getFullYear();t+="<tbody>";for(var d=0,c=1;c<=e.tv.iWkInMonth;c++){t+="<tr id='cmvMonthTableRow"+c+"' class='cmvMonthTableRows'>";if(e.setting.displayWeekNumInMonthView){var v=e.tv.dAVDt[d],g=e.setDateInFormat({date:e.tv.dAVDt[d+6]},"END"),m=e.__getWeekNumber(v,g),D="cmvDay cmvWeekNumber cmvThinBorderRight cmvWeekNumberBorderLeft";1===c?D+=" cmvWeekNumberBorderBottom":c===e.tv.iWkInMonth?D+=" cmvWeekNumberBorderTop":D+=" cmvWeekNumberBorderBottom cmvWeekNumberBorderTop";var f=e._getWeekForDate($.CalenStyle.extra.dToday,!1),u=f[0],p=f[1];0===e.compareDates(u,v)&&0===e.compareDates(p,g)&&(D+=" cTodayHighlightTextColor",!0),t+="<td id='"+v.getTime()+"' class='"+D+"'><span>"+m+"</span></td>"}for(i=0;i<a;i++){var h,y,C,w=e.tv.dAVDt[d],S=w.getDate(),V=w.getMonth(),b=w.getFullYear(),E=e.__getSourceCountForDate(w),T=$.cf.compareStrings(e.setting.eventIndicatorInDatePicker,"DayNumberBold")&&($.cf.compareStrings(e.setting.visibleView,"DatePicker")||null!==e.setting.parentObject)&&E>0?" cBold":"",M="",I="cmvDay cmvTableColumns cmvTableColumn"+i;e.tv.dCMDt.getMonth()!==V?I+=" cmvOtherMonthDay":I+=" cmvCurrentMonthDay",e.setting.displayWeekNumInMonthView||0!==i||(I+=" cmvFirstColumn"),C="cmvDay-"+S+"-"+V+"-"+b;var A=e.setting.selectedDate.getDate(),_=e.setting.selectedDate.getMonth(),k=e.setting.selectedDate.getFullYear();for(S===r&&V===o&&b===l?I+=" cTodayHighlightTextColor":S===A&&V===_&&b===k&&(I+=" cCurrentDateHighlightColor"),($.cf.compareStrings(e.setting.visibleView,"MonthView")&&!$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")||$.cf.compareStrings(e.setting.visibleView,"DatePicker"))&&(I+=" clickableLink"),e.tv.bABsDays[w.getDay()]||(I+=" cNonBusinessHoursBg"),h=e._getRestrictedSectionForCurrentView(w),y=0;y<h.length;y++){var H=h[y],F=new Date(H.start),N=0===e.compareDates(w,F),x=new Date(H.end),B=0===e.compareDates(w,x);N||(F=e._normalizeDateTime(w,"START","T")),B||(x=e._normalizeDateTime(w,"END","T")),(Math.round((x.getTime()-F.getTime())/$.CalenStyle.extra.iMS.h)>23||H.isAllDay)&&($.cf.isValid(H.backgroundColor)&&(M="style='background: "+$.cf.addHashToHexcode(H.backgroundColor)+";'"),$.cf.isValid(H.class)&&(I+=" "+H.class))}t+="<td id='"+C+"' class='"+I+"' "+M+">",t+="<span class='cmvDayNumber"+T+"'>"+e.getNumberStringInFormat(S,0,!0)+"</span>",$.cf.compareStrings(e.setting.visibleView,"MonthView")?($.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&(t+="<span class='cmvDisplayAllEvents'>..</span>"),$.cf.compareStrings(e.setting.eventIndicatorInMonthView,"DayHighlight")?t+="<div class='cmvMonthTableRowIndicator' ><span>&nbsp;</span></div>":$.cf.compareStrings(e.setting.eventIndicatorInMonthView,"Custom")&&(t+="<div class='cmvMonthTableRowCustom' >&nbsp;</div>")):$.cf.compareStrings(e.setting.visibleView,"DatePicker")&&(t+="<div class='cElemDatePickerCustom'>",$.cf.compareStrings(e.setting.eventIndicatorInDatePicker,"Dot")&&E>0&&(t+="<span class='cElemDatePickerDot'></span>"),t+="</div>"),t+="</td>",d++}t+="</tr>"}t+="</tbody>",$(e.elem).find(".cmvMonthTableMain").html(t),$(e.elem).find(".cTodayHighlightTextColor").find(".cmvDayNumber").addClass("cTodayHighlightCircle"),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ModifyEventList")&&$(e.elem).find(".cCurrentDateHighlightColor").find(".cmvDayNumber").addClass("cCurrentHighlightCircle"),e.adjustMonthTable(),e.setting.addEventsInMonthView||e.adjustMonthTable(),e._setMonthStrings(),$.CalenStyle.extra.bTouchDevice||e._addHoverClassesInMonthView()},_updateMonthTableContents:function(e){var t=this;t.setting.addEventsInMonthView&&!$.cf.compareStrings(t.setting.visibleView,"DatePicker")?$.cf.compareStrings(t.setting.eventIndicatorInMonthView,"DayHighlight")?t._updateDayHighlightViewInMonthView(e):$.cf.compareStrings(t.setting.eventIndicatorInMonthView,"Events")?t._addEventContInMonthView(e):$.cf.compareStrings(t.setting.eventIndicatorInMonthView,"Custom")&&t.__parseData(e,function(){t.setting.modifyCustomView&&t.setting.modifyCustomView.call(t,t.tv.dAVDt),$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"ChangeDate")||t._displayEventOnDayClickInMonthView(),t.adjustMonthTable(),t.__modifyFilterBarCallback()}):$.cf.compareStrings(t.setting.visibleView,"DatePicker")&&t._updateDayHighlightInDatePickerView(e),$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")||t._makeDayClickableInMonthView()},_updateDayHighlightInDatePickerView:function(e){var t=this;t.__parseData(e,function(){for(var e=0;e<t.tv.dAVDt.length;e++){var i=t.tv.dAVDt[e],n="#cmvDay-"+i.getDate()+"-"+i.getMonth()+"-"+i.getFullYear(),a=$(t.elem).find(n),s=t.__getSourceCountForDate(i),r=($.cf.compareStrings(t.setting.visibleView,"DatePicker")||null!==t.setting.parentObject)&&s>0?" cBold":"";if($.cf.compareStrings(t.setting.eventIndicatorInDatePicker,"DayNumberBold"))""!==r&&a.find(".cmvDayNumber").addClass(r);else if($.cf.compareStrings(t.setting.eventIndicatorInDatePicker,"Dot")&&0===a.find(".cElemDatePickerCustom").length){var o="<div class='cElemDatePickerCustom'>";o+="<span class='cElemDatePickerDot'></span>",o+="</div>",a.append(o)}}})},_updateDayHighlightViewInMonthView:function(e){var t=this;t.__parseData(e,function(){for(var e=0;e<t.tv.dAVDt.length;e++){var i=t.tv.dAVDt[e],n="#cmvDay-"+i.getDate()+"-"+i.getMonth()+"-"+i.getFullYear(),a=t.setDateInFormat({date:i},"START"),s=t.setDateInFormat({date:i},"END"),r=t.getEventCountAndIsMarkedDay(a,s),o=r[0],l=r[1],d=r[2],c=$(t.elem).find(n+" .cmvMonthTableRowIndicator");0!==o&&(o<t.setting.averageEventsPerDayForDayHighlightView?o*=100/t.setting.averageEventsPerDayForDayHighlightView:o=100,o>100&&(o=100)),l&&(c.addClass("cMarkedDayLineIndicator"),$.cf.isValid(d)&&c.find("span").css({background:d})),c.find("span").css({width:o+"%"}),$.cf.compareStrings(t.setting.visibleView,"MonthView")&&$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&0===$(t.elem).find(".cmvMonthTableMain "+n).has(".cmvDisplayAllEvents").length&&$(t.elem).find(".cmvMonthTableMain "+n).prepend("<span class='cmvDisplayAllEvents'>...</span>")}$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"ChangeDate")||t._displayEventOnDayClickInMonthView(),t.adjustMonthTable(),t.addRemoveViewLoader(!1,"cEventLoaderBg"),t.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),t.__modifyFilterBarCallback()})},updateMonthTableAndContents:function(e){var t=this;$(t.elem).find(".cmvDisplayAllEvents").remove(),$(t.elem).find(".cmvEvent").remove(),$(t.elem).find(".cdmvEvent").remove(),$(t.elem).find(".cHiddenEventsIndicator").remove(),$(t.elem).find(".cHiddenEventsCont").remove(),$(t.elem).find(".cmvDialog").remove(),t._updateMonthTable(),t._updateMonthTableContents(e)},_addHoverClassesInMonthView:function(){$(this.elem).find(".cContHeaderLabelMonth, .cContHeaderLabelYear").hasClass("sClickableClass")&&$(this.elem).find(".cContHeaderLabelMonth, .cContHeaderLabelYear").hover(function(e){$(this).addClass("cContHeaderLabelHover")},function(e){$(this).removeClass("cContHeaderLabelHover")}),$(this.elem).find(".cmvDay").hover(function(e){$(this).addClass("cContHeaderButtonsHover")},function(e){$(this).removeClass("cContHeaderButtonsHover")})},_addEventContInMonthView:function(e){var t,i,n,a,s,r,o,l,d,c,v,g,m,D,f,u,p,h,y=this,C="",w=null,S=null,V=0,b=!1;$.cf.compareStrings(y.setting.visibleView,"MonthView")&&y.setting.displayEventsInMonthView&&(C+="<div class='cmvEventCont'><div class='cmvEventContSmall'></div><div class='cmvEventContAllDay'></div></div>",$(y.elem).find(".cmvMonthTableMain .cmvDay").not(".cmvWeekNumber").append(C)),$(y.elem).find(".cmvDay").droppable({scope:"Events",over:function(e,C){for(i=$(C.draggable),a=i.attr("id"),s=i.attr("data-id"),r=y.getEventWithId(s),o=".Event-"+s,w=null,S=null,V=0,$(y.elem).find(o).addClass("cEditingEventClone"),null!==r.start&&(w=r.start),null!==r.end&&(S=r.end),null!==r.isAllDay&&(V=r.isAllDay),d=y.getNumberOfDaysOfEvent(V,w,S,!0,!1,!0),c=d[0],v=d[1],g=$(this).attr("id"),m=g.split("-"),D=new Date(m[3],m[2],m[1],0,0,0,0),f=new Date(D),u=!1,p=y.setDateInFormat({iDate:{d:parseInt(m[1]),M:parseInt(m[2]),y:parseInt(m[3]),H:w.getHours(),m:w.getMinutes(),s:w.getSeconds()}},""),h=new Date(p.getTime()+(S.getTime()-w.getTime())),y.tv.bChkDroppable&&(i=$(y.elem).find("#"+a+".ui-draggable-dragging"),n=i.attr("data-droppableid"),(b=y._findWhetherEventEnteredNonDroppableZone(p,h,V,c,n))?(i.addClass("cCursorNotAllowed"),i.find(".cEventLink").addClass("cCursorNotAllowed")):(i.removeClass("cCursorNotAllowed"),i.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(y.elem).find(".cmvDay").removeClass("cActivatedCell"),t=0;t<c;t++)t>0&&(f=new Date(f.getTime()+$.CalenStyle.extra.iMS.d),u=y.compareDates(f,y.tv.dVEDt)),(0===t||u<=0)&&y.__findWhetherDateIsVisibleInCurrentView(f,V||v>23,w,S)&&(l="#cmvDay-"+f.getDate()+"-"+f.getMonth()+"-"+f.getFullYear(),$(y.elem).find(l).addClass("cActivatedCell"))},drop:function(e,t){i=$(t.draggable),a=i.attr("id"),s=i.attr("data-id"),r=y.getEventWithId(s),o=".Event-"+s,w=null,S=null,V=0,null!==r.start&&(w=r.start),null!==r.end&&(S=r.end),null!==r.isAllDay&&(V=r.isAllDay),d=y.getNumberOfDaysOfEvent(V,w,S,!0,!1,!0),c=d[0],v=d[1],g=$(this).attr("id"),m=g.split("-"),p=y.setDateInFormat({iDate:{d:parseInt(m[1]),M:parseInt(m[2]),y:parseInt(m[3]),H:w.getHours(),m:w.getMinutes(),s:w.getSeconds()}},""),h=new Date(p.getTime()+(S.getTime()-w.getTime())),y.tv.bChkDroppable&&(i=$(y.elem).find("#"+a+".ui-draggable-dragging"),n=i.attr("data-droppableid"),b=y._findWhetherEventEnteredNonDroppableZone(p,h,V,c,n),i.removeClass("cCursorNotAllowed"),i.find(".cEventLink").removeClass("cCursorNotAllowed"));var l=y.compareDates(S,$.CalenStyle.extra.dToday);if(l>=0?$(y.elem).find(o).removeClass("cEditingEventClone"):l<0&&$(y.elem).find(o).removeClass("cEditingEventClone").addClass("cBlurredEvent"),y.tv.draggableParent===$(this).attr("id")||b)return y.tv.iTSEndEditing=$.cf.getTimestamp(),y.tv.bDroppedInDifferent=!1,setTimeout(function(){var e=$("#"+a+".cEventClone");$("#"+a).attr("style",e.attr("style")),$(o).removeClass("cEditingEvent cEditingEventUI cEventBeingDragged"),e.remove()},300),!0;y.tv.bDroppedInDifferent=!0;$.cf.compareStrings(y.setting.visibleView,"MonthView"),y.__updateEventWithId(s,p,h)&&($(y.elem).find(".cmvDisplayAllEvents").remove(),$(y.elem).find(".cmvEvent").remove(),$(y.elem).find(".cdmvEvent").remove(),$(y.elem).find(".cHiddenEventsIndicator").remove(),$(y.elem).find(".cHiddenEventsCont").remove(),$(y.elem).find(".cmvDialog").remove(),y._addEventsInMonthView(null),$.cf.compareStrings(y.setting.visibleView,"DetailedMonthView")&&y._adjustEventsInMonthView()),$(y.elem).find(".cmvDay").removeClass("cActivatedCell"),y.setting.saveChangesOnEventDrop&&y.setting.saveChangesOnEventDrop.call(y,r,w,S,p,h),y.tv.iTSEndEditing=$.cf.getTimestamp()}}),$.cf.compareStrings(y.setting.visibleView,"MonthView")&&y.adjustMonthTable(),y.__parseData(e,function(){y._addEventsInMonthView(null),y.adjustMonthTable(),y.__modifyFilterBarCallback()})},_addEventsInMonthView:function(e){var t,i,n,a,s=this,r=new Date($.CalenStyle.extra.dToday);r.setDate(1);var o=$.cf.isValid(s.setting.hideEventIcon[s.setting.visibleView])?s.setting.hideEventIcon[s.setting.visibleView]:!!$.cf.isValid(s.setting.hideEventIcon.Default)&&s.setting.hideEventIcon.Default,l=$.cf.isValid(s.setting.hideEventTime[s.setting.visibleView])?s.setting.hideEventTime[s.setting.visibleView]:!!$.cf.isValid(s.setting.hideEventTime.Default)&&s.setting.hideEventTime.Default,d=s.setting.is24Hour?"HH:mm":"h[:m]sm",c=s.setting.excludeNonBusinessHours?s.tv.iBsDays:7;if($.cf.isValid(e)&&e.oArrEvents.length>0)t=!0,i=e.oArrEvents,n=e.dDayStart,a=e.dDayEnd;else{$.cf.compareStrings(s.setting.visibleView,"DetailedMonthView")&&$(s.elem).find(".cdmvEventContMain").html(""),i=s.getArrayOfEventsForView(s.tv.dVSDt,s.tv.dVEDt),s.tv.bAWkRw=[];for(var v=0;v<6;v++){for(var g=[],m=0;m<s.tv.iMxEvRw-1;m++)g.push(new Array(0,0,0,0,0,0,0));s.tv.bAWkRw.push(g)}}if(i.length>0){for(var D=$.CalenStyle.extra.iEventHeights[s.setting.visibleView],f="",u=$(s.elem).find(".cmvTableColumn0").width(),p=s._getHeightForAllDayEventInMonthView(),h=s._getHeightForSmallEventInMonthView(),y=s._getMarginValueForSmallEventInMonthView(),C=y+"px "+y+"px",w=0;w<i.length;w++){var S=i[w],V=null,b=null,E=0,T="",M="",I="",A=!1,_=!1,k="",H="Event-"+S.calEventId;null!==S.start&&(V=S.start),null!==S.end&&(b=S.end),null!==S.isAllDay&&(E=S.isAllDay),null!==S.title&&(T=S.title),null!==S.desc&&(M=S.desc),null!==S.type&&S.type,null!==S.url&&(I=S.url),null!==S.droppableId&&(k=S.droppableId),null!==S.isDragNDropInMonthView&&(_=S.isDragNDropInMonthView),null!==S.isMarked&&(A=S.isMarked),A&&(E=!0);var F=s.getNumberOfDaysOfEvent(E,V,b,!0,!0,!0),N=F[0],x=F[1];if(N>0){var B,L,O,P,R,W,j,z,Y,q,U,Q,Z,J,G,X,K,ee,te,ie="",ne=N,ae="",se=0,re=new Date(V),oe=new Date(b),le="",de="",ce="",ve="",ge="",me=!1,De=!1,fe=!1,ue=!1,pe=0;if($.cf.compareStrings(s.setting.visibleView,"DetailedMonthView")){if(f=".cdmvEvent",t)s.compareDates(V,n)<0&&Math.abs(s.__getDifference("m",n,V))>1&&(me=!0,ae="Left",re=new Date(n)),s.compareDates(a,b)<0&&Math.abs(s.__getDifference("m",a,b))>1&&(De=!0,ae="Right",oe=new Date(a)),ie="#cmvDay-"+n.getDate()+"-"+n.getMonth()+"-"+n.getFullYear();else{for(s.compareDates(V,s.tv.dVSDt)<0&&Math.abs(s.__getDifference("m",s.tv.dVSDt,V))>1&&(ae="Left",re=new Date(s.tv.dVSDt)),s.compareDates(s.tv.dVEDt,b)<0&&Math.abs(s.__getDifference("m",s.tv.dVEDt,b))>1&&(ae="Right",oe=new Date(s.tv.dVEDt)),O=new Date(re),te=!0;!(s.__findWhetherDateIsVisibleInCurrentView(O,E||x>23,re,oe)||(O.setDate(O.getDate()+1),te=!1,s.compareDates(O,oe)>0)););ie="#cmvDay-"+(re=new Date(O)).getDate()+"-"+re.getMonth()+"-"+re.getFullYear()}if(L=(ee=s.getNumberOfDaysOfEvent(E,re,oe,!0,!0,te))[0],ne=ee[0],(se=ee[1])>0){Q="cdmvEvent ",j=S.backgroundColor,j=!$.cf.isValid(j)||$.cf.compareStrings(j,"transparent")?"transparent":j,z=S.borderColor||$.cf.addHashToHexcode(s.setting.borderColor),z=!$.cf.isValid(z)||$.cf.compareStrings(z,"transparent")?"transparent":z,Y=S.textColor||$.cf.addHashToHexcode(s.setting.textColor),Y=!$.cf.isValid(Y)||$.cf.compareStrings(Y,"transparent")?$.cf.addHashToHexcode(s.setting.textColor):Y,q=$.cf.isValid(S.nonAllDayEventsTextColor)?S.nonAllDayEventsTextColor:S.backgroundColor,q=!$.cf.isValid(q)||$.cf.compareStrings(q,"transparent")?S.backgroundColor:q,!0===E||x>23?A?S.fromSingleColor?(le+="background: "+j+"; ",le+="border-color: "+z+"; ",le+="color: "+Y+"; ",ce+="color: "+Y+"; ",de="background: "+Y+"; color: #FFFFFF","background: "+Y+"; "):(z=j,le+="background: "+$.cf.getRGBAString(j,.1)+"; ",le+="border-color: "+z+"; ",le+="color: "+j+"; ",ce+="color: "+j+"; ",de="background: "+j+"; color: "+Y,"background: "+j+"; "):(le+="background: "+j+"; ",le+="border-color: "+z+"; ",le+="color: "+Y+"; ",ce+="color: "+Y+"; ",de="color: "+Y+"; ","background: "+Y+"; "):s.setting.onlyTextForNonAllDayEvents?(Q+="cEventOnlyText ",le+="color: "+q+"; ",le+="border-color: transparent; ",ne=1,ae="",ce+="color: "+q+"; ",de="color: "+q+"; ","background: "+q+"; "):(le+="background: "+j+"; ",le+="border-color: "+z+"; ",le+="color: "+Y+"; ",ce+="color: "+Y+"; ",de="color: "+Y+"; ","background: "+Y+"; "),ge="border-color: "+(S.fromSingleColor?Y:"#000000"),U=A?$.cf.isValid(S.icon)&&"Dot"!==S.icon?S.icon:"cs-icon-Mark":$.cf.isValid(S.icon)?S.icon:s.setting.eventIcon,s.compareDates(b,r)<0&&(Q+="cBlurredEvent "),_&&(Q+="EventDraggable cDragNDrop "),s.setting.isTooltipInMonthView&&(Q+="cEventTooltip "),Q+=H,A&&(Q+=" cMarkedDayEvent"),T,M;var he,$e=$(s.elem).find(ie).parent().attr("id"),ye=parseInt($e.replace("cmvMonthTableRow",""))-1,Ce=$(s.elem).find(ie).index();if(s.setting.displayWeekNumInMonthView&&Ce--,t)xe=H+"-Hidden",we=(be=0)+"|"+((Te=w)+1)+"|"+(Me=0)+"|"+(Ie=1),ve=le,ve+="height: "+(D+"px")+"; ","transparent"===z&&(ve+="border-width: 0px; "),J="<div id='"+xe+"' class='"+(Q+=" cHiddenEvent")+"' style='"+ve+"'  data-pos='"+we+"' "+($.cf.isValid(k)?"data-droppableid='"+k+"'":"")+" title='' data-id='"+S.calEventId+"'>",J+="<a class='cEventLink' style='"+ce+"'>",he="",De&&me?(J+="<span class='"+(he="cPartialEvent")+" cPartialEventLeft' style='"+ge+"'></span>",J+="<span class='"+he+" cPartialEventRight' style='"+ge+"'></span>"):(De||me)&&(he="cPartialEvent",me&&(he+=" cPartialEventLeft"),De&&(he+=" cPartialEventRight"),J+="<span class='"+he+"' style='"+ge+"'></span>"),A?(J+="<span class='cdmvEventTitle'>"+T+"</span>",J+="<span class='cdmvEventIcon "+U+"' style='"+de+"'></span>"):(!l&&!1===E&&(1===N||N>1&&!me&&De)&&(J+="<span class='cdmvEventTime'>"+s.getDateInFormat({date:V},d,s.setting.is24Hour,!0)+"</span>"),!l&&!1===E&&(1===N||N>1&&me&&!De)&&(J+="<span class='cdmvEventTimeRight'>"+s.getDateInFormat({date:b},d,s.setting.is24Hour,!0)+"</span>"),o||$.cf.compareStrings(U,"Dot")||(J+="<span class='cdmvEventIcon "+U+"' style='"+de+"'></span>"),J+="<span class='cdmvEventTitle'>"+T+"</span>"),J+="</a>",J+="</div>",$(s.elem).find(".cHiddenEventsCont").append(J),G="#"+xe,K=(X=$(s.elem).find(G)).find(".cEventLink"),Z={},W=s.getEventDateTimeString(V,b,E,"&&").split("&&"),Z.title=T,Z.startDateTime=W[0],Z.endDateTime=W[1],X.data("tooltipcontent",Z),s.setting.eventRendered&&s.setting.eventRendered.call(s,S,X,K,s.setting.visibleView,!0),($.cf.isValid(I)||s.setting.eventClicked)&&K.on($.CalenStyle.extra.sClickHandler,{url:I,eventId:S.calEventId,eventElemSelector:G,view:"MonthView",pluginId:s.tv.pluginId},s.__bindClick);else for(var we,Se=0,Ve=0,be=ye;be<s.tv.bAWkRw.length;be++){H="Event-"+S.calEventId;var Ee=s.tv.bAWkRw[be],Te=-1;if(me=!1,De=!1,$.cf.compareStrings(ae,"Left")&&(me=!(Se>0)),$.cf.compareStrings(ae,"Right")&&(De=!0),!(Se<ne))break;var Me=Se>0&&!fe&&!ue?0:Ce,Ie=ne-Se,Ae=(s.setting.excludeNonBusinessHours?s.tv.iBsDays:7)-Me;fe=!1,ue=!1,pe=0,Ie>Ae&&(Ie=Ae,De=!0),Se>0&&(me=!0);var _e,ke,He,Fe,Ne=Me+Ie;for(ke=0;ke<Ee.length&&(_e=Ee[ke],-1===Te);ke++){for(Fe=0,He=Me;He<Ne;He++)if(0===_e[He]&&Fe<Ie){if(s.setting.hideExtraEvents?He===Me?Fe++:Fe>0&&Fe++:Fe++,Fe===Ie){Te=ke;break}}else if(s.setting.hideExtraEvents)break;s.setting.hideExtraEvents&&Fe>0&&Fe<Ie&&(Te=ke,De=!0,ue=!0,pe=Fe)}if(Me=Me>c-1?c-1:Me,s.setting.hideExtraEvents&&-1!==Te||!s.setting.hideExtraEvents){-1===Te&&(Ee.push([0,0,0,0,0,0,0]),Te=Ee.length-1),_e=Ee[Te];var xe=H+"-"+ ++Ve;if(we=be+"|"+(Te+1)+"|"+Me+"|"+(ue?pe:Ie),ve=le,ve+="height: "+(D+"px")+"; ","transparent"===z&&(ve+="border-width: 0px; "),J="<div id='"+xe+"' class='"+Q+"' style='"+ve+"'  data-pos='"+we+"' "+($.cf.isValid(k)?"data-droppableid='"+k+"'":"")+" title='' data-id='"+S.calEventId+"'>",J+="<a class='cEventLink' style='"+ce+"'>",he="",De&&me?(J+="<span class='"+(he="cPartialEvent")+" cPartialEventLeft' style='"+ge+"'></span>",J+="<span class='"+he+" cPartialEventRight' style='"+ge+"'></span>"):(De||me)&&(he="cPartialEvent",me&&(he+=" cPartialEventLeft"),De&&(he+=" cPartialEventRight"),J+="<span class='"+he+"' style='"+ge+"'></span>"),A?(J+="<span class='cdmvEventTitle'>"+T+"</span>",J+="<span class='cdmvEventIcon "+U+"' style='"+de+"'></span>"):(!l&&!1===E&&(1===Ve&&!me&&N>1||1===N)&&(J+="<span class='cdmvEventTime'>"+s.getDateInFormat({date:V},d,s.setting.is24Hour,!0)+"</span>"),l||!1!==E||!(ne>1||(ue?pe:Ie)>1||x>23)||De||(J+="<span class='cdmvEventTimeRight'>"+s.getDateInFormat({date:b},d,s.setting.is24Hour,!0)+"</span>"),o||$.cf.compareStrings(U,"Dot")||(J+="<span class='cdmvEventIcon "+U+"' style='"+de+"'></span>"),J+="<span class='cdmvEventTitle'>"+T+"</span>"),J+="</a>",J+="</div>",$(s.elem).find(".cdmvEventContMain").append(J),G="#"+xe,K=(X=$(s.elem).find(G)).find(".cEventLink"),Z={},W=s.getEventDateTimeString(V,b,E,"&&").split("&&"),Z.title=T,Z.startDateTime=W[0],Z.endDateTime=W[1],X.data("tooltipcontent",Z),s.setting.eventRendered&&s.setting.eventRendered.call(s,S,X,K,s.setting.visibleView,!1),($.cf.isValid(I)||s.setting.eventClicked)&&K.on($.CalenStyle.extra.sClickHandler,{url:I,eventId:S.calEventId,eventElemSelector:G,view:"MonthView",pluginId:s.tv.pluginId},s.__bindClick),A)for(B=$(s.elem).find(ie),P=new Date(re),R=0;R<L;R++)R>0&&(P.setDate(P.getDate()+1),ie="#cmvDay-"+P.getDate()+"-"+P.getMonth()+"-"+P.getFullYear(),B=$(s.elem).find(ie)),0===B.find(".cMarkedDayIndicator").length&&B.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>"),$.cf.isValid(j)&&(S.fromSingleColor?B.css({background:j}):B.css({background:$.cf.getRGBAString(j,.1)}));if(s.setting.hideExtraEvents){var Be=Me+(ue?pe:Ie);for(He=Me;He<Be;He++)_e[He]=1,Se++;ue&&be--,ie="#cmvDay-"+(re=new Date(re.getTime()+(Be-Me)*$.CalenStyle.extra.iMS.d)).getDate()+"-"+re.getMonth()+"-"+re.getFullYear(),Ce=$(s.elem).find(ie).index()}else for(He=Me;He<Ne;He++)_e[He]=1,Se++}else{var Le=$(s.elem).find(".cdmvEventContMain"),Oe=s.setDateInFormat({date:re},"START"),Pe=s.setDateInFormat({date:re},"END"),Re=s.getEventCountAndIsMarkedDay(Oe,Pe)[0],We=Oe.getDate()+"-"+Oe.getMonth()+"-"+Oe.getFullYear();H="HiddenEvents-"+We;var je=Re-Ee.length,ze=s.getNumberStringInFormat(je,0,!0),Ye=$(s.elem).find("#cmvDay-"+We),qe=Ye.closest(".cmvMonthTableRows").index(),Ue=Ye.index();if(Ue=s.setting.displayWeekNumInMonthView?Ue-1:Ue,we=qe+"|"+(Ee.length+1)+"|"+Ue+"|1",0===Le.find("#"+H).length&&je>0){var Qe="<span class='cHiddenEventsIndicator clickableLink' id='"+H+"' data-pos='"+we+"'>";Qe+=s.setting.hiddenEventsIndicatorLabel.replace("(count)",ze),Qe+="</span>",Le.append(Qe)}else Le.find("#"+H).html(s.setting.hiddenEventsIndicatorLabel.replace("(count)",ze));Se++,Me!==c-1&&(fe=!0,be--),ie="#cmvDay-"+(re=new Date(re.getTime()+$.CalenStyle.extra.iMS.d)).getDate()+"-"+re.getMonth()+"-"+re.getFullYear(),Ce=$(s.elem).find(ie).index()}}}}else if($.cf.compareStrings(s.setting.visibleView,"MonthView")){f=".cmvEvent";var Ze=0,Je=0;for(s.compareDates(V,s.tv.dVSDt)<0&&(ae="Left",re=new Date(s.tv.dVSDt)),s.compareDates(s.tv.dVEDt,b)<0&&(ae="Right",oe=new Date(s.tv.dVEDt)),O=new Date(re),te=!0;!(s.__findWhetherDateIsVisibleInCurrentView(O,E||x>23,re,oe)||(O.setDate(O.getDate()+1),te=!1,s.compareDates(O,oe)>0)););if(re=new Date(O),ne=(ee=s.getNumberOfDaysOfEvent(E,re,oe,!0,!1,te))[0],se=ee[1],j=S.fromSingleColor?S.textColor:S.backgroundColor,j=$.cf.compareStrings(j,"")||$.cf.compareStrings(j,"transparent")?"transparent":j,A)for(P=new Date(re),R=0;R<ne;R++)R>0&&P.setDate(P.getDate()+1),ie="#cmvDay-"+P.getDate()+"-"+P.getMonth()+"-"+P.getFullYear(),B=$(s.elem).find(ie),$.cf.isValid(j)&&B.css({background:$.cf.getRGBAString(j,.1)});else{!0===E||se>23||(ae="",ne=1);for(var Ge=new Date(re),Xe=Ge.getTime(),Ke=1;Ke<=ne;Ke++){if(s.__findWhetherDateIsVisibleInCurrentView(Ge,E||x>23,re,oe)){ie="#cmvDay-"+Ge.getDate()+"-"+Ge.getMonth()+"-"+Ge.getFullYear();var et=!1;if(1===Ke&&(et=!0),s.setting.displayEventsInMonthView){if(Q="cmvEvent ",!0===E||x>23?(Q+="cmvEventAllDay ",0===s.compareDates(Ge,V)&&1===ne?Q+="cmvEventAllDaySingle ":0===s.compareDates(Ge,V)?Q+="cmvEventAllDayFirst ":0===s.compareDates(Ge,b)?Q+="cmvEventAllDayLast ":Q+="cmvEventAllDayMiddle "):Q+="cmvEventSmall ",s.compareDates(b,r)<0&&(Q+="cBlurredEvent "),_&&(Q+="EventDraggable cDragNDrop "),s.setting.isTooltipInMonthView&&(Q+="cEventTooltip "),Q+=H,T,M,1===E||!0===E||x>23){if(et){for(var tt,it=$(s.elem).find(".cmvMonthTableMain "+ie+" .cmvEventCont .cmvEventContAllDay").children(),nt=[],at=0;at<it.length;at++)nt.push($(s.elem).find(it[at]).position().top);var st=s._getHeightForAllDayEventInMonthView();tt=2;var rt=st+2;if(nt.length>0&&0===Je)if(nt.length<2)for(;1===s._arrayContains(nt,tt);)tt+=rt;else Je=1;Ze=tt}}else{var ot=Math.floor(u/(h+y))-1;$(s.elem).find(".cmvMonthTableMain "+ie+" .cmvEventCont .cmvEventContSmall").children().length>=ot&&(Je=1)}0===Je&&(ve="background: "+j+"; ",ve+=" top: "+Ze+"px;",ve+=!0===E||x>23?" height: "+p+"px;":" height: "+h+"px; width: "+h+"px; margin: "+C+";",Z={},W=s.getEventDateTimeString(V,b,E,"&&").split("&&"),Z.title=T,Z.startDateTime=W[0],Z.endDateTime=W[1],J="<span id='"+H+"' class='"+Q+"' style='"+ve+"' "+($.cf.isValid(k)?"data-droppableid='"+k+"'":"")+" title='' data-id='"+S.calEventId+"'>",J+="</span>",!0===E||x>23?$(s.elem).find(".cmvMonthTableMain "+ie+" .cmvEventCont .cmvEventContAllDay").append(J):$(s.elem).find(".cmvMonthTableMain "+ie+" .cmvEventCont .cmvEventContSmall").append(J))}}Xe+=$.CalenStyle.extra.iMS.d,Ge.setTime(Xe)}G="."+H,Z={},W=s.getEventDateTimeString(V,b,E,"&&").split("&&"),Z.title=T,Z.startDateTime=W[0],Z.endDateTime=W[1],$(s.elem).find(G).data("tooltipcontent",Z),$(s.elem).find(G).on($.CalenStyle.extra.sClickHandler,{url:I,eventId:S.calEventId,eventElemSelector:G,view:"MonthView",pluginId:s.tv.pluginId},s.__bindClick)}}}}t?(s.setting.isTooltipInMonthView&&s._addTooltipInMonthView(".cEventTooltip.cHiddenEvent"),s.setting.isDragNDropInMonthView&&s._makeEventDraggableInMonthView(".EventDraggable.cHiddenEvent")):($.cf.compareStrings(s.setting.actionOnDayClickInMonthView,"ChangeDate")||s._displayEventOnDayClickInMonthView(),s.setting.hideExtraEvents&&s._hiddenEventsIndicatorActionHandler(),s.setting.displayEventsInMonthView&&(s.setting.isTooltipInMonthView&&s._addTooltipInMonthView(".cEventTooltip"),s.setting.isDragNDropInMonthView&&s._makeEventDraggableInMonthView(".EventDraggable")),null!==s.setting.datePickerObject&&s.setting.datePickerObject.refreshView(),s.setting.eventsAddedInView&&s.setting.eventsAddedInView.call(s,s.setting.visibleView,f))}else console.log("to._addEventsInMonthView - No Events");s.addRemoveViewLoader(!1,"cEventLoaderBg"),s.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_hiddenEventsIndicatorActionHandler:function(){var e=this;$(e.elem).find(".cHiddenEventsIndicator").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation();var i,n,a,s,r,o=$(this).attr("id"),l=$(e.elem).find(".cHiddenEventsCont");i=(o=o.replace("HiddenEvents-","")).split("-"),n=new Date(parseInt(i[2]),parseInt(i[1]),parseInt(i[0]),0,0,0,0),a=e.setDateInFormat({date:n},"START"),s=e.setDateInFormat({date:n},"END"),r=e.getArrayOfEventsForView(a,s);var d="#cmvDay-"+o,c=$(e.elem).find(d),v=c.position().left,g=c.closest(".cmvMonthTableRows").position().top,m=c.width(),D="cHiddenEventsContHeader";if(0===e.compareDates(n,$.CalenStyle.extra.dToday)&&(D+=" cHiddenEventsContToday"),$.cf.compareStrings(typeof e.setting.hiddenEventsIndicatorAction,"function"))e.setting.hiddenEventsIndicatorAction.call(e,n,r,!0);else if($.cf.compareStrings(typeof e.setting.hiddenEventsIndicatorAction,"string")&&$.cf.compareStrings(e.setting.hiddenEventsIndicatorAction,"ShowEventDialog")&&r.length>0){l.length>0&&l.remove();var f="<div class='cHiddenEventsCont' data-date='"+o+"'></span>";f+="<span class='"+D+"'>",f+=e.getDateInFormat({date:n},"DDD MMM dd, yyyy",!1,!0),f+="<span class='cHiddenEventsContClose'>&times;</span>",f+="</span>",f+="</div>",$(e.elem).find(".cdmvEventContMain").append(f);var u={};l=$(e.elem).find(".cHiddenEventsCont"),u.oArrEvents=r,u.dDayStart=a,u.dDayEnd=s,e._addEventsInMonthView(u),l.css({left:v,top:g,width:m+m/2}),e._adjustEventsInMonthView(!0),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(t){t.stopPropagation(),e._endHiddenEventsIndicatorHandlerAction()}),$(e.elem).find(".cdmvEventContMain, .cdmvEvent:not(.cHiddenEvent), .cdmvEvent:not(.cHiddenEvent) .cEventLink").on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(t){t.stopPropagation(),e._endHiddenEventsIndicatorHandlerAction()}),l.find(".cHiddenEventsContClose").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),e._endHiddenEventsIndicatorHandlerAction()})}})},_endHiddenEventsIndicatorHandlerAction:function(){var e=this;if($.cf.compareStrings(typeof e.setting.hiddenEventsIndicatorAction,"function"))e.setting.hiddenEventsIndicatorAction.call(e,null,null,!1);else if($.cf.compareStrings(typeof e.setting.hiddenEventsIndicatorAction,"string")&&$.cf.compareStrings(e.setting.hiddenEventsIndicatorAction,"ShowEventDialog")){var t=$(e.elem).find(".cHiddenEventsCont");t.find(".cHiddenEvent").remove(),t.remove()}},_displayEventOnDayClickInMonthView:function(){var e=this;if($.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"DisplayEventListDialog"))e._displayEventsForDayInDialog(),$(document).off($.CalenStyle.extra.sClickHandler+".CalenStyleDialog"),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(t){e._closeDialogOfEventsForDay()});else if(e.tv.bCMVDisEvLst){var t="";e.setting.displayEventsForPeriodInList&&(t=e.setting.displayEventsForPeriodInList.call(e,e.setDateInFormat({date:e.setting.selectedDate},"START"),e.setDateInFormat({date:e.setting.selectedDate},"END"))||""),$(e.elem).find(".cListOuterCont").html(t),e.setting.eventListAppended&&e.setting.eventListAppended.call(e)}},_adjustEventsInMonthView:function(e){var t=this;if($.cf.compareStrings(t.setting.visibleView,"DetailedMonthView")){var i=$(t.elem).find(".cmvMonthTableRows").css("min-height"),n=$.CalenStyle.extra.iEventHeights[t.setting.visibleView],a=$(t.elem).find(".cdmvEvent, .cHiddenEventsIndicator"),s=0,r=$(t.elem).find(".cdmvEventContMain").width(),o=0,l=30,d=0;if(i=parseInt(i.replace("px","")),t.setting.hideExtraEvents)s=$(t.elem).find(".cmvMonthTableMain").height(),o=$(t.elem).find(".cmvDay").width(),o=(o+=o/2)<200?200:o;else{s+=$(t.elem).find(".cmvMonthTableRowDayHeader").height();for(var c=0;c<t.tv.bAWkRw.length;c++){var v=30+t.tv.bAWkRw[c].length*n;v<i&&(v=i),$(t.elem).find("#cmvMonthTableRow"+(c+1)).css({height:v}),s+=v}$(t.elem).find(".cmvMonthTableMain").css({height:s}),$(t.elem).find(".cdmvEventContMain").css({height:s})}var g,m,D,f=$(t.elem).find(".cmvMonthTableMain").height();t.setting.hideExtraEvents?($(t.elem).find(".cmvTableContainer").height()<30&&$(t.elem).find(".cmvTableContainer").css({height:f}),$(t.elem).find(".cmvTableContainerOuter").height()<30&&$(t.elem).find(".cmvTableContainerOuter").css({height:f}),g=$(t.elem).find(".calendarContInner").height(),g=f+($(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").height():0),t.tv.bDisABar&&(g+=$(t.elem).find(".cActionBar").height()),$(t.elem).find(".calendarContInner").css({height:g}),m=g,t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&(m=g+$(t.elem).find(".cFilterBar").height()),$(t.elem).find(".calendarCont").css({height:m})):($(t.elem).find(".cmvTableContainer").css({height:f}),$(t.elem).find(".cmvTableContainerOuter").css({height:f}),g=f+($(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").height():0),t.tv.bDisABar&&(g+=$(t.elem).find(".cActionBar").height()),$(t.elem).find(".calendarContInner").css({height:g}),m=g,t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&(m+=$(t.elem).find(".cFilterBar").height()),$(t.elem).find(".calendarCont").css({height:m}),D=m,$(t.elem).find(".calendarCont").parent().css({height:D})),t.tv.bDisFBar&&$.cf.compareStrings(t.setting.filterBarPosition,"Bottom")&&$(t.elem).find(".cFilterBar").css({top:g}),t.tv.iDocHtPrev<$(document).height()?$(window).height()<$(document).height()&&t.adjustMonthTable():$(window).height()>$(document).height()&&t.adjustMonthTable();$.CalenStyle.extra.iBorderOverhead;$(t.elem).find(".cContHeader").length>0&&$(t.elem).find(".cContHeader").outerHeight(),t.tv.bDisABar&&$(t.elem).find(".cActionBar").outerHeight(),t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&$(t.elem).find(".cFilterBar").outerHeight(),t.tv.bCMVDisEvLst&&$(t.elem).find(".cListOuterCont").height();for(var u=0;u<a.length;u++){var p,h,y,C,w=a[u],S=$(t.elem).find(w).attr("data-pos").split("|"),V=parseInt(S[0])+1,b=parseInt(S[1]),E=parseInt(S[2]),T=parseInt(S[3]);if($(w).hasClass("cHiddenEvent"))p=0===d?30:p+n+2,h=10,y=o-25,l+=n+2,d++;else if(!e)if(p=$(t.elem).find("#cmvMonthTableRow"+V).position().top,h=$(t.elem).find(".cmvTableColumn"+E).position().left,t.setting.hideExtraEvents&&$(t.elem).find("#cmvMonthTableRow"+V).height()<40){var M=$(".cmvDayNumber").width();y=$(t.elem).find(".cmvTableColumn"+E).width()-(M-10),p+=6,h+=M}else p+=30+(b-1)*(n+1),h+=2*$.CalenStyle.extra.iBorderOverhead,y=$(t.elem).find(".cmvTableColumn"+E).width(),T>1&&(C=E+(T-1),y=$(t.elem).find(".cmvTableColumn"+C).position().left+2*$.CalenStyle.extra.iBorderOverhead+$(t.elem).find(".cmvTableColumn"+C).width()-h),y-=2*$.CalenStyle.extra.iBorderOverhead;if($(w).css({left:h,top:p,width:y}),!$(w).hasClass("cHiddenEventsIndicator")){var I=$(w).find(".cdmvEventTitle"),A=$(w).height(),_=$(w).find(".cdmvEventIcon"),k=null!==_?_.outerWidth(!0):0,H=$(w).find(".cdmvEventTime"),F=null!==H?H.outerWidth(!0):0,N=0,x=$(w).find(".cdmvEventTimeRight");null!==x&&(N=null!==x?x.outerWidth(!0):0);var B=$(w).find(".cPartialEventLeft").outerWidth(!0)+$(w).find(".cPartialEventRight").outerWidth(!0),L=y-(k+F+N+10*$.CalenStyle.extra.iBorderOverhead+B);I.css({height:A,"line-height":A+"px",width:L}),H.css({height:A,"line-height":A+"px"}),null!==x&&x.css({height:A,"line-height":A+"px"})}}var O=$(t.elem).find(".cHiddenEventsCont");if(t.setting.hideExtraEvents&&O.length>0){var P=O.position().left,R=O.position().top;l+=10,P=P+(o=o>r?r-10:o)>r?r-o-1:P,R=R+(l=l>s?s-10:l)>s?s-l-2:R,O.css({width:o,height:l,left:P,top:R})}t.setting.isDragNDropInMonthView&&t._makeEventDraggableInMonthView(".EventDraggable")}},_displayEventsForDayInDialog:function(){var e=this,t=$(e.elem).find(".calendarCont").parent().outerWidth(),i=$(e.elem).find(".calendarCont").parent().outerHeight();$(e.elem).find(".cmvDay").css("cursor","pointer"),$(e.elem).find(".cmvDay, .cmvDisplayAllEvents").off($.CalenStyle.extra.sClickHandler),$(e.elem).find(".cmvDay, .cmvDisplayAllEvents").on($.CalenStyle.extra.sClickHandler,function(n){n.stopPropagation();var a,s=$(this).hasClass("cmvDay")?$(this):$(this).parent(),r=s.attr("id"),o=e._getDateForDayIdInMonthView(r),l=e.setting.is24Hour?"HH:mm":"h[:m]sm",d="cmvDialog-"+o.getDate()+"-"+o.getMonth()+"-"+o.getFullYear(),c=$(e.elem).find(".cmvDialog");if(null!==c&&(a=c.attr("data-date"),c.remove(),a===d))return!1;var v=e.getArrayOfEventsForView(o,o),g={};if(g.x=n.pageX||n.originalEvent.touches[0].pageX||n.originalEvent.changedTouches[0].pageX,g.y=n.pageY||n.originalEvent.touches[0].pageY||n.originalEvent.changedTouches[0].pageY,e.setting.displayEventListDialog)e.setting.displayEventListDialog.call(e,o,v,g);else if(v.length>0){var m=s.parent().attr("id"),D=parseInt(m.replace("cmvMonthTableRow","")),f=0,u=o.getDay();f=u<e.setting.weekStartDay?6-e.setting.weekStartDay+u+1:u-e.setting.weekStartDay;var p=s.height(),h=s.width(),y=3*p,C=1.25*h;C=C<200?200:C,t=$(e.elem).find(".calendarCont").parent().outerWidth(),i=$(e.elem).find(".calendarCont").parent().outerHeight();var w="";w+="<div class='cmvDialog' data-date='"+d+"'>",w+="<span class='cmvDialogTooltip'></span>",w+="<div class='cmvDialogInnerCont'>",w+="<table class='cmvDialogTable'>";for(var S=0;S<v.length;S++){var V,b,E,T,M,I=v[S],A=I.title,_=I.id,k=I.start,H=I.end,F=I.isAllDay,N=I.isMarked,x="cmvDialogEvent",B="",L="",O=$.cf.isValid(e.setting.hideEventIcon[e.setting.visibleView])?e.setting.hideEventIcon[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventIcon.Default)&&e.setting.hideEventIcon.Default,P=$.cf.isValid(e.setting.hideEventTime[e.setting.visibleView])?e.setting.hideEventTime[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventTime.Default)&&e.setting.hideEventTime.Default,R="",W=e.compareDates(k,o),j=e.compareDates(H,o);F?(T="All Day",M=0!==j?$.cf.compareStrings(e.setting.duration,"Default")?e.__getDurationBetweenDates(o,H,"dhm",!1,!1):e.setting.duration.call(e,o,H,"dhm"):""):(T=0===W?e.getDateInFormat({date:k},l,e.setting.is24Hour,!0):0===j?"Ends "+e.getDateInFormat({date:H},l,e.setting.is24Hour,!0):"All Day",M=0===W&&0===j?$.cf.compareStrings(e.setting.duration,"Default")?e.__getDurationBetweenDates(k,H,"dhm",!1,!1):e.setting.duration.call(e,k,H,"dhm"):$.cf.compareStrings(e.setting.duration,"Default")?e.__getDurationBetweenDates(o,H,"dhm",!1,!1):e.setting.duration.call(e,o,H,"dhm")),$.cf.isValid(T)&&(R+="<span class='cmvDialogTimeStart'>"+T+"</span>"),$.cf.isValid(M)&&(R+="<span class='cmvDialogTimeDuration'>"+M+"</span>"),V=I.fromSingleColor?I.textColor:I.backgroundColor,b=I.fromSingleColor?I.backgroundColor:$.cf.addHashToHexcode(V,"0.1"),N?(x+=" cMarkedDayEvent",B="background: "+b+";",L="color: "+V+";",E=$.cf.isValid(I.icon)&&"Dot"!==I.icon?I.icon:"cs-icon-Mark"):("background: "+V+";",L="color: "+V+";",E=$.cf.isValid(I.icon)?I.icon:e.setting.eventIcon),w+="<tr id='cmvDialogEvent-"+_+"' class='"+x+"'>",w+="<td style='"+B+"'>",w+="<div>",w+="<div class='cmvDialogTitle'>"+A+"</div>",P||N||""===R||(w+="<div class='cmvDialogTime'>"+R+"</div>"),w+="</div>",w+="</td>",w+="<td class='cmvDialogIcon' style='"+B+"'>",N?w+="<span class='cmvDialogIconFont "+E+"' style='"+L+"'></span>":O||($.cf.compareStrings(E,"Dot")?w+="<span class='cmvDialogIconDot' style='"+(L="background: "+V+";")+"'></span>":w+="<span class='cmvDialogIconFont "+E+"' style='"+L+"'></span>"),w+="</td>",w+="</tr>",N?w+="<tr class='cmvDialogEventSeparator'><td colspan='2'></td></tr>":S!==v.length-1&&(w+="<tr class='cmvDialogEventSeparator'><td colspan='2'><hr></td></tr>")}if(w+="</table>",w+="</div>",w+="</div>",a!==d){$(e.elem).find(".calendarContInner").append(w);var z=$(e.elem).find(".cmvDialog").width();z=z<200?200:z,t<=400?(z=C=t-2,y=3*p):i<=400&&(y=4*p),$(e.elem).find(".cmvDialog").css({"max-height":y,"max-width":C,width:z}),t=$(e.elem).find(".cmvCalendarCont").width(),i=$(e.elem).find(".cmvCalendarCont").height();var Y=$(e.elem).find(".cmvDialog").width(),q=$(e.elem).find(".cmvDialog").height(),U=$(e.elem).find("#"+r).position().left,Q=$(e.elem).find("#"+m).position().top,Z=y-24;q=q>Z?Z:q;var J,G,X,K,ee=$(e.elem).find(".cmvMonthTableMain").position().top,te="",ie="";if(t<=400?D<=3?(X=-11,ie="cmvDialogTooltipBottom",te="10px 0px 0px 0px",y=(J=ee+Q+(p-10))+y>i?i-J:y):((J=ee+Q-(q+6))<50?(J=50,y=ee+Q-3-50,X=(q=ee+Q-3-50)-1):X=q-1,X=q-1,ie="cmvDialogTooltipTop",te="0px 0px 10px 0px"):D<=3?(X=-11,ie="cmvDialogTooltipBottom",te="10px 0px 0px 0px",y=(J=ee+Q+$(e.elem).find(".cmvDisplayAllEvents").height()-2)+y>i?i-J:y):((J=ee+Q-(q-3))<50?(J=50,y=ee+Q-3-50,X=(q=ee+Q-3-50)-1):X=q-1,ie="cmvDialogTooltipTop",te="0px 0px 10px 0px"),t<=400)G=0,K=U+h/2-10;else if(0===f)G=U+5,K=h-34;else if(f===(e.setting.excludeNonBusinessHours?e.tv.iBsDays:6))G=t-Y,K=Y-28;else{K=Y/2-14,G=U+h-10-Y/2-4;var ne,ae=$(e.elem).find(".cmvTableColumn0").position().left,se=G-Y/2;G+Y>=t&&(K+=(ne=G)-(G=t-Y-5)),se<=ae&&(ne=G,K-=(G=ae+5)-ne)}$(e.elem).find(".cmvDialogTooltip").addClass(ie),$(e.elem).find(".cmvDialogTooltip").css({top:X,left:K}),$(e.elem).find(".cmvDialog").css({top:J,left:G}),y-=24,$(e.elem).find(".cmvDialogInnerCont").css({margin:te,"max-height":y,"max-width":C}),$(e.elem).find(".cmvDialogClose").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),e._closeDialogOfEventsForDay()}),$(e.elem).find(".cmvDialog").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()}),e._addDialogEventAction()}if($("body").hasClass("br-ios")){var re=$(e.elem).find(".cmvDialogTable").height()+20;y=re>y?y:re,$(e.elem).find(".cmvDialogInnerCont").css({height:y}),D>3&&(J=ee+Q-(y+6),$(e.elem).find(".cmvDialog").css({top:J}),X=y-1,$(e.elem).find(".cmvDialogTooltip").css({top:X}))}}})},_closeDialogOfEventsForDay:function(){var e=$(this.elem).find(".cmvDialog");null!==e&&(e.animate({opacity:0},100),setTimeout(function(){e.remove()},100))},_addDialogEventAction:function(){var e=this;$(e.elem).find(".cmvDialogEvent").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation();var i=e.getEventWithId($(this).attr("data-id"));e.setting.eventInADialogClicked&&e.setting.eventInADialogClicked.call(e,i)})},_makeDayClickableInMonthView:function(){var e,t=this;(e=$.cf.compareStrings(t.setting.visibleView,"DetailedMonthView")?$(t.elem).find(".cdmvEventContMain"):$(t.elem).find(".cmvDay")).on($.CalenStyle.extra.sClickHandler,function(i){i.stopPropagation();var n={};n.x=i.pageX||i.originalEvent.touches[0].pageX||i.originalEvent.changedTouches[0].pageX,n.y=i.pageY||i.originalEvent.touches[0].pageY||i.originalEvent.changedTouches[0].pageY;for(var a=t.__getElementsAtPoint(n.x,n.y),s=0;s<=a.length;s++){var r=$(a[s]);r.hasClass("cmvDay")&&(e=r)}if(e.hasClass("cmvDay")){$(t.elem).find(".cmvDay .cmvDayNumber").removeClass("cCurrentHighlightCircle cContHeaderButtonsHover");var o=e.attr("id");if(t.setting.selectedDate=t._getDateForDayIdInMonthView(o),0===$(t.elem).find(".cHiddenEventsCont").length&&t.setting.cellClicked&&t.setting.cellClicked.call(t,t.setting.visibleView,t.setting.selectedDate,!0,n),$.cf.compareStrings(t.setting.visibleView,"MonthView")&&$.cf.compareStrings(t.setting.actionOnDayClickInMonthView,"ModifyEventList")){0!==t.compareDates($.CalenStyle.extra.dToday,t.setting.selectedDate)&&e.find(".cmvDayNumber").addClass("cCurrentHighlightCircle");var l="";t.setting.displayEventsForPeriodInList&&(l=t.setting.displayEventsForPeriodInList.call(t,t.setDateInFormat({date:t.setting.selectedDate},"START"),t.setDateInFormat({date:t.setting.selectedDate},"END"))||""),$(t.elem).find(".cListOuterCont").html(l),t.setting.eventListAppended&&t.setting.eventListAppended.call(t)}}})},_getDateForDayIdInMonthView:function(e){var t=e.split("-");return new Date(t[3],t[2],t[1],0,0,0,0)},_addTooltipInMonthView:function(e){var t=this;$(t.elem).find(e).tooltip({content:function(){var e="";if($.cf.compareStrings(t.setting.eventTooltipContent,"Default")){var i=$(this).data("tooltipcontent");void 0!==i.title&&(e+="<div class='cTooltipTitle'>"+i.title+"</div>"),void 0===i.startDateTime&&void 0!==i.endDateTime||(e+="<div class='cTooltipTime'>",void 0!==i.startDateTime&&(e+=i.startDateTime),void 0!==i.endDateTime&&(e+="<br/>"+i.endDateTime),e+="</div>")}else{var n=t.getEventWithId($(this).attr("data-id"));e=t.setting.eventTooltipContent.call(t,n)}return e},position:{my:"center bottom-15",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("tooltip-arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}}})},_makeEventDraggableInMonthView:function(e){var t,i,n,a=this;$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")?t=$.CalenStyle.extra.iEventHeights[a.setting.visibleView]:$.cf.compareStrings(a.setting.visibleView,"MonthView")&&(t=a._getHeightForAllDayEventInMonthView()),i=$(a.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").width(),n=$(a.elem).find(".cmvMonthTableRows").css("height"),$.cf.compareStrings(a.setting.visibleView,"MonthView")&&(n=$(a.elem).find(".cmvMonthTableRows").css("height")),n=parseInt(n.replace("px",""))||0;var s,r,o,l,d,c=$(a.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").offset().left,v=$(a.elem).find("#cmvMonthTableRow1 .cmvTableColumns:last").offset().left,g=$(a.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").offset().top,m=$(a.elem).find("#cmvMonthTableRow"+a.tv.iWkInMonth+" .cmvTableColumn0").offset().top+n-t;$.cf.compareStrings(a.setting.visibleView,"MonthView")&&(m-=2*t),$(a.elem).find(e).draggable({zIndex:100,scope:"Events",containment:[c,g,v,m],scroll:!1,revertDuration:300,start:function(){var e=(s=$(this)).clone();if($(e).removeClass("ui-draggable-dragging").addClass("cEventClone cEventBeingDragged"),s.parent().append(e),r=s.attr("data-id"),o=a.getEventWithId(r),".Event-"+r,l=null,s.hasClass("cEventOnlyText")?s.addClass("cEditingEvent"):s.addClass("cEditingEvent cEditingEventUI"),null!==o.start&&(l=o.start),a.tv.draggableParent="cmvDay-"+l.getDate()+"-"+l.getMonth()+"-"+l.getFullYear(),s.css({position:"absolute"}),s.css({width:i,height:t}),a.setting.hideExtraEvents){d=s.find(".cdmvEventTitle").width();var n=s.find(".cdmvEventIcon"),c=null!==n?n.outerWidth(!0):0,v=s.find(".cdmvEventTime"),g=null!==v?v.outerWidth(!0):0,m=0,D=s.find(".cdmvEventTimeRight");null!==D&&(m=null!==D?D.outerWidth(!0):0);var f=s.find(".cPartialEventLeft").outerWidth(!0)+s.find(".cPartialEventRight").outerWidth(!0),u=i-(c+g+m+10*$.CalenStyle.extra.iBorderOverhead+f);s.find(".cdmvEventTitle").css({width:u})}},revert:function(){return s=$(this),a.setting.hideExtraEvents&&s.find(".cdmvEventTitle").css({width:d}),$(a.elem).find(".cmvDay").removeClass("cActivatedCell"),a.tv.bDroppedInDifferent&&(a.setting.isTooltipInMonthView&&a._addTooltipInMonthView(".cEventTooltip"),a.setting.isDragNDropInMonthView&&a._makeEventDraggableInMonthView(".EventDraggable")),!0}})},adjustMonthTable:function(){var e=this,t=$(e.elem).outerWidth(),i=$(e.elem).outerHeight(),n=$.cf.getSizeValue($(e.elem),"max-width"),a=$.cf.getSizeValue($(e.elem).find(".cmvMonthTable"),"min-height")||0;e.tv.iDocHtPrev=$(document).height(),i+=2*$.CalenStyle.extra.iBorderOverhead,e._closeDialogOfEventsForDay(),t=n&&t>n?n:t;var s,r,o,l,d,c,v,g,m,D,f,u=i;e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right")?t-=e.setting.filterBarWidth:($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(u-=e.setting.filterBarHeight,$(e.elem).find(".cFilterBar").css({width:t}))),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$(e.elem).find(".calendarContInner").css({height:u}),$(e.elem).find(".calendarContInner").css({width:t}),e.__adjustHeader(),$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:t}),t>=300&&i>=300?($(e.elem).find(".cmvDayHeader").removeClass("cmvThinBorderBottom cmvThinBorder").addClass("cmvThinBorderBottom"),$(e.elem).find(".cmvWeekNumber").removeClass("cmvThinBorderRight cmvThinBorder").addClass("cmvThinBorderRight"),$(e.elem).find(".cmvTableContainerOuter").addClass("cmvThinBorder")):($(e.elem).find(".cmvWeekNumber").removeClass("cmvThinBorderRight cmvThinBorder").addClass("cmvThinBorder"),$(e.elem).find(".cmvTableContainerOuter").addClass("cmvThinBorder")),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ModifyEventList")&&e.tv.bCMVDisEvLst&&(e.setting.displayEventsInMonthView?(s=i/2)<300-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)&&(s=300-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)):i>t?s=t:(s=i/2)<300-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)&&(s=300-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)),0!==a&&(s=a),$(e.elem).find(".cmvMonthTableMain").css({height:s})),t>500&&i>500?($.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ModifyEventList")&&e.tv.bCMVDisEvLst?o=s:(o=i-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0),e.tv.bDisABar&&(o-=$(e.elem).find(".cActionBar").outerHeight()),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(o-=$(e.elem).find(".cFilterBar").outerHeight())),$(e.elem).find(".calendarCont").css({height:i}),$(e.elem).find(".cContHeader").length>0&&$(e.elem).find(".cContHeader").css({width:t}),d=(l=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerWidth():$(e.elem).find(".calendarContInner").outerWidth())/(e.setting.excludeNonBusinessHours?e.tv.iBsDays:7),e.setting.displayWeekNumInMonthView&&(d>50?(d=(l-50)/(e.setting.excludeNonBusinessHours?e.tv.iBsDays:7),$(e.elem).find(".cmvWeekNumber").css({width:50})):$(e.elem).find(".cmvWeekNumber").css({width:d})),$(e.elem).find(".cmvTableColumns").css({width:d}),c=$(e.elem).find(".cmvMonthTableRowDayHeader").outerHeight(),$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?r=(v=(o-c)/e.tv.iWkInMonth)-((g=$(e.elem).find(".cmvDayNumber").height()+2)>(m=$(e.elem).find(".cmvDisplayAllEvents").height())?g:m):$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(v=(o-c)/e.tv.iWkInMonth,(e.tv.bDisABar||e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(o+=$.CalenStyle.extra.iBorderOverhead)),$(e.elem).find(".cmvTableContainerOuter").css({height:o,width:l}),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(l-=$.CalenStyle.extra.iBorderOverhead,o-=$.CalenStyle.extra.iBorderOverhead),$(e.elem).find(".cmvTableContainer").css({height:o,width:l,top:-$.CalenStyle.extra.iBorderOverhead,left:-$.CalenStyle.extra.iBorderOverhead}),D=0,$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")?($(e.elem).find(".cmvMonthTableMain").css({top:-$.CalenStyle.extra.iBorderOverhead}),e.setting.hideExtraEvents&&($(e.elem).find(".cmvMonthTableRows").css({height:v}),e.tv.iMxEvRw=Math.floor((v-30)/$.CalenStyle.extra.iEventHeights[e.setting.visibleView]),(D=c+e.tv.iWkInMonth*v)>o&&(o=D))):($(e.elem).find(".cmvMonthTableRows").css({height:v}),v<60&&$(e.elem).find(".cmvMonthTableRows").css({"min-height":v}),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.eventIndicatorInMonthView,"Custom")&&(f=v-g,$(e.elem).find(".cmvMonthTableRowCustom").css({"max-height":f}))),$(e.elem).find(".cmvMonthTableMain").css({height:o,width:l}),$(e.elem).find(".cdmvEventContMain").css({height:o,width:l}),$(e.elem).find(".cmvDayHeader").removeClass("cmvThinBorderBottom cmvThinBorder").addClass("cmvThinBorderBottom")):($(e.elem).find(".cContHeader").length>0&&$(e.elem).find(".cContHeader").css({width:t}),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"ModifyEventList")&&e.tv.bCMVDisEvLst?(o=s,$(e.elem).find(".cmvMonthTable").css({height:o})):e.tv.bDisABar||e.tv.bDisFBar?(o=i-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0),e.tv.bDisABar&&(o-=e.setting.actionBarHeight),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(o-=e.setting.filterBarHeight)):o=i-($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0),d=(l=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerWidth():$(e.elem).find(".calendarContInner").outerWidth())/(e.setting.excludeNonBusinessHours?e.tv.iBsDays:7),e.setting.displayWeekNumInMonthView&&(d>50?(d=(l-50)/(e.setting.excludeNonBusinessHours?e.tv.iBsDays:7),$(e.elem).find(".cmvWeekNumber").css({width:50})):$(e.elem).find(".cmvWeekNumber").css({width:d})),$(e.elem).find(".cmvTableColumns").css({width:d}),c=$(e.elem).find(".cmvMonthTableRowDayHeader").outerHeight(),$.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker")?r=(v=(o-c)/e.tv.iWkInMonth)-((g=$(e.elem).find(".cmvDayNumber").height()+2)>(m=$(e.elem).find(".cmvDisplayAllEvents").height())?g:m):e.setting.hideExtraEvents&&(v=(o-c)/e.tv.iWkInMonth),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(e.tv.bDisABar||e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(o+=$.CalenStyle.extra.iBorderOverhead),$(e.elem).find(".cmvTableContainerOuter").css({height:o,width:l}),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(l-=$.CalenStyle.extra.iBorderOverhead,o-=$.CalenStyle.extra.iBorderOverhead),$(e.elem).find(".cmvTableContainer").css({height:o,width:l,top:-$.CalenStyle.extra.iBorderOverhead,left:-$.CalenStyle.extra.iBorderOverhead}),D=0,$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")?($(e.elem).find(".cmvMonthTableMain").css({top:-$.CalenStyle.extra.iBorderOverhead}),e.setting.hideExtraEvents&&($(e.elem).find(".cmvMonthTableRows").css({height:v}),e.tv.iMxEvRw=Math.floor((v-30)/$.CalenStyle.extra.iEventHeights[e.setting.visibleView]),(D=c+e.tv.iWkInMonth*v)>o&&(o=D))):($(e.elem).find(".cmvMonthTableRows").css({height:v}),v<60&&$(e.elem).find(".cmvMonthTableRows").css({"min-height":v}),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.eventIndicatorInMonthView,"Custom")&&(f=v-g,$(e.elem).find(".cmvMonthTableRowCustom").css({"max-height":f}))),$(e.elem).find(".cmvMonthTableMain").css({height:o,width:l}),$(e.elem).find(".cdmvEventContMain").css({height:o,width:l}));var p=r/2;$(e.elem).find(".cmvEventContSmall").css({height:p}),$(e.elem).find(".cmvEventContAllDay").css({height:p});var h=e._getHeightForAllDayEventInMonthView(),y=e._getHeightForSmallEventInMonthView(),C=e._getMarginValueForSmallEventInMonthView(),w=C+"px "+C+"px;";$(e.elem).find(".cmvEventSmall").css({width:y,height:y,margin:w,top:0}),$(e.elem).find(".cmvEventAllDay").css({height:h}),t>=550?$(e.elem).find(".cmvMonthTableRows .cmvWeekNumber").addClass("clickableLink"):$(e.elem).find(".cmvMonthTableRows .cmvWeekNumber").removeClass("clickableLink");var S=$(e.elem).find(".calendarCont").height();e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(S-=$(e.elem).find(".cFilterBar").height());for(var V=0;V<e.setting.sectionsList.length;V++){var b=e.setting.sectionsList[V];$.cf.compareStrings(b,"Calendar")?(S-=($(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").height():0)+4,S-=$(e.elem).find(".cmvMonthTable").height()):$.cf.compareStrings(b,"ActionBar")&&(S-=$(e.elem).find(".cActionBar").height()+1)}$(e.elem).find(".cListOuterCont").css({height:S});var E=$(e.elem).find(".cmvMonthTableMain").position().left;$(e.elem).find(".cContHeader").length>0?($(e.elem).find(".cContHeader").position().top,$(e.elem).find(".cContHeader").outerHeight()):$(e.elem).position().top,$(e.elem).find(".cdmvEventContMain").css({left:E,top:-$.CalenStyle.extra.iBorderOverhead}),e._adjustEventsInMonthView(),e.setCalendarBorderColor(),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&e.setting.isDragNDropInMonthView&&e._makeEventDraggableInMonthView(".EventDraggable"),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&$.cf.compareStrings(e.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&(t<=400?$(e.elem).find(".cmvDisplayAllEvents").remove():0===$(e.elem).find(".cmvDisplayAllEvents").length&&$(e.elem).find(".cmvDay").prepend("<span class='cmvDisplayAllEvents'>..</span>"))},_getHeightForAllDayEventInMonthView:function(){var e=$(this.elem).find(".cmvEventContAllDay").height(),t=Math.floor(e/5);return t<2?t=2:t>4&&(t=4),t},_getHeightForSmallEventInMonthView:function(){var e=$(this.elem).find(".cmvEventContAllDay").height(),t=Math.floor(e/2);return t<2?t=2:t>10&&(t=10),t},_getMarginValueForSmallEventInMonthView:function(){var e=this._getHeightForSmallEventInMonthView();return e<=3?1:e>3?2:void 0},_setMonthStrings:function(){var e=this,t=$.cf.compareStrings(e.setting.visibleView,"DatePicker"),i=t?"cContHeaderLabelUnderline":"",n=t?"clickableLink":"",a="<span class='cContHeaderLabelMonth "+n+"'><span class='"+i+"'><b>"+e.getDateInFormat({iDate:{M:e.setting.selectedDate.getMonth()}},"MMMM",!1,!0)+"</b></span></span>";a+="<span class='cContHeaderLabelYear "+n+"'><span class='"+i+"'>"+e.getNumberStringInFormat(e.setting.selectedDate.getFullYear(),0,!0)+"</span></span>",e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,a,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(a),$.cf.compareStrings(e.setting.visibleView,"DatePicker")&&($(e.elem).find(".cContHeaderLabelMonth").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),new function(e,t){function i(){$(e.elem).find(".cmlvOuterCont").length>0?a():function(){var s="";s+="<div class='cmlvOuterCont "+(t?"cmlvPopup":"cmlvFull")+"'>",s+="<div class='cmlvCont'>",t&&(s+="<span class='cmlvContTooltip cmlvContTooltipBottom'></span>");s+="<table class='cmlvMonthListTable'>";for(var r=0,o=0;o<3;o++){s+="<tr>";for(var l=0;l<4;l++){var d="cmlvMonth"+r;e.setting.selectedDate.getMonth()===r?s+="<td id='"+d+"' class='cmlvMonth cmlvMonthCurrent'>"+e.getDateInFormat({iDate:{M:r}},"MMM",!1,!0)+"</td>":s+="<td id='"+d+"' class='cmlvMonth cmlvMonthOther clickableLink'>"+e.getDateInFormat({iDate:{M:r}},"MMM",!1,!0)+"</td>",r++}s+="</tr>"}s+="</table>",s+="</div>",s+="</div>",$(e.elem).find(".calendarCont").append(s),n(),e.setting.adjustViewOnWindowResize&&$(window).bind("resize."+e.tv.pluginId,function(e){n()});$.CalenStyle.extra.bTouchDevice||$(e.elem).find(".cmlvMonth").hover(function(t){var i=$(this).attr("id");(i=i.replace("cmlvMonth",""))!==e.setting.selectedDate.getMonth()&&$(this).addClass("cmlvMonthOtherHover")},function(t){var i=$(this).attr("id");(i=i.replace("cmlvMonth",""))!==e.setting.selectedDate.getMonth()&&$(this).removeClass("cmlvMonthOtherHover")});$(e.elem).find(".cmlvMonth").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation();var i=$(this).attr("id"),n=parseInt(i.replace("cmlvMonth",""));!function(t){var i=e.setting.selectedDate.getMonth();$(e.elem).find("#cmlvMonth"+i).removeClass("cmlvMonthCurrent cmlvMonthOtherHover").addClass("cmlvMonthOther clickableLink"),e.setting.selectedDate.setDate(1),e.setting.selectedDate.setMonth(t),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType=t===i-1?"Prev":t===i+1?"Next":"Load";e.modifyCalenStyleObject(e),$(e.elem).find("#cmlvMonth"+t).removeClass("cmlvMonthOther clickableLink cmlvMonthOtherHover").addClass("cmlvMonthCurrent"),setTimeout(function(){$.cf.compareStrings(e.setting.visibleView,"AgendaView")?(e.updateAgendaView(!0),e.adjustAgendaView()):(e.updateMonthTableAndContents(!0),e.adjustMonthTable()),a()},e.setting.transitionSpeed)}(n)}),$(e.elem).find(".cmlvOuterCont").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation(),i()})}(),$(document).on($.CalenStyle.extra.sClickHandler+".MonthPicker",function(e){a()})}function n(){var i=$(e.elem).find(".cmlvCont");if(t){var n=$(e.elem).find(".cContHeaderLabelMonth"),a=i.width()/2,s=$(e.elem).find(".calendarContInner").position().top+n.height()+4+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),r=n.width(),o=n.position().left||$(e.elem).find(".cContHeaderLabelOuter").position().left,l=o+r/2,d=$(e.elem).find(".calendarContInner").position().left+(l-a)-4;d=d<0?2:d,i.css({top:s,left:d}),$(".cmlvContTooltipBottom").css({left:a-5})}$(e.elem).find(".cContHeader").length>0?i.css({"font-size":$(e.elem).find(".cContHeader").css("font-size")}):i.css({"font-size":$(e.elem).css("font-size")}),e.setCalendarBorderColor()}function a(){e.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+e.tv.pluginId,n),$(e.elem).find(".cmlvOuterCont").remove()}this.showOrHideMonthList=i}(e,!1).showOrHideMonthList()}),$(e.elem).find(".cContHeaderLabelYear").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),new function(e,t){var i,n;function a(){$(e.elem).find(".cylvOuterCont").length>0?o():function(){var o=e.setting.selectedDate.getFullYear();n=12+(i=o-5);var l="";l+="<div class='cylvOuterCont "+(t?"cylvPopup":"cylvFull")+"'>",l+="<div class='cylvCont'>",t&&(l+="<span class='cylvContTooltip cylvContTooltipBottom'></span>");l+="<table class='cylvYearListOuterTable'>",l+="<tr class='cylvTableHeaderRow'>",l+="<td class='cylvTableColumns cylvPrevYears clickableLink cs-icon-Prev'></td>",l+="<td class='cylvTableColumns cylvSelectedYear clickableLink'>"+e.getNumberStringInFormat(o,0,!0)+"</td>",l+="<td class='cylvTableColumns cylvNextYears clickableLink cs-icon-Next'></td>",l+="</tr>",l+="<tr class='cylvTableContRow'>",l+="<td colspan='3'>",l+="<table class='cylvYearListTable cylvYearListTableMain'>",l+="</table>",l+="</td>",l+="</tr>",l+="</table>",l+="</div>",l+="</div>",$(e.elem).find(".calendarCont").append(l),$(e.elem).find(".cylvPrevYears").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),function(){$(e.elem).find(".cylvPrevYears").addClass("cylvTableColumnsHover");var t=$(e.elem).find(".cylvYearListTableMain"),a=t.position().top,s=t.position().left,o=t.width(),l=t.height(),d=t.clone();$(d).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(d).css({position:"absolute",top:a,left:s,height:l}),t.parent().append(d),s+=o,$(d).animate({left:s},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cylvYearListTableTemp").remove()},e.setting.transitionSpeed),$(e.elem).find(".cylvPrevYears").removeClass("cylvTableColumnsHover"),n=12+(i-=12),r()}()}),$(e.elem).find(".cylvSelectedYear").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),function(){var t=i,a=e.setting.selectedDate.getFullYear();if(n=12+(i=a-5),t!==i){$(e.elem).find(".cylvSelectedYear").addClass("cylvTableColumnsClick");var s=$(e.elem).find(".cylvYearListTableMain"),o=s.position().top,l=s.position().left,d=s.width(),c=s.height(),v=s.clone();$(v).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(v).css({position:"absolute",top:o,left:l,height:c}),s.parent().append(v),t<i?l-=d:l+=d,$(v).animate({left:l},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cylvYearListTableTemp").remove()},e.setting.transitionSpeed),$(e.elem).find(".cylvSelectedYear").removeClass("cylvTableColumnsClick"),r()}}()}),$(e.elem).find(".cylvNextYears").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation(),function(){$(e.elem).find(".cylvNextYears").addClass("cylvTableColumnsHover");var t=$(e.elem).find(".cylvYearListTableMain"),a=t.position().top,s=t.position().left,o=t.width(),l=t.height(),d=t.clone();$(d).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(d).css({position:"absolute",top:a,left:s,height:l}),t.parent().append(d),s-=o,$(d).animate({left:s},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cylvYearListTableTemp").remove()},e.setting.transitionSpeed),$(e.elem).find(".cylvNextYears").removeClass("cylvTableColumnsHover"),n=(i+=12)+12,r()}()}),s(),e.setting.adjustViewOnWindowResize&&$(window).bind("resize."+e.tv.pluginId,function(e){s()});$.CalenStyle.extra.bTouchDevice||($(e.elem).find(".cylvPrevYears, .cylvNextYears").hover(function(e){$(this).addClass("cylvTableColumnsHover")},function(e){$(this).removeClass("cylvTableColumnsHover")}),$(e.elem).find(".cylvSelectedYear").hover(function(e){$(this).addClass("cylvSelectedYearHover")},function(e){$(this).removeClass("cylvSelectedYearHover")}));r(),$(e.elem).find(".cylvOuterCont").on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation(),a()})}(),$(document).on($.CalenStyle.extra.sClickHandler+".YearPicker",function(e){o()})}function s(){var i=$(e.elem).find(".cylvCont"),n=$(".cylvTableContRow").height();if($(".cylvYearListTable").css({height:n}),t){var a=$(e.elem).find(".cContHeaderLabelYear"),s=i.width()/2,r=$(e.elem).find(".calendarContInner").position().top+a.height()+4+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),o=a.width(),l=a.position().left||$(e.elem).find(".cContHeaderLabelOuter").position().left,d=l+o/2,c=$(e.elem).find(".calendarContInner").position().left+(d-s)-4;c=c<0?2:c,i.css({top:r,left:c}),$(".cylvContTooltipBottom").css({left:s-5})}$(e.elem).find(".cContHeader").length>0?i.css({"font-size":$(e.elem).find(".cContHeader").css("font-size")}):i.css({"font-size":$(e.elem).css("font-size")}),e.setCalendarBorderColor()}function r(){for(var t=e.setting.selectedDate.getFullYear(),a=0,s="",r=i;r<n;r++){0!==a&&4!==a&&8!==a||(s+="<tr class='cylvTableRow'>");var l="cylvYear"+r;s+=t===r?"<td id='"+l+"' class='cylvYear cylvYearCurrent'>"+e.getNumberStringInFormat(r,0,!0)+"</td>":"<td id='"+l+"' class='cylvYear cylvYearOther clickableLink'>"+e.getNumberStringInFormat(r,0,!0)+"</td>",3!==a&&7!==a&&11!==a||(s+="</tr>"),a++}$(e.elem).find(".cylvYearListTableMain").html(s),$(e.elem).find(".cylvYear").on($.CalenStyle.extra.sClickHandler,function(t){t.stopPropagation();var i=$(this).attr("id"),n=parseInt(i.replace("cylvYear",""));!function(t){var i=e.setting.selectedDate.getFullYear();$(e.elem).find("#cylvYear"+i).removeClass("cylvYearCurrent cylvYearOtherHover").addClass("cylvYearOther"),e.tv.sLoadType="Load",e.setting.selectedDate.setFullYear(t),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.modifyCalenStyleObject(e),setTimeout(function(){$.cf.compareStrings(e.setting.visibleView,"AgendaView")?(e.updateAgendaView(!0),e.adjustAgendaView()):(e.updateMonthTableAndContents(!0),e.adjustMonthTable()),$(e.elem).find("#cylvYear"+t).removeClass("cylvYearOther cylvYearOtherHover").addClass("cylvYearCurrent"),o()},e.setting.transitionSpeed)}(n)}),$.CalenStyle.extra.bTouchDevice||$(e.elem).find(".cylvYear").hover(function(t){$(this).html()!==e.setting.selectedDate.getFullYear()&&$(this).addClass("cylvYearOtherHover")},function(t){$(this).html()!==e.setting.selectedDate.getFullYear()&&$(this).removeClass("cylvYearOtherHover")})}function o(){e.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+e.tv.pluginId,s),$(e.elem).find(".cylvOuterCont").remove()}this.showOrHideYearList=a}(e,!1).showOrHideYearList()}))},__goToPrevMonthView:function(){var e=this;if($(e.elem).find(".cmlvOuterCont").length<=0&&$(e.elem).find(".cylvOuterCont").length<=0){if(e.setting.showTransition){var t=$(e.elem).find(".cmvMonthTableMain").width(),i=$(e.elem).find(".cmvMonthTableMain").position().left,n=0;($.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker"))&&(n=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top);var a,s,r,o=$(e.elem).find(".cmvMonthTableMain").clone();$(o).removeClass("cmvMonthTableMain").addClass("cmvMonthTableTemp"),$(o).css({position:"absolute",top:n,left:i}),$(e.elem).find(".cmvMonthTableMain").parent().append(o),$(o).css({"z-index":101}),i+=t,$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(a=$(e.elem).find(".cdmvEventContMain").position().left,s=$(e.elem).find(".cdmvEventContMain").width(),r=$(e.elem).find(".cdmvEventContMain").clone(),$(r).removeClass("cdmvEventContMain").addClass("cdmvEventContTemp"),$(e.elem).find(".cdmvEventContMain").parent().append(r),$(r).css({"z-index":102}),a+=s,$(r).animate({left:a},e.setting.transitionSpeed)),$(o).animate({left:i},e.setting.transitionSpeed),setTimeout(function(){$(o).remove(),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&$(r).remove()},e.setting.transitionSpeed)}e.tv.dCMDt=new Date(e.tv.dPMDt),e._setNextPreviousMonthDates();var l=e.tv.dCMDt.getMonth(),d=e.tv.dCMDt.getFullYear(),c=e.__getNumberOfDaysOfMonth(l,d),v=e.setting.selectedDate.getDate();v>c&&(v=c);var g=e.setting.selectedDate.getHours(),m=e.setting.selectedDate.getMinutes(),D=e.setting.selectedDate.getSeconds();e.setting.selectedDate=e.setDateInFormat({iDate:{y:d,M:l,d:v,H:g,m:m,s:D}},""),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.updateMonthTableAndContents(!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)}},__goToNextMonthView:function(){var e=this;if($(e.elem).find(".cmlvOuterCont").length<=0&&$(e.elem).find(".cylvOuterCont").length<=0){if(e.setting.showTransition){var t=$(e.elem).find(".cmvMonthTableMain").width(),i=$(e.elem).find(".cmvMonthTableMain").position().left,n=0;($.cf.compareStrings(e.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.visibleView,"DatePicker"))&&(n=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top);var a,s,r,o=$(e.elem).find(".cmvMonthTableMain").clone();$(o).removeClass("cmvMonthTableMain").addClass("cmvMonthTableTemp"),$(o).css({position:"absolute",top:n,left:i}),$(o).css({"z-index":101}),i-=t,$(e.elem).find(".cmvMonthTableMain").parent().append(o),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&(a=$(e.elem).find(".cdmvEventContMain").position().left,s=$(e.elem).find(".cdmvEventContMain").width(),r=$(e.elem).find(".cdmvEventContMain").clone(),$(r).removeClass("cdmvEventContMain").addClass("cdmvEventContTemp"),$(e.elem).find(".cdmvEventContMain").parent().append(r),$(r).css({"z-index":102}),a-=s,$(r).animate({left:a},e.setting.transitionSpeed)),$(o).animate({left:i},e.setting.transitionSpeed),setTimeout(function(){$(o).remove(),$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")&&$(r).remove()},e.setting.transitionSpeed)}e.tv.dCMDt=new Date(e.tv.dNMDt),e._setNextPreviousMonthDates();var l=e.tv.dCMDt.getMonth(),d=e.tv.dCMDt.getFullYear(),c=e.__getNumberOfDaysOfMonth(l,d),v=e.setting.selectedDate.getDate();v>c&&(v=c);var g=e.setting.selectedDate.getHours(),m=e.setting.selectedDate.getMinutes(),D=e.setting.selectedDate.getSeconds();e.setting.selectedDate=e.setDateInFormat({iDate:{y:d,M:l,d:v,H:g,m:m,s:D}},""),e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.updateMonthTableAndContents(!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)}},highlightDatesInDatePicker:function(e){null===e&&void 0===e||(this.tv.dHighlightDPV=e,this.__highlightDaysInDatePicker())},__highlightDaysInDatePicker:function(){var e=this;if($(".cmvDay").removeClass("cDatePickerHighlightBg"),!($.cf.compareStrings(e.setting.parentObject.setting.visibleView,"MonthView")||$.cf.compareStrings(e.setting.parentObject.setting.visibleView,"DetailedMonthView")||null===e.tv.dHighlightDPV&&void 0===e.tv.dHighlightDPV))for(var t=0;t<e.tv.dHighlightDPV.length;t++){var i=e.tv.dHighlightDPV[t],n="#cmvDay-"+i.getDate()+"-"+i.getMonth()+"-"+i.getFullYear();$(e.elem).find(n).addClass("cDatePickerHighlightBg")}}}),i.prototype=$.extend(i.prototype,{_getTimeSlotsArrayForCurrentView:function(){var e,t,i,n,a,s,r,o,l=this,d=$.cf.compareStrings(l.setting.visibleView,"DayEventDetailView")?1:l.tv.iNoVDay,c=24*l.tv.iUTmSlt;for(l.tv.bADVCur=[],l.tv.sADVInfo=[],t=0;t<d;t++){e=[];for(var v=0;v<24;v++)for(i=0;i<l.tv.iUTmSlt;i++)e.push(0);e.push(0),l.tv.bADVCur.push(e)}var g=new Date(l.tv.dVDSDt),m=l.tv.dVDSDt.getTime();for(t=0;t<d;t++){if(l.tv.bABsDays[g.getDay()]||!l.setting.excludeNonBusinessHours){e=l.tv.bADVCur[t];var D=l._getRestrictedSectionForCurrentView(g),f=l._getBusinessHoursForCurrentView(g);if(f.length>0)for(n=0;n<f.length;n++){var u=f[n],p=new Date(u[0]),h=new Date(u[1]);for(a=Math.floor((h.getTime()-p.getTime())/l.tv.iUTmMS),s=p.getHours(),r=p.getMinutes(),o=Math.floor(r/l.setting.unitTimeInterval),i=0;i<a;i++)e[0===s?o:s*l.tv.iUTmSlt+o]=1,r+=l.setting.unitTimeInterval,o=Math.floor(r/l.setting.unitTimeInterval),r>=60&&(r%=l.setting.unitTimeInterval,o=Math.floor(r/l.setting.unitTimeInterval),s+=1)}if(D.length>0)for(n=0;n<D.length;n++){var y=D[n],C=new Date(y.start),w=0===l.compareDates(g,C),S=new Date(y.end),V=0===l.compareDates(g,S);w||(C=l._normalizeDateTime(g,"START","T")),V||(S=l._normalizeDateTime(g,"END","T")),a=0===(a=Math.round((S.getTime()-C.getTime())/l.tv.iUTmMS))?1:a>c?c:a;var b,E=2,T=!1,M=!1,I=!1,A=y.backgroundColor,_=$.cf.isValid(A),k=y.class,H=$.cf.isValid(k);if(_||H){for(E=0;E<l.tv.sADVInfo.length;E++)if(b=l.tv.sADVInfo[E],T=_&&b.bgColor===A,M=H&&b.class===k,_&&H){if(T&&M){E=b.index,I=!0;break}}else if(T||M){E=b.index,I=!0;break}I||(b={},E=3+l.tv.sADVInfo.length,b.index=E,_&&(b.bgColor=A),H&&(b.class=k),l.tv.sADVInfo.push(b))}for(a===c&&(e[e.length-1]=E),s=C.getHours(),r=C.getMinutes(),o=Math.floor(r/l.setting.unitTimeInterval),i=0;i<a;i++)e[0===s?o:s*l.tv.iUTmSlt+o]=E,r+=l.setting.unitTimeInterval,o=Math.floor(r/l.setting.unitTimeInterval),r>=60&&(r%=l.setting.unitTimeInterval,o=Math.floor(r/l.setting.unitTimeInterval),s+=1)}l.tv.bADVCur[t]=e}m+=$.CalenStyle.extra.iMS.d,g=new Date(m)}},_getStartAndEndDatesOfEventWithId:function(e){var t=this.getEventWithId(e);return[t.start,t.end]},_getNumberOfHoursOfEventWithId:function(e){var t=this.getEventWithId(e);return this.__getNumberOfHoursOfEvent(t.isAllDay,t.start,t.end)},_getNumberOfDaysOfEventForWeek:function(e,t,i,n,a){var s,r=this;0===(s=e&&0===r.compareDateTimes(t,i)?new Date(i.getTime()+$.CalenStyle.extra.iMS.d):new Date(i)).getHours()&&0===s.getMinutes()&&s.setMinutes(s.getMinutes()-1);var o=0,l=r.__getStartAndEndDatesOfEventForView(e,t,s),d=l[0],c=l[1],v=Math.round((c.getTime()-d.getTime())/$.CalenStyle.extra.iMS.m),g=Math.round(v/60);if(v<0)console.log("Invalid Start And End Dates "+t+" "+s);else if(o=0,0!==r.compareDates(d,c)){var m=r.setDateInFormat({date:d},"START"),D=(r.setDateInFormat({date:c},"START").getTime()-m.getTime())/$.CalenStyle.extra.iMS.h;if(o=Math.round(D/24)+1,a){for(var f=new Date(m),u=0,p=0;p<o;p++)r.__findWhetherDateIsVisibleInCurrentView(f,e||g>23,d,c)&&u++,f.setDate(f.getDate()+1);o=u}}else a?r.__findWhetherDateIsVisibleInCurrentView(d,e||g>23,d,c)&&(o=1):o=1;return n?[o,g]:o},_getLeftPositionOfEventSeg:function(e){for(var t=this.tv.fADVDayLftPos.length,i=$(this.elem).find(".cdvTableColumns").width(),n=0,a=0;a<t;a++){var s=this.tv.fADVDayLftPos[a],r=s+i;if(s-=5,r-=5,a===t-1&&(r+=5),e>=s&&e<=r){n=this.tv.fADVDayLftPos[a];break}}return n},_getDateBasedOnLeftPosition:function(e){var t=this;if($.cf.compareStrings(t.setting.visibleView,"DayEventDetailView"))return t.setting.selectedDate;var i,n=$(t.elem).find(".cdvTableColumns").width(),a=t.tv.fADVDayLftPos.length,s=0,r=0;for(i=0;i<a;i++){var o=t.tv.fADVDayLftPos[i]-5,l=o+n-5;if(i===a-1&&(l+=5),e>=o&&e<=l){r=i+1;break}}for(i=0;i<t.tv.dAVDt.length;i++){var d=t.tv.dAVDt[i];if(t.__isDateInCurrentView(d)&&++s===r)return d}},_getDateForDayNumber:function(e,t){for(var i=t?0:this.tv.iNoVDay-1,n=0,a=0;a<this.tv.iNoVDay;a++){if(++n===e)return this.tv.dAVDt[i];i=t?i+1:i-1}},_createCopyOfArray:function(e){return[].concat(e)},_setPropertiesOfEventSeg:function(){for(var e,t,i,n,a=this,s=[],r=0;r<a.tv.dAVDt.length;r++){var o=[];o.push(["eventSegStart",a.tv.dAVDt[r]]);var l=a._getEventSegWith(o);l=a._sortEventSeg(a._createCopyOfArray(l)),i=[];for(var d=0;d<l.length;d++){var c=l[d],v=c.eventSegStart,g=c.eventSegEnd;if(i.length<=0)e=new Array(c),t=new Array(v,g,e),i.push(t);else{var m=0;for(n=0;n<i.length;n++){var D=i[n],f=D[0],u=D[1],p=0,h=0,$=0,y=0,C=a.compareDateTimes(v,f),w=a.compareDateTimes(v,u),S=a.compareDateTimes(g,f),V=a.compareDateTimes(g,u);if((C>0||0===C)&&(p=1),w<0&&(h=1),S>0&&($=1),(V<0||0===V)&&(y=1),1===p&&1===h||1===$&&1===y)D[2].push(c),m=1;C<0&&(D[0]=v),V>0&&w<0&&(D[1]=g)}0===m&&(e=new Array(c),t=new Array(v,g,e),i.push(t))}}s.push(i)}for(var b=[],E=0;E<s.length;E++){i=s[E];var T=[];for(n=0;n<i.length;n++){var M=i[n],I=M[2],A=a._assignEventSegToColumnsInDetailView(I);T.push([M[0],M[1],A])}b.push(T)}},_getEventSegWith:function(e){for(var t=[],i=0;i<this.tv.oASmEvSeg.length;i++){for(var n=this.tv.oASmEvSeg[i],a=0,s=0;s<e.length;s++){var r=e[s],o=r[0],l=r[1];$.cf.compareStrings(o,"eventSegStart")||$.cf.compareStrings(o,"eventSegEnd")?0===this.compareDates(n[o],l)&&a++:n[o]===l&&a++}a===e.length&&t.push(n)}return t},_sortEventSeg:function(e){var t=this,i=e.length;if(i>1)for(var n=0;n<i;n++)for(var a,s=e[n],r=parseInt(s.eventId),o=t._getStartAndEndDatesOfEventWithId(r)[0],l=n+1;l<i;l++){var d=e[l],c=parseInt(d.eventId);if(r!==c){var v=t._getStartAndEndDatesOfEventWithId(c)[0],g=t.compareDateTimes(o,v);if(g>0)a=s,s=d,d=a,e[n]=s,o=v,e[l]=d;else if(0===g){var m=t._getNumberOfHoursOfEventWithId(r);t._getNumberOfHoursOfEventWithId(c)>m&&(a=s,s=d,d=a,e[n]=s,o=s.eventSegStart,e[l]=d)}}}return e},_whetherEventsAreColliding:function(e,t){var i=e.eventSegStart,n=e.eventSegEnd,a=t.eventSegStart,s=t.eventSegEnd,r=0,o=0,l=0,d=0,c=this.compareDateTimes(i,a),v=this.compareDateTimes(i,s),g=this.compareDateTimes(n,a),m=this.compareDateTimes(n,s);return(c>0||0===c)&&(r=1),v<0&&(o=1),g>0&&(l=1),(m<0||0===m)&&(d=1),1===r&&1===o||1===l&&1===d},_removeEventSegWithId:function(e){var t=[];e=parseInt(e);for(var i=0;i<this.tv.oASmEvSeg.length;i++){var n=this.tv.oASmEvSeg[i];parseInt(n.eventId)!==parseInt(e)&&t.push(n)}this.tv.oASmEvSeg=[],this.tv.oASmEvSeg=t},_createAndAddEventSegForId:function(e,t,i,n){for(var a=this,s=a.__getStartAndEndDatesOfEventForView(t,i,n),r=s[0],o=s[1],l=a.__getNumberOfHoursOfEvent(t,i,n),d=a._getNumberOfDaysOfEventForWeek(t,i,n,!1,!0),c=a.setting.is24Hour?"HH:mm":"h[:m]sm",v=a.getDateInFormat({date:i},c,a.setting.is24Hour,!0),g=a.getDateInFormat({date:n},c,a.setting.is24Hour,!0),m=new Date(r);!a.__findWhetherDateIsVisibleInCurrentView(m,t||l>23,r,o);)m.setDate(m.getDate()+1),m=a.setDateInFormat({date:m},"START");r=new Date(m);for(var D=a.setDateInFormat({date:r},"START"),f=0;f<d;f++){var u=a.__getDayIndexInView(D),p={};p.iNumEvElem=d,p.iId=e,p.sId="Event-"+e,p.dStart=i,p.dEnd=n,p.dStartView=r,p.dEndView=o,p.dThisDate=D,p.iEventElem=f+1,p.iWkIndex=u;var h=a._createAndAddEventSeg(p),y="#"+h.sId,C=h.sElemTitle,w=h.iTopPos,S=h.iEventHeight,V=a.tv.fADVDayLftPos[u];a.tv.oDVEdtgEv!=={}&&$.cf.isValid(a.tv.oDVEdtgEv.dEditingDate)&&0===a.compareDates(a.tv.oDVEdtgEv.dEditingDate,D)&&(a.tv.oDVEdtgEv.iElemLeft=V);var b,E,T,M=$(a.elem).find(y);M.css({top:w,height:S,left:V}),M.attr("data-pos",h.sName),M.attr("title",C),b={},E=a.getEventDateTimeString(i,n,t,"&&").split("&&"),T=a.getEventWithId(e),b.title=T.title||"",b.startDateTime=E[0],b.endDateTime=E[1],M.data("tooltipcontent",b),w<0?M.find(".cEventLink").css({"margin-top":Math.abs(w)}):M.find(".cEventLink").css({"margin-top":0}),M.find(".cdvEventTime").html(v+"-"+g),D=new Date(D.getTime()+$.CalenStyle.extra.iMS.d)}},_createAndAddEventSeg:function(e){var t,i,n,a,s,r,o=this,l=e.iId,d=e.sId,c=e.dStart,v=e.dEnd,g=e.dThisDate,m=e.iEventElem,D=e.iWkIndex,f=($(o.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(o.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2/o.setting.unitTimeInterval,u=0,p=o.getDateInFormat({date:g},"object",!1,!1);o.setting.excludeNonBusinessHours?(s=o.setDateInFormat({iDate:{d:p.d,M:p.M,y:p.y,H:o.tv.oBsHours.startTime[0],m:o.tv.oBsHours.startTime[1],s:0,ms:0}},""),r=o.setDateInFormat({iDate:{d:p.d,M:p.M,y:p.y,H:o.tv.oBsHours.endTime[0],m:o.tv.oBsHours.endTime[1],s:0,ms:0}},"")):(s=o.setDateInFormat({iDate:p},"START"),r=o.setDateInFormat({iDate:p},"END"));var h=o.compareDateTimes(c,s)<0,y=o.compareDateTimes(v,r)>0,C=h?s:c,w=y?r:v,S=(w.getTime()-c.getTime())/$.CalenStyle.extra.iMS.m*f,V=(w.getTime()-C.getTime())/$.CalenStyle.extra.iMS.m*f,b=V;i=C.getHours(),t=C.getMinutes(),n=Math.floor(t/o.setting.unitTimeInterval)*o.setting.unitTimeInterval,a=o.getNumberStringInFormat(i,2,!1)+o.getNumberStringInFormat(n,2,!1),u=$(o.elem).find(".cdvTimeSlotTableRow"+a).position().top,h&&(b=S,u-=S-V);var E=a+"|"+D+"|"+u,T=c+"\n"+v,M=new function(e,t,i,n,a,s,r,o){this.dayNo=e,this.eventId=t,this.eventDisplayId=i,this.eventSegId=n,this.eventSegStart=a,this.eventSegEnd=s,this.segLeftColumn=r,this.segColumns=o}(D+1,l,T,d+="-"+m,C,w,0,0);o.tv.oASmEvSeg.push(M);var I={};return I.sElemTitle=T,I.sId=d,I.sName=E,I.iTopPos=u,I.iEventHeight=b,I},_setOpacityOfEventSeg:function(e,t){var i=this.compareDates(t,$.CalenStyle.extra.dToday)<0,n=$(this.elem).find(".Event-"+e).hasClass("cBlurredEvent");i&&!n&&$(this.elem).find(".Event-"+e).addClass("cBlurredEvent"),!i&&n&&$(this.elem).find(".Event-"+e).removeClass("cBlurredEvent")},_changeViewPropertiesWhileEditing:function(e,t){var i,n=this;$.cf.isValid(n.tv.oDVEdtgEv)&&($.cf.compareStrings(n.tv.oDVEdtgEv.type,"cdvEvent")?i=".Event-"+t:$.cf.compareStrings(n.tv.oDVEdtgEv.type,"cdvEventAllDay")&&(i="#Event-"+t),$.cf.compareStrings(e,"BEFORE")?$(n.elem).find(i).hasClass("cEditingEvent")||($.cf.compareStrings(n.tv.oDVEdtgEv.type,"cdvEvent")?$(n.elem).find(i).addClass("cEditingEvent cEditingEventUI"):$(n.elem).find(i).addClass("cEditingEvent cEditingEventUI cEditingEventAllDay")):$.cf.compareStrings(e,"AFTER")&&($(n.elem).find(i).removeClass("cEditingEvent cEditingEventAllDay cEditingEventUI"),n.tv.iTSEndEditing=$.cf.getTimestamp()))},__updateDetailViewTable:function(){var e,t,i=this,n=1===i.tv.iNoVDayDis?"cdvSingleColumn":"cdvMultiColumn",a=$.CalenStyle.extra.iScrollbarWidth;i._getTimeSlotsArrayForCurrentView(),$.cf.compareStrings(i.tv.sLoadType,"Prev")?i.tv.dLoadDt=i.tv.dAVDt[0]:$.cf.compareStrings(i.tv.sLoadType,"Next")&&(i.tv.dLoadDt=i.tv.dAVDt[i.tv.dAVDt.length-1]);var s="";for(s+="<thead>",$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")?s+="<tr class='cdvDetailTableRow1 cDayEventDetailView'>":s+="<tr class='cdvDetailTableRow1 cExceptDayEventDetailView'>",s+="<td  class='cdvDetailTableColumnTime'>",s+="<div class='cdvCellWeekNumberLabel'></div>",s+="<div class='cdvCellWeekNumber'></div>",s+="</td>",e=0;e<i.tv.iNoVDayDis;e++){var r="cdvCellDay"+e;t=n,e===i.tv.iNoVDayDis-1&&(t+=" cdvLastColumn"),s+="<td id='"+r+"' class='cdvTableColumns "+t+"'>",$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")?s+="<table class='cTable cdlvDaysTable cdlvDaysTableMain' cellspacing='0'></table>":s+="&nbsp;",s+="</td>"}for(a>0&&(s+="<td class='cdvDetailTableScroll'>&nbsp;</td>"),s+="</tr>",s+="</thead>",s+="<tbody>",s+="<tr class='cdvDetailTableRow2'>",s+="<td class='cdvDetailTableColumnTime'> &nbsp; </td>",e=0;e<i.tv.iNoVDayDis;e++){var o="cdvAllDayColumn"+e;t="",e===i.tv.iNoVDayDis-1&&(t+=" cdvLastColumn"),s+="<td id='"+o+"' class='cdvAllDayColumns "+t+"' title='"+i.tv.dAVDt[e]+"'> &nbsp; </td>"}for(a>0&&(s+="<td class='cdvDetailTableScroll'>&nbsp;</td>"),s+="</tr>",s+="<tr class='cdvDetailTableRow3'>",s+="<td class='cdvDetailTableColumnTime'> &nbsp; </td>",e=0;e<i.tv.iNoVDayDis;e++)t="cdvDetailTableColumn"+e,e===i.tv.iNoVDayDis-1&&(t+=" cdvLastColumn"),s+="<td class='cdvTableColumns "+t+"'> &nbsp; </td>";a>0&&(s+="<td class='cdvDetailTableScroll'>&nbsp;</td>"),s+="</tr>",s+="</tbody>",$(i.elem).find(".cdvDetailTableMain").html(s),s="",s+="<span class='cdvCellHeaderAllDay'><span>"+i.setting.miscStrings.allDay+"</span></span>",$(i.elem).find(".cdvContRow2Main").html(s),$.cf.compareStrings(i.setting.visibleView,"DayEventDetailView")?i.__updateDayListViewTable(!1,!0):i._setDateStringsInDetailView(),i._addTimeSlotTable(),s="",s+="<div class='cdvContRow3Events'></div>",$(i.elem).find(".cdvContRow3Main").append(s),i._takeActionOnTimeSlotTableClick()},__addEventsInDetailView:function(e){var t=this;($.cf.compareStrings(e,"AllDay")||$.cf.compareStrings(e,"Both"))&&$(t.elem).find(".cdvContRow2Main").length>0&&$(t.elem).find(".cdvContRow2Main .cdvEventAllDay").remove(),($.cf.compareStrings(e,"Small")||$.cf.compareStrings(e,"Both"))&&$(t.elem).find(".cdvContRow3Events").length>0&&$(t.elem).find(".cdvContRow3Events").html("");var i=t.getArrayOfEventsForView(t.tv.dVDSDt,t.tv.dVDEDt),n=$.cf.isValid(t.setting.hideEventIcon[t.setting.visibleView])?t.setting.hideEventIcon[t.setting.visibleView]:!!$.cf.isValid(t.setting.hideEventIcon.Default)&&t.setting.hideEventIcon.Default,a=$.cf.isValid(t.setting.hideEventTime[t.setting.visibleView])?t.setting.hideEventTime[t.setting.visibleView]:!!$.cf.isValid(t.setting.hideEventTime.Default)&&t.setting.hideEventTime.Default,s=t.setting.is24Hour?"HH:mm":"h[:m]sm";if(($.cf.compareStrings(e,"Small")||$.cf.compareStrings(e,"Both"))&&(t.tv.oASmEvSeg=[]),($.cf.compareStrings(e,"AllDay")||$.cf.compareStrings(e,"Both"))&&(t.tv.oAADEvSeg=[]),i.length>0){for(var r=[],o=0;o<i.length;o++){var l=i[o],d=null,c=null,v=0,g="",m="",D="",f=!1;null!==l.start&&(d=l.start),null!==l.end&&(c=l.end),null!==l.isAllDay&&(v=l.isAllDay),null!==l.title&&(g=l.title),null!==l.desc&&l.desc,null!==l.type&&l.type,null!==l.url&&(m=l.url),null!==l.droppableId&&(D=l.droppableId),null!==l.isMarked&&(f=l.isMarked),f&&(v=!0);var u,p=t.__getStartAndEndDatesOfEventForView(v,d,c),h=p[0],y=p[1],C=t.getNumberOfDaysOfEvent(v,d,c,!1,!1,!0),w=t._getNumberOfDaysOfEventForWeek(v,d,c,!1,!0),S=t.__getNumberOfHoursOfEvent(v,d,c);if(w>0){for(var V=new Date(h);!t.__findWhetherDateIsVisibleInCurrentView(V,v||S>23,h,y);)V.setDate(V.getDate()+1),V=t.setDateInFormat({date:V},"START");h=new Date(V);var b=t.setDateInFormat({date:h},"START"),E=b.getTime(),T=l.backgroundColor;T=$.cf.compareStrings(T,"")||$.cf.compareStrings(T,"transparent")?"transparent":T;var M=l.borderColor||$.cf.addHashToHexcode(t.setting.borderColor);M=$.cf.compareStrings(M,"")||$.cf.compareStrings(M,"transparent")?"transparent":M;var I=l.textColor||$.cf.addHashToHexcode(t.setting.textColor);I=$.cf.compareStrings(I,"")||$.cf.compareStrings(I,"transparent")?$.cf.addHashToHexcode(t.setting.textColor):I;var A="",_="",k="",H="",F="";f?l.fromSingleColor?(A+="background: "+T+"; ",A+="border-color: "+M+"; ",A+="color: "+I+"; ",F="color: "+I+"; ",k="background: "+I+"; color: #FFFFFF","background: "+I+"; "):(M=T,A+="background: "+$.cf.getRGBAString(T,.1)+"; ",A+="border-color: "+M+"; ",A+="color: "+T+"; ",F="color: "+T+"; ",k="background: "+T+"; color: "+I,"background: "+T+"; "):(A+="background: "+T+"; ",A+="border-color: "+M+"; ",A+="color: "+I+"; ",F="color: "+I+"; ",k="color: "+I+"; ","background: "+I+"; ",H="border-color: "+(l.fromSingleColor?I:"#000000")),"transparent"===M&&(A+="border-width: 0px; "),_=f?$.cf.isValid(l.icon)&&"Dot"!==l.icon?l.icon:"cs-icon-Mark":$.cf.isValid(l.icon)?l.icon:t.setting.eventIcon;var N,x,B,L,O,P,R,W=t.__getDayIndexInView(b),j=(t.tv.fADVDayLftPos[W],0);if(1===v||!0===v||S>23){if($.cf.compareStrings(e,"AllDay")||$.cf.compareStrings(e,"Both")){u="Event-"+l.calEventId;var z=$(t.elem).find("#"+u).length>0,Y=!1;if(z){var q=new Date($(t.elem).find("#"+u).data("startdate"));Y=0!==t.compareDates(q,h)}if(z&&Y||!z){var U,Q=w,Z=t.compareDates(d,h),J=t.compareDates(t.tv.dVDSDt,d),G=t.compareDates(t.tv.dVDEDt,d),X=J<=0&&G>=0,K=t.compareDates(t.tv.dVDSDt,c),ee=t.compareDates(t.tv.dVDEDt,c),te=K<=0&&ee>=0,ie=t.compareDates(c,y),ne=0;if(0===r.length)ne=1,(U=[]).push([h,y]),r.push([ne,U]);else{for(var ae=0,se=0;se<r.length;se++){var re=(U=r[se])[0];re>ae&&(ae=re);for(var oe=U[1],le=!1,de=0;de<oe.length;de++){var ce=oe[de];if(t.compareDates(h,ce[1])<=0){le=!1;break}le=!0}if(le){ne=re,oe.push([h,y]);break}}0===ne&&(ne=ae+1,(U=[]).push([h,y]),r.push([ne,U]))}t.tv.oAADEvSeg.push([u,Q,W,ne]),N="cdvEventAllDay ",t.compareDates(c,$.CalenStyle.extra.dToday)<0&&(N+="cBlurredEvent "),t.setting.isTooltipInDetailView&&(N+=" cEventTooltip"),f&&(N+=" cMarkedDayEvent"),B="<span id='"+u+"' class='"+N+"' style='"+A+"' data-startdate='"+h+"' "+($.cf.isValid(D)?"data-droppableid='"+D+"'":"")+" title='' data-id='"+l.calEventId+"'>",B+="<a class='cEventLink' style='"+F+"'>",f?(B+="<span class='cdvEventTitle'>"+g+"</span>",B+="<span class='cdvEventIcon "+_+"' style='"+k+"'></span>",$.cf.compareStrings(t.setting.visibleView,"DayEventListView")&&$.cf.isValid(l.status)&&(B+="<span class='cdvEventStatus' style='border-color: "+l.statusColor+";'></span>")):(0!==Z&&(B+="<span class='cPartialEvent cPartialEventLeft' style='"+H+"'></span>"),!a&&!v&&C>1&&X&&(B+="<span class='cdvEventTimeLeft'>"+t.getDateInFormat({date:d},s,t.setting.is24Hour,!0)+"</span>"),n||$.cf.compareStrings(_,"Dot")||(B+="<span class='cdvEventIcon "+_+"' style='"+k+"'></span>"),$.cf.compareStrings(t.setting.visibleView,"DayEventListView")&&$.cf.isValid(l.status)&&(B+="<span class='cdvEventStatus' style='border-color: "+l.statusColor+";'></span>"),B+="<span class='cdvEventTitle'>"+g+"</span>",!a&&!v&&C>1&&te&&(B+="<span class='cdvEventTimeRight'>"+t.getDateInFormat({date:c},s,t.setting.is24Hour,!0)+"</span>"),0!==ie&&(B+="<span class='cPartialEvent cPartialEventRight' style='"+H+"'></span>")),B+="</a>",B+="</span>",$(t.elem).find(".cdvContRow2Main").append(B),L="#"+u,P=(O=$(t.elem).find(L)).find(".cEventLink"),x={},R=t.getEventDateTimeString(d,c,v,"&&").split("&&"),x.title=g,x.startDateTime=R[0],x.endDateTime=R[1],O.data("tooltipcontent",x),t.setting.eventRendered&&t.setting.eventRendered.call(t,l,O,P,t.setting.visibleView,!1),($.cf.isValid(m)||t.setting.eventClicked)&&P.on($.CalenStyle.extra.sClickHandler,{url:m,eventId:l.calEventId,eventElemSelector:L,eventType:"AllDay",view:"DetailView",pluginId:t.tv.pluginId},t.__bindClick)}}}else if($.cf.compareStrings(e,"Small")||$.cf.compareStrings(e,"Both")){var ve="Event-"+l.calEventId;if(0===$(t.elem).find("."+ve).length)for(var ge=1;ge<=w;ge++){u=ve,W=t.__getDayIndexInView(b),t.tv.fADVDayLftPos[W],N="cdvEvent ",t.compareDates(c,$.CalenStyle.extra.dToday)<0&&(N+="cBlurredEvent "),N+=u,t.setting.isTooltipInDetailView&&(N+=" cEventTooltip");var me={};me.iNumEvElem=w,me.iId=l.calEventId,me.sId=u,me.dStart=d,me.dEnd=c,me.dStartView=h,me.dEndView=y,me.dThisDate=b,me.iEventElem=ge,me.iWkIndex=W;var De=t._createAndAddEventSeg(me),fe=De.sName;u=De.sId,De.iTopPos,j=De.iEventHeight;var ue=t.getDateInFormat({date:d},s,t.setting.is24Hour,!0)+" - "+t.getDateInFormat({date:c},s,t.setting.is24Hour,!0);B="",B+="<span id='"+u+"' class='"+N+"' style='"+(A+="left: 0px; top: 0px; height: "+parseInt(j)+"px; width: 10px;")+"' data-pos='"+fe+"' "+($.cf.isValid(D)?"data-droppableid='"+D+"'":"")+" title='' data-id='"+l.calEventId+"'>",B+="<a class='cEventLink' style='color: "+I+";'>",n||$.cf.compareStrings(_,"Dot")||(B+="<span class='cdvEventIcon "+_+"' style='"+k+"' align='left'></span>"),B+="<div class='cdvEventDetails'>",$.cf.compareStrings(t.setting.visibleView,"DayEventListView")&&$.cf.isValid(l.status)&&(B+="<span class='cdvEventStatus' style='border-color: "+l.statusColor+";'></span>"),B+="<div class='cdvEventTitle'>"+g+"</div>",a||(B+="<div class='cdvEventTime'>"+ue+"</div>"),B+="</div>",B+="</a>",B+="</span>",$(t.elem).find(".cdvContRow3Main .cdvContRow3Events").append(B),L="#"+u,P=(O=$(t.elem).find(L)).find(".cEventLink"),x={},R=t.getEventDateTimeString(d,c,v,"&&").split("&&"),x.title=g,x.startDateTime=R[0],x.endDateTime=R[1],O.data("tooltipcontent",x),E+=$.CalenStyle.extra.iMS.d,b.setTime(E),t.setting.eventRendered&&t.setting.eventRendered.call(t,l,O,P,t.setting.visibleView,!1),($.cf.isValid(m)||t.setting.eventClicked)&&P.on($.CalenStyle.extra.sClickHandler,{url:m,eventId:l.calEventId,eventElemSelector:L,eventType:"Small",view:"DetailView",pluginId:t.tv.pluginId},t.__bindClick)}}}}t.tv.dDrgSDt=null,t.tv.dDrgEDt=null,($.cf.compareStrings(e,"AllDay")||$.cf.compareStrings(e,"Both"))&&t._makeEventEditableInDetailView(".cdvEventAllDay"),($.cf.compareStrings(e,"Small")||$.cf.compareStrings(e,"Both"))&&(t._setPropertiesOfEventSeg(),t._makeEventEditableInDetailView(".cdvEvent")),t.setting.isTooltipInDetailView&&t._addTooltipInDetailView(),t.setting.eventsAddedInView&&t.setting.eventsAddedInView.call(t,t.setting.visibleView,".cdvEvent, .cdvEventAllDay")}else console.log("to.__addEventsInDetailView - No Events");t.addRemoveViewLoader(!1,"cEventLoaderBg"),t.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_takeActionOnTimeSlotTableClick:function(){var e=this;$(e.elem).find(".calendarCont").on($.CalenStyle.extra.sClickHandler,function(t){if(!$(e.elem).find(".cdvEvent").hasClass("cEditingEvent")&&e.setting.cellClicked){var i={};i.x=t.pageX||t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches[0].pageX,i.y=t.pageY||t.originalEvent.touches[0].pageY||t.originalEvent.changedTouches[0].pageY;for(var n,a,s,r,o=e.__getElementsAtPoint(i.x,i.y),l=0,d=0,c=0;c<o.length;c++){var v,g=$(o[c]),m=g.hasClass("cdvAllDayColumns"),D=g.hasClass("cdvTableColumns"),f=g.hasClass("cdvTimeSlotTableRow");if(m&&(v=g.attr("title"),n=new Date(v),a=!0),D&&(v=g.attr("title"),n=new Date(v),r=!0),f){var u=g.attr("class");u=(u=u.replace(/cdvTimeSlotTableRow/g,"")).replace(/ /g,""),l=parseInt(u.substr(0,2)),d=parseInt(u.substr(2,2)),s=!0}}e.setting.cellClicked&&(a?e.setting.cellClicked.call(e,e.setting.visibleView,n,!0,i):r&&s&&(n.setHours(l),n.setMinutes(d),e.setting.cellClicked.call(e,e.setting.visibleView,n,!1,i)))}t.stopPropagation(),e._makeEventNonEditableInDetailView(),e._callCommonEvents()})},_makeEventNonEditableInDetailView:function(){var e=this;if(null!==e.tv.oEvEdt){$("body").css("cursor","default");var t=e.tv.oEvEdt.calEventId,i=e.tv.oEvEdt.end;e._changeViewPropertiesWhileEditing("AFTER",t),e._setOpacityOfEventSeg(t,i),$.cf.compareStrings(e.tv.oDVEdtgEv.type,"cdvEvent")?(e._adjustEventsInDetailView(),$.CalenStyle.extra.bTouchDevice&&$(e.elem).find(".Event-"+t).hasClass("ui-resizable")&&$(e.elem).find(".Event-"+t).resizable("destroy")):e._adjustAllDayEventsInDetailView(),e.tv.oEvEdt=null,e.tv.oDVEdtgEv={}}},_makeEventEditableInDetailView:function(e){var t,i,n,a=this;$(a.elem).find(e).on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()}),$.cf.compareStrings(e,".cdvEvent")?(t="EventEditable",i="EventDraggable",n="EventResizable"):$.cf.compareStrings(e,".cdvEventAllDay")&&(t="EventAllDayEditable",i="EventAllDayDraggable",n="EventAllDayResizable");for(var s=$(a.elem).find(e),r=0;r<s.length;r++){var o=s[r],l=$(o).attr("data-id"),d=a.getEventWithId(l),c="";(d.isDragNDropInDetailView||d.isResizeInDetailView)&&(c+=t,d.isDragNDropInDetailView&&(c+=" "+i+" cDragNDrop"),d.isResizeInDetailView&&(c+=" "+n,$.CalenStyle.extra.bTouchDevice||(a.setting.isResizeInDetailView?a._makeEventResizableInDetailView(".Event-"+l):$(".cdvEvent").removeClass("EventResizable")))),$(o).addClass(c)}a.setting.isDragNDropInDetailView?a._makeEventDraggableInDetailView(e,i):($(".cdvEvent").removeClass("EventDraggable cDragNDrop"),$(".cdvEventAllDay").removeClass("EventAllDayDraggable cDragNDrop")),$(a.elem).find("."+t).each(function(){var i,n,s,r,o,l,d,c,v,g,m=!1,D=$.CalenStyle.extra.bTouchDevice?300:0,f=!1;$(this).on({mousedown:function(s){if($.cf.compareStrings(e,".cdvEvent")&&a.tv.bDVScrlg)return!1;v=s.timeStamp,m=!0,i=s.pageX,n=s.pageY,o=i-8,l=n-8,d=i+8,c=n+8,f=!1,setTimeout(function(){if(m){var i=s.pageX,n=s.pageY;if(null===a.tv.oEvEdt)o<=i&&i<=d&&(l<=n&&n<=c)&&(a.tv.bEvLgPresd=!0);if(a.tv.bEvLgPresd&&(m=!1,null===a.tv.oEvEdt)){for(var r=s.target,v=$(a.elem).find(r).hasClass(t);!v&&(r=$(a.elem).find(r).parent(),v=$(a.elem).find(r).hasClass(t),void 0!==$(a.elem).find(r).attr("class")););g=$(a.elem).find(r).attr("id"),$.cf.compareStrings(e,".cdvEvent")?f=a._setSmallEventBeingEditedInDetailView(f,g):$.cf.compareStrings(e,".cdvEventAllDay")&&a._setAllDayEventBeingEditedInDetailView(g)}}},D)},mousemove:function(u){if($.cf.compareStrings(e,".cdvEvent")&&a.tv.bDVScrlg)return!1;if(m){if(s=u.pageX,r=u.pageY,null===a.tv.oEvEdt)if(o<=s&&s<=d&&(l<=r&&r<=c))u.timeStamp-v>D&&(a.tv.bEvLgPresd=!0);if(a.tv.bEvLgPresd){var p=Math.abs(s-i)>5,h=Math.abs(r-n)>1;if(m&&(p||h)&&(m=!1,null===a.tv.oEvEdt)){for(var y=u.target,C=$(a.elem).find(y).hasClass(t);!C&&(y=$(a.elem).find(y).parent(),C=$(a.elem).find(y).hasClass(t),void 0!==$(a.elem).find(y).attr("class")););g=$(a.elem).find(y).attr("id"),$.cf.compareStrings(e,".cdvEvent")?f=a._setSmallEventBeingEditedInDetailView(f,g):$.cf.compareStrings(e,".cdvEventAllDay")&&a._setAllDayEventBeingEditedInDetailView(g)}}}},mouseup:function(){m=!1}})})},_setSmallEventBeingEditedInDetailView:function(e,t){var i=this,n="#"+t,a=$(i.elem).find(".cdvTableColumns").width()-5,s=$(i.elem).find(n).position().left,r=s,o=i._getDateBasedOnLeftPosition(s),l=t.split("-"),d=l[1],c=l[2],v=".Event-"+d;if(!e){r=i._getLeftPositionOfEventSeg(s),$(i.elem).find(".Event-"+d).css({width:a});var g=i.getEventWithId(d),m=g.start,D=g.end,f=g.isAllDay,u=i.__getStartAndEndDatesOfEventForView(f,m,D),p=u[0],h=u[1];$(i.elem).find(n).css({left:r});var y=i.compareDates(o,p),C=i.compareDates(o,h),w=0===y||0===C;if($(i.elem).find(".Event-"+d).length>1&&w){var S,V;0===y?(S=h,V="#Event-"+d+"-2"):0===C&&(S=p,V="#Event-"+d+"-1");var b=i.__getDayIndexInView(S),E=i.tv.fADVDayLftPos[b];$(i.elem).find(V).css({left:E})}e=!0,i.tv.oEvEdt=i.getEventWithId(d),i.tv.oDVEdtgEv={},i.tv.oDVEdtgEv.type="cdvEvent",i.tv.oDVEdtgEv.sEventId=d}return i.tv.oDVEdtgEv.iSegIndex=c,i.tv.oDVEdtgEv.dEditingDate=o,i.tv.oDVEdtgEv.iElemLeft=r,$.CalenStyle.extra.bTouchDevice&&(i._changeViewPropertiesWhileEditing("BEFORE",d),i.setting.isResizeInDetailView&&null!==i.tv.oEvEdt&&i.tv.oEvEdt.isResizeInDetailView&&i._makeEventResizableInDetailView(v)),e},_setAllDayEventBeingEditedInDetailView:function(e){var t=this,i=e.split("-")[1];t.tv.oEvEdt=t.getEventWithId(i),t.tv.oDVEdtgEv={},t.tv.oDVEdtgEv.type="cdvEventAllDay",t.tv.oDVEdtgEv.sEventId=i,t._changeViewPropertiesWhileEditing("BEFORE",i)},_getWhetherEventIsAllDay:function(e){var t=this.getEventWithId(e);return null!==t.isAllDay&&t.isAllDay},_makeEventDraggableInDetailView:function(e,t){var i,n=this;$.cf.compareStrings(e,".cdvEvent")?i="Events":$.cf.compareStrings(e,".cdvEventAllDay")&&(i="AllDayEvents");var a,s,r,o,l,d,c,v,g,m,D,f,u,p,h,y,C,w,S=n.setting.is24Hour?"HH:mm":"h[:m]sm",V=$.CalenStyle.extra.iScrollbarWidth;if($.cf.compareStrings(e,".cdvEvent")){var b=$(n.elem).find(".cdvTableColumns").width()-5;s=b;var E,T,M,I,A,_,k,H,F,N,x,B,L,O,P,R,W,j,z,Y,q=b+6,U=($(n.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(n.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2,Q=n.tv.dDrgSDt,Z=n.tv.dDrgEDt,J=!1;d=$(n.elem).css("margin-left"),d=parseInt(d.replace("px","")),r=$(n.elem).find(".cdvDetailTableColumnTime").width(),v=(c=$(n.elem).find(".cdvContRow3Events").position().left+d+r)+($(n.elem).find(".cdvContRow3Events").width()-r),f=1440,D=-1440,o=!1,$(n.elem).find("."+t).draggable({zIndex:10,scope:i,grid:[q,U],scroll:!1,containment:[c,D,v,f],delay:10,cursor:"move",revertDuration:300,start:function(e,t){if(n.tv.bDVResEv||n.tv.bDVScrlg)return!1;if(u=this,h=$(u).attr("id"),y=h.split("-"),C=y[1],w=y[2],$.CalenStyle.extra.bTouchDevice||n._changeViewPropertiesWhileEditing("BEFORE",C),!(o=null!==n.tv.oEvEdt&&n.tv.oDVEdtgEv.sEventId===C))return!1;n.tv.bDVDrgEv=!0;var i=n.getEventWithId(C);Q=i.start,Z=i.end,L=i.isAllDay,B=n.__getStartAndEndDatesOfEventForView(L,Q,Z),R=B[0],W=B[1],E=t.position.left,M=E,I=E,T=t.position.top,T,A=T,!0},drag:function(e,t){if(u=this,h=$(u).attr("id"),y=h.split("-"),C=y[1],w=y[2],L=n._getWhetherEventIsAllDay(C),!(o=null!==n.tv.oEvEdt&&n.tv.oDVEdtgEv.sEventId===C))return!1;var i,a=t.position.left,s=t.position.top,r=a>=40,l=Math.round((a-I)/q),d=Math.round((s-T)/U),c=Math.abs(l),v=Math.abs(d),g=s!==A&&v>=1;if(!!(r&&a!==I&&c>=1)){var m=Math.round((a-E)/q);Math.abs(m*q);var D=a-M,f="None";D>0?f="Right":D<0&&(f="Left");var V=n.compareDates(n.tv.dVDSDt,n.tv.oDVEdtgEv.dEditingDate),b=n.compareDates(n.tv.dVDEDt,n.tv.oDVEdtgEv.dEditingDate),G=n.compareDates(Q,n.tv.oDVEdtgEv.dEditingDate),X=n.compareDates(Z,n.tv.oDVEdtgEv.dEditingDate),K=n._getDateForDayNumber(2,!0),ee=n._getDateForDayNumber(2,!1),te=n.compareDates(K,n.tv.oDVEdtgEv.dEditingDate),ie=n.compareDates(ee,n.tv.oDVEdtgEv.dEditingDate);i=$(n.elem).find(".Event-"+C).length,$.cf.compareStrings(f,"Right")&&0!==b?(F=a+q/2,n.tv.oDVEdtgEv.dEditingDate=n._getDateBasedOnLeftPosition(F),N=Q.getTime(),N+=$.CalenStyle.extra.iMS.d,Q=new Date(N),x=Z.getTime(),x+=$.CalenStyle.extra.iMS.d,Z=new Date(x),n.tv.dDrgSDt=Q,n.tv.dDrgEDt=Z,B=n.__getStartAndEndDatesOfEventForView(L,Q,Z),R=B[0],W=B[1],i>1?1===parseInt(w)&&(_=$(n.elem).find("#Event-"+C+"-2"),0===ie&&_.remove()):0===V&&0!==G&&(H="Event-"+C+"-2",$(this).attr("id",H),_=$(this).clone(),k="Event-"+C+"-1",_.attr("id",k),$(n.elem).find(".cdvContRow3Events").append(_),n._makeEventEditableInDetailView(".cdvEvent")),n._removeEventSegWithId(C),n._createAndAddEventSegForId(C,L,Q,Z)):$.cf.compareStrings(f,"Left")&&0!==V&&(F=a+q/2,n.tv.oDVEdtgEv.dEditingDate=n._getDateBasedOnLeftPosition(F),N=Q.getTime(),N-=$.CalenStyle.extra.iMS.d,Q=new Date(N),x=Z.getTime(),x-=$.CalenStyle.extra.iMS.d,Z=new Date(x),n.tv.dDrgSDt=Q,n.tv.dDrgEDt=Z,B=n.__getStartAndEndDatesOfEventForView(L,Q,Z),R=B[0],W=B[1],i>1?2===parseInt(w)&&(_=$(n.elem).find("#Event-"+C+"-1"),0===te&&_.remove()):0===b&&0!==X&&(_=$(this).clone(),k="Event-"+C+"-2",_.attr("id",k),$(n.elem).find(".cdvContRow3Events").append(_),n._makeEventEditableInDetailView(".cdvEvent")),n._removeEventSegWithId(C),n._createAndAddEventSegForId(C,L,Q,Z)),O=n.getDateInFormat({date:Q},S,n.setting.is24Hour,!0),P=n.getDateInFormat({date:Z},S,n.setting.is24Hour,!0),$(n.elem).find(".Event-"+C+" .cdvEventDetails .cdvEventTime").html(O+"-"+P),I=a}if(g){var ne,ae,se,re,oe,le,de=s-A,ce=Math.round(de/U),ve=ce*n.tv.iUTmMS;if(Math.abs(ce*U),Y="None",de>0?Y="Down":de<0&&(Y="Up"),$.cf.compareStrings(Y,"Up")){var ge=$(n.elem).find(".cdvTimeSlotTableRow").first().position().top+2*U;if(e.pageX,(ne=e.pageY-$(n.elem).find(".cdvContRow3Main").position().top)<ge,se=(ae=$(this).height())-Math.abs(s),re=1*U+ae%U,s<0&&se<re,s<0?$(this).find(".cEventLink").css({"margin-top":Math.abs(s)}):$(this).find(".cEventLink").css({"margin-top":0}),N=Q.getTime(),N+=ve,Q=new Date(N),x=Z.getTime(),x+=ve,Z=new Date(x),B=n.__getStartAndEndDatesOfEventForView(L,Q,Z),R=B[0],W=B[1],j=n._getNumberOfDaysOfEventForWeek(L,Q,Z,!1,!0),i=$(n.elem).find(".Event-"+C).length,n.__getDayIndexInView(n.tv.oDVEdtgEv.dEditingDate),i>0&&0===j)return $(this).remove(),!1;(i>0||j>0)&&(i>j&&(H="#Event-"+C+"-2",$(n.elem).find(H).remove(),n._performOperationsAfterDraggingStopsInDetailView(C,Q,Z,!1)),i<j?(oe=n.compareDates(n.tv.oDVEdtgEv.dEditingDate,R),le=n.compareDates(n.tv.oDVEdtgEv.dEditingDate,W),n.tv.dDrgSDt=Q,n.tv.dDrgEDt=Z,0===oe?k="Event-"+C+"-2":0===le&&(k="Event-"+C+"-1",H="Event-"+C+"-2",$(this).attr("id",H)),(_=$(this).clone()).attr("id",k),$(n.elem).find(".cdvContRow3Events").append(_),n._makeEventEditableInDetailView(".cdvEvent"),n._removeEventSegWithId(C),n._createAndAddEventSegForId(C,L,Q,Z)):i===j&&(n._removeEventSegWithId(C),n._createAndAddEventSegForId(C,L,Q,Z)))}else if($.cf.compareStrings(Y,"Down")){var me=$(n.elem).find(".cdvTimeSlotTableRow").last().position().top,De=me+U,fe=me-1*U;e.pageX,(ne=e.pageY-$(n.elem).find(".cdvContRow3Main").position().top+$(n.elem).find(".cdvContRow3Main").scrollTop())>me,ne>fe,(ae=$(this).height())<=(re=1*U+ae%U),s<0?$(this).find(".cEventLink").css({"margin-top":Math.abs(s)}):$(this).find(".cEventLink").css({"margin-top":0}),N=Q.getTime(),N+=ve,Q=new Date(N),x=Z.getTime(),x+=ve,Z=new Date(x);var ue=s+(ae=$(this).height());if(ue>De&&(ae-=ue-De,$(this).css({height:ae})),B=n.__getStartAndEndDatesOfEventForView(L,Q,Z),R=B[0],W=B[1],O=n.getDateInFormat({date:Q},S,n.setting.is24Hour,!0),P=n.getDateInFormat({date:Z},S,n.setting.is24Hour,!0),j=n._getNumberOfDaysOfEventForWeek(L,Q,Z,!1,!0),i=$(n.elem).find(".Event-"+C).length,n.__getDayIndexInView(n.tv.oDVEdtgEv.dEditingDate),i>0&&0===j)return $(this).remove(),!1;if(i>0||j>0)if(i>j){var pe="Event-"+C+"-1";H="#"+pe,$(n.elem).find(H).remove(),k="#Event-"+C+"-2",$(n.elem).find(k).attr("id",pe),n._performOperationsAfterDraggingStopsInDetailView(C,Q,Z,!1)}else i<j?(oe=n.compareDates(n.tv.oDVEdtgEv.dEditingDate,R),le=n.compareDates(n.tv.oDVEdtgEv.dEditingDate,W),n.tv.dDrgSDt=Q,n.tv.dDrgEDt=Z,0===oe?k="Event-"+C+"-2":0===le&&(k="Event-"+C+"-1",H="Event-"+C+"-2",$(this).attr("id",H)),(_=$(this).clone()).attr("id",k),$(n.elem).find(".cdvContRow3Events").append(_),n._makeEventEditableInDetailView(".cdvEvent"),n._removeEventSegWithId(C),n._createAndAddEventSegForId(C,L,Q,Z)):i===j&&(n._removeEventSegWithId(C),n._createAndAddEventSegForId(C,L,Q,Z))}A=s}n.tv.bDVDrgEv&&(t.position.left=n.tv.oDVEdtgEv.iElemLeft),M=a,s,n.tv.bChkDroppable&&(p=$(n.elem).find("#"+h+".ui-draggable-dragging"),j=n._getNumberOfDaysOfEventForWeek(L,Q,Z,!1,!0),z=p.attr("data-droppableid"),(J=n._findWhetherEventEnteredNonDroppableZone(Q,Z,L,j,z))?(p.addClass("cCursorNotAllowed"),p.find(".cEventLink").addClass("cCursorNotAllowed")):(p.removeClass("cCursorNotAllowed"),p.find(".cEventLink").removeClass("cCursorNotAllowed")))},stop:function(e,t){if(u=this,h=$(u).attr("id"),y=h.split("-"),C=y[1],w=y[2],o=null!==n.tv.oEvEdt&&n.tv.oDVEdtgEv.sEventId===C,n.tv.bChkDroppable&&(p=$(n.elem).find("#"+h+".ui-draggable-dragging"),j=n._getNumberOfDaysOfEventForWeek(L,Q,Z,!1,!0),z=p.attr("data-droppableid"),J=n._findWhetherEventEnteredNonDroppableZone(Q,Z,L,j,z),p.removeClass("cCursorNotAllowed"),p.find(".cEventLink").removeClass("cCursorNotAllowed")),J)setTimeout(function(){if(n._performOperationsAfterDraggingStopsInDetailView(C,null,null,!0),n.tv.dDrgSDt=null,n.tv.dDrgEDt=null,!o)return!1},300);else{if(!o)return $.CalenStyle.extra.bTouchDevice||n._makeEventNonEditableInDetailView(),n.tv.dDrgSDt=null,n.tv.dDrgEDt=null,!1;n._performOperationsAfterDraggingStopsInDetailView(C,Q,Z,!0),n.tv.bDVDrgEv=!1,n.tv.dDrgSDt=null,n.tv.dDrgEDt=null}},revert:function(e,t){return!!J}})}else $.cf.compareStrings(e,".cdvEventAllDay")&&(a=$(n.elem).find(".cdvEventAllDay").height(),(s=$(n.elem).find(".cdvTableColumns").width())>140&&(s=140),r=$(n.elem).find(".cdvDetailTableColumnTime").width(),l=$(n.elem).position().left,d=$(n.elem).css("margin-left"),v=(c=l+(d=parseInt(d.replace("px","")))+$(n.elem).find(".cdvContRow2Main").position().left+r)+$(n.elem).find(".cdvContRow2Main").width()-(s+V+r),g=$(n.elem).position().top,m=$(n.elem).css("margin-top"),D=g+(m=parseInt(m.replace("px","")))+$(n.elem).find(".cdvContRow2Main").position().top,n.tv.bDisFBar&&$.cf.compareStrings(n.setting.filterBarPosition,"Top")&&(D+=n.setting.filterBarHeight),f=D+$(n.elem).find(".cdvContRow2Main").height()-a,o=!1,$(n.elem).find("."+t).draggable({zIndex:100,scope:i,cursorAt:{top:5,left:5},containment:[c,D,v,f],cursor:"move",revertDuration:300,start:function(){if(p=$(this),h=p.attr("id"),y=h.split("-"),C=y[1],!(o=null!==n.tv.oEvEdt&&n.tv.oDVEdtgEv.sEventId===C))return!1;var e=p.clone();p.parent().append(e),$(e).removeClass("cEditingEvent").addClass("cEventBeingDragged"),p.find(".cPartialEventLeft, .cPartialEventRight, .cPartialEventBoth").remove(),p.css({width:s,height:a})},revert:function(){return!0}}))},_performOperationsAfterDraggingStopsInDetailView:function(e,t,i,n){var a=this,s=a.getEventWithId(e),r=s.isAllDay,o=s.start,l=s.end;$.cf.isValid(t)||(t=new Date(o)),$.cf.isValid(i)||(i=new Date(l)),s.start=t,s.end=i,a._removeEventSegWithId(e),a._createAndAddEventSegForId(e,r,t,i),a._setPropertiesOfEventSeg(),a.tv.oEvEdt=s,$(a.elem).find(".cdvEvent").removeClass("ui-draggable-dragging"),a.tv.bDVDrgEv=!1,a.setting.saveChangesOnEventDrop?(a._makeEventNonEditableInDetailView(),a.setting.saveChangesOnEventDrop.call(a,s,o,l,t,i)):n&&!$.CalenStyle.extra.bTouchDevice&&a._makeEventNonEditableInDetailView()},_adjustAllDayEventsInDetailView:function(){for(var e=this,t=e.tv.iNoVDayDis,i=$.CalenStyle.extra.iEventHeights[e.setting.visibleView],n=0,a=0,s=0,r=0,o=0;o<e.tv.oAADEvSeg.length;o++){var l=e.tv.oAADEvSeg[o],d=l[0],c=l[1],v=l[2];a=(l[3]-1)*(i+6)+6,s=e.tv.fADVDayLftPos[v];var g=v+c;n=(g>=t?e.tv.fADVDayLftPos[t-1]+e.tv.fDVDayWth+2:e.tv.fADVDayLftPos[g])-s-5;var m=$(e.elem).find("#"+d);m.css({top:a,left:s,width:n,height:i,"line-height":i+"px"}),a>r&&(r=a);var D=0;D+=m.find(".cdvEventIcon").outerWidth(!0),D+=m.find(".cPartialEventLeft").outerWidth(!0),D+=m.find(".cPartialEventRight").outerWidth(!0),D+=m.find(".cdvEventTimeLeft").outerWidth(!0),D+=m.find(".cdvEventTimeRight").outerWidth(!0),D+=m.find(".cdvEventStatus").outerWidth(!0);var f=n-(D+=10*$.CalenStyle.extra.iBorderOverhead);$(e.elem).find("#"+d).find(".cdvEventTitle").css({"max-height":i,"line-height":i+"px",width:f})}var u=r+i+12;$(e.elem).find(".cdvContRow2Main").css({height:u}),u=$(e.elem).find(".cdvContRow2Main").height(),$(e.elem).find(".cdvDetailTableRow2").css({height:u}),$(e.elem).find(".cdvCellHeaderAllDay").css({height:u});var p=$(e.elem).find(".cdvContRow2Main").position().top,h=$(e.elem).find(".cdvDetailTableMain").height(),y=$(e.elem).find(".cdvDetailTableRow1").height(),C=p+u+$.CalenStyle.extra.iEventHeightOverhead,w=h-(y+u+$.CalenStyle.extra.iEventHeightOverhead);$(e.elem).find(".cdvContRow3Main").css({height:w,top:C}),e._makeEventEditableInDetailView(".cdvEventAllDay")},_getLeftColumnAndWidthOfAnEventSegInDetailView:function(e){for(var t=this.tv.oASmEvSeg.length,i=0;i<t;i++){var n=this.tv.oASmEvSeg[i];if(n.eventSegId===e)return[n.segLeftColumn,n.segColumns]}return 0},_assignEventSegToColumnsInDetailView:function(e){var t,i,n=e.length,a=[],s=0;if(n>0){for(t=0;t<n;t++)if(i=e[t],0===t)s=1,i.segLeftColumn=s,a.push([s,[i]]);else if(1===t)s=2,i.segLeftColumn=s,a.push([s,[i]]);else{for(var r=!1,o=0;o<a.length;o++){for(var l=a[o],d=l[0],c=l[1],v=!1,g=0;g<c.length;g++){var m=c[g];if(this._whetherEventsAreColliding(i,m)){v=!0;break}}if(!v){i.segLeftColumn=d,c.push(i),r=!0;break}}r||(s++,i.segLeftColumn=s,a.push([s,[i]]))}for(t=0;t<n;t++)(i=e[t]).segColumns=s}return a},_addTimeSlotTable:function(){var e=this,t="",i=0;e.tv.fAHrTpPos=[],t+="<table class='cdvTimeSlotTable'>";for(var n=0;n<24*e.tv.iUTmSlt;n++){var a=Math.floor(n/e.tv.iUTmSlt),s=n%e.tv.iUTmSlt,r=s*e.setting.unitTimeInterval,o=new Date,l=new Date,d=new Date;if(o.setHours(a),o.setMinutes(r),l.setHours(e.tv.oBsHours.startTime[0]),l.setMinutes(e.tv.oBsHours.startTime[1]),d.setHours(e.tv.oBsHours.endTime[0]),d.setMinutes(e.tv.oBsHours.endTime[1]),!e.setting.excludeNonBusinessHours||e.compareDateTimes(o,l)>=0&&e.compareDateTimes(o,d)<0){var c=e.getNumberStringInFormat(a,2,!1)+e.getNumberStringInFormat(r,2,!1),v=e.getDateInFormat({iDate:{H:a,m:r}},"hh:mm",e.setting.is24Hour,!0);t+="<tr class='"+("cdvTimeSlotTableRow cdvTimeSlotTableRow"+c)+"' title='"+v+"'>",e.setting.timeLabels[s]||(v="&nbsp;"),t+="<td class='cdvDetailTableColumnTime'><span>"+v+"</span></td>";for(var g=0;g<e.tv.iNoVDayDis;g++){var m=e.tv.bADVCur[g][n],D=e.tv.dAVDt[g],f="",u="cdvTableColumns "+("cdvDetailTableColumn"+g);if(0===m)u+=" cNonBusinessHoursBg";else if(2===m)u+=" cRestrictedSectionBg";else if(1!==m)for(var p=0;p<e.tv.sADVInfo.length;p++){var h=e.tv.sADVInfo[p];if(h.index===m){$.cf.isValid(h.class)&&(u+=" "+h.class),$.cf.isValid(h.bgColor)&&(f="style='background: "+$.cf.addHashToHexcode(h.bgColor)+";'");break}}else 1===m&&(u+=" cBusinessHoursBg");t+="<td class='"+u+"' title='"+D+"' "+f+"'> &nbsp; </td>"}t+="</tr>",e.tv.fAHrTpPos.push(i),i+=32}}t+="</table>",$(e.elem).find(".cdvContRow3Main").html(t),$(e.elem).find(".cdvContRow3Main").scroll(function(){e.tv.bDVScrlg=!0,setTimeout(function(){e.tv.bDVScrlg=!1},1e3)}),setTimeout(function(){e._showCurrentTimeIndicator()},100),e._makeViewDroppableInDetailView()},__updateTimeSlotTableView:function(){var e=this;$(e.elem).find(".cdvTableColumns").removeClass("cNonBusinessHoursBg cRestrictedSectionBg cBusinessHoursBg"),e._getTimeSlotsArrayForCurrentView();var t,i,n,a,s,r=24*e.tv.iUTmSlt;for(t=0;t<r;t++){var o=Math.floor(t/e.tv.iUTmSlt),l=t%e.tv.iUTmSlt*e.setting.unitTimeInterval,d=".cdvTimeSlotTableRow"+(e.getNumberStringInFormat(o,2,!1)+e.getNumberStringInFormat(l,2,!1)),c=$(e.elem).find(d);for(i=0;i<e.tv.iNoVDayDis;i++){n=e.tv.bADVCur[i][t];var v=$(c).find(".cdvDetailTableColumn"+i),g="";if(0===n)g="cNonBusinessHoursBg";else if(2===n)g="cRestrictedSectionBg";else if(1!==n){for(a=0;a<e.tv.sADVInfo.length;a++)if((s=e.tv.sADVInfo[a]).index===n){$.cf.isValid(s.class)&&(g+=" "+s.class),$.cf.isValid(s.bgColor)&&v.css({background:$.cf.addHashToHexcode(s.bgColor)});break}}else 1===n&&(g="cBusinessHoursBg");v.addClass(g)}}for(i=0;i<e.tv.iNoVDayDis;i++){n=e.tv.bADVCur[i][r];var m=$(e.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+i);if(2===n)m.addClass("cRestrictedSectionBg");else if(0!==n&&1!==n)for(a=0;a<e.tv.sADVInfo.length;a++)if((s=e.tv.sADVInfo[a]).index===n){$.cf.isValid(s.class)&&m.addClass(s.class),$.cf.isValid(s.bgColor)&&m.css({background:$.cf.addHashToHexcode(s.bgColor)});break}}},_makeViewDroppableInDetailView:function(){var e,t,i,n,a,s,r,o,l,d,c,v,g,m,D=this,f=!1;$(D.elem).find(".cdvDetailTableRow2 .cdvAllDayColumns").droppable({scope:"AllDayEvents",over:function(u,p){e=$(this).attr("id"),t=parseInt(e.replace("cdvAllDayColumn","")),i=p.draggable,n=$(D.elem).find(i).attr("id"),a=n.replace("Event-",""),s=D.getEventWithId(a),r=s.start,o=s.end,l=s.isAllDay,d=D.getNumberOfDaysOfEvent(l,r,o,!1,!1,!0),c=D.tv.dAVDt[t],v=D.setDateInFormat({iDate:{d:c.getDate(),M:c.getMonth(),y:c.getFullYear(),H:r.getHours(),m:r.getMinutes(),s:r.getSeconds()}},""),g=new Date(v.getTime()+(o.getTime()-r.getTime())),D.tv.bChkDroppable&&(m=$(D.elem).find("#"+n+".ui-draggable-dragging"),e=m.attr("data-droppableid"),(f=D._findWhetherEventEnteredNonDroppableZone(v,g,l,d,e))?(m.addClass("cCursorNotAllowed"),m.find(".cEventLink").addClass("cCursorNotAllowed")):(m.removeClass("cCursorNotAllowed"),m.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(D.elem).find(".cdvAllDayColumns").removeClass("cActivatedCell");for(var h=0;h<d;h++){var y=t+h;if(y<=D.tv.dAVDt.length-1){var C="#cdvAllDayColumn"+y;$(D.elem).find(C).addClass("cActivatedCell")}}},drop:function(u,p){if(e=$(this).attr("id"),t=parseInt(e.replace("cdvAllDayColumn","")),$(D.elem).find(".cdvAllDayColumns").removeClass("cActivatedCell"),i=p.draggable,n=$(D.elem).find(i).attr("id"),a=n.replace("Event-",""),s=D.getEventWithId(a),r=s.start,o=s.end,l=s.isAllDay,d=D.getNumberOfDaysOfEvent(l,r,o,!1,!1,!0),c=D.tv.dAVDt[t],v=D.setDateInFormat({iDate:{d:c.getDate(),M:c.getMonth(),y:c.getFullYear(),H:r.getHours(),m:r.getMinutes(),s:r.getSeconds()}},""),g=new Date(v.getTime()+(o.getTime()-r.getTime())),D.tv.bChkDroppable&&(m=$(D.elem).find("#"+n+".ui-draggable-dragging"),e=m.attr("data-droppableid"),f=D._findWhetherEventEnteredNonDroppableZone(v,g,l,d,e),m.removeClass("cCursorNotAllowed"),m.find(".cEventLink").removeClass("cCursorNotAllowed")),f)setTimeout(function(){return D.tv.bChkDroppable&&m.removeClass("cEventBeingDragged ui-draggable-dragging"),$(p.draggable).remove(),D._makeEventNonEditableInDetailView(),!1},300);else{if(!D.__updateEventWithId(a,v,g))return $(p.draggable).remove(),D._makeEventNonEditableInDetailView(),!1;$(D.elem).find(".cdvEventAllDay").remove(),D.__addEventsInDetailView("AllDay"),D._adjustAllDayEventsInDetailView(),D._makeEventNonEditableInDetailView()}D.tv.bDVDrgEv=!1,D.setting.saveChangesOnEventDrop&&D.setting.saveChangesOnEventDrop.call(D,s,r,o,v,g)}})},_canEditEventInDetailView:function(e){var t=e.split("-"),i=t[1],n=t[2];return[null!==this.tv.oEvEdt&&this.tv.oDVEdtgEv.sEventId===i,i,n]},_makeEventResizableInDetailView:function(e){var t,i,n,a,s,r,o,l,d,c,v,g,m,D,f=this,u=($(f.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(f.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2,p=u/4,h=46*u;$(f.elem).find(e).resizable({grid:u,distance:p,handles:"s",maxHeight:h,minHeight:u/2,containment:"parent",create:function(t,i){$(f.elem).find(e).find(".ui-resizable-handle").css({"text-align":"center"});var n=$(f.elem).find(e+" .ui-resizable-s");n.css({bottom:0}),n.addClass("cEventResizeHandle"),n.html("<div class ='cHandleSouth'></div>"),n.on($.CalenStyle.extra.sClickHandler,function(e){e.stopPropagation()})},start:function(e,t){if(f.tv.bDVDrgEv||f.tv.bDVScrlg)return!1;i=$(f.elem).find(t.element).attr("id"),$.CalenStyle.extra.bTouchDevice||(c=i.split("-"),v=c[1],f._changeViewPropertiesWhileEditing("BEFORE",v));var g=f._canEditEventInDetailView(i);g[0]&&(f.tv.bDVResEv=!0,i="#"+i,n=g[1],a=g[2],d=$(f.elem).find(i).height(),"Event-"+n,l=$(f.elem).find(i).position().top,s=f._getStartAndEndDatesOfEventWithId(n),r=new Date(s[0]),o=new Date(s[1]))},resize:function(e,s){if(f.tv.bDVDrgEv||f.tv.bDVScrlg)return!1;i=$(f.elem).find(s.element).attr("id");var c=f._canEditEventInDetailView(i);if(c[0]){t=f._getNumberOfDaysOfEventForWeek(0,r,o,!1,!0),i="#"+i;var v=$(f.elem).find(i).height(),u=l;$(f.elem).find(i).css({top:u});var p=0;if(u<0?v>=(p=u+d)-10&&v<=p+10&&(p=0):p=v,p>0&&Math.abs(v-d)>10){var h;if(v<d?(h=o.getTime(),h-=f.tv.iUTmMS,o=new Date(h)):v>d&&(h=o.getTime(),h+=f.tv.iUTmMS,o=new Date(h)),g=$(f.elem).find(i+".ui-resizable-resizing"),m=g.attr("data-droppableid"),D=f._findWhetherEventEnteredNonDroppableZone(r,o,!1,t,m))return g.addClass("cCursorNotAllowed"),g.find(".cEventLink").addClass("cCursorNotAllowed"),g.css({height:s.originalSize.height}),!1;if(g.removeClass("cCursorNotAllowed"),g.find(".cEventLink").removeClass("cCursorNotAllowed"),!D){if(u+v<=0)return f._performOperationsAfterResizingStopsInDetailView(n,r,o),!1;if(2===t&&1===a)return $(f.elem).find("#Event-"+n+"-2").remove(),(o=f.setDateInFormat({date:r},"END")).setMinutes(30),o.setSeconds(0),f._performOperationsAfterResizingStopsInDetailView(n,r,o),!1;d=v}}}},stop:function(e,t){if(f.tv.bDVDrgEv||f.tv.bDVScrlg)return!1;i=$(f.elem).find(t.element).attr("id");var a=f._canEditEventInDetailView(i);a[0]&&($.cf.isValid(g)&&(g.removeClass("cCursorNotAllowed"),g.find(".cEventLink").removeClass("cCursorNotAllowed")),D&&(s=f._getStartAndEndDatesOfEventWithId(n),r=new Date(s[0]),o=new Date(s[1])),f._performOperationsAfterResizingStopsInDetailView(n,r,o),f.tv.bDVResEv=!1),$.CalenStyle.extra.bTouchDevice||f._makeEventNonEditableInDetailView()}})},_performOperationsAfterResizingStopsInDetailView:function(e,t,i){var n=this,a=n.getEventWithId(e),s=a.isAllDay,r=a.start,o=a.end;a.start=t,a.end=i,n._removeEventSegWithId(e),n._createAndAddEventSegForId(e,s,t,i),n._setPropertiesOfEventSeg(),n.tv.oEvEdt=a,$(n.elem).find(".cdvEvent").removeClass("ui-resizable-resizing"),n.tv.bDVResEv=!1,n.setting.saveChangesOnEventResize&&n.setting.saveChangesOnEventResize.call(n,a,r,o,t,i)},__adjustDetailViewTable:function(){var e=this,t=$(e.elem).find(".cdvCalendarCont").css("max-height");t=parseInt(t.replace("px",""))||0;var i=$(e.elem).find(".cdvCalendarCont").css("min-height");i=parseInt(i.replace("px",""))||0;var n=$.CalenStyle.extra.iScrollbarWidth;if(t>0&&$(e.elem).height()>t?$(e.elem).css({height:t}):i>0&&$(e.elem).height()<i&&$(e.elem).css({height:i}),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight}),$(e.elem).find(".cdvCalendarCont").length>0&&!e.tv.bDVDrgEv&&!e.tv.bDVResEv){var a=$(e.elem).find(".calendarCont").parent().outerWidth(),s=$(e.elem).find(".calendarCont").outerHeight(),r=s;if(e.tv.bDisFBar)if($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right"))a-=e.setting.filterBarWidth;else if($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom")){var o=a;$(e.elem).find(".cFilterBar").css({width:o}),r-=$(e.elem).find(".cFilterBar").height()}$(e.elem).find(".calendarContInner").css({width:a,height:r}),e.__adjustHeader(),n>0&&$(e.elem).find(".cdvDetailTableScroll").css({width:n}),$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:a}),$(e.elem).find(".calendarCont").css("overflow","hidden");var l=a,d=a;$(e.elem).find(".cContHeader").length>0&&$(e.elem).find(".cContHeader").css({width:d});var c=a,v=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0;e.tv.bDisABar&&(s-=$(e.elem).find(".cActionBar").height()),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&(s-=$(e.elem).find(".cFilterBar").height());var g=s-v;e.tv.bDisABar&&e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Bottom")?g-=$.CalenStyle.extra.iBorderOverhead:g+=$.CalenStyle.extra.iBorderOverhead,$(e.elem).find(".cdvDetailTableMain").css({height:g,width:c});var m=$(e.elem).find(".cdvDetailTableMain").position().top+$(e.elem).find(".cdvDetailTableRow1").outerHeight();$(e.elem).find(".cdvContRow2Main").css({left:0,top:m,width:l});var D=e.tv.iNoVDay*$.CalenStyle.extra.iBorderOverhead,f=$(e.elem).find(".cdvDetailTableColumnTime").width(),u=(l-(f=60!==f?60:f)-n-D)/e.tv.iNoVDayDis;$(e.elem).find(".cdvTableColumns").css({width:u}),$(e.elem).find(".cdvAllDayColumns").css({width:u});var p=m+$(e.elem).find(".cdvContRow2Main").outerHeight(),h=p,y=s-p,C=a-$.CalenStyle.extra.iBorderOverhead,w=$(e.elem).find(".cdvTimeSlotTable").prop("scrollHeight");y=y>w?w:y,$(e.elem).find(".cdvContRow3Main").css({left:0,top:h,height:y,width:C}),0===n?C+=1:C=n>D?C-n:C-D+n,$(e.elem).find(".cdvTimeSlotTable").css({width:C}),$(e.elem).find(".cdvContRow3Events").css({height:w,width:C}),u=(a-(f=60!==(f=$(e.elem).find(".cdvDetailTableColumnTime").width())?60:f)-n-D)/e.tv.iNoVDayDis,$(e.elem).find(".cdvTableColumns").css({width:u}),$(e.elem).find(".cdvAllDayColumns").css({width:u}),$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")&&$(e.elem).find(".cdlvDaysTable").css({width:u}),e.tv.fDVDayWth=$(e.elem).find(".cdvTableColumns").width();var S=e._getTimeSlotLeftPosition();$(e.elem).find(".cdvContRow3Main .cTimeline").length>0&&$(e.elem).find(".cdvContRow3Main .cTimeline").css({left:S,width:e.tv.fDVDayWth}),e.tv.fADVDayLftPos=[];for(var V=0;V<e.tv.iNoVDayDis;V++){var b="#cdvCellDay"+V,E=$(e.elem).find(b).position().left;e.tv.fADVDayLftPos.push(E)}e._adjustEventsInDetailView(),e._adjustAllDayEventsInDetailView()}e.setCalendarBorderColor()},_adjustEventsInDetailView:function(){for(var e=this,t=$(e.elem).find(".cdvEvent"),i=0;i<t.length;i++){var n=t[i],a=$(e.elem).find(n).attr("data-pos").split("|"),s=parseInt(a[1]),r=$(e.elem).find(n),o=r.attr("id"),l=e._getLeftColumnAndWidthOfAnEventSegInDetailView(o),d=l[0],c=l[1],v=e.tv.fADVDayLftPos[s],g=parseInt(a[2]),m=100/c,D=e.tv.fDVDayWth*m/100;v+=(d-1)*D,D-=.05*D,r.css({left:v,top:g,width:D}),g<0&&r.find(".cEventLink").css({"margin-top":Math.abs(g)});var f=r.height()-r.find(".cdvEventTime").height()-10,u=r.find(".cdvEventTitle").css("min-height");(u=$.cf.isValid(u)?parseInt(u.replace("px","")):0)<f&&r.find(".cdvEventTitle").css({"max-height":f})}e._makeEventEditableInDetailView(".cdvEvent")},_displayWeekNumberInDetailView:function(){var e=this,t=e.__getWeekNumber(e.tv.dVSDt,e.tv.dVEDt);$(e.elem).find(".cdvCellWeekNumberLabel").html(e.setting.miscStrings.week),$(e.elem).find(".cdvCellWeekNumber").html(t)},_setDateStringsInDetailView:function(){var e,t=this,i=t.getDateInFormat({date:t.tv.dVSDt},"object",!1,!0),n=t.getDateInFormat({date:t.tv.dVEDt},"object",!1,!0);e=$.cf.compareStrings(t.setting.visibleView,"DayView")||$.cf.compareStrings(t.setting.visibleView,"CustomView")&&1===t.setting.daysInCustomView?"<b>"+t.getDateInFormat({iDate:i},"DDDD",!1,!0)+" "+t.getDateInFormat({iDate:n},"MMMM",!1,!0)+" "+t.getNumberStringInFormat(n.d,0,!0)+"</b>  "+t.getNumberStringInFormat(n.y,0,!0):i.y===n.y?i.M===n.M?"<b>"+t.getDateInFormat({iDate:i},"MMM",!1,!0)+" "+t.getNumberStringInFormat(i.d,0,!0)+"</b>  -  <b>"+t.getNumberStringInFormat(n.d,0,!0)+"</b>  "+t.getNumberStringInFormat(n.y,0,!0):"<b>"+t.getDateInFormat({iDate:i},"MMM",!1,!0)+"  "+t.getNumberStringInFormat(i.d,0,!0)+"</b>  -  <b>"+t.getDateInFormat({iDate:n},"MMM",!1,!0)+" "+t.getNumberStringInFormat(n.d,0,!0)+"</b>  "+t.getNumberStringInFormat(n.y,0,!0):"<b>"+t.getDateInFormat({iDate:i},"MMM",!1,!0)+"  "+t.getNumberStringInFormat(i.d,0,!0)+"</b>  "+t.getNumberStringInFormat(i.y,0,!0)+"  -  <b>"+t.getDateInFormat({iDate:n},"MMM",!1,!0)+" "+t.getNumberStringInFormat(n.d,0,!0)+"</b>  "+t.getNumberStringInFormat(n.y,0,!0),t.setting.modifyHeaderViewLabels&&t.setting.modifyHeaderViewLabels.call(t,t.tv.dVSDt,t.tv.dVEDt,t.setting.selectedDate,e,t.setting.visibleView),$(t.elem).find(".cContHeaderLabel").html(e);for(var a=0;a<t.tv.iNoVDayDis;a++){var s=t.tv.dAVDt[a],r=t.compareDates(s,$.CalenStyle.extra.dToday),o=s.getDay(),l=".cdvDetailTableMain #cdvCellDay"+a,d=s.getDate(),c=!t.tv.bABsDays[o],v=t.tv.bADVCur[a][24*t.tv.iUTmSlt];c&&0===r?$(t.elem).find(l).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(c&&$(t.elem).find(l).addClass("cNonBusinessHoursBg"),0===r&&$(t.elem).find(l).addClass("cTodayHighlightTextColor")),0===r?$(t.elem).find(l).html("<span class='cdvCellDayLeft'>"+t.setting.miscStrings.today+"</span><span class='cdvCellDayRight'>"+t.getNumberStringInFormat(d,0,!0)+"</span>"):$(t.elem).find(l).html("<span class='cdvCellDayLeft'>"+t.getDateInFormat({iDate:{D:o}},"DDD",!1,!0)+"</span><span class='cdvCellDayRight'>"+t.getNumberStringInFormat(d,0,!0)+"</span>"),c&&0===r?$(t.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+a).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(c&&$(t.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+a).addClass("cNonBusinessHoursBg"),0===r&&$(t.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+a).addClass("cTodayHighlightTextColor"),2===v&&$(t.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+a).addClass("cRestrictedSectionBg")),c&&0===r?$(t.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+a).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(c&&$(t.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+a).addClass("cNonBusinessHoursBg"),0===r&&$(t.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+a).addClass("cTodayHighlightTextColor"))}$.cf.compareStrings(t.setting.visibleView,"WeekView")&&t._displayWeekNumberInDetailView()},__goToPrevDetailView:function(){var e=this;if(e.setting.showTransition){var t=$(e.elem).find(".cdvDetailTableMain"),i=t.width(),n=t.position().left,a=0;a=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top;var s=t.clone();$(s).removeClass("cdvDetailTableMain").addClass("cdvDetailTableTemp"),$(s).css({position:"absolute",top:a,left:n}),t.parent().append(s),n+=i,$(e.elem).find(".cdvDetailTableTemp .cdlvDaysTableMain").removeClass("cdlvDaysTableMain").addClass("cdlvDaysTableTemp");var r=$(e.elem).find(".cdvContRow2Main"),o=r.position().left,l=r.width(),d=r.clone();$(d).removeClass(".cdvContRow2Main").addClass("cdvContRow2Temp"),r.parent().append(d),o+=l;var c=$(e.elem).find(".cdvContRow3Main"),v=c.position().left,g=c.width(),m=c.clone();if($(m).removeClass(".cdvContRow3Main").addClass("cdvContRow3Temp"),c.parent().append(m),v+=g,$(e.elem).find(".cdvContRow3Main .cTimeline").remove(),!$.CalenStyle.extra.bTouchDevice&&$(e.elem).find(".cdvContRow3Temp .cTimeIndicator").length>0){var D=$(e.elem).find(".cdvContRow3Temp .cTimeIndicator").position().top-$(e.elem).find(".cdvContRow3Temp").height()/2;$(e.elem).find(".cdvContRow3Temp").scrollTop(D)}$(s).animate({left:n},e.setting.transitionSpeed),$(d).animate({left:o},e.setting.transitionSpeed),$(m).animate({left:v},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cdvDetailTableTemp").remove(),$(e.elem).find(".cdvContRow2Temp").remove(),$(e.elem).find(".cdvContRow3Temp").remove()},e.setting.transitionSpeed)}if($.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")){var f=e.tv.iNoVDay+1,u=e.__setCurrentViewDatesArray(f,e.tv.dVSDt,null,"Prev");u.shift(),u.reverse(),e.setting.selectedDate=u[e.tv.iSelDay],e.setting.selectedDate=e.setDateInFormat({date:e.setting.selectedDate},"START")}else{var p=e.tv.dVSDt.getTime();7===e.setting.daysInCustomView?p-=e.tv.iNoVDay*$.CalenStyle.extra.iMS.d:p-=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(p)},"START")}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.__reloadCurrentView(!0,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__goToNextDetailView:function(){var e=this;if(e.setting.showTransition){var t=$(e.elem).find(".cdvDetailTableMain"),i=t.width(),n=t.position().left,a=0;a=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").position().top+$(e.elem).find(".cContHeader").outerHeight()-1:$(e.elem).position().top;var s=t.clone();$(s).removeClass("cdvDetailTableMain").addClass("cdvDetailTableTemp"),$(s).css({position:"absolute",top:a,left:n}),t.parent().append(s),n-=i,$(e.elem).find(".cdvDetailTableTemp .cdlvDaysTableMain").removeClass("cdlvDaysTableMain").addClass("cdlvDaysTableTemp");var r=$(e.elem).find(".cdvContRow2Main"),o=r.position().left,l=r.width(),d=r.clone();$(d).removeClass(".cdvContRow2Main").addClass("cdvContRow2Temp"),r.parent().append(d),o-=l;var c=$(e.elem).find(".cdvContRow3Main"),v=c.position().left,g=c.width(),m=c.clone();if($(m).removeClass(".cdvContRow3Main").addClass("cdvContRow3Temp"),c.parent().append(m),v-=g,$(e.elem).find(".cdvContRow3Main .cTimeline").remove(),!$.CalenStyle.extra.bTouchDevice&&$(e.elem).find(".cdvContRow3Temp .cTimeIndicator").length>0){var D=$(e.elem).find(".cdvContRow3Temp .cTimeIndicator").position().top-$(e.elem).find(".cdvContRow3Temp").height()/2;$(e.elem).find(".cdvContRow3Temp").scrollTop(D)}$(s).animate({left:n},e.setting.transitionSpeed),$(d).animate({left:o},e.setting.transitionSpeed),$(m).animate({left:v},e.setting.transitionSpeed),setTimeout(function(){$(e.elem).find(".cdvDetailTableTemp").remove(),$(e.elem).find(".cdvContRow2Temp").remove(),$(e.elem).find(".cdvContRow3Temp").remove()},e.setting.transitionSpeed)}if($.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")){var f=e.tv.iNoVDay+1,u=e.__setCurrentViewDatesArray(f,e.tv.dVEDt,null,"Next");u.shift(),e.setting.selectedDate=u[e.tv.iSelDay],e.setting.selectedDate=e.setDateInFormat({date:e.setting.selectedDate},"START")}else{var p=e.tv.dVEDt.getTime();p+=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(p)},"START")}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.__reloadCurrentView(!0,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},_showCurrentTimeIndicator:function(){for(var e,t=this,i=!1,n=0;n<$.CalenStyle.extra.oArrCalenStyle.length;n++){if($.CalenStyle.extra.oArrCalenStyle[n].tv.pluginId===t.tv.pluginId){i=!0;break}}if(i){var a=Math.floor(($(t.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(t.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2/t.setting.unitTimeInterval);if($.cf.compareStrings(t.setting.visibleView,"WeekView")||$.cf.compareStrings(t.setting.visibleView,"DayView")||$.cf.compareStrings(t.setting.visibleView,"CustomView")||$.cf.compareStrings(t.setting.visibleView,"DayEventDetailView")){var s=t._getCurrentDate(),r=s.getHours(),o=s.getMinutes(),l=a*(o%t.setting.unitTimeInterval);o-=l;var d=".cdvContRow3Main .cdvTimeSlotTableRow"+t.getNumberStringInFormat(r,2,!1)+t.getNumberStringInFormat(o,2,!1);if($(t.elem).find(d).length>0){var c,v=$(t.elem).find(d).position().top,g=0,m=0;t.tv.fDVDayWth>0&&(m=t.tv.fDVDayWth),v+=l,($.cf.compareStrings(t.setting.visibleView,"DayEventDetailView")?0===t.compareDates(t.setting.selectedDate,$.CalenStyle.extra.dToday):t.__isDateInCurrentView(s))?(g=t._getTimeSlotLeftPosition(),$(t.elem).find(".cdvContRow3Main .cTimeline").length>0?$(t.elem).find(".cdvContRow3Main .cTimeline").css({left:g,top:v,width:m}):(c="<div class='cTimeline'></div>",$(t.elem).find(".cdvContRow3Main .cdvTimeSlotTable").append(c),$(t.elem).find(".cdvContRow3Main .cTimeline").css({left:g,top:v,width:m}))):$(t.elem).find(".cdvContRow3Main .cTimeline").remove(),$(t.elem).find(".cdvContRow3Main .cTimeIndicator").length>0?$(t.elem).find(".cdvContRow3Main .cTimeIndicator").css({top:v}):(c="<div class='cTimeIndicator'></div>",$(t.elem).find(".cdvContRow3Main .cdvTimeSlotTable").append(c),$(t.elem).find(".cdvContRow3Main .cTimeIndicator").css({top:v})),$.CalenStyle.extra.bTouchDevice||setTimeout(function(){var e=v-$(t.elem).find(".cdvContRow3Main").height()/2;$(t.elem).find(".cdvContRow3Main").scrollTop(e)},500)}e=setTimeout(function(){t._showCurrentTimeIndicator()},$.CalenStyle.extra.iMS.m*t.setting.timeIndicatorUpdationInterval)}i=!1}else clearTimeout(e)},_getTimeSlotLeftPosition:function(){var e=this,t=0;if(e.tv.fADVDayLftPos.length>0)for(var i=0;i<e.tv.dAVDt.length;i++)if(0===e.compareDates($.CalenStyle.extra.dToday,e.tv.dAVDt[i])){t=$.cf.compareStrings(e.setting.visibleView,"DayEventDetailView")?e.tv.fADVDayLftPos[0]:e.tv.fADVDayLftPos[i];break}return t},_addTooltipInDetailView:function(){var e=this;$(e.elem).find(".cEventTooltip").tooltip({content:function(){var t="";if($.cf.compareStrings(e.setting.eventTooltipContent,"Default")){var i=$(this).data("tooltipcontent");void 0!==i.title&&(t+="<div class='cTooltipTitle'>"+i.title+"</div>"),void 0===i.startDateTime&&void 0!==i.endDateTime||(t+="<div class='cTooltipTime'>",void 0!==i.startDateTime&&(t+=i.startDateTime),void 0!==i.endDateTime&&(t+="<br/>"+i.endDateTime),t+="</div>")}else{var n=$(this).attr("data-id"),a=e.getEventWithId(n);t=e.setting.eventTooltipContent.call(e,a)}return t},position:{my:"left-25 bottom-15",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("tooltip-arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}},track:!0})}}),i.prototype=$.extend(i.prototype,{updateAgendaView:function(e){var t,i,n,a,s,r,o=this,l=o.tv.dAVDt.length,d=$.cf.isValid(o.setting.hideEventIcon[o.setting.visibleView])?o.setting.hideEventIcon[o.setting.visibleView]:!!$.cf.isValid(o.setting.hideEventIcon.Default)&&o.setting.hideEventIcon.Default,c=$.cf.isValid(o.setting.hideEventTime[o.setting.visibleView])?o.setting.hideEventTime[o.setting.visibleView]:!!$.cf.isValid(o.setting.hideEventTime.Default)&&o.setting.hideEventTime.Default;o.__getCurrentViewDates(),$.cf.compareStrings(o.tv.sLoadType,"Prev")?o.tv.dLoadDt=o.tv.dAVDt[0]:$.cf.compareStrings(o.tv.sLoadType,"Next")&&(o.tv.dLoadDt=o.tv.dAVDt[l-1]),o._setDateStringsInHeaderOfAgendaView(),o.__parseData(e,function(){var e,v,g,m,D,f,u=0,p="",h="",y=null,C=null,w=null,S=0,V="",b="",E="",T=!1,M=null,I=null,A="",_="",k="",H="",F="",N="",x="",B="",L="",O="",P="",R="";if(o.setting.displayEventsForPeriodInListInAgendaView){var W={};W.viewStartDate=o.tv.dVSDt,W.viewEndDate=o.tv.dVEDt;var j=0,z=[];for(t=0;t<l;t++){n=o.tv.dAVDt[t],a=o.setDateInFormat({date:n},"START"),s=o.setDateInFormat({date:n},"END"),r=o.getArrayOfEventsForView(a,s);var Y={};Y.date=a;var q=[];for(i=0;i<r.length;i++)q.push(r[i]),j++;Y.events=q,z.push(Y)}W.eventCount=j,W.eventList=z,m=o.setting.displayEventsForPeriodInListInAgendaView.call(o,W),$(o.elem).find(".cListOuterCont").html(m)}else{if(l>0&&(o.compareDates(o.setting.selectedDate,o.tv.dAVDt[0])>=0||o.compareDates(o.setting.selectedDate,o.tv.dAVDt[l-1])<=0)&&(e="#Date-"+o.getDateInFormat({date:o.setting.selectedDate},"dd-MM-yyyy",!1,!0)),$.cf.compareStrings(o.setting.agendaViewTheme,"Timeline1"))for($(o.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),g=4,d&&g--,c&&g--,t=0;t<l;t++)if(n=o.tv.dAVDt[t],a=o.setDateInFormat({date:n},"START"),s=o.setDateInFormat({date:n},"END"),r=o.getArrayOfEventsForView(a,s),D=0===o.compareDates(n,$.CalenStyle.extra.dToday),v="Date-"+o.getDateInFormat({date:a},"dd-MM-yyyy",!1,!0),p=D?"cagvDate cagvDateToday":"cagvDate",0===t&&void 0===e&&(e="#"+v),0!==r.length)for($(o.elem).find(".cagvTable").append("<tr><td colspan='"+g+"'><div id='"+v+"' class='"+p+"'>"+o.getDateInFormat({date:a},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>"),i=0;i<r.length;i++)C=null,w=null,S=0,V="",b="",A="",E="",O="",P="",A="",_="",k="","",H="",F="",N="",x="",null!==(y=r[i]).start&&(C=y.start),null!==y.end&&(w=y.end),null!==y.isAllDay&&(S=y.isAllDay),null!==y.title&&(V=y.title),null!==y.desc&&(E=y.desc),null!==y.url&&(b=y.url),null!==y.isMarked&&(T=y.isMarked),T&&(S=!0),""===(I=(M=o.getEventDateTimeDataForAgendaView(C,w,S,a))[0])&&(I=o.setting.miscStrings.allDay),A=y.fromSingleColor?y.textColor:y.backgroundColor,A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A,O="Event"+ ++u,H=M[1],x="background: "+A+"; ",T?(L="border-right: 12px solid "+A,B="border-color: "+A+";"):(L="",B=""),R="cagvEvent",T?(R+=" cMarkedDayEvent",F=$.cf.isValid(y.icon)&&"Dot"!==y.icon?y.icon:"cs-icon-Mark"):F=$.cf.isValid(y.icon)?y.icon:o.setting.eventIcon,m="",m+="<tr id='"+O+"' class='cagvEvent'>",T?m+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconFont "+F+"' style='"+x+"'></span></td>":d||($.cf.compareStrings(F,"Dot")?m+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconDot' style='"+x+"'></span></td>":m+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconFont "+F+"' style='"+x+"'></span></td>"),m+="<td class='cagvContDetails'>",m+="<div class='cagvEventCard' style='"+B+"'>",m+="<span class='cagvEventCardBefore' style='"+L+"'></span>",c||(m+="<div class='cagvEventTime'>"+I+"</div>"),m+="<div class='cagvEventContent'>",m+="<div class='cagvEventTitle'>"+V+"</div>",m+="<div class='cagvEventDesc'>"+E+"</div>",m+="</div>",m+="</div>",m+="</td>",m+="</tr>",$(o.elem).find(".cagvTable").append(m),T&&0===(f=$(o.elem).find("#"+v)).find(".cMarkedDayIndicator").length&&f.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>"),($.cf.isValid(b)||o.setting.eventClicked)&&(P="#"+O,$(o.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:b,eventId:y.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:o.tv.pluginId},o.__bindClick));else o.setting.showDaysWithNoEventsInAgendaView&&(m="<tr><td colspan='"+g+"'><div id='"+v+"' class='"+p+"'>"+o.getDateInFormat({date:a},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>",m+="<tr><td colspan='"+g+"'><div class='cagvNoEvent'>No Events</div></td></tr>",$(o.elem).find(".cagvTable").append(m));else if($.cf.compareStrings(o.setting.agendaViewTheme,"Timeline2"))for($(o.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),t=0;t<l;t++){n=o.tv.dAVDt[t],a=o.setDateInFormat({date:n},"START"),s=o.setDateInFormat({date:n},"END"),r=o.getArrayOfEventsForView(a,s),D=0===o.compareDates(n,$.CalenStyle.extra.dToday);var U=!1;if(v="Date-"+o.getDateInFormat({date:a},"dd-MM-yyyy",!1,!0),p=D?"cagvDate cagvDateToday":"cagvDate",h=D?"cagvDay cagvDateToday":"cagvDay",0===t&&void 0===e&&(e="#"+v),0!==r.length)for(i=0;i<r.length;i++)C=null,w=null,S=0,V="",b="",A="",E="",O="",P="",A="",_="",k="","",H="",F="",N="",x="",null!==(y=r[i]).start&&(C=y.start),null!==y.end&&(w=y.end),null!==y.isAllDay&&(S=y.isAllDay),null!==y.title&&(V=y.title),null!==y.desc&&(E=y.desc),null!==y.url&&(b=y.url),null!==y.isMarked&&(T=y.isMarked),T&&(S=!0),A=y.backgroundColor,A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A,_=y.borderColor||$.cf.addHashToHexcode(o.setting.borderColor),_=$.cf.compareStrings(_,"")||$.cf.compareStrings(_,"transparent")?"transparent":_,k=y.textColor||$.cf.addHashToHexcode(o.setting.textColor),"background: "+A+"; border-color: "+_+"; color: "+(k=$.cf.compareStrings(k,"")||$.cf.compareStrings(k,"transparent")?$.cf.addHashToHexcode(o.setting.textColor):k)+"; ","transparent"===_&&"border-width: 0px; ",""===(I=(M=o.getEventDateTimeDataForAgendaView(C,w,S,a))[0])&&(I=o.setting.miscStrings.allDay),O="Event"+ ++u,H=M[1],T?(N="color: "+k+"; border-color: "+_+"; background: "+A+"; ",x=y.fromSingleColor?"background: "+k:"color: "+k+"; background: "+A):(N="color: "+k+"; border-color: "+_+"; background: "+A+"; ",x="color: "+k+"; "),m="",m+="<tr id='"+O+"'>",m+="<td id='"+v+"' class='cagvContDate'>",U||(m+="<div class='"+p+"'>"+o.getDateInFormat({date:n},"d",!1,!0)+"</div>",m+="<div class='"+h+"'>"+o.getDateInFormat({date:n},"DDD",!1,!0)+"</div>",U=!0),m+="</td>",R="cagvEvent",T?(R+=" cMarkedDayEvent",F=$.cf.isValid(y.icon)&&"Dot"!==y.icon?y.icon:"cs-icon-Mark"):F=$.cf.isValid(y.icon)?y.icon:o.setting.eventIcon,m+="<td class='"+R+"'>",m+="<div class='cagvContDetails' style='"+N+"'>",m+="<div class='cagvContTitle'>",T?(m+="<span class='cagvEventIcon cagvEventIconFont "+F+"' style='"+x+"'></span>",m+="<span class='cagvEventTitle'>"+V+"</span>",m+="</div>"):(d||($.cf.compareStrings(F,"Dot")?m+="<span class='cagvEventIcon cagvEventIconDot' style='"+(x="background: "+k+"; ")+"'></span>":m+="<span class='cagvEventIcon cagvEventIconFont "+F+"' style='"+x+"'></span>"),m+="<span class='cagvEventTitle'>"+V+"</span>",m+="</div>",m+="<div class='cagvContTime'>",c||(m+="<span class='cagvEventTime'>"+I+"</span>"),m+="</div>"),m+="</div>",m+="</td>",m+="</tr>",i===r.length-1&&(m+="<tr><td class='cagvDaySeparator' colspan='2'><hr/></td></tr>"),$(o.elem).find(".cagvTable").append(m),P="#"+O,$(o.elem).find(P+" .cagvEventTimeLabel").css({background:k}),($.cf.isValid(b)||o.setting.eventClicked)&&$(o.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:b,eventId:y.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:o.tv.pluginId},o.__bindClick);else o.setting.showDaysWithNoEventsInAgendaView&&(m="",m+="<tr>",m+="<td id='"+v+"' class='cagvContDate'>",U||(m+="<div class='cagvDate'>"+o.getDateInFormat({date:n},"d",!1,!0)+"</div>",m+="<div class='cagvDay'>"+o.getDateInFormat({date:n},"DDD",!1,!0)+"</div>",U=!0),m+="</td>",m+="<td class='cagvNoEvent'>No Events</td>",m+="</tr>",m+="<tr><td class='cagvDaySeparator' colspan='2'><hr/></td></tr>",$(o.elem).find(".cagvTable").append(m))}else if($.cf.compareStrings(o.setting.agendaViewTheme,"Timeline3"))for($(o.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),g=4,d&&g--,c&&g--,t=0;t<l;t++)if(n=o.tv.dAVDt[t],a=o.setDateInFormat({date:n},"START"),s=o.setDateInFormat({date:n},"END"),r=o.getArrayOfEventsForView(a,s),D=0===o.compareDates(n,$.CalenStyle.extra.dToday),v="Date-"+o.getDateInFormat({date:a},"dd-MM-yyyy",!1,!0),p=D?"cagvDate cagvDateToday":"cagvDate",0===t&&void 0===e&&(e="#"+v),0!==r.length)for($(o.elem).find(".cagvTable").append("<tr><td colspan='"+g+"'><div id='"+v+"' class='"+p+"'>"+o.getDateInFormat({date:a},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>"),i=0;i<r.length;i++)C=null,w=null,S=0,V="",b="",A="",E="",O="",P="",A="",_="",k="","",H="",F="",N="",x="",null!==(y=r[i]).start&&(C=y.start),null!==y.end&&(w=y.end),null!==y.isAllDay&&(S=y.isAllDay),null!==y.title&&(V=y.title),null!==y.desc&&(E=y.desc),null!==y.url&&(b=y.url),null!==y.isMarked&&(T=y.isMarked),T&&(S=!0),""===(I=(M=o.getEventDateTimeDataForAgendaView(C,w,S,a))[0])&&(I=o.setting.miscStrings.allDay),A=y.fromSingleColor?y.textColor:y.backgroundColor,A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A,O="Event"+ ++u,H=M[1],R="cagvEvent",T?(R+=" cMarkedDayEvent",F=$.cf.isValid(y.icon)&&"Dot"!==y.icon?y.icon:"cs-icon-Mark",x="background: "+A+";"):(F=$.cf.isValid(y.icon)?y.icon:o.setting.eventIcon,x="background: "+A+"; "),m="",m+="<tr id='"+O+"' class='"+R+"'>",m+="<td class='cagvEventColor'><span style='background:"+A+"; height:"+H+";'></span></td>",c||(m+="<td class='cagvEventTime'>"+I+"</td>"),T?m+="<td class='cagvEventIcon'><span class='cagvEventIconFont "+F+"' style='"+x+"'></span></td>":d||($.cf.compareStrings(F,"Dot")?m+="<td class='cagvEventIcon'><span class='cagvEventIconDot' style='"+x+"'></span></td>":m+="<td class='cagvEventIcon'><span class='cagvEventIconFont "+F+"' style='"+x+"'></span></td>"),m+="<td class='cagvEventContent'>",m+="<div class='cagvEventTitle'>"+V+"</div>",m+="<div class='cagvEventDesc'>"+E+"</div>",m+="</td>",m+="</tr>",m+="<tr class='cagvEventSeparator'><td colspan='"+g+"'><hr/></td></tr>",$(o.elem).find(".cagvTable").append(m),T&&0===(f=$(o.elem).find("#"+v)).find(".cMarkedDayIndicator").length&&f.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>"),($.cf.isValid(b)||o.setting.eventClicked)&&(P="#"+O,$(o.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:b,eventId:y.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:o.tv.pluginId},o.__bindClick));else o.setting.showDaysWithNoEventsInAgendaView&&(m="<tr><td colspan='"+g+"'><div id='"+v+"' class='"+p+"'>"+o.getDateInFormat({date:a},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>",m+="<tr><td colspan='"+g+"'><div class='cagvNoEvent'>No Events</div></td></tr>",$(o.elem).find(".cagvTable").append(m));setTimeout(function(){$(o.elem).find(".cListOuterCont").scrollTop(0),void 0!==e&&$(o.elem).find(".cListOuterCont").animate({scrollTop:$(o.elem).find(e).position().top},300)},0)}o.addRemoveViewLoader(!1,"cEventLoaderBg"),o.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),o.setting.eventListAppended&&o.setting.eventListAppended.call(o),o.adjustAgendaView(),o.__modifyFilterBarCallback()})},_setDateStringsInHeaderOfAgendaView:function(){var e=this,t="";if($.cf.compareStrings(e.setting.agendaViewDuration,"Month")){var i=e.getDateInFormat({date:e.setting.selectedDate},"object",!1,!0);t="<span class='cContHeaderLabelMonth'><b>"+e.getDateInFormat({iDate:i},"MMMM",!1,!0)+"</b></span></span>",t+="<span class='cContHeaderLabelYear'>"+e.getNumberStringInFormat(i.y,0,!0)+"</span></span>"}else{var n=e.getDateInFormat({date:e.tv.dVSDt},"object",!1,!0),a=e.getDateInFormat({date:e.tv.dVEDt},"object",!1,!0);t=e.tv.iNoVDay>1?n.y===a.y?e.getDateInFormat({iDate:n},"MMM",!1,!0)+" "+e.getNumberStringInFormat(n.d,0,!0)+"  -  "+e.getDateInFormat({iDate:a},"MMM",!1,!0)+" "+e.getNumberStringInFormat(a.d,0,!0)+",  "+e.getNumberStringInFormat(a.y,0,!0):e.getDateInFormat({iDate:n},"MMM",!1,!0)+" "+e.getNumberStringInFormat(n.d,0,!0)+",  "+e.getNumberStringInFormat(n.y,0,!0)+"  -  "+e.getDateInFormat({iDate:a},"MMM",!1,!0)+" "+e.getNumberStringInFormat(a.d,0,!0)+",  "+e.getNumberStringInFormat(a.y,0,!0):e.getDateInFormat({iDate:n},"DDDD",!1,!0)+" "+e.getDateInFormat({iDate:a},"MMMM",!1,!0)+" "+e.getNumberStringInFormat(a.d,0,!0)+",  "+e.getNumberStringInFormat(a.y,0,!0)}e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,t,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(t)},getEventDateTimeDataForAgendaView:function(e,t,i,n,a){var s,r=this,o="48px",l="",d=r.setDateInFormat({iDate:{y:n.getFullYear(),M:n.getMonth(),d:n.getDate()+1}},"START"),c="",v=r.setting.is24Hour?"HH:mm":"h[:m]sm";$.cf.compareStrings(r.setting.visibleView,"AgendaView")&&!$.cf.isValid(r.setting.displayEventsForPeriodInListInAgendaView)&&(a="cagvEventTime");var g=a+"Top",m=a+"Middle",D=a+"Bottom",f=a+"Label",u=a+"Duration";if($.cf.compareStrings(r.setting.agendaViewTheme,"Timeline2")&&!$.cf.isValid(r.setting.displayEventsForPeriodInListInAgendaView)&&$.cf.compareStrings(r.setting.visibleView,"AgendaView")||(c="<br/>"),i)l=0===r.compareDates(e,t)?"<span class='"+m+" "+f+" cagvEventTimeAllDay'>"+r.setting.miscStrings.allDay+"</span>":"<span class='"+g+" "+f+" cagvEventTimeAllDay'>"+r.setting.miscStrings.allDay+"</span>"+c+"<span class='"+D+" "+u+"'>"+($.cf.compareStrings(r.setting.duration,"Default")?r.__getDurationBetweenDates(n,t,"d",!1,!1):r.setting.duration.call(r,n,t,"d"))+"</span>";else if(0===r.compareDates(e,t))o=(s=(s=r.__getDurationBetweenDates(e,t,"h",!1,!0).h/24*48)<1?1:s)+"px",l="<span class='"+g+"'>"+r.getDateInFormat({date:e},v,r.setting.is24Hour,!0)+"</span>"+c+"<span class='"+D+" "+u+"'>"+($.cf.compareStrings(r.setting.duration,"Default")?r.__getDurationBetweenDates(e,t,"dhm",!1,!1):r.setting.duration.call(r,e,t,"dhm"))+"</span>";else{var p=r.compareDateTimes(e,n)>=0&&r.compareDateTimes(e,d)<=0?e:n,h=r.compareDateTimes(t,d)<=0?t:d;o=(s=(s=r.__getDurationBetweenDates(p,h,"h",!1,!0).h/24*48)<1?1:s)+"px",l=0===r.compareDates(e,n)?"<span class='"+g+"'>"+r.getDateInFormat({date:e},v,r.setting.is24Hour,!0)+"</span>"+c+"<span class='"+D+" "+u+"'>"+($.cf.compareStrings(r.setting.duration,"Default")?r.__getDurationBetweenDates(e,t,"dhm",!1,!1):r.setting.duration.call(r,e,t,"dhm"))+"</span>":0===r.compareDates(t,n)?"<span class='"+g+" "+f+"'>"+r.setting.miscStrings.ends+"</span>"+c+"<span class='"+D+"'>"+r.getDateInFormat({date:t},v,r.setting.is24Hour,!0)+"</span>":"<span class='"+g+" "+f+" cagvEventTimeAllDay'>"+r.setting.miscStrings.allDay+"</span>"+c+"<span class='"+D+" "+u+"'>"+($.cf.compareStrings(r.setting.duration,"Default")?r.__getDurationBetweenDates(n,t,"dhm",!1,!1):r.setting.duration.call(r,n,t,"dhm"))+"</span>"}return[l,o]},__goToPrevAgendaView:function(){var e=this;if($.cf.compareStrings(e.setting.agendaViewDuration,"Month")){var t=e.tv.dVSDt.getMonth();e.tv.dVSDt.setMonth(t-1),e.setting.selectedDate=e.setDateInFormat({date:e.tv.dVSDt},"START")}else{var i=e.tv.dVSDt.getTime();7===e.setting.daysInAgendaView?i-=e.tv.iNoVDay*$.CalenStyle.extra.iMS.d:i-=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(i)},"START")}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Prev",e.__reloadCurrentView(!1,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},__goToNextAgendaView:function(){var e=this;if($.cf.compareStrings(e.setting.agendaViewDuration,"Month")){var t=e.tv.dVSDt.getMonth();e.tv.dVSDt.setMonth(t+1),e.setting.selectedDate=e.setDateInFormat({date:e.tv.dVSDt},"START")}else{var i=e.tv.dVEDt.getTime();i+=$.CalenStyle.extra.iMS.d,e.setting.selectedDate=e.setDateInFormat({date:new Date(i)},"START")}e.tv.dLoadDt=e.setDateInFormat({date:e.setting.selectedDate},"START"),e.tv.sLoadType="Next",e.__reloadCurrentView(!1,!0),setTimeout(function(){e.__reloadDatePickerContentOnNavigation()},10)},adjustAgendaView:function(){var e=this,t=$(e.elem).find(".cagvCalendarCont").css("max-height");t=parseInt(t.replace("px",""))||0;var i=$(e.elem).find(".cagvCalendarCont").css("min-height");i=parseInt(i.replace("px",""))||0,t>0&&$(e.elem).height()>t?$(e.elem).css({height:t}):i>0&&$(e.elem).height()<i&&$(e.elem).css({height:i}),0!==e.tv.iCalHeight&&$(e.elem).css({height:e.tv.iCalHeight});var n=$(e.elem).find(".calendarCont").parent().outerWidth(),a=$(e.elem).find(".calendarCont").outerHeight();($.cf.compareStrings(e.setting.filterBarPosition,"Left")||$.cf.compareStrings(e.setting.filterBarPosition,"Right"))&&(n-=e.setting.filterBarWidth),e.tv.bDisFBar&&($.cf.compareStrings(e.setting.filterBarPosition,"Top")||$.cf.compareStrings(e.setting.filterBarPosition,"Bottom"))&&($(e.elem).find(".cFilterBar").css({width:n}),a-=$(e.elem).find(".cFilterBar").height()),$(e.elem).find(".calendarContInner").css({width:n,height:a}),e.__adjustHeader(),e.tv.bDisFBar&&$.cf.compareStrings(e.setting.filterBarPosition,"Right")&&$(e.elem).find(".cFilterBar").css({left:n}),a-=$(e.elem).find(".cContHeader").length>0?$(e.elem).find(".cContHeader").outerHeight():0,e.tv.bDisABar&&(a-=$(e.elem).find(".cActionBar").outerHeight()),$(e.elem).find(".cListOuterCont").css({height:a}),$(e.elem).find(".cagvTable").css({width:n-$.CalenStyle.extra.iScrollbarWidth});var s=n,r=$(e.elem).find(".cagvEventColor").outerWidth(!0),o=$(e.elem).find(".cagvEventTime span"),l=Math.max.apply(null,$(o).map(function(){return $(this).outerWidth(!0)}).get());l+=10,$(e.elem).find(".cagvEventTime").css({"min-width":l});var d=s-(r+l)-10;$.cf.compareStrings(e.setting.agendaViewTheme,"Timeline1")?(d-=$(e.elem).find(".cagvEventIcon").width()+40,$(e.elem).find(".cagvEventContent").css({width:d})):$.cf.compareStrings(e.setting.agendaViewTheme,"Timeline2")?$(e.elem).find(".cagvEventTitle").css({"max-width":d-40}):$.cf.compareStrings(e.setting.agendaViewTheme,"Timeline3")&&$(e.elem).find(".cagvEventContent").css({width:d})}}),i.prototype=$.extend(i.prototype,{__updateQuickAgendaView:function(){var e,t,i=this,n="",a=1===i.tv.iNoVDayDis?" cqavSingleColumn":" cqavMultiColumn";for(n+="<thead>",n+="<tr class='cqavTableRow1'>",e=0;e<i.tv.iNoVDayDis;e++){var s="cqavDayColumn"+e;t="cqavTableColumns",t+=a,e===i.tv.iNoVDayDis-1&&(t+=" cqavLastColumn"),n+="<td id='"+s+"' class='"+t+"'>&nbsp;</td>"}for(n+="</tr>",n+="</thead>",n+="<tbody>",n+="<tr class='cqavTableRow2'>",e=0;e<i.tv.iNoVDayDis;e++){var r="cqavDayColumn"+e;t="cqavTableColumns",e===i.tv.iNoVDayDis-1&&(t+=" cqavLastColumn"),n+="<td id='"+r+"' class='"+t+"' title='"+i.getDateInFormat({date:i.tv.dAVDt[e]},"dd-MMM-yyyy",i.setting.is24Hour,!0)+"'> &nbsp; </td>"}n+="</tr>",n+="</tbody>",$(i.elem).find(".cqavTableMain").html(n),i._setDateStringsInHeaderOfQuickAgendaView(),i._makeEventContDroppableInQuickAgendaView(),i._takeActionOnDayClickInQuickAgendaView()},_setDateStringsInHeaderOfQuickAgendaView:function(){for(var e=this,t=0;t<e.tv.iNoVDayDis;t++){var i,n=e.tv.dAVDt[t],a=e.compareDates(n,$.CalenStyle.extra.dToday),s=n.getDay(),r=".cqavTableRow1 #cqavDayColumn"+t,o=$(e.elem).find(r),l=n.getDate(),d=!e.tv.bABsDays[s],c=e._getRestrictedSectionForCurrentView(n),v="",g="";for(i=0;i<c.length;i++){var m=c[i],D=new Date(m.start),f=0===e.compareDates(n,D),u=new Date(m.end),p=0===e.compareDates(n,u);f||(D=e._normalizeDateTime(n,"START","T")),p||(u=e._normalizeDateTime(n,"END","T")),(Math.round((u.getTime()-D.getTime())/$.CalenStyle.extra.iMS.h)>23||m.isAllDay)&&($.cf.isValid(m.backgroundColor)&&(v=$.cf.addHashToHexcode(m.backgroundColor)),$.cf.isValid(m.class)&&(g=m.class))}d&&0===a?o.addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(d&&o.addClass("cNonBusinessHoursBg"),0===a&&o.addClass("cTodayHighlightTextColor"),$.cf.isValid(v)&&o.css({background:v}),$.cf.isValid(g)&&o.addClass(g)),0===a?$(e.elem).find(r).html("<span class='cqavDayColumnLeft'>"+e.setting.miscStrings.today+"</span><span class='cqavDayColumnRight'>"+e.getNumberStringInFormat(l,0,!0)+"</span>"):$(e.elem).find(r).html("<span class='cqavDayColumnLeft'>"+e.getDateInFormat({iDate:{D:s}},"DDD",!1,!0)+"</span><span class='cqavDayColumnRight'>"+e.getNumberStringInFormat(l,0,!0)+"</span>");var h=".cqavTableRow2 #cqavDayColumn"+t,y=$(e.elem).find(h);d&&0===a?y.addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(d&&y.addClass("cNonBusinessHoursBg"),0===a&&y.addClass("cTodayHighlightTextColor"),$.cf.isValid(v)&&y.css({background:v}),$.cf.isValid(g)&&y.addClass(g))}var C,w=e.getDateInFormat({date:e.tv.dVSDt},"object",!1,!0),S=e.getDateInFormat({date:e.tv.dVEDt},"object",!1,!0);C=$.cf.compareStrings(e.setting.quickAgendaViewDuration,"CustomDays")&&1===e.setting.daysInQuickAgendaView?"<b>"+e.getDateInFormat({iDate:w},"DDDD",!1,!0)+" "+e.getDateInFormat({iDate:S},"MMMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):w.y===S.y?w.M===S.M?"<b>"+e.getDateInFormat({iDate:w},"MMM",!1,!0)+" "+e.getNumberStringInFormat(w.d,0,!0)+"</b>  -  <b>"+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):"<b>"+e.getDateInFormat({iDate:w},"MMM",!1,!0)+"  "+e.getNumberStringInFormat(w.d,0,!0)+"</b>  -  <b>"+e.getDateInFormat({iDate:S},"MMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0):"<b>"+e.getDateInFormat({iDate:w},"MMM",!1,!0)+"  "+e.getNumberStringInFormat(w.d,0,!0)+"</b>  "+e.getNumberStringInFormat(w.y,0,!0)+"  -  <b>"+e.getDateInFormat({iDate:S},"MMM",!1,!0)+" "+e.getNumberStringInFormat(S.d,0,!0)+"</b>  "+e.getNumberStringInFormat(S.y,0,!0),e.setting.modifyHeaderViewLabels&&e.setting.modifyHeaderViewLabels.call(e,e.tv.dVSDt,e.tv.dVEDt,e.setting.selectedDate,C,e.setting.visibleView),$(e.elem).find(".cContHeaderLabel").html(C)},_takeActionOnDayClickInQuickAgendaView:function(){var e=this;$(e.elem).find(".cqavContRow2Main").on($.CalenStyle.extra.sClickHandler,function(t){var i={};i.x=t.pageX||t.originalEvent.touches[0].pageX||t.originalEvent.changedTouches[0].pageX,i.y=t.pageY||t.originalEvent.touches[0].pageY||t.originalEvent.changedTouches[0].pageY;var n=e._getDateBasedOnLeftPositionInQuickAgendaView(i.x-$(this).offset().left);e.setting.cellClicked&&e.setting.cellClicked.call(e,e.setting.visibleView,n,!0,i)})},__goToPrevQuickAgendaView:function(){var e,t=this;if(t.setting.showTransition){var i=$(t.elem).find(".cqavTableMain"),n=i.width(),a=i.position().left,s=0;s=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").position().top+$(t.elem).find(".cContHeader").outerHeight()-1:$(t.elem).position().top;var r=i.clone();$(r).removeClass("cqavTableMain").addClass("cqavTableTemp"),$(r).css({position:"absolute",top:s,left:a}),i.parent().append(r),a+=n;var o=$(t.elem).find(".cqavContRow2Main"),l=o.position().left,d=o.width(),c=o.clone();$(c).removeClass("cqavContRow2Main").addClass("cqavContRow2Temp"),o.parent().append(c),l+=d,$(r).animate({left:a},t.setting.transitionSpeed),$(c).animate({left:l},t.setting.transitionSpeed),setTimeout(function(){$(t.elem).find(".cqavTableTemp").remove(),$(t.elem).find(".cqavContRow2Temp").remove()},t.setting.transitionSpeed)}t.setting.navigateOneDayInQuickAgendaView?(e=t.tv.dVEDt.getTime(),e-=$.CalenStyle.extra.iMS.d):(e=t.tv.dVSDt.getTime(),7===t.setting.daysInQuickAgendaView?e-=t.tv.iNoVDay*$.CalenStyle.extra.iMS.d:e-=$.CalenStyle.extra.iMS.d),t.setting.selectedDate=t.setDateInFormat({date:new Date(e)},"START"),t.tv.dLoadDt=t.setDateInFormat({date:t.setting.selectedDate},"START"),t.tv.sLoadType="Prev",t.__reloadCurrentView(!1,!0),setTimeout(function(){t.__reloadDatePickerContentOnNavigation()},10)},__goToNextQuickAgendaView:function(){var e,t=this;if(t.setting.showTransition){var i=$(t.elem).find(".cqavTableMain"),n=i.width(),a=i.position().left,s=0;s=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").position().top+$(t.elem).find(".cContHeader").outerHeight()-1:$(t.elem).position().top;var r=i.clone();$(r).removeClass("cqavTableMain").addClass("cqavTableTemp"),$(r).css({position:"absolute",top:s,left:a}),i.parent().append(r),a-=n;var o=$(t.elem).find(".cqavContRow2Main"),l=o.position().left,d=o.width(),c=o.clone();$(c).removeClass("cqavContRow2Main").addClass("cqavContRow2Temp"),o.parent().append(c),l-=d,$(r).animate({left:a},t.setting.transitionSpeed),$(c).animate({left:l},t.setting.transitionSpeed),setTimeout(function(){$(t.elem).find(".cqavTableTemp").remove(),$(t.elem).find(".cqavContRow2Temp").remove()},t.setting.transitionSpeed)}t.setting.navigateOneDayInQuickAgendaView?(e=t.tv.dVSDt.getTime(),e+=$.CalenStyle.extra.iMS.d):(e=t.tv.dVEDt.getTime(),e+=$.CalenStyle.extra.iMS.d),t.setting.selectedDate=t.setDateInFormat({date:new Date(e)},"START"),t.tv.dLoadDt=t.setDateInFormat({date:t.setting.selectedDate},"START"),t.tv.sLoadType="Next",t.__reloadCurrentView(!1,!0),setTimeout(function(){t.__reloadDatePickerContentOnNavigation()},10)},__adjustQuickAgendaView:function(e){var t=this,i=$(t.elem).find(".cqavCalendarCont").css("max-height");i=parseInt(i.replace("px",""))||0;var n=$(t.elem).find(".cqavCalendarCont").css("min-height");if(n=parseInt(n.replace("px",""))||0,i>0&&$(t.elem).height()>i?$(t.elem).css({height:i}):n>0&&$(t.elem).height()<n&&$(t.elem).css({height:n}),0!==t.tv.iCalHeight&&$(t.elem).css({height:t.tv.iCalHeight}),$(t.elem).find(".cqavCalendarCont").length>0&&!t.tv.bDVDrgEv&&!t.tv.bDVResEv){var a=$(t.elem).find(".calendarCont").parent().outerWidth(),s=$(t.elem).find(".calendarCont").outerHeight(),r=s;if(t.tv.bDisFBar)if($.cf.compareStrings(t.setting.filterBarPosition,"Left")||$.cf.compareStrings(t.setting.filterBarPosition,"Right"))a-=t.setting.filterBarWidth;else if($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom")){var o=a;$(t.elem).find(".cFilterBar").css({width:o}),r-=$(t.elem).find(".cFilterBar").height()}$(t.elem).find(".calendarContInner").css({width:a,height:r}),t.__adjustHeader(),$.cf.compareStrings(t.setting.filterBarPosition,"Right")&&$(t.elem).find(".cFilterBar").css({left:a});var l=a,d=a;$(t.elem).find(".cContHeader").length>0&&$(t.elem).find(".cContHeader").css({width:d});var c=a,v=$(t.elem).find(".cContHeader").length>0?$(t.elem).find(".cContHeader").outerHeight():0;t.tv.bDisABar&&(s-=$(t.elem).find(".cActionBar").height()),t.tv.bDisFBar&&($.cf.compareStrings(t.setting.filterBarPosition,"Top")||$.cf.compareStrings(t.setting.filterBarPosition,"Bottom"))&&(s-=$(t.elem).find(".cFilterBar").height());var g=s-v;t.tv.bDisABar&&t.tv.bDisFBar&&$.cf.compareStrings(t.setting.filterBarPosition,"Bottom")?g-=$.CalenStyle.extra.iBorderOverhead:g+=$.CalenStyle.extra.iBorderOverhead,$(t.elem).find(".cqavTableMain").css({height:g,width:c});var m=$(t.elem).find(".cqavTableMain").position().top+$(t.elem).find(".cqavTableRow1").outerHeight(),D=$(t.elem).find(".cqavTableRow2").height();$(t.elem).find(".cqavContRow2Main").css({left:0,top:m,width:l,height:D});var f=(l-t.tv.iNoVDay*$.CalenStyle.extra.iBorderOverhead)/t.tv.iNoVDayDis;$(t.elem).find(".cqavTableColumns").css({width:f}),t.tv.fADVDayLftPos=[];for(var u=0;u<t.tv.iNoVDayDis;u++){var p=$(t.elem).find(".cqavTableRow2 #cqavDayColumn"+u).position().left;t.tv.fADVDayLftPos.push(p)}}t._adjustEventsInQuickAgendaView(),t.setting.isDragNDropInQuickAgendaView&&$.cf.isValid(e)&&e&&($(t.elem).find(".cqavEvent").hasClass("ui-draggable")&&$(t.elem).find(".cqavEvent").draggable("destroy"),$(t.elem).find(".cqavEvent").removeClass("ui-draggable-dragging"),t._makeEventDraggableInQuickAgendaView(".EventDraggable"))},__addEventsInQuickAgendaView:function(){var e=this;$(e.elem).find(".cqavContRow2Main")&&$(e.elem).find(".cqavContRow2Main").html("");var t=e.getArrayOfEventsForView(e.tv.dVSDt,e.tv.dVEDt),i=$.cf.isValid(e.setting.hideEventIcon[e.setting.visibleView])?e.setting.hideEventIcon[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventIcon.Default)&&e.setting.hideEventIcon.Default,n=$.cf.isValid(e.setting.hideEventTime[e.setting.visibleView])?e.setting.hideEventTime[e.setting.visibleView]:!!$.cf.isValid(e.setting.hideEventTime.Default)&&e.setting.hideEventTime.Default,a=e.setting.is24Hour?"HH:mm":"h[:m]sm";if(e.tv.bAWkRw=[],t.length>0){for(var s=$.CalenStyle.extra.iEventHeights[e.setting.visibleView],r=0;r<t.length;r++){var o=t[r],l=null,d=null,c=0,v="",g="",m=!1,D=!1,f="",u="Event-"+o.calEventId;null!==o.start&&(l=o.start),null!==o.end&&(d=o.end),null!==o.isAllDay&&(c=o.isAllDay),null!==o.title&&(v=o.title),null!==o.desc&&o.desc,null!==o.type&&o.type,null!==o.url&&(g=o.url),null!==o.droppableId&&(f=o.droppableId),null!==o.isDragNDropInQuickAgendaView&&(m=o.isDragNDropInQuickAgendaView),null!==o.isMarked&&(D=o.isMarked),D&&(c=!0);var p=e.getNumberOfDaysOfEvent(c,l,d,!0,!0,!0),h=p[0],y=p[1];if(h>0){var C,w,S=h,V="",b=new Date(l),E=new Date(d);e.compareDates(l,e.tv.dVSDt)<0&&Math.abs(e.__getDifference("m",e.tv.dVSDt,l))>1&&(V="Left",b=new Date(e.tv.dVSDt)),e.compareDates(e.tv.dVEDt,d)<0&&Math.abs(e.__getDifference("m",e.tv.dVEDt,d))>1&&(V="Right",E=new Date(e.tv.dVEDt));for(var T=new Date(b),M=!0;!(e.__findWhetherDateIsVisibleInCurrentView(T,c||y>23,b,E)||(T.setDate(T.getDate()+1),M=!1,e.compareDates(T,E)>0)););if(b=new Date(T),"#cqavDayColumn"+(C=e._getDayNumberFromDateInQuickAgendaView(b)),S=(w=e.getNumberOfDaysOfEvent(c,b,E,!0,!0,M))[0],w[1]>0){var I="cqavEvent ",A=o.backgroundColor;A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A;var _=o.borderColor||$.cf.addHashToHexcode(e.setting.borderColor);_=$.cf.compareStrings(_,"")||$.cf.compareStrings(_,"transparent")?"transparent":_;var k=o.textColor||$.cf.addHashToHexcode(e.setting.textColor);k=$.cf.compareStrings(k,"")||$.cf.compareStrings(k,"transparent")?$.cf.addHashToHexcode(e.setting.textColor):k;var H=$.cf.isValid(o.nonAllDayEventsTextColor)?o.nonAllDayEventsTextColor:o.backgroundColor;H=!$.cf.isValid(H)||$.cf.compareStrings(H,"transparent")?o.backgroundColor:H;var F,N="",x="",B="",L="";!0===c||y>23?D?o.fromSingleColor?(N+="background: "+A+"; ",N+="border-color: "+_+"; ",N+="color: "+k+"; ",B+="color: "+k+"; ",x="background: "+k+"; color: #FFFFFF"):(_=A,N+="background: "+$.cf.getRGBAString(A,.1)+"; ",N+="border-color: "+_+"; ",N+="color: "+A+"; ",B+="color: "+A+"; ",x="background: "+A+"; color: "+k):(N+="background: "+A+"; ",N+="border-color: "+_+"; ",N+="color: "+k+"; ",B+="color: "+k+"; ",x="color: "+k+"; "):e.setting.onlyTextForNonAllDayEvents?(I+="cEventOnlyText ",N+="color: "+H+"; ",N+="border-color: transparent; ",S=1,V="",B+="color: "+H+"; ",x="color: "+H+"; "):(N+="background: "+A+"; ",N+="border-color: "+_+"; ",N+="color: "+k+"; ",B+="color: "+k+"; ",x="color: "+k+"; "),F="border-color: "+(o.fromSingleColor?k:"#000000"),L=D?$.cf.isValid(o.icon)&&"Dot"!==o.icon?o.icon:"cs-icon-Mark":$.cf.isValid(o.icon)?o.icon:e.setting.eventIcon,e.compareDates(d,e.tv.dAVDt[0])<0&&(I+="cBlurredEvent "),m&&(I+="EventDraggable cDragNDrop "),e.setting.isTooltipInQuickAgendaView&&(I+="cEventTooltip "),I+=u,D&&(I+=" cMarkedDayEvent");var O=0,P=0,R=-1,W=!1,j=!1;if($.cf.compareStrings(V,"Left")&&(W=!(O>0)),$.cf.compareStrings(V,"Right")&&(j=!0),!(O<S))break;var z=O>0?0:C,Y=S-O,q=e.tv.iNoVDayDis-z;Y>q&&(Y=q,j=!0),O>0&&(W=!0);for(var U,Q,Z=z+Y,J=0;J<e.tv.bAWkRw.length&&(U=e.tv.bAWkRw[J],-1===R);J++){var G=0;for(Q=z;Q<Z;Q++)if(0===U[Q]&&G<Y&&++G===Y){R=J;break}}-1===R&&(e.tv.bAWkRw.push([0,0,0,0,0,0,0]),R=e.tv.bAWkRw.length-1),U=e.tv.bAWkRw[R];var X=u+"-"+ ++P,K=N;K+="height: "+(s+"px")+"; ","transparent"===_&&(K+="border-width: 0px; ");var ee="<div id='"+X+"' class='"+I+"' style='"+K+"'  data-pos='"+(R+1+"|"+z+"|"+Y)+"' "+($.cf.isValid(f)?" data-droppableid='"+f+"'":"")+" title='' data-id='"+o.calEventId+"'>";if(ee+="<a class='cEventLink' style='"+B+"'>",D)ee+="<span class='cqavEventTitle'>"+v+"</span>",ee+="<span class='cqavEventIcon "+L+"' style='"+x+"'></span>";else{var te="";j&&W?(ee+="<span class='"+(te="cPartialEvent")+" cPartialEventLeft' style='"+F+"'></span>",ee+="<span class='"+te+" cPartialEventRight' style='"+F+"'></span>"):(j||W)&&(te="cPartialEvent",W&&(te+=" cPartialEventLeft"),j&&(te+=" cPartialEventRight"),ee+="<span class='"+te+"' style='"+F+"'></span>"),!n&&!1===c&&(1===P&&!W&&h>1||1===h)&&(ee+="<span class='cqavEventTime'>"+e.getDateInFormat({date:l},a,e.setting.is24Hour,!0)+"</span>"),i||$.cf.compareStrings(L,"Dot")||(ee+="<span class='cqavEventIcon "+L+"' style='"+x+"'></span>"),n||!1!==c||!(S>1||Y>1||y>23)||j||(ee+="<span class='cqavEventTimeRight'>"+e.getDateInFormat({date:d},a,e.setting.is24Hour,!0)+"</span>"),ee+="<span class='cqavEventTitle'>"+v+"</span>"}ee+="</a>",ee+="</div>",$(e.elem).find(".cqavContRow2Main").append(ee);var ie,ne="#"+X,ae=$(e.elem).find(ne),se=ae.find(".cEventLink");ie={};var re=e.getEventDateTimeString(l,d,c,"&&").split("&&");for(ie.title=v,ie.startDateTime=re[0],ie.endDateTime=re[1],ae.data("tooltipcontent",ie),e.setting.eventRendered&&e.setting.eventRendered.call(e,o,ae,se,e.setting.visibleView,!1),($.cf.isValid(g)||e.setting.eventClicked)&&se.on($.CalenStyle.extra.sClickHandler,{url:g,eventId:o.calEventId,eventElemSelector:ne,view:"QuickAgendaView",pluginId:e.tv.pluginId},e.__bindClick),Q=z;Q<Z;Q++)U[Q]=1,O++}}}e.setting.isTooltipInQuickAgendaView&&e._addTooltipInQuickAgendaView(".cEventTooltip"),e.setting.isDragNDropInQuickAgendaView&&e._makeEventDraggableInQuickAgendaView(".EventDraggable"),e.setting.eventsAddedInView&&e.setting.eventsAddedInView.call(e,e.setting.visibleView,".cqavEvent")}else console.log("to._addEventsInMonthView - No Events");e.addRemoveViewLoader(!1,"cEventLoaderBg"),e.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_adjustEventsInQuickAgendaView:function(){for(var e=this,t=$.CalenStyle.extra.iEventHeights[e.setting.visibleView]+2,i=$(e.elem).find(".cqavEvent"),n=0;n<i.length;n++){var a,s=i[n],r=$(e.elem).find(s).attr("data-pos").split("|"),o=parseInt(r[0]),l=parseInt(r[1]),d=parseInt(r[2]),c=10+(o-1)*t,v=$(e.elem).find("#cqavDayColumn"+l).position().left+2*$.CalenStyle.extra.iBorderOverhead;if(d>1){var g=l+(d-1);a=$(e.elem).find("#cqavDayColumn"+g).position().left+2*$.CalenStyle.extra.iBorderOverhead+$(e.elem).find("#cqavDayColumn"+g).width()-v}else a=$(e.elem).find("#cqavDayColumn"+l).width();a-=2*$.CalenStyle.extra.iBorderOverhead,$(s).css({left:v,top:c,width:a});var m=$(s).find(".cqavEventTitle"),D=$(s).height(),f=$(s).find(".cqavEventIcon"),u=null!==f?f.outerWidth(!0):0,p=$(s).find(".cqavEventTime"),h=null!==p?p.outerWidth(!0):0,y=0,C=$(s).find(".cqavEventTimeRight");null!==C&&(y=null!==C?C.outerWidth(!0):0);var w=$(s).find(".cPartialEventLeft").outerWidth(!0)+$(s).find(".cPartialEventRight").outerWidth(!0),S=a-(u+h+y+10*$.CalenStyle.extra.iBorderOverhead+w);m.css({height:D,"line-height":D+"px",width:S}),p.css({height:D,"line-height":D+"px"}),null!==C&&C.css({height:D,"line-height":D+"px"})}},_makeEventContDroppableInQuickAgendaView:function(){var e,t,i,n,a,s,r,o,l,d,c,v,g=this,m=null,D=null,f=0,u=!1,p=null,h=null;$(g.elem).find(".cqavTableRow2 .cqavTableColumns").droppable({scope:"Events",over:function(y,C){for(e=$(C.draggable),i=e.attr("id"),n=e.attr("data-id"),a=g.getEventWithId(n),s=".Event-"+n,m=null,D=null,f=!1,null!==a.start&&(m=a.start),null!==a.end&&(D=a.end),null!==a.isAllDay&&(f=a.isAllDay),r=g.getNumberOfDaysOfEvent(f,m,D,!0,!1,!0),o=r[0],r[1],l=g._getDateBasedOnLeftPositionInQuickAgendaView(C.position.left),d=g._getDayNumberFromDateInQuickAgendaView(l),p=g.setDateInFormat({iDate:{d:l.getDate(),M:l.getMonth(),y:l.getFullYear(),H:m.getHours(),m:m.getMinutes(),s:m.getSeconds()}},""),h=new Date(p.getTime()+(D.getTime()-m.getTime())),g.tv.bChkDroppable&&(e=$(g.elem).find("#"+i+".ui-draggable-dragging"),t=e.attr("data-droppableid"),(u=g._findWhetherEventEnteredNonDroppableZone(p,h,f,o,t))?(e.addClass("cCursorNotAllowed"),e.find(".cEventLink").addClass("cCursorNotAllowed")):(e.removeClass("cCursorNotAllowed"),e.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(g.elem).find(".cqavTableColumns").removeClass("cActivatedCell"),c=0;c<o;c++)(v=d+c)<=g.tv.dAVDt.length-1&&$(g.elem).find(".cqavTableRow2 #cqavDayColumn"+v).addClass("cActivatedCell")},drop:function(l,d){if(e=$(d.draggable),i=e.attr("id"),n=e.attr("data-id"),a=g.getEventWithId(n),s=".Event-"+n,m=null,D=null,f=!1,$(this).attr("id")===g.tv.draggableParent)return setTimeout(function(){$(s+".cEventBeingDragged").remove(),$(s).removeClass("ui-draggable-dragging cEditingEvent cEditingEventUI")},300),g.tv.iTSEndEditing=$.cf.getTimestamp(),!0;null!==a.start&&(m=a.start),null!==a.end&&(D=a.end),null!==a.isAllDay&&(f=a.isAllDay),r=g.getNumberOfDaysOfEvent(f,m,D,!0,!1,!0),o=r[0],r[1];var c=g._getDateBasedOnLeftPositionInQuickAgendaView(d.position.left);if(p=g.setDateInFormat({iDate:{d:c.getDate(),M:c.getMonth(),y:c.getFullYear(),H:m.getHours(),m:m.getMinutes(),s:m.getSeconds()}},""),h=new Date(p.getTime()+(D.getTime()-m.getTime())),g.tv.bChkDroppable&&(e=$(g.elem).find("#"+i+".ui-draggable-dragging"),t=e.attr("data-droppableid"),u=g._findWhetherEventEnteredNonDroppableZone(p,h,f,o,t),e.removeClass("cCursorNotAllowed"),e.find(".cEventLink").removeClass("cCursorNotAllowed")),u)setTimeout(function(){return g.tv.bChkDroppable&&e.removeClass("cEditingEvent cEventBeingDragged ui-draggable-dragging"),$("#"+i+".cEventClone").remove(),g.tv.iTSEndEditing=$.cf.getTimestamp(),!1},300);else{var v=g.compareDates(D,$.CalenStyle.extra.dToday);v>0?$(g.elem).find(s).css({opacity:1}):v<0&&$(g.elem).find(s).css({opacity:.7}),g.__updateEventWithId(n,p,h)&&(g.__addEventsInQuickAgendaView(),g._adjustEventsInQuickAgendaView()),$(g.elem).find(".cqavTableColumns").removeClass("cActivatedCell")}g.setting.saveChangesOnEventDrop&&g.setting.saveChangesOnEventDrop.call(g,a,m,D,p,h),g.tv.iTSEndEditing=$.cf.getTimestamp()}})},_makeEventDraggableInQuickAgendaView:function(e){var t=this,i=$(t.elem).find(".cqavEvent").height(),n=$(t.elem).find(".cqavTableColumns").width(),a=n+1,s=$(t.elem).position().left,r=$(t.elem).css("margin-left"),o=s+(r=parseInt(r.replace("px","")))+$(t.elem).find(".cqavContRow2Main").position().left,l=o+$(t.elem).find(".cqavContRow2Main").width()-n,d=$(t.elem).position().top,c=$(t.elem).css("margin-top"),v=d+(c=parseInt(c.replace("px","")))+$(t.elem).find(".cqavContRow2Main").position().top;t.tv.bDisFBar&&$.cf.compareStrings(t.setting.filterBarPosition,"Top")&&(v+=t.setting.filterBarHeight);var g=v+$(t.elem).find(".cqavContRow2Main").height()-i;$(t.elem).find(e).draggable({zIndex:100,scope:"Events",grid:[a,1],containment:[o,v,l,g],scroll:!1,cursor:"move",delay:300,revertDuration:300,start:function(){var e=$(this),a=e.attr("data-pos").split("|"),s=parseInt(a[1]);t.tv.draggableParent="cqavDayColumn"+s,e.removeClass("cPartialEventLeft cPartialEventRight cPartialEventBoth");var r=e.clone();e.parent().append(r),$(r).addClass("cEventBeingDragged cEventClone"),e.hasClass("cEventOnlyText")?e.addClass("cEditingEvent"):e.addClass("cEditingEvent cEditingEventUI"),e.css({width:n,height:i})},revert:function(){return $(t.elem).find(".cqavTableColumns").removeClass("cActivatedCell"),!0}})},_addTooltipInQuickAgendaView:function(e){var t=this;$(t.elem).find(e).tooltip({content:function(){var e="";if($.cf.compareStrings(t.setting.eventTooltipContent,"Default")){var i=$(this).data("tooltipcontent");void 0!==i.title&&(e+="<div class='cTooltipTitle'>"+i.title+"</div>"),void 0===i.startDateTime&&void 0!==i.endDateTime||(e+="<div class='cTooltipTime'>",void 0!==i.startDateTime&&(e+=i.startDateTime),void 0!==i.endDateTime&&(e+="<br/>"+i.endDateTime),e+="</div>")}else{var n=t.getEventWithId($(this).attr("data-id"));e=t.setting.eventTooltipContent.call(t,n)}return e},position:{my:"center bottom-15",at:"center top",using:function(e,t){$(this).css(e),$("<div>").addClass("tooltip-arrow").addClass(t.vertical).addClass(t.horizontal).appendTo(this)}}})},_getDateBasedOnLeftPositionInQuickAgendaView:function(e){for(var t=this,i=$(t.elem).find(".cqavTableColumns").width(),n=t.tv.fADVDayLftPos.length,a=0,s=0,r=0;r<n;r++){var o=t.tv.fADVDayLftPos[r]-5,l=o+i-5;if(r===n-1&&(l+=5),e>=o&&e<=l){s=r+1;break}}for(var d=0;d<t.tv.dAVDt.length;d++){var c=t.tv.dAVDt[d];if(t.__isDateInCurrentView(c)&&++a===s)return c}},_getDayNumberFromDateInQuickAgendaView:function(e){for(var t=0;t<this.tv.dAVDt.length;t++)if(0===this.compareDates(e,this.tv.dAVDt[t]))return t;return-1}})}();