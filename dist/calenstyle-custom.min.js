/* ----------------------------------------------------------------------------- 

  CalenStyle - Responsive Event Calendar
  Version 2.0.8
  Copyright (c)2023 Lajpat Shah
  Contributors : https://github.com/nehakadam/CalenStyle/contributors
  Repository : https://github.com/nehakadam/CalenStyle
  Homepage : https://nehakadam.github.io/CalenStyle

 ----------------------------------------------------------------------------- */

!function(){"use strict";function a(a,b,c,d,e,f,g,h){this.id=a,this.isAllDay=b,this.start=c,this.end=d,this.type=e,this.title=f,this.desc=g,this.url=h}function b(a,b,c,d,e,f,g,h){this.dayNo=a,this.eventId=b,this.eventDisplayId=c,this.eventSegId=d,this.eventSegStart=e,this.eventSegEnd=f,this.segLeftColumn=g,this.segColumns=h}function c(a,b){var c=this;c.elem=a;var d=$.cf.isValid(b.language)?b.language:$.CalenStyle.defaults.language;c.setting=$.extend({},$.CalenStyle.defaults,b,$.CalenStyle.i18n[d]),c.tv=$.extend({},$.CalenStyle.tempDefaults),c.tv.pluginId=$.CalenStyle.extra.iCalenStyleObjCount,c.tv.iUTmMS=c.setting.unitTimeInterval*$.CalenStyle.extra.iMS.m,c.tv.iUTmSlt=60/c.setting.unitTimeInterval,c.tv.iCalHeight=$(c.elem).height(),c.setting.initialize&&c.setting.initialize.call(c),$.CalenStyle.extra.dToday=c._getCurrentDate(),0===c.compareDates(c.setting.selectedDate,new Date)&&(c.setting.selectedDate=new Date($.CalenStyle.extra.dToday)),c.tv.dLoadDt=new Date($.CalenStyle.extra.dToday),c.tv.dVSDt=new Date($.CalenStyle.extra.dToday),c.tv.dVEDt=new Date($.CalenStyle.extra.dToday),c.tv.dVDSDt=new Date($.CalenStyle.extra.dToday),c.tv.dVDEDt=new Date($.CalenStyle.extra.dToday),c.tv.dCMDt=new Date($.CalenStyle.extra.dToday),c.tv.dPMDt=new Date($.CalenStyle.extra.dToday),c.tv.dNMDt=new Date($.CalenStyle.extra.dToday),c.tv.dPLSDt=new Date($.CalenStyle.extra.dToday),c.tv.dPLEDt=new Date($.CalenStyle.extra.dToday),c.tv.dNLSDt=new Date($.CalenStyle.extra.dToday),c.tv.dNLEDt=new Date($.CalenStyle.extra.dToday),$.CalenStyle.extra.oArrCalenStyle.push(c),c._setHeightForEvents()}function d(a,b){function c(){$(a.elem).find(".cmlvOuterCont").length>0?f():d(),$(document).on($.CalenStyle.extra.sClickHandler+".MonthPicker",function(a){f()})}function d(){var d="";d+="<div class='cmlvOuterCont "+(b?"cmlvPopup":"cmlvFull")+"'>",d+="<div class='cmlvCont'>",b&&(d+="<span class='cmlvContTooltip cmlvContTooltipBottom'></span>"),d+="<table class='cmlvMonthListTable'>";for(var f=0,h=0;h<3;h++){d+="<tr>";for(var i=0;i<4;i++){var j="cmlvMonth"+f;a.setting.selectedDate.getMonth()===f?d+="<td id='"+j+"' class='cmlvMonth cmlvMonthCurrent'>"+a.getDateInFormat({iDate:{M:f}},"MMM",!1,!0)+"</td>":d+="<td id='"+j+"' class='cmlvMonth cmlvMonthOther clickableLink'>"+a.getDateInFormat({iDate:{M:f}},"MMM",!1,!0)+"</td>",f++}d+="</tr>"}d+="</table>",d+="</div>",d+="</div>",$(a.elem).find(".calendarCont").append(d),e(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(a){e()}),$.CalenStyle.extra.bTouchDevice||$(a.elem).find(".cmlvMonth").hover(function(b){var c=$(this).attr("id");(c=c.replace("cmlvMonth",""))!==a.setting.selectedDate.getMonth()&&$(this).addClass("cmlvMonthOtherHover")},function(b){var c=$(this).attr("id");(c=c.replace("cmlvMonth",""))!==a.setting.selectedDate.getMonth()&&$(this).removeClass("cmlvMonthOtherHover")}),$(a.elem).find(".cmlvMonth").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation();var b=$(this).attr("id");g(parseInt(b.replace("cmlvMonth","")))}),$(a.elem).find(".cmlvOuterCont").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation(),c()})}function e(){var c=$(a.elem).find(".cmlvCont");if(b){var d=$(a.elem).find(".cContHeaderLabelMonth"),e=c.width()/2,f=$(a.elem).find(".calendarContInner").position().top+d.height()+4+($.cf.compareStrings(a.setting.sectionsList[0],"ActionBar")?$(a.elem).find(".cActionBar").height():0),g=d.width(),h=d.position().left||$(a.elem).find(".cContHeaderLabelOuter").position().left,i=h+g/2,j=$(a.elem).find(".calendarContInner").position().left+(i-e)-4;j=j<0?2:j,c.css({top:f,left:j}),$(".cmlvContTooltipBottom").css({left:e-5})}$(a.elem).find(".cContHeader").length>0?c.css({"font-size":$(a.elem).find(".cContHeader").css("font-size")}):c.css({"font-size":$(a.elem).css("font-size")}),a.setCalendarBorderColor()}function f(){a.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+a.tv.pluginId,e),$(a.elem).find(".cmlvOuterCont").remove()}function g(b){var c=a.setting.selectedDate.getMonth();$(a.elem).find("#cmlvMonth"+c).removeClass("cmlvMonthCurrent cmlvMonthOtherHover").addClass("cmlvMonthOther clickableLink"),a.setting.selectedDate.setDate(1),a.setting.selectedDate.setMonth(b),a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType=b===c-1?"Prev":b===c+1?"Next":"Load",a.modifyCalenStyleObject(a),$(a.elem).find("#cmlvMonth"+b).removeClass("cmlvMonthOther clickableLink cmlvMonthOtherHover").addClass("cmlvMonthCurrent"),setTimeout(function(){$.cf.compareStrings(a.setting.visibleView,"AgendaView")?(a.updateAgendaView(!0),a.adjustAgendaView()):(a.updateMonthTableAndContents(!0),a.adjustMonthTable()),f()},a.setting.transitionSpeed)}this.showOrHideMonthList=c}function e(a,b){function c(){$(a.elem).find(".cylvOuterCont").length>0?g():d(),$(document).on($.CalenStyle.extra.sClickHandler+".YearPicker",function(a){g()})}function d(){var d=a.setting.selectedDate.getFullYear();l=d-5,m=l+12;var g="";g+="<div class='cylvOuterCont "+(b?"cylvPopup":"cylvFull")+"'>",g+="<div class='cylvCont'>",b&&(g+="<span class='cylvContTooltip cylvContTooltipBottom'></span>"),g+="<table class='cylvYearListOuterTable'>",g+="<tr class='cylvTableHeaderRow'>",g+="<td class='cylvTableColumns cylvPrevYears clickableLink cs-icon-Prev'></td>",g+="<td class='cylvTableColumns cylvSelectedYear clickableLink'>"+a.getNumberStringInFormat(d,0,!0)+"</td>",g+="<td class='cylvTableColumns cylvNextYears clickableLink cs-icon-Next'></td>",g+="</tr>",g+="<tr class='cylvTableContRow'>",g+="<td colspan='3'>",g+="<table class='cylvYearListTable cylvYearListTableMain'>",g+="</table>",g+="</td>",g+="</tr>",g+="</table>",g+="</div>",g+="</div>",$(a.elem).find(".calendarCont").append(g),$(a.elem).find(".cylvPrevYears").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation(),i()}),$(a.elem).find(".cylvSelectedYear").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation(),k()}),$(a.elem).find(".cylvNextYears").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation(),j()}),e(),a.setting.adjustViewOnWindowResize&&$(window).bind("resize."+a.tv.pluginId,function(a){e()}),$.CalenStyle.extra.bTouchDevice||($(a.elem).find(".cylvPrevYears, .cylvNextYears").hover(function(a){$(this).addClass("cylvTableColumnsHover")},function(a){$(this).removeClass("cylvTableColumnsHover")}),$(a.elem).find(".cylvSelectedYear").hover(function(a){$(this).addClass("cylvSelectedYearHover")},function(a){$(this).removeClass("cylvSelectedYearHover")})),f(),$(a.elem).find(".cylvOuterCont").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation(),c()})}function e(){var c=$(a.elem).find(".cylvCont"),d=$(".cylvTableContRow").height();if($(".cylvYearListTable").css({height:d}),b){var e=$(a.elem).find(".cContHeaderLabelYear"),f=c.width()/2,g=$(a.elem).find(".calendarContInner").position().top+e.height()+4+($.cf.compareStrings(a.setting.sectionsList[0],"ActionBar")?$(a.elem).find(".cActionBar").height():0),h=e.width(),i=e.position().left||$(a.elem).find(".cContHeaderLabelOuter").position().left,j=i+h/2,k=$(a.elem).find(".calendarContInner").position().left+(j-f)-4;k=k<0?2:k,c.css({top:g,left:k}),$(".cylvContTooltipBottom").css({left:f-5})}$(a.elem).find(".cContHeader").length>0?c.css({"font-size":$(a.elem).find(".cContHeader").css("font-size")}):c.css({"font-size":$(a.elem).css("font-size")}),a.setCalendarBorderColor()}function f(){for(var b=a.setting.selectedDate.getFullYear(),c=0,d="",e=l;e<m;e++){0!==c&&4!==c&&8!==c||(d+="<tr class='cylvTableRow'>");var f="cylvYear"+e;d+=b===e?"<td id='"+f+"' class='cylvYear cylvYearCurrent'>"+a.getNumberStringInFormat(e,0,!0)+"</td>":"<td id='"+f+"' class='cylvYear cylvYearOther clickableLink'>"+a.getNumberStringInFormat(e,0,!0)+"</td>",3!==c&&7!==c&&11!==c||(d+="</tr>"),c++}$(a.elem).find(".cylvYearListTableMain").html(d),$(a.elem).find(".cylvYear").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation();var b=$(this).attr("id");h(parseInt(b.replace("cylvYear","")))}),$.CalenStyle.extra.bTouchDevice||$(a.elem).find(".cylvYear").hover(function(b){$(this).html()!==a.setting.selectedDate.getFullYear()&&$(this).addClass("cylvYearOtherHover")},function(b){$(this).html()!==a.setting.selectedDate.getFullYear()&&$(this).removeClass("cylvYearOtherHover")})}function g(){a.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+a.tv.pluginId,e),$(a.elem).find(".cylvOuterCont").remove()}function h(b){var c=a.setting.selectedDate.getFullYear();$(a.elem).find("#cylvYear"+c).removeClass("cylvYearCurrent cylvYearOtherHover").addClass("cylvYearOther"),a.tv.sLoadType="Load",a.setting.selectedDate.setFullYear(b),a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.modifyCalenStyleObject(a),setTimeout(function(){$.cf.compareStrings(a.setting.visibleView,"AgendaView")?(a.updateAgendaView(!0),a.adjustAgendaView()):(a.updateMonthTableAndContents(!0),a.adjustMonthTable()),$(a.elem).find("#cylvYear"+b).removeClass("cylvYearOther cylvYearOtherHover").addClass("cylvYearCurrent"),g()},a.setting.transitionSpeed)}function i(){$(a.elem).find(".cylvPrevYears").addClass("cylvTableColumnsHover");var b=$(a.elem).find(".cylvYearListTableMain"),c=b.position().top,d=b.position().left,e=b.width(),g=b.height(),h=b.clone();$(h).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(h).css({position:"absolute",top:c,left:d,height:g}),b.parent().append(h),d+=e,$(h).animate({left:d},a.setting.transitionSpeed),setTimeout(function(){$(a.elem).find(".cylvYearListTableTemp").remove()},a.setting.transitionSpeed),$(a.elem).find(".cylvPrevYears").removeClass("cylvTableColumnsHover"),l-=12,m=l+12,f()}function j(){$(a.elem).find(".cylvNextYears").addClass("cylvTableColumnsHover");var b=$(a.elem).find(".cylvYearListTableMain"),c=b.position().top,d=b.position().left,e=b.width(),g=b.height(),h=b.clone();$(h).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(h).css({position:"absolute",top:c,left:d,height:g}),b.parent().append(h),d-=e,$(h).animate({left:d},a.setting.transitionSpeed),setTimeout(function(){$(a.elem).find(".cylvYearListTableTemp").remove()},a.setting.transitionSpeed),$(a.elem).find(".cylvNextYears").removeClass("cylvTableColumnsHover"),l+=12,m=l+12,f()}function k(){var b=l,c=a.setting.selectedDate.getFullYear();if(l=c-5,m=l+12,b!==l){$(a.elem).find(".cylvSelectedYear").addClass("cylvTableColumnsClick");var d=$(a.elem).find(".cylvYearListTableMain"),e=d.position().top,g=d.position().left,h=d.width(),i=d.height(),j=d.clone();$(j).removeClass("cylvYearListTableMain").addClass("cylvYearListTableTemp"),$(j).css({position:"absolute",top:e,left:g,height:i}),d.parent().append(j),b<l?g-=h:g+=h,$(j).animate({left:g},a.setting.transitionSpeed),setTimeout(function(){$(a.elem).find(".cylvYearListTableTemp").remove()},a.setting.transitionSpeed),$(a.elem).find(".cylvSelectedYear").removeClass("cylvTableColumnsClick"),f()}}this.showOrHideYearList=c;var l,m}$.CalenStyle=$.CalenStyle||{name:"CalenStyle",version:"1.0.0",i18n:{},defaults:{sectionsList:["Header","Calendar"],language:"",veryShortDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],numbers:["0","1","2","3","4","5","6","7","8","9"],eventTooltipContent:"Default",formatDates:{},slotTooltipContent:function(a){return"Busy"===a.status?"":"Free"===a.status?void 0===a.count||null===a.count?"<div class=cavTooltipBookNow>Book Now</div>":"<div class=cavTooltipSlotCount>"+a.count+" slots available</div><div class=cavTooltipBookNow>Book Now</div>":void 0},miscStrings:{today:"Today",week:"Week",allDay:"All Day",ends:"Ends",emptyEventTitle:"(No Title)",emptyGoogleCalendarEventTitle:"Busy"},duration:"Default",durationStrings:{y:["year ","years "],M:["month ","months "],w:["w ","w "],d:["d ","d "],h:["h ","h "],m:["m ","m "],s:["s ","s "]},viewsToDisplay:[{viewName:"DetailedMonthView",viewDisplayName:"Month"},{viewName:"WeekView",viewDisplayName:"Week"},{viewName:"DayView",viewDisplayName:"Day"},{viewName:"AgendaView",viewDisplayName:"Agenda"}],visibleView:"DetailedMonthView",selectedDate:new Date,headerComponents:{DatePickerIcon:"<span class='cContHeaderButton cContHeaderDatePickerIcon clickableLink cs-icon-Calendar'></span>",FullscreenButton:function(a){return"<span class='cContHeaderButton cContHeaderFullscreen clickableLink "+(a?"cs-icon-Contract":"cs-icon-Expand")+"'></span>"},PreviousButton:"<span class='cContHeaderButton cContHeaderNavButton cContHeaderPrevButton clickableLink cs-icon-Prev'></span>",NextButton:"<span class='cContHeaderButton cContHeaderNavButton cContHeaderNextButton clickableLink cs-icon-Next'></span>",TodayButton:"<span class='cContHeaderButton cContHeaderToday clickableLink'></span>",HeaderLabel:"<span class='cContHeaderLabelOuter'><span class='cContHeaderLabel'></span></span>",HeaderLabelWithDropdownMenuArrow:"<span class='cContHeaderLabelOuter clickableLink'><span class='cContHeaderLabel'></span><span class='cContHeaderButton cContHeaderDropdownMenuArrow'></span></span>",MenuSegmentedTab:"<span class='cContHeaderMenuSegmentedTab'></span>",MenuDropdownIcon:"<span class='cContHeaderButton cContHeaderMenuButton clickableLink'>&#9776;</span>"},headerSectionsList:{left:["DatePickerIcon","PreviousButton","NextButton"],center:["HeaderLabel"],right:["MenuSegmentedTab"]},dropdownMenuElements:["ViewsToDisplay"],parentObject:null,datePickerObject:null,formatSeparatorDateTime:" ",formatSeparatorDate:"-",formatSeparatorTime:":",is24Hour:!1,inputDateTimeFormat:"dd-MM-yyyy HH:mm:ss",eventDuration:30,allDayEventDuration:1,timeIndicatorUpdationInterval:15,unitTimeInterval:30,timeLabels:"Hour",inputTZOffset:"+05:30",tz:"Asia/Calcutta",outputTZOffset:"+05:30",weekStartDay:1,weekNumCalculation:"US",daysInCustomView:4,daysInDayListView:7,daysInAppointmentView:4,agendaViewDuration:"Month",daysInAgendaView:15,agendaViewTheme:"Timeline2",showDaysWithNoEventsInAgendaView:!1,fixedHeightOfWeekPlannerViewCells:!0,quickAgendaViewDuration:"Week",daysInQuickAgendaView:5,navigateOneDayInQuickAgendaView:!1,taskPlannerViewDuration:"Week",daysInTaskPlannerView:5,fixedHeightOfTaskPlannerView:!0,navigateOneDayInTaskPlannerView:!1,transitionSpeed:600,showTransition:!1,fixedNumOfWeeksInMonthView:!1,displayWeekNumInMonthView:!1,actionOnDayClickInMonthView:"ModifyEventList",eventIndicatorInMonthView:"Events",eventIndicatorInDatePicker:"DayNumberBold",eventIndicatorInDayListView:"DayHighlight",averageEventsPerDayForDayHighlightView:5,hideExtraEvents:!0,hiddenEventsIndicatorLabel:"+(count) more",hiddenEventsIndicatorAction:"ShowEventDialog",addEventsInMonthView:!0,displayEventsInMonthView:!0,isDragNDropInMonthView:!0,isTooltipInMonthView:!1,isDragNDropInDetailView:!0,isResizeInDetailView:!0,isTooltipInDetailView:!1,isDragNDropInQuickAgendaView:!0,isTooltipInQuickAgendaView:!1,isDragNDropInTaskPlannerView:!0,isTooltipInTaskPlannerView:!1,isTooltipInAppointmentView:!0,actionBarHeight:30,filterBarPosition:"Top",filterBarHeight:200,filterBarWidth:200,eventFilterCriteria:[],noneSelectedFilterAction:"SelectNone",calendarBorderColor:"FFFFFF",changeCalendarBorderColorInJS:!1,extraMonthsForDataLoading:1,deleteOldDataWhileNavigating:!0,datasetModificationRule:"Default",changeColorBasedOn:"EventCalendar",borderColor:"",textColor:"FFFFFF",onlyTextForNonAllDayEvents:!0,eventColorsArray:["C0392B","D2527F","674172","4183D7","336E7B","36D7B7","68C3A3","E87E04","6C7A89","F9690E"],eventIcon:"Dot",hideEventIcon:{Default:!1,DetailedMonthView:!1,MonthView:!1,WeekView:!1,DayView:!1,CustomView:!1,QuickAgendaView:!1,TaskPlannerView:!1,DayEventDetailView:!1,AgendaView:!1,WeekPlannerView:!1},hideEventTime:{Default:!1,DetailedMonthView:!1,MonthView:!1,WeekView:!1,DayView:!1,CustomView:!1,QuickAgendaView:!1,TaskPlannerView:!1,DayEventDetailView:!1,AgendaView:!1,WeekPlannerView:!1},businessHoursSource:[{day:1,times:[{startTime:"10:00",endTime:"17:00"}]},{day:2,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]},{day:3,times:[{startTime:"10:00",endTime:"17:00"}]},{day:4,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]},{day:5,times:[{startTime:"10:00",endTime:"17:00"}]},{day:6,times:[{startTime:"09:00",endTime:"13:00"},{startTime:"14:00",endTime:"18:00"}]}],excludeNonBusinessHours:!1,isNonBusinessHoursDroppable:!0,isRestrictedSectionDroppable:!0,eventOrTaskStatusIndicators:[{name:"Overdue",color:"E74C3C"},{name:"Completed",color:"27AE60"},{name:"InProgress",color:"F1C40F"}],calDataSource:[],datePickerCalDataSource:[{config:{sourceCountType:"Event"}}],adjustViewOnWindowResize:!0,useHammerjsAsGestureLibrary:!1,initialize:null,modifyHeaderViewLabels:null,addEventHandlersInHeader:null,dataLoadingStart:null,dataLoadingEnd:null,cellClicked:null,viewLoaded:null,previousButtonClicked:null,nextButtonClicked:null,todayButtonClicked:null,visibleViewChanged:null,modifyCustomView:null,displayEventsForPeriodInList:null,displayEventsForPeriodInListInAgendaView:null,eventListAppended:null,displayEventListDialog:null,eventInADialogClicked:null,eventRendered:null,eventsAddedInView:null,timeSlotsAddedInView:null,eventClicked:null,timeSlotClicked:null,saveChangesOnEventDrop:null,saveChangesOnEventResize:null,modifyFilterBarView:null,modifyActionBarView:null,addDaySummaryInTaskPlannerView:null},tempDefaults:{sLoadType:"Load",iLoadCnt:0,dLoadDt:new Date,bViewLoaded:!1,dHighlightDPV:[],bDisFBar:!1,bDisMenu:!1,iMaxEvId:0,iMxEvRw:0,oAEvents:[],oASmEvSeg:[],oAADEvSeg:[],oASrcCnt:[],oAResSec:[],oASltAvail:[],oAECalendar:[],oAEvTaskStatus:[],bEvTskStatus:!1,oSURLParams:[],iDocHtPrev:0,iUTmMS:0,iUTmSlt:0,dVSDt:new Date,dVEDt:new Date,dVDSDt:new Date,dVDEDt:new Date,dCMDt:new Date,dPMDt:new Date,dNMDt:new Date,dPLSDt:new Date,dPLEDt:new Date,dNLSDt:new Date,dNLEDt:new Date,dDrgSDt:null,dDrgEDt:null,dAVDt:[],dAVDDt:[],iNoVDay:0,iNoVDayDis:0,iSelDay:0,bAWkRw:[],bADVCur:[],sADVInfo:[],iBsDays:0,bABsDays:[],oBsHours:{start:"",end:""},bChkDroppable:!1,iWkInMonth:6,bDVResEv:!1,bDVDrgEv:!1,bEvLgPresd:!1,bUrlClk:!1,oEvEdt:null,oDVEdtgEv:null,bDVScrlg:!1,fDVDayWth:0,fADVDayLftPos:[],fAHrTpPos:[],bCMVDisEvLst:!1,bDisABar:!1,oAEvFltrCnt:[],iCalHeight:0,bDyClDLV:!1},extra:{iCalenStyleObjCount:0,iBorderOverhead:1,iEventHeightOverhead:4,iScrollbarWidth:0,dToday:new Date,iMS:{m:6e4,h:36e5,d:864e5,w:6048e5},sArrInputDateTimeFormats:["DateObject","UnixTimestamp","ISO8601","ISO8601Compact","dd-MM-yyyy hh:mm:ss AA","dd-MM-yyyy HH:mm:ss","MM-dd-yyyy hh:mm:ss AA","MM-dd-yyyy HH:mm:ss","yyyy-MM-dd hh:mm:ss AA","yyyy-MM-dd HH:mm:ss"],sArrViewsTypes:["DetailedMonthView","MonthView","WeekView","DayView","AgendaView","WeekPlannerView","QuickAgendaView","TaskPlannerView","CustomView","DayEventListView","DayEventDetailView","AppointmentView","DatePicker"],bTouchDevice:"ontouchstart"in document.documentElement,sClickHandler:(document.documentElement,"click"),sClickHandlerButtons:"ontouchstart"in document.documentElement?"touchstart":"click",oArrCalenStyle:[],iEventHeights:{DetailedMonthView:18,WeekView:18,DayView:18,CustomView:18,DayEventDetailView:18,QuickAgendaView:18},oEventClass:{DetailedMonthView:"cdmvEvent",WeekView:"cdvEventAllDay",DayView:"cdvEventAllDay",CustomView:"cdvEventAllDay",DayEventDetailView:"cdvEventAllDay",QuickAgendaView:"cqavEvent"}}},$.cf={isValid:function(a){return void 0!==a&&null!==a&&""!==a},compareStrings:function(a,b){return null!==a&&void 0!==a&&null!==b&&void 0!==b?"string"==typeof a&&"string"==typeof b&&a.toLocaleLowerCase()===b.toLocaleLowerCase():null===a&&null===b||void 0===a&&void 0===b},getTimestamp:function(){return(new Date).getTime()},getRGBAString:function(a,b){var c=0,d=0,e=0,f=a.match(/rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*(\d*(?:\.\d+)?)/i),g=a.match(/rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})/i);return $.cf.isValid(f)&&f.length>0?(c=f[0],d=f[1],e=f[2]):$.cf.isValid(g)&&g.length>0?(c=g[0],d=g[1],e=g[2]):(a="#"===a.charAt(0)?a.substring(1,7):a,a=a.match(/([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/)[0],3===a.length?(c=a.substring(0,1),c+=c,c=parseInt(c,16),d=a.substring(1,2),d+=d,d=parseInt(d,16),e=a.substring(2,3),e+=e,e=parseInt(e,16)):6===a.length&&(c=parseInt(a.substring(0,2),16),d=parseInt(a.substring(2,4),16),e=parseInt(a.substring(4,6),16))),"rgba("+c+", "+d+", "+e+", "+b+")"},addHashToHexcode:function(a){if($.cf.isValid(a)){var b=a.match(/(rgba)/i),c=a.match(/(#+([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3}))/),d=a.match(/([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})/);return $.cf.isValid(b)&&b.length>0?a:$.cf.isValid(c)&&c.length>0?c[0]:$.cf.isValid(d)&&d.length>0?"#"+d[0]:"#000000"}return a},getSizeValue:function(a,b){var c,d,e,f=a.css(b);return void 0!==f&&null!==f&&""!==f&&(-1!==f.indexOf("px")?c=parseInt(f.replace("px","")):-1!==f.indexOf("%")&&(d=parseInt(f.replace("%","")),e=a.closest().width(),c=d%100*e),!(c<=0)&&c)}},function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){a.fn.CalenStyle=function(b){var d,e,f=a(this).data(),g=Object.keys(f);if(null===b||void 0===b)if(g.length>0){for(d in g)if(e=g[d],-1!==e.search("plugin_CalenStyle_"))return f[e]}else console.log("No CalenStyle Object Defined For This Element");else{if("string"!=typeof b)return this.each(function(){if(a.CalenStyle.extra.iCalenStyleObjCount++,a.data(this,"plugin_CalenStyle_"+a.CalenStyle.extra.iCalenStyleObjCount))if(g.length>0){for(d in g)if(e=g[d],-1!==e.search("plugin_CalenStyle_"))return f[e]}else console.log("No CalenStyle Object Defined For This Element");else f=new c(this,b),a.data(this,"plugin_CalenStyle_"+a.CalenStyle.extra.iCalenStyleObjCount,f),f.loadView(),console.log("Calendar Object "),console.log(f)});if(a.cf.isValid(f)&&"destroy"===b)if(g.length>0){for(d in g)if(e=g[d],-1!==e.search("plugin_CalenStyle_")){a(this).children().remove(),a(".cElemDatePickerBg").remove(),a(this).removeData(),a(this).unbind(),a(this).removeClass("elem-CalenStyle"),a(document).unbind(a.CalenStyle.extra.sClickHandler+".CalenStyle"),a(document).unbind(a.CalenStyle.extra.sClickHandler+".CalenStyleDialog"),a(document).unbind(a.CalenStyle.extra.sClickHandler+".MonthPicker"),a(document).unbind(a.CalenStyle.extra.sClickHandler+".YearPicker"),f=f[e],a(window).unbind("resize."+f.tv.pluginId),a(window).unbind("resize.CSDP."+f.tv.pluginId);for(var h=[],i=0;i<a.CalenStyle.extra.oArrCalenStyle.length;i++){var j=a.CalenStyle.extra.oArrCalenStyle[i];j.tv.pluginId!==f.tv.pluginId&&j.tv.pluginId!==f.setting.datePickerObject.tv.pluginId&&h.push(j)}a.CalenStyle.extra.oArrCalenStyle=h,console.log("Destroyed CalenStyle Object"),console.log(f);break}}else console.log("No CalenStyle Object Defined For This Element")}}}),c.prototype={modifyCalenStyleObject:function(a){},setLanguage:function(a,b){var c=this;c.setting.language=a,c.setting=$.extend({},c.setting,$.CalenStyle.i18n[a]);for(var d=0;d<c.setting.viewsToDisplay.length;d++)c.setting.viewsToDisplay[d].viewDisplayName=c.setting.viewDisplayNames[c.setting.viewsToDisplay[d].viewName];return c.setting.datePickerObject.setting=$.extend({},c.setting.datePickerObject.setting,$.CalenStyle.i18n[a]),b?c.reloadData():(c.refreshView(),c.setting.datePickerObject.refreshView()),c},changeOutputTimezone:function(a,b,c){var d,e=this,f=e.setting.tz,g=e.setting.outputTZOffset;if(e.setting.tz=a,e.setting.outputTZOffset=b,c||e.tv.bGCData&&f!==a)e.reloadData();else if(g!==b){for(d=0;d<e.tv.oAEvents.length;d++){var h=e.tv.oAEvents[d];h.isAllDay||(h.start=e.normalizeDateTimeWithOffset(h.start,g,b),h.end=e.normalizeDateTimeWithOffset(h.end,g,b))}for(d=0;d<e.tv.oAResSec.length;d++){var i=e.tv.oAResSec[d];i.isAllDay||(i.start=e.normalizeDateTimeWithOffset(i.start,g,b),i.end=e.normalizeDateTimeWithOffset(i.end,g,b))}for(d=0;d<e.tv.oASltAvail.length;d++){var j=e.tv.oASltAvail[d];j.isAllDay||(j.start=e.normalizeDateTimeWithOffset(j.start,g,b),j.end=e.normalizeDateTimeWithOffset(j.end,g,b))}e.refreshView()}},addRemoveLoaderIndicators:function(a,b){var c=this;$.cf.compareStrings(c.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(c.setting.visibleView,"MonthView")||$.cf.compareStrings(c.setting.visibleView,"DatePicker")?a?$(c.elem).find(".cmvMonthTableMain tbody").addClass(b):$(c.elem).find(".cmvMonthTableMain tbody").removeClass(b):$.cf.compareStrings(c.setting.visibleView,"WeekView")||$.cf.compareStrings(c.setting.visibleView,"DayView")||$.cf.compareStrings(c.setting.visibleView,"CustomView")?a?$(c.elem).find(".cdvDetailTableMain tbody").addClass(b):$(c.elem).find(".cdvDetailTableMain tbody").removeClass(b):$.cf.compareStrings(c.setting.visibleView,"DayEventDetailView")?a?($(c.elem).find(".cdvDetailTableMain tbody").addClass(b),$(c.elem).find(".cdlvDaysTableMain tbody").addClass(b)):($(c.elem).find(".cdvDetailTableMain tbody").removeClass(b),$(c.elem).find(".cdlvDaysTableMain tbody").removeClass(b)):$.cf.compareStrings(c.setting.visibleView,"DayEventListView")?a?$(c.elem).find(".cdlvDaysTableMain tbody").addClass(b):$(c.elem).find(".cdlvDaysTableMain tbody").removeClass(b):$.cf.compareStrings(c.setting.visibleView,"QuickAgendaView")?a?$(c.elem).find(".cqavTableMain tbody").addClass(b):$(c.elem).find(".cqavTableMain tbody").removeClass(b):$.cf.compareStrings(c.setting.visibleView,"TaskPlannerView")?a?$(c.elem).find(".ctpvTableMain tbody").addClass(b):$(c.elem).find(".ctpvTableMain tbody").removeClass(b):$.cf.compareStrings(c.setting.visibleView,"AppointmentView")?a?$(c.elem).find(".cavTableMain").addClass(b):$(c.elem).find(".cavTableMain").removeClass(b):$.cf.compareStrings(c.setting.visibleView,"AgendaView")?a?$(c.elem).find(".cListOuterCont").addClass(b):$(c.elem).find(".cListOuterCont").removeClass(b):$.cf.compareStrings(c.setting.visibleView,"WeekPlannerView")&&(a?$(c.elem).find(".cwpvTableOuterCont").addClass(b):$(c.elem).find(".cwpvTableOuterCont").removeClass(b))},addRemoveViewLoader:function(a,b){var c=this;if(a){"cViewLoaderBg"===b?$(c.elem).parent().append("<div class='"+b+"'><div class='cViewLoaderBody'></div></div>"):"cEventLoaderBg"===b&&$(c.elem).parent().append("<div class='"+b+"'><div class='cEventLoaderIcon'></div></div>"),$(".cContHeaderMenuDropdownBg").css({background:"rgba(0, 0, 0, 0)"});var d=$(c.elem),e=$.cf.getSizeValue(d,"margin-left"),f=$.cf.getSizeValue(d,"margin-top"),g=d.position().left+e,h=d.position().top+f,i=$.cf.getSizeValue(d,"max-width"),j=$.cf.getSizeValue(d,"min-width"),k=d.width(),l=d.height();if(k=i&&k>i?i:k,k=j&&k<j?j:k,$("."+b).css({left:g,top:h,width:k,height:l}),"cViewLoaderBg"===b){var m=$(c.elem).find(".cContHeader").height(),n=l-m,o=m;$(".cViewLoaderBody").css({height:n,"margin-top":o})}$("."+b).on("click touchstart touchmove",function(a){a.stopPropagation()})}else $("."+b).remove()},__setHoverClass:function(a,b){a.on("touchstart",function(c){a.addClass(b)}),a.on("touchend",function(c){a.removeClass(b)})},_callCommonEvents:function(){var a=this;a._hideDatePicker(),a._collapseSubmenu()},_resetSourceFetch:function(){for(var a=this,b=0;b<a.setting.calDataSource.length;b++){a.setting.calDataSource[b].fetched=!1}},reloadData:function(a){var b=this;b.tv.sLoadType="Load",b.tv.dLoadDt=new Date(b.setting.selectedDate),b.tv.oSURLParams=b.__parseJson(a)||[],b._resetSourceFetch(),b.__reloadCurrentView(!0,!0)},_setDisplayTimeLabelsArray:function(){var a,b=this,c="Array";if($.cf.compareStrings(b.setting.timeLabels,"Hour")||$.cf.compareStrings(b.setting.timeLabels,"All"))c=b.setting.timeLabels;else if($.isArray(b.setting.timeLabels)&&b.setting.timeLabels.length===b.tv.iUTmSlt)for(c="No",a=0;a<b.tv.iUTmSlt;a++)if(!$.cf.compareStrings(typeof b.setting.timeLabels[a],"boolean")){c="Array";break}if(!$.cf.compareStrings(c,"No"))for(b.setting.timeLabels=[],a=0;a<b.tv.iUTmSlt;a++)$.cf.compareStrings(c,"Hour")||$.cf.compareStrings(c,"Array")?0===a?b.setting.timeLabels.push(!0):b.setting.timeLabels.push(!1):$.cf.compareStrings(c,"All")&&b.setting.timeLabels.push(!0)},_getRestrictedSectionForCurrentView:function(a){var b,c=this,d=[];for(b=0;b<c.tv.oAResSec.length;b++){var e=c.tv.oAResSec[b],f=c.compareDates(new Date(e.start),a)<=0,g=c.compareDates(new Date(e.end),a)>=0;f&&g&&d.push(e)}var h=d.length;if(h>1)for(b=0;b<h-1;b++){var i=d[b],j=d[b+1];0===c.compareDateTimes(new Date(i[0]),new Date(j[0]))&&(d[b]=j,d[b+1]=i)}return d},_getBusinessDaysForWeek:function(){var a,b,c=this;for(c.setting.businessHoursSource=c.__parseJson(c.setting.businessHoursSource),c.tv.iBsDays=0,c.tv.bABsDays=[!1,!1,!1,!1,!1,!1,!1],a=0;a<c.setting.businessHoursSource.length;a++){var d=c.setting.businessHoursSource[a],e=d.times;if($.cf.isValid(d.day)&&(c.tv.bABsDays[d.day]=!0),$.cf.isValid(d.days))for(b=0;b<d.days.length;b++)c.tv.bABsDays[d.days[b]]=!0;for(var f=0;f<e.length;f++){var g=e[f];$.cf.isValid(c.tv.oBsHours.start)?c._compareHours(g.startTime,c.tv.oBsHours.start)<0&&(c.tv.oBsHours.start=g.startTime):c.tv.oBsHours.start=g.startTime,$.cf.isValid(c.tv.oBsHours.end)?c._compareHours(g.endTime,c.tv.oBsHours.end)>0&&(c.tv.oBsHours.end=g.endTime):c.tv.oBsHours.end=g.endTime}}c.tv.oBsHours.startTime=c._getHourAndMinuteFromString(c.tv.oBsHours.start),c.tv.oBsHours.endTime=c._getHourAndMinuteFromString(c.tv.oBsHours.end);var h=(60*c.tv.oBsHours.startTime[0]+c.tv.oBsHours.startTime[1])%c.setting.unitTimeInterval,i=(60*c.tv.oBsHours.endTime[0]+c.tv.oBsHours.endTime[1])%c.setting.unitTimeInterval;for(0!==h&&(c.tv.oBsHours.startTime[1]=c.tv.oBsHours.startTime[1]+h,c.tv.oBsHours.start=c.tv.oBsHours.startTime[0]+":"+c.tv.oBsHours.startTime[1]),0!==i&&(c.tv.oBsHours.endTime[1]=c.tv.oBsHours.endTime[1]+i,c.tv.oBsHours.end=c.tv.oBsHours.endTime[0]+":"+c.tv.oBsHours.endTime[1]),a=0;a<c.tv.bABsDays.length;a++)c.tv.bABsDays[a]&&c.tv.iBsDays++},_compareHours:function(a,b){var c=this,d=c._getHourAndMinuteFromString(a),e=c._getHourAndMinuteFromString(b),f=new Date,g=new Date;return f.setHours(parseInt(d[0])),f.setMinutes(parseInt(d[1])),g.setHours(parseInt(e[0])),g.setMinutes(parseInt(e[1])),c.compareDateTimes(f,g)},_getBusinessHoursForCurrentView:function(a){var b,c=this,d=c.getDateInFormat({date:a},"object",!1,!0),e=[];for(b=0;b<c.setting.businessHoursSource.length;b++){var f=c.setting.businessHoursSource[b];if($.cf.isValid(f.day)&&d.D===parseInt(f.day)||$.cf.isValid(f.days)&&-1!==f.days.indexOf(d.D)){for(var g=0;g<f.times.length;g++){var h=f.times[g],i=c._getHourAndMinuteFromString(h.startTime),j=c._getHourAndMinuteFromString(h.endTime),k=c.setDateInFormat({iDate:{d:d.d,M:d.M,y:d.y,H:parseInt(i[0]),m:parseInt(i[1]),s:0}},""),l=c.setDateInFormat({iDate:{d:d.d,M:d.M,y:d.y,H:parseInt(j[0]),m:parseInt(j[1]),s:0}},"");c.compareDateTimes(k,l)<0&&e.push([k,l])}break}}var m=e.length;if(m>1)for(b=0;b<m-1;b++){var n=e[b],o=e[b+1];0!==c.compareDateTimes(n[0],o[0])&&(e[b]=o,e[b+1]=n)}return e},_getHourAndMinuteFromString:function(a){var b=this,c=a.split(" "),d=c[0].split(b.setting.formatSeparatorTime),e=d[0],f=d[1];return c.length>1&&($.cf.compareStrings(c[1],"AM")&&12===e&&(e=0),$.cf.compareStrings(c[1],"PM")&&e<12&&(e+=12)),[e,f]},_checkAllowDroppable:function(){var a=this;a.tv.bChkDroppable=!1,a.setting.isNonBusinessHoursDroppable||a.setting.isNonBusinessHoursDroppable||(a.tv.bChkDroppable=!0);var b,c=a.setting.isDragNDropInMonthView||a.setting.isDragNDropInDetailView||a.setting.isDragNDropInQuickAgendaView||a.setting.isDragNDropInTaskPlannerView;if(!a.tv.bChkDroppable&&a.tv.oAResSec.length>0&&c)for(b=0;b<a.tv.oAResSec.length;b++){var d=a.tv.oAResSec[b];if($.cf.isValid(d.isDroppable)&&d.isDroppable){a.tv.bChkDroppable=!0;break}}},_findWhetherEventEnteredNonDroppableZone:function(a,b,c,d,e){var f=this,g=!1,h=$.cf.isValid(e)?e.split(","):[];if($.cf.isValid(a)&&$.cf.isValid(b)&&d>0){var i,j,k,l,m,n,o,p,q,r=24*f.tv.iUTmSlt;m=Math.round((b.getTime()-a.getTime())/f.tv.iUTmMS),m=0===m?1:m,e=$.cf.isValid(e)?e:"";var s=f._normalizeDateTime(a,"START","T"),t=s.getTime();for(i=0;i<d;i++){if(f.tv.bABsDays[s.getDay()]||!f.setting.excludeNonBusinessHours){for(n=0;n<f.tv.dAVDt.length&&f.tv.dAVDt[n].getDay()!==s.getDay();n++);l=[];for(var u=0;u<24;u++)for(j=0;j<f.tv.iUTmSlt;j++)l.push(0);l.push(0);var v=f._getRestrictedSectionForCurrentView(s),w=f._getBusinessHoursForCurrentView(s),x=!1,y=!1;if(v.length>0){for(g=!1,k=0;k<v.length;k++){var z=v[k],A=new Date(z.start),B=new Date(z.end),C=!!$.cf.isValid(z.isAllDay)&&z.isAllDay,D=$.cf.isValid(z.droppableId)?z.droppableId:"",E=$.cf.isValid(z.isDroppable)?z.isDroppable:f.setting.isRestrictedSectionDroppable,F=$.cf.isValid(z.allowedDroppables)?z.allowedDroppables:[],G=f.compareDateTimes(A,a),H=f.compareDateTimes(B,b),I=f.compareDateTimes(A,b),J=f.compareDateTimes(B,a),K=0===f.compareDates(s,A),L=0===f.compareDates(s,B),M=0;if(K||(A=f._normalizeDateTime(s,"START","T")),L||(B=f._normalizeDateTime(s,"END","T")),M=Math.round((B.getTime()-A.getTime())/f.tv.iUTmMS),M=0===M?1:M>r?r:M,c||m>=r){if(c&&C||0===G&&0===H)return!0}else if(G<=0&&H>=0){if(E||(y=!0),!(G>0&&H>0&&I<0)||G<0&&H<0&&J>0)if(E){var N=!1;if(0===F.length)x=!0;else{for(o=0;o<F.length;o++)if($.cf.compareStrings(F[o],"All")){N=!0,x=!0;break}if(!N)if($.cf.isValid(e))if(1===h.length&&e===D)x=!0;else for(p=0;p<h.length;p++){var O=h[p];if(O!==D){var P=!1;for(q=0;q<F.length;q++)if($.cf.compareStrings(F[q],O)){P=!0,x=!0;break}P||(y=!0)}else x=!0}else y=!0}}else y=!0}else(G>=0&&H>=0&&I<0||G<=0&&H<=0&&J>0)&&(y=!0)}if(x)return!1;if(y)return!0;if($.cf.isValid(e))return!0}if(w.length>0&&!f.setting.isNonBusinessHoursDroppable){for(g=!0,k=0;k<w.length;k++){var Q=w[k],R=new Date(Q[0]),S=new Date(Q[1]),T=f.compareDateTimes(R,a),U=f.compareDateTimes(S,b);if(c){if(!f.tv.bABsDays[s.getDay()])return!0;g=!1}g=!(T<=0&&U>=0)&&g}if(g)return!0}else if(!f.setting.isNonBusinessHoursDroppable)return!0}t+=$.CalenStyle.extra.iMS.d,s=new Date(t)}}return g},modifySettings:function(a){var b=this,c=b.tv.pluginId;b.setting=$.extend({},$.CalenStyle.defaults,a),b.tv=$.extend({},$.CalenStyle.tempDefaults),b.tv.pluginId=c,b.tv.iUTmMS=b.setting.unitTimeInterval*$.CalenStyle.extra.iMS.m,b.tv.iUTmSlt=60/b.setting.unitTimeInterval},loadView:function(){var a=this;if($(a.elem).hasClass("cElemDatePicker")||$(a.elem).addClass("elem-CalenStyle"),$(a.elem).html("<div class='calendarCont'></div>"),a.setting.viewsToDisplay.length>1)for(var b=0;b<a.setting.viewsToDisplay.length;b++){var c=a.setting.viewsToDisplay[b],d=c.viewName||"";$.cf.compareStrings(d,a.setting.visibleView)&&(a.tv.bDisMenu=!0)}a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.bViewLoaded=!1,a._getBusinessDaysForWeek(),a._checkAllowDroppable(),a._setDisplayTimeLabelsArray(),a._resetSourceFetch();var e=navigator.userAgent,f="br-other";/(ipod|iphone|ipad)/i.test(e)?f="br-ios":/opera|opr/i.test(e)?f="br-opera":/msie|trident/i.test(e)?f="br-ie":/chrome.+? edge/i.test(e)?f="br-ie":/chrome|crios|crmo/i.test(e)?f="br-chrome":/firefox|iceweasel/i.test(e)?f="br-firefox":/safari/i.test(e)&&(f="br-safari"),$("body").addClass(f);var g;if($.CalenStyle.extra.bTouchDevice)g=2,$(".calendarCont").addClass("calendarContMobile");else{if("WebkitAppearance"in document.documentElement.style)g=5;else{var h=document.createElement("div");h.innerHTML="<div style='width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;'><div style='width:1px;height:100px;'></div></div>",h=h.firstChild,document.body.appendChild(h);var i=h.offsetWidth-h.clientWidth;document.body.removeChild(h),g=i}$(".calendarCont").addClass("calendarContWeb")}$.CalenStyle.extra.iScrollbarWidth=g,a.setCurrentView(a.setting.visibleView,!0)},setCurrentView:function(a,b){var c=this;c.setting.visibleView=a;var d=$(c.elem).find(".calendarCont");d.removeClass("cmvCalendarCont cdvCalendarCont cdlvCalendarCont cagvCalendarCont cagvTimeline1 cagvTimeline2 cagvTimeline3 cavCalendarCont cqavCalendarCont"),$(c.elem).find(".calendarCont").html(""),d.css({width:"100%",height:"100%"}),d.removeClass("cmvCalendarContWithBorders"),$.cf.compareStrings(c.setting.visibleView,"MonthView")||$.cf.compareStrings(c.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(c.setting.visibleView,"DatePicker")?(d.addClass("cmvCalendarCont"),$.cf.compareStrings(c.setting.visibleView,"DatePicker")||d.addClass("cmvCalendarContWithBorders")):$.cf.compareStrings(c.setting.visibleView,"DayEventListView")?(d.addClass("cdlvCalendarCont"),c.tv.iNoVDay=c.setting.daysInDayListView,7===c.tv.iNoVDay&&c.setting.excludeNonBusinessHours&&(c.tv.iNoVDay-=c.tv.iNoVDay-c.tv.iBsDays),c.tv.iSelDay=Math.floor(c.tv.iNoVDay/2),c.tv.iNoVDayDis=1):$.cf.compareStrings(c.setting.visibleView,"AppointmentView")?(d.addClass("cavCalendarCont"),c.tv.iNoVDay=c.setting.daysInAppointmentView,7===c.tv.iNoVDay&&c.setting.excludeNonBusinessHours&&(c.tv.iNoVDay-=c.tv.iNoVDay-c.tv.iBsDays),c.tv.iNoVDayDis=c.tv.iNoVDay):$.cf.compareStrings(c.setting.visibleView,"AgendaView")?(d.addClass("cagvCalendarCont"),$.cf.isValid(c.setting.displayEventsForPeriodInListInAgendaView)||($.cf.compareStrings(c.setting.agendaViewTheme,"Timeline1")?d.addClass("cagvTimeline1"):$.cf.compareStrings(c.setting.agendaViewTheme,"Timeline2")?d.addClass("cagvTimeline2"):$.cf.compareStrings(c.setting.agendaViewTheme,"Timeline3")&&d.addClass("cagvTimeline3")),$.cf.compareStrings(c.setting.agendaViewDuration,"Month")||($.cf.compareStrings(c.setting.agendaViewDuration,"Week")?c.tv.iNoVDay=7:$.cf.compareStrings(c.setting.agendaViewDuration,"CustomDays")&&(c.tv.iNoVDay=c.setting.daysInAgendaView),7===c.tv.iNoVDay&&c.setting.excludeNonBusinessHours&&(c.tv.iNoVDay-=c.tv.iNoVDay-c.tv.iBsDays),c.tv.iNoVDayDis=c.tv.iNoVDay)):$.cf.compareStrings(c.setting.visibleView,"WeekPlannerView")?(d.addClass("cwpvCalendarCont"),c.tv.iNoVDay=7,c.tv.iNoVDayDis=c.tv.iNoVDay):$.cf.compareStrings(c.setting.visibleView,"QuickAgendaView")?(d.addClass("cqavCalendarCont"),$.cf.compareStrings(c.setting.quickAgendaViewDuration,"Week")?c.tv.iNoVDay=7:$.cf.compareStrings(c.setting.quickAgendaViewDuration,"CustomDays")&&(c.tv.iNoVDay=c.setting.daysInQuickAgendaView),7===c.tv.iNoVDay&&c.setting.excludeNonBusinessHours&&(c.tv.iNoVDay-=c.tv.iNoVDay-c.tv.iBsDays),c.tv.iNoVDayDis=c.tv.iNoVDay):$.cf.compareStrings(c.setting.visibleView,"TaskPlannerView")?(d.addClass("ctpvCalendarCont"),$.cf.compareStrings(c.setting.taskPlannerViewDuration,"Week")?c.tv.iNoVDay=7:$.cf.compareStrings(c.setting.taskPlannerViewDuration,"CustomDays")&&(c.tv.iNoVDay=c.setting.daysInTaskPlannerView),7===c.tv.iNoVDay&&c.setting.excludeNonBusinessHours&&(c.tv.iNoVDay-=c.tv.iNoVDay-c.tv.iBsDays),c.tv.iNoVDayDis=c.tv.iNoVDay):(d.addClass("cdvCalendarCont"),$.cf.compareStrings(c.setting.visibleView,"WeekView")?(c.tv.iNoVDay=7,7===c.tv.iNoVDay&&c.setting.excludeNonBusinessHours&&(c.tv.iNoVDay-=c.tv.iNoVDay-c.tv.iBsDays),c.tv.iNoVDayDis=c.tv.iNoVDay):$.cf.compareStrings(c.setting.visibleView,"DayView")?(c.tv.iNoVDay=1,c.tv.iNoVDayDis=1):$.cf.compareStrings(c.setting.visibleView,"CustomView")?(c.tv.iNoVDay=c.setting.daysInCustomView,7===c.tv.iNoVDay&&c.setting.excludeNonBusinessHours&&(c.tv.iNoVDay-=c.tv.iNoVDay-c.tv.iBsDays),c.tv.iNoVDayDis=c.tv.iNoVDay):$.cf.compareStrings(c.setting.visibleView,"DayEventDetailView")&&(c.tv.iNoVDay=c.setting.daysInDayListView,7===c.tv.iNoVDay&&c.setting.excludeNonBusinessHours&&(c.tv.iNoVDay-=c.tv.iNoVDay-c.tv.iBsDays),c.tv.iNoVDayDis=1)),c.__getCurrentViewDates(),c._addCommonView(b)},_addContHeader:function(){var a,b,c=this,d="";for(d+="<div class='cContHeaderSections cContHeaderSectionLeft'>",b=c.setting.headerSectionsList.left||[],a=0;a<b.length;a++)d+=c._addHeaderSections(b[a]);for(d+="</div>",d+="<div class='cContHeaderSections cContHeaderSectionRight'>",b=c.setting.headerSectionsList.right||[],a=0;a<b.length;a++)d+=c._addHeaderSections(b[a]);for(d+="</div>",d+="<div class='cContHeaderSections cContHeaderSectionCenter'>",b=c.setting.headerSectionsList.center||[],a=0;a<b.length;a++)d+=c._addHeaderSections(b[a]);return d+="</div>"},_addHeaderSections:function(a){var b=this,c="",d=b._isFullScreen();return $.cf.compareStrings(a,"DatePickerIcon")?c+=b.setting.headerComponents.DatePickerIcon:$.cf.compareStrings(a,"FullscreenButton")?c+=b.setting.headerComponents.FullscreenButton(d):$.cf.compareStrings(a,"PreviousButton")?c+=b.setting.headerComponents.PreviousButton:$.cf.compareStrings(a,"NextButton")?c+=b.setting.headerComponents.NextButton:$.cf.compareStrings(a,"TodayButton")?c+=b.setting.headerComponents.TodayButton:$.cf.compareStrings(a,"HeaderLabel")?c+=b.setting.headerComponents.HeaderLabel:$.cf.compareStrings(a,"HeaderLabelWithDropdownMenuArrow")?c+=b.setting.headerComponents.HeaderLabelWithDropdownMenuArrow:$.cf.compareStrings(a,"MenuSegmentedTab")&&b.tv.bDisMenu?c+=b.setting.headerComponents.MenuSegmentedTab:$.cf.compareStrings(a,"MenuDropdownIcon")&&b.tv.bDisMenu&&(c+=b.setting.headerComponents.MenuDropdownIcon),c},_updateViewSelectionMenu:function(){var a,b=this,c="";for(c+="<ul class='cContHeaderMenuSections'>",b.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(b.setting.dropdownMenuElements[0],"DatePicker")&&(c+="<li id='cContHeaderMenuDatePicker' name='DatePicker' class='cContHeaderButton clickableLink'>Date Picker</li>"),a=0;a<b.setting.viewsToDisplay.length;a++){var d=b.setting.viewsToDisplay[a],e=d.viewName||"",f=d.viewDisplayName||"";$.cf.compareStrings(f,"")&&($.cf.compareStrings(e,"DetailedMonthView")||$.cf.compareStrings(e,"MonthView")||$.cf.compareStrings(e,"DatePicker")?f="Month":$.cf.compareStrings(e,"WeekView")?f="Week":$.cf.compareStrings(e,"DayView")||$.cf.compareStrings(e,"DayEventListView")||$.cf.compareStrings(e,"DayEventDetailView")?f="Day":$.cf.compareStrings(e,"CustomView")?f=b.setting.daysInCustomView+" Days":$.cf.compareStrings(e,"QuickAgendaView")?f="Quick Agenda":$.cf.compareStrings(e,"TaskPlannerView")?f="Task Planner":$.cf.compareStrings(e,"AppointmentView")?f="Appointment":$.cf.compareStrings(e,"AgendaView")?f="Agenda":$.cf.compareStrings(e,"WeekPlannerView")&&(f="Week Planner")),c+="<li id='cContHeaderMenu"+e+"' name='"+e+"' class='cContHeaderButton clickableLink'>"+f+"</li>"}return b.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(b.setting.dropdownMenuElements[1],"DatePicker")&&(c+="<li id='cContHeaderMenuDatePicker' name='DatePicker' class='cContHeaderButton clickableLink'>Date Picker</li>"),c+="</ul>"},_refreshHeader:function(){var a=this;$(a.elem).find(".cContHeader").length>0&&$(a.elem).find(".cContHeader").html(a._addContHeader()),a._addMenuItemsInSegmentedTab(),a._addEventsToHeaderElements(),a._adjustViewSelectionMenu()},_addEventsToHeaderElements:function(){var a=this;if($(a.elem).find(".cContHeaderMenuDropdown .cContHeaderMenuSections li").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation()}),$(a.elem).find(".cContHeaderPrevButton").on($.CalenStyle.extra.sClickHandlerButtons,function(b){b.stopPropagation(),a.navigateToPrevView()}),$(a.elem).find(".cContHeaderNextButton").on($.CalenStyle.extra.sClickHandlerButtons,function(b){b.stopPropagation(),a.navigateToNextView()}),$(a.elem).find(".cContHeaderToday").html(a.getNumberStringInFormat($.CalenStyle.extra.dToday.getDate(),0,!0)),$(a.elem).find(".cContHeaderToday").on($.CalenStyle.extra.sClickHandlerButtons,function(b){b.stopPropagation(),a.navigateToToday()}),a._addEventsForMenu(),$(a.elem).find(".cContHeaderMenuButton").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation(),$(a.elem).find(".cContHeaderMenuDropdown").length>0?a._collapseSubmenu():a._expandSubmenu()}),$(a.elem).find(".cContHeaderDatePickerIcon").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation(),a._showOrHideDatePicker()}),$(a.elem).find(".cContHeaderDropdownMenuArrow").length>0){1===a.setting.dropdownMenuElements.length&&$.cf.compareStrings(a.setting.dropdownMenuElements[0],"DatePicker")&&$(a.elem).find(".cContHeaderLabelOuter").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation(),a._showOrHideDatePicker()});for(var b=!1,c=0;c<a.setting.dropdownMenuElements.length;c++)if($.cf.compareStrings(a.setting.dropdownMenuElements[c],"ViewsToDisplay")){b=!0;break}b&&$(a.elem).find(".cContHeaderLabelOuter").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation(),$(a.elem).find(".cContHeaderMenuDropdown").length>0?a._collapseSubmenu():a._expandSubmenu()})}if($(a.elem).find(".cContHeaderFullscreen").on($.CalenStyle.extra.sClickHandlerButtons,function(b){b.stopPropagation(),a._toggleFullscreen()}),a.setting.addEventHandlersInHeader&&a.setting.addEventHandlersInHeader.call(a),a.setting.useHammerjsAsGestureLibrary){var d=new Hammer(a.elem,{threshold:0,velocity:0});d.on("swiperight",function(b){a.navigateToPrevView()}),d.on("swipeleft",function(b){a.navigateToNextView()})}},_addMenuItemsInSegmentedTab:function(){var a=this;$(a.elem).find(".cContHeaderMenuSegmentedTab").html(a._updateViewSelectionMenu())},_expandSubmenu:function(){var a=this,b="";if(b+="<div class='cContHeaderMenuDropdownBg'>",b+="<div class='cContHeaderMenuDropdown'>",b+=a._updateViewSelectionMenu(),b+="</div>",b+="</div>",$(a.elem).find(".calendarContInner").append(b),$(a.elem).find(".cContHeaderMenuDropdownBg").length>0){var c,d,e,f,g=$(a.elem);c=0,d=0,e=g.width(),f=g.height(),$(a.elem).find(".cContHeaderMenuDropdownBg").css({left:c,top:d,width:e,height:f});var h,i,j,k,l=$(a.elem).find(".cContHeaderMenuButton"),m=$(a.elem).find(".cContHeaderDropdownMenuArrow"),n=c+e;if(j=$(a.elem).find(".cContHeaderMenuDropdown").width(),l.length>0)h=l.position().left-5+$(a.elem).find(".calendarContInner").position().left,k=c+h+j,k>n&&(h=e-j-5),i=l.height()+5+$(a.elem).find(".calendarContInner").position().top+($.cf.compareStrings(a.setting.sectionsList[0],"ActionBar")?$(a.elem).find(".cActionBar").height():0),$(".cContHeaderMenuDropdown").css({left:h,top:i});else if(m.length>0){var o=$(a.elem).find(".cContHeaderLabelOuter"),p=o.width(),q=o.position().left,r=q+p/2,s=j/2;h=r-s,h<0&&(h=5),k=h+j,k>n&&(h=e-j-5),i=$(a.elem).find(".cContHeaderLabelOuter").height()+$(a.elem).find(".calendarContInner").position().top+($.cf.compareStrings(a.setting.sectionsList[0],"ActionBar")?$(a.elem).find(".cActionBar").height():0),$(".cContHeaderMenuDropdown").css({left:h,top:i})}}a._addEventsForMenu()},_collapseSubmenu:function(){var a=this,b=$(a.elem).find(".cContHeaderMenuDropdownBg");b.length>0&&(b.hide(10),setTimeout(function(){b.remove()},10)),a.addRemoveViewLoader(!1,"cViewLoaderBg")},_addEventsForMenu:function(){var a=this;$(a.elem).find(".cContHeaderMenuSegmentedTab .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(a.elem).find(".cContHeaderMenuSegmentedTab #cContHeaderMenu"+a.setting.visibleView).addClass("cSelectedMenu"),$(a.elem).find(".cContHeaderMenuDropdownBg .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(a.elem).find(".cContHeaderMenuDropdownBg #cContHeaderMenu"+a.setting.visibleView).addClass("cSelectedMenu"),$(a.elem).find(".cContHeaderMenuSections li").on($.CalenStyle.extra.sClickHandlerButtons,function(b){b.stopPropagation();var c=$(this).attr("name");$(a.elem).find(".cContHeaderMenuSegmentedTab .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(a.elem).find(".cContHeaderMenuSegmentedTab #cContHeaderMenu"+c).addClass("cSelectedMenu"),$(a.elem).find(".cContHeaderMenuDropdownBg .cContHeaderMenuSections li").removeClass("cSelectedMenu"),$(a.elem).find(".cContHeaderMenuDropdownBg #cContHeaderMenu"+c).addClass("cSelectedMenu"),$.cf.compareStrings(c,"DatePicker")?(a._collapseSubmenu(),setTimeout(function(){a._showOrHideDatePicker()},100)):$.cf.compareStrings(c,a.setting.visibleView)||(a.addRemoveViewLoader(!0,"cViewLoaderBg"),setTimeout(function(){a.setCurrentView(c,!1),a.setting.visibleViewChanged&&a.setting.visibleViewChanged.call(a,a.setting.visibleView,a.setting.selectedDate,a.tv.dAVDt),a._reloadDatePickerContent(),a._collapseSubmenu()},2))}),$(a.elem).find(".cContHeaderMenuDropdownBg").on($.CalenStyle.extra.sClickHandler,function(b){a._collapseSubmenu()}),$.cf.compareStrings(a.setting.visibleView,"DatePicker")||(null===a.setting.datePickerObject?a._addDatePicker():a.setting.datePickerObject.refreshView())},navigateToToday:function(){var a=this;a.setting.selectedDate=a.setDateInFormat({date:a._getCurrentDate()},"START"),a.reloadData(),a.setting.todayButtonClicked&&a.setting.todayButtonClicked.call(a,a.setting.selectedDate,a.tv.dAVDt),a.__reloadDatePickerContentOnNavigation()},navigateToPrevView:function(){var a=this;$(a.elem).find(".cListOuterCont").html(""),$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker")?a.__goToPrevMonthView():$.cf.compareStrings(a.setting.visibleView,"WeekView")||$.cf.compareStrings(a.setting.visibleView,"DayView")||$.cf.compareStrings(a.setting.visibleView,"CustomView")||$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")?a.__goToPrevDetailView():$.cf.compareStrings(a.setting.visibleView,"DayEventListView")?a.__goToPrevDayListView():$.cf.compareStrings(a.setting.visibleView,"QuickAgendaView")?a.__goToPrevQuickAgendaView():$.cf.compareStrings(a.setting.visibleView,"TaskPlannerView")?a.__goToPrevTaskPlannerView():$.cf.compareStrings(a.setting.visibleView,"AppointmentView")?a.__goToPrevAppointmentView():$.cf.compareStrings(a.setting.visibleView,"AgendaView")?a.__goToPrevAgendaView():$.cf.compareStrings(a.setting.visibleView,"WeekPlannerView")&&a.__goToPrevWeekPlannerView(),a.setting.previousButtonClicked&&a.setting.previousButtonClicked.call(a,a.setting.selectedDate,a.tv.dAVDt)},navigateToNextView:function(){var a=this;$(a.elem).find(".cListOuterCont").html(""),$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker")?a.__goToNextMonthView():$.cf.compareStrings(a.setting.visibleView,"WeekView")||$.cf.compareStrings(a.setting.visibleView,"DayView")||$.cf.compareStrings(a.setting.visibleView,"CustomView")||$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")?a.__goToNextDetailView():$.cf.compareStrings(a.setting.visibleView,"DayEventListView")?a.__goToNextDayListView():$.cf.compareStrings(a.setting.visibleView,"QuickAgendaView")?a.__goToNextQuickAgendaView():$.cf.compareStrings(a.setting.visibleView,"TaskPlannerView")?a.__goToNextTaskPlannerView():$.cf.compareStrings(a.setting.visibleView,"AppointmentView")?a.__goToNextAppointmentView():$.cf.compareStrings(a.setting.visibleView,"AgendaView")?a.__goToNextAgendaView():$.cf.compareStrings(a.setting.visibleView,"WeekPlannerView")&&a.__goToNextWeekPlannerView(),a.setting.nextButtonClicked&&a.setting.nextButtonClicked.call(a,a.setting.selectedDate,a.tv.dAVDt)},getVisibleDates:function(){return this.tv.dAVDt},_adjustViewSelectionMenu:function(){var a,b,c=this;if($(c.elem).find(".cContHeaderMenuSegmentedTab").length>0){var d=$(c.elem).find(".cContHeaderMenuSections li"),e=0;for(a=0;a<d.length;a++){b=d[a];var f=$(b).width();e=f>e?f:e}for(e+=25,a=0;a<d.length;a++)b=d[a],$(b).css({width:e})}c._adjustDatePicker()},_addDatePicker:function(){var a=this,b=$(a.elem).find(".cContHeaderDatePickerIcon").length>0,c=$(a.elem).find(".cContHeaderDropdownMenuArrow").length>0,d=$(a.elem).find(".cContHeaderMenuButton").length>0,e=a.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(a.setting.dropdownMenuElements[0],"DatePicker")||a.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(a.setting.dropdownMenuElements[1],"DatePicker");if((b||(c||d)&&e)&&a.setting.addEventsInMonthView&&!$.cf.compareStrings(a.setting.visibleView,"DatePicker")&&!$.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"ChangeDate")&&0===$(".cElemDatePickerBg").length){var f="";f+="<div class='cElemDatePickerBg'>",f+="<div class='cElemDatePickerCont'>",b&&(f+="<span class='cElemDatePickerTooltip cElemDatePickerTooltipBottom'></span>"),f+="<div class='cElemDatePicker'>",f+="</div>",f+="</div>",f+="</div>",$(a.elem).parent().append(f),$(".cElemDatePicker").CalenStyle({visibleView:"DatePicker",headerSectionsList:{left:["TodayButton"],center:["HeaderLabel"],right:["PreviousButton","NextButton"]},transitionSpeed:0,selectedDate:a.setting.selectedDate,shortDayNames:a.setting.veryShortDayNames,shortMonthNames:a.setting.shortMonthNames,fullMonthNames:a.setting.shortMonthNames,numbers:a.setting.numbers,businessHoursSource:a.setting.businessHoursSource,inputTZOffset:a.setting.inputTZOffset,outputTZOffset:a.setting.outputTZOffset,parentObject:a,eventIndicatorInDatePicker:a.setting.eventIndicatorInDatePicker,initialize:function(){a.setting.datePickerObject=this},viewLoaded:function(b,c){a.setting.datePickerObject.highlightDatesInDatePicker(a.tv.dAVDt)},cellClicked:function(b,c,d,e){a._showOrHideDatePicker(),a.addRemoveViewLoader(!0,"cViewLoaderBg"),setTimeout(function(){a.setting.selectedDate=c,a.reloadData(),a.setting.datePickerObject.highlightDatesInDatePicker(a.tv.dAVDt),a.addRemoveViewLoader(!1,"cViewLoaderBg")},4)},calDataSource:a.setting.datePickerCalDataSource,useHammerjsAsGestureLibrary:a.setting.useHammerjsAsGestureLibrary}),$(".cElemDatePickerBg").on($.CalenStyle.extra.sClickHandler,function(b){b.preventDefault(),a._hideDatePicker()}),$(".cElemDatePicker, .cElemDatePicker *").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation()}),$(".cElemDatePickerBg *").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation()})}},_showOrHideDatePicker:function(){var a=this;"none"===$(".cElemDatePickerBg").css("display")?($(".cElemDatePickerBg").show(0),a.setting.adjustViewOnWindowResize&&$(window).bind("resize.CSDP."+a.tv.pluginId,function(b){a._adjustDatePicker()}),a._reloadDatePickerContent(),a._adjustDatePicker()):a._hideDatePicker()},_hideDatePicker:function(){var a=this;"none"!==$(".cElemDatePickerBg").css("display")&&$(".cElemDatePickerBg").css({display:"none"}),a.setting.adjustViewOnWindowResize&&$(window).unbind("resize.CSDP."+a.tv.pluginId)},_reloadDatePickerContent:function(){var a=this,b=$(a.elem).find(".cContHeaderDatePickerIcon").length>0,c=$(a.elem).find(".cContHeaderDropdownMenuArrow").length>0,d=$(a.elem).find(".cContHeaderMenuButton").length>0,e=a.setting.dropdownMenuElements.length>0&&$.cf.compareStrings(a.setting.dropdownMenuElements[0],"DatePicker")||a.setting.dropdownMenuElements.length>1&&$.cf.compareStrings(a.setting.dropdownMenuElements[1],"DatePicker");(b||(c||d)&&e)&&null!==a.setting.datePickerObject&&(a.setting.datePickerObject.setting.selectedDate=a.setting.selectedDate,a.setting.datePickerObject.reloadData(),a.setting.datePickerObject.highlightDatesInDatePicker(a.tv.dAVDt)),a._adjustDatePicker()},__reloadDatePickerContentOnNavigation:function(){var a=this;a._reloadDatePickerContent(),$.cf.compareStrings(a.setting.visibleView,"DatePicker")?a.__highlightDaysInDatePicker():$.cf.compareStrings(a.setting.visibleView,"MonthView")&&$.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"ChangeDate")&&a.__highlightDaysInDatePicker()},_adjustDatePicker:function(){var a,b,c,d,e=this;if(!$.cf.compareStrings(e.setting.visibleView,"DatePicker")){var f=$(e.elem),g=f.css("margin-left");g=parseInt(g.replace("px",""));var h=f.css("margin-top");h=parseInt(h.replace("px","")),a=f.position().left+g,b=f.position().top+h,c=f.width(),d=f.height(),$(".cElemDatePickerBg").css({left:a,top:b,width:c,height:d})}var i,j,k,l,m=$(e.elem).find(".cContHeaderDatePickerIcon"),n=$(e.elem).find(".cContHeaderDropdownMenuArrow"),o=$(e.elem).find(".cContHeaderMenuButton"),p=a+c;if(k=$(".cElemDatePickerCont").width(),m.length>0)i=m.position().left-5+$(e.elem).find(".calendarContInner").position().left,l=a+i+k,l>p&&(i=c-k-5),j=m.height()+5+$(e.elem).find(".calendarContInner").position().top+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),$(".cElemDatePickerCont").css({left:i,top:j});else if(n.length>0||o.length>0){var q=$(e.elem).find(".cContHeaderLabelOuter"),r=q.width(),s=q.position().left,t=s+r/2,u=k/2;!$.CalenStyle.extra.bTouchDevice&&c>480?(i=t-u,i<0&&(i=5),(l=i+k)>p&&(i=c-k-5)):i=(c-k)/2,j=$(e.elem).find(".cContHeaderLabelOuter").height()+10+$(e.elem).find(".calendarContInner").position().top+($.cf.compareStrings(e.setting.sectionsList[0],"ActionBar")?$(e.elem).find(".cActionBar").height():0),$(".cElemDatePickerCont").css({left:i,top:j})}},_isFullScreen:function(){var a=this;return $(a.elem).hasClass("cFullscreenCont")},_toggleFullscreen:function(){var a=this;a._isFullScreen()?($(a.elem).removeClass("cFullscreenCont"),0!==a.tv.iCalHeight&&$(a.elem).css({height:a.tv.iCalHeight})):$(a.elem).addClass("cFullscreenCont"),a._adjustViews(!0)},__adjustHeader:function(){var a=this;a._isFullScreen()?$(a.elem).find(".cContHeaderFullscreen").removeClass("cs-icon-Expand").addClass("cs-icon-Contract"):$(a.elem).find(".cContHeaderFullscreen").removeClass("cs-icon-Contract").addClass("cs-icon-Expand");var b=$(a.elem).find(".calendarContInner");b.outerWidth(),b.outerHeight();$(a.elem).find(".cContHeader, .cContHeaderDatePickerIcon, .cContHeaderFullscreen, .cContHeaderNavButton").css({height:45,"line-height":"45px"})},_addCommonView:function(a){var b,c,d=this,e=!0,f=0,g=$(d.elem).find(".calendarCont"),h=0,i=0,j=0,k=0,l="";for(b=0;b<d.setting.sectionsList.length;b++)if(c=d.setting.sectionsList[b],$.cf.compareStrings(c,"FilterBar")){d.tv.bDisFBar=!0;break}if(d.tv.bDisFBar){var m,n,o,p,q=g.outerWidth(),r=g.outerHeight();$.cf.compareStrings(d.setting.filterBarPosition,"Top")||$.cf.compareStrings(d.setting.filterBarPosition,"Bottom")?(o=q,p=d.setting.filterBarHeight,j=q,k=r-p,m=0,h=0,$.cf.compareStrings(d.setting.filterBarPosition,"Top")?(n=0,i=d.setting.filterBarHeight-$.CalenStyle.extra.iBorderOverhead):$.cf.compareStrings(d.setting.filterBarPosition,"Bottom")&&(i=0,n=k),o="100%",p+="px"):($.cf.compareStrings(d.setting.filterBarPosition,"Left")||$.cf.compareStrings(d.setting.filterBarPosition,"Right"))&&(o=d.setting.filterBarWidth,p=r,j=q-o,k=r,n=0,i=0,$.cf.compareStrings(d.setting.filterBarPosition,"Left")?(m=0,h=d.setting.filterBarWidth):$.cf.compareStrings(d.setting.filterBarPosition,"Right")&&(h=0,m=j),o+="px",p="100%"),l+="<div class='cFilterBar' style='left: "+m+"px; top: "+n+"px; width: "+o+"; height: "+p+";'></div>"}for(l+="<div class='calendarContInner' style='left: "+h+"px; top: "+i+"px; width: "+j+"px; height: "+k+"px;'></div>",g.append(l),b=0;b<d.setting.sectionsList.length;b++)c=d.setting.sectionsList[b],$.cf.compareStrings(c,"ActionBar")?d.tv.bDisABar=!0:$.cf.compareStrings(c,"EventList")&&($.cf.compareStrings(d.setting.visibleView,"MonthView")||$.cf.compareStrings(d.setting.visibleView,"DayEventListView"))&&(d.tv.bCMVDisEvLst=!0);for(l="",b=0;b<d.setting.sectionsList.length;b++)c=d.setting.sectionsList[b],$.cf.compareStrings(c,"Header")?(e?e=!1:f-=1,l+="<div class='cContHeader' style='top: "+f+"px;'>",l+=d._addContHeader(f),l+="</div>"):$.cf.compareStrings(c,"Calendar")?(e?e=!1:f-=1,$.cf.compareStrings(d.setting.visibleView,"MonthView")||$.cf.compareStrings(d.setting.visibleView,"DatePicker")?(d.tv.bDisABar?f-=1:f-=2,l+="<table class='cTable cmvMonthTable cmvMonthTableMain' cellspacing='0' style='top: "+f+"px;'></table>"):$.cf.compareStrings(d.setting.visibleView,"DetailedMonthView")?(l+="<div class='cmvTableContainerOuter'>",l+="<div class='cmvTableContainer' style='overflow: hidden;'>",l+="<table class='cTable cmvMonthTable cmvMonthTableMain' cellspacing='0'></table>",$.cf.compareStrings(d.setting.visibleView,"DetailedMonthView")&&(l+="<div class='cdmvEventCont cdmvEventContMain'></div>"),l+="</div>",l+="</div>"):$.cf.compareStrings(d.setting.visibleView,"WeekView")||$.cf.compareStrings(d.setting.visibleView,"DayView")||$.cf.compareStrings(d.setting.visibleView,"CustomView")||$.cf.compareStrings(d.setting.visibleView,"DayEventDetailView")?(2===d.setting.sectionsList.length?f-=3:f-=2,l+="<table class='cTable cdvDetailTable cdvDetailTableMain' cellspacing='0' style='top: "+f+"px;'></table>",l+="<div class='cdvContRow2 cdvContRow2Main'></div>",l+="<div class='cdvContRow3 cdvContRow3Main'></div>",f-=1):$.cf.compareStrings(d.setting.visibleView,"QuickAgendaView")?(2===d.setting.sectionsList.length?f-=3:f-=2,l+="<table class='cTable cqavTable cqavTableMain' cellspacing='0' style='top: "+f+"px;'></table>",l+="<div class='cqavContRow2 cqavContRow2Main'></div>",f-=1):$.cf.compareStrings(d.setting.visibleView,"TaskPlannerView")?(2===d.setting.sectionsList.length?f-=3:f-=2,l+="<table class='cTable ctpvTable ctpvTableMain' cellspacing='0' style='top: "+f+"px;'></table>",f-=1):$.cf.compareStrings(d.setting.visibleView,"DayEventListView")?(f-=2,l+="<table class='cTable cdlvDaysTable cdlvDaysTableList cdlvDaysTableMain' cellspacing='0' style='top: "+f+"px;'></table>"):$.cf.compareStrings(d.setting.visibleView,"AppointmentView")?(f-=2,l+="<table class='cTable cavTable cavTableMain' cellspacing='0' style='top: "+f+"px;'></table>",l+="<div class='cavContRow2 cavContRow2Main'></div>"):$.cf.compareStrings(d.setting.visibleView,"WeekPlannerView")&&(f-=2,$.CalenStyle.extra.bTouchDevice?l+="<table class='cTable cwpvTable cwpvTableMain' cellspacing='0' style='top: "+f+"px;'></table>":l+="<div class='cwpvTableOuterCont' style='top: "+f+"px;'><table class='cTable cwpvTable cwpvTableMain' cellspacing='0'></table></div>")):$.cf.compareStrings(c,"ActionBar")?(e?e=!1:$.cf.compareStrings(d.setting.visibleView,"MonthView")||(f-=1),l+="<div class='cActionBar' style='height: "+d.setting.actionBarHeight+"px; top: "+f+"px;'></div>"):$.cf.compareStrings(c,"EventList")&&($.cf.compareStrings(d.setting.visibleView,"MonthView")||$.cf.compareStrings(d.setting.visibleView,"DayEventListView"))&&(e?e=!1:f-=1,$.cf.compareStrings(d.setting.visibleView,"DayEventListView")&&(f-=1),l+="<div class='cListOuterCont'></div>");($.cf.compareStrings(d.setting.visibleView,"DayEventListView")&&!d.tv.bCMVDisEvLst||$.cf.compareStrings(d.setting.visibleView,"AgendaView"))&&(e||(f-=2),d.tv.bCMVDisEvLst=!0,l+="<div class='cListOuterCont' style='top: "+f+"px;'></div>"),$(d.elem).find(".calendarContInner").append(l),d._addMenuItemsInSegmentedTab(),d._addEventsToHeaderElements(),d._adjustViewSelectionMenu(),a?d.reloadData():d.__reloadCurrentView(!0,!1),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyle",function(a){d._callCommonEvents()})},refreshView:function(){var a=this;a.tv.oAEvents=a._sortEvents(a.tv.oAEvents),a._refreshHeader(),a.__reloadCurrentView(!0,!1)},_adjustViews:function(a){var b=this;$.cf.compareStrings(b.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(b.setting.visibleView,"MonthView")||$.cf.compareStrings(b.setting.visibleView,"DatePicker")?b.adjustMonthTable():$.cf.compareStrings(b.setting.visibleView,"WeekView")||$.cf.compareStrings(b.setting.visibleView,"DayView")||$.cf.compareStrings(b.setting.visibleView,"CustomView")?b.__adjustDetailViewTable():$.cf.compareStrings(b.setting.visibleView,"DayEventDetailView")?b.__adjustDetailViewTable():$.cf.compareStrings(b.setting.visibleView,"DayEventListView")?b.__adjustDayListView():$.cf.compareStrings(b.setting.visibleView,"QuickAgendaView")?b.__adjustQuickAgendaView(a):$.cf.compareStrings(b.setting.visibleView,"TaskPlannerView")?b.__adjustTaskPlannerView(a):$.cf.compareStrings(b.setting.visibleView,"AppointmentView")?b.__adjustAppointmentTable():$.cf.compareStrings(b.setting.visibleView,"AgendaView")?b.adjustAgendaView():$.cf.compareStrings(b.setting.visibleView,"WeekPlannerView")&&b.adjustWeekPlannerView()},__reloadCurrentView:function(a,b){var c=this;c.setting.adjustViewOnWindowResize&&$(window).unbind("resize."+c.tv.pluginId),c.__getCurrentViewDates(),$.cf.compareStrings(c.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(c.setting.visibleView,"MonthView")||$.cf.compareStrings(c.setting.visibleView,"DatePicker")?(c.updateMonthTableAndContents(b),c.setting.adjustViewOnWindowResize&&$(window).bind("resize."+c.tv.pluginId,function(a){$.cf.compareStrings(c.setting.visibleView,"DetailedMonthView")&&c.setting.hideExtraEvents?($(c.elem).find(".cdmvEvent").remove(),$(c.elem).find(".cHiddenEventsIndicator").remove(),$(c.elem).find(".cHiddenEventsCont").remove(),c.adjustMonthTable(),c._addEventContInMonthView(null)):c.adjustMonthTable()})):$.cf.compareStrings(c.setting.visibleView,"WeekView")||$.cf.compareStrings(c.setting.visibleView,"DayView")||$.cf.compareStrings(c.setting.visibleView,"CustomView")||$.cf.compareStrings(c.setting.visibleView,"DayEventDetailView")?a&&($(c.elem).find(".cdvContRow2Main").html(""),$(c.elem).find(".cdvContRow3Main").html(""),c.__updateDetailViewTable(),c.__adjustDetailViewTable(),c.setting.adjustViewOnWindowResize&&$(window).bind("resize."+c.tv.pluginId,function(a){c.__adjustDetailViewTable()}),c.__parseData(b,function(){if($.cf.compareStrings(c.setting.visibleView,"DayEventDetailView")){if(c.setEventOrTaskStatusForCurrentView(),c.tv.bEvTskStatus){for(var a=0;a<c.tv.iNoVDay;a++)$(c.elem).find("#cdlvRowDay"+a).append("<div class='cdlvTableRowStatusGroup'> &nbsp; </div>");c.__displayEventOrTaskStatusForDayListView()}c.__setDateStringsForDayListView(c.tv.iNoVDay,c.tv.dAVDt,0)}c.__updateTimeSlotTableView(),c.__addEventsInDetailView("Both"),c.__adjustDetailViewTable(),c.__adjustDetailViewTable(),c.__modifyFilterBarCallback()})):$.cf.compareStrings(c.setting.visibleView,"QuickAgendaView")?($(c.elem).find(".cqavContRow2Main").html(""),c.__updateQuickAgendaView(),c.__adjustQuickAgendaView(),c.setting.adjustViewOnWindowResize&&$(window).bind("resize."+c.tv.pluginId,function(a){c.__adjustQuickAgendaView(!0)}),c.__parseData(b,function(){c.__addEventsInQuickAgendaView(),c.__adjustQuickAgendaView(),c.__modifyFilterBarCallback()})):$.cf.compareStrings(c.setting.visibleView,"TaskPlannerView")?($(c.elem).find(".ctpvTableRow2 td").html(""),c.__updateTaskPlannerView(),c.__adjustTaskPlannerView(),c.setting.adjustViewOnWindowResize&&$(window).bind("resize."+c.tv.pluginId,function(a){c.__adjustTaskPlannerView(!0)}),c.__parseData(b,function(){c.setEventOrTaskStatusForCurrentView(),c.__addEventsInTaskPlannerView(),c.__adjustTaskPlannerView(),c.__modifyFilterBarCallback()})):$.cf.compareStrings(c.setting.visibleView,"DayEventListView")?(c.__updateDayListViewTable(b,!0),a||c.__adjustDayListView(),c.__adjustDayListView(),c.setting.adjustViewOnWindowResize&&$(window).bind("resize."+c.tv.pluginId,function(a){c.__adjustDayListView()})):$.cf.compareStrings(c.setting.visibleView,"AppointmentView")?(c.__updateAppointmentTable(),c.__adjustAppointmentTable(),c.setting.adjustViewOnWindowResize&&$(window).bind("resize."+c.tv.pluginId,function(a){c.__adjustAppointmentTable()}),c.__parseData(b,function(){c.__updateAppointmentTable(),c.__displayAppointments(),c.__adjustAppointmentTable(),c.__adjustAppointmentTable(),c.__modifyFilterBarCallback()})):$.cf.compareStrings(c.setting.visibleView,"AgendaView")?(c.updateAgendaView(b),c.adjustAgendaView(),c.setting.adjustViewOnWindowResize&&$(window).bind("resize."+c.tv.pluginId,function(a){c.adjustAgendaView()})):$.cf.compareStrings(c.setting.visibleView,"WeekPlannerView")&&(c.updateWeekPlannerView(b),c.adjustWeekPlannerView(),c.setting.adjustViewOnWindowResize&&$(window).bind("resize."+c.tv.pluginId,function(a){c.adjustWeekPlannerView()})),c.setting.modifyFilterBarView&&c.setting.modifyFilterBarView.call(c,$(c.elem).find(".cFilterBar"),c.setting.eventFilterCriteria,c.tv.oAEvFltrCnt),c.tv.bDisABar&&c.setting.modifyActionBarView&&c.setting.modifyActionBarView.call(c,$(c.elem).find(".cActionBar"),c.setting.visibleView),c.tv.bViewLoaded||(c.setting.viewLoaded&&c.setting.viewLoaded.call(c,c.setting.selectedDate,c.tv.dAVDt),c.tv.bViewLoaded=!0)},__modifyFilterBarCallback:function(){var a=this;a.setting.modifyFilterBarView&&a.setting.modifyFilterBarView.call(a,$(a.elem).find(".cFilterBar"),a.setting.eventFilterCriteria,a.tv.oAEvFltrCnt)},__adjustFontSize:function(){var a=this,b=$(a.elem).find(".calendarContInner"),c=b.outerWidth(),d=b.outerHeight(),e="cFontLarge cFontMedium cFontSmall cFontExtraSmall";$.cf.compareStrings(a.setting.visibleView,"WeekView")||$.cf.compareStrings(a.setting.visibleView,"DayView")||$.cf.compareStrings(a.setting.visibleView,"CustomView")||$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")||$.cf.compareStrings(a.setting.visibleView,"QuickAgendaView")||$.cf.compareStrings(a.setting.visibleView,"TaskPlannerView")?c<=360||d<=360?b.removeClass(e).addClass("cFontSmall"):c<=710?b.removeClass(e).addClass("cFontMedium"):b.removeClass(e).addClass("cFontLarge"):$.cf.compareStrings(a.setting.visibleView,"DayEventListView")||$.cf.compareStrings(a.setting.visibleView,"AppointmentView")||$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")?c<=310||d<=310?b.removeClass(e).addClass("cFontSmall"):c<=410||d<=410?b.removeClass(e).addClass("cFontMedium"):b.removeClass(e).addClass("cFontLarge"):($.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker"))&&(a.tv.bCMVDisEvLst?c<=310||d<=310?b.removeClass(e).addClass("cFontSmall"):c<=400||d<=400?b.removeClass(e).addClass("cFontMedium"):b.removeClass(e).addClass("cFontLarge"):c<=310||d<=310?b.removeClass(e).addClass("cFontSmall"):c<=410||d<=410?b.removeClass(e).addClass("cFontMedium"):b.removeClass(e).addClass("cFontLarge"))},setCalendarBorderColor:function(){var a=this;if(a.tv.bDisFBar&&($.cf.compareStrings(a.setting.filterBarPosition,"Left")?$(a.elem).find(".cFilterBar").css({"border-right":"1px solid #DDD"}):$.cf.compareStrings(a.setting.filterBarPosition,"Right")&&$(a.elem).find(".cFilterBar").css({"border-left":"1px solid #DDD"})),a.setting.changeCalendarBorderColorInJS){var b,c="";b=$.cf.compareStrings(a.setting.calendarBorderColor,"transparent")?a.setting.calendarBorderColor:"#"+a.setting.calendarBorderColor,c+=".calendarCont",c+=", .calendarContInner",$(".cElemDatePickerTooltipBottom").css({"border-color":"transparent transparent "+b+" transparent"}),$.cf.compareStrings(a.setting.visibleView,"WeekView")||$.cf.compareStrings(a.setting.visibleView,"DayView")||$.cf.compareStrings(a.setting.visibleView,"CustomView")||$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")?(c+=", .cdvCalendarCont td",c+=", .cdvDetailTable"):$.cf.compareStrings(a.setting.visibleView,"QuickAgendaView")?(c+=", .cqavCalendarCont td",c+=", .cqavTable"):$.cf.compareStrings(a.setting.visibleView,"TaskPlannerView")?(c+=", .ctpvCalendarCont td",c+=", .ctpvTable"):$.cf.compareStrings(a.setting.visibleView,"AppointmentView")?(c+=", .cavCalendarCont .cavTable td",c+=", .cavCalendarCont .cavTable td:last-child",c+=", .cavTableList"):$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker")?(c+=", .cmvCalendarContWithBorders td",c+=", .cmvThinBorderTop",c+=", .cmvThinBorderRight",c+=", .cmvThinBorderBottom",c+=", .cmvThinBorderLeft",c+=", .cmvThinBorder",c+=", .cdlvDaysTableList"):$.cf.compareStrings(a.setting.visibleView,"DayEventListView")&&(c+=", .cdlvDaysTableList"),c+=", .cContHeader",c+=", .cFilterBar",c+=", .cActionBar",c+=", .cListOuterCont",$(a.elem).find(c).css({"border-color":b})}},setDateInFormat:function(a,b){var c=this;void 0===a.date&&void 0===a.iDate&&(a.date=c._getCurrentDate()),void 0===a.iDate?a.iDate={d:a.date.getDate(),M:a.date.getMonth(),y:a.date.getFullYear(),H:a.date.getHours(),m:a.date.getMinutes(),s:a.date.getSeconds(),ms:a.date.getMilliseconds()}:a.iDate={d:void 0!==a.iDate.d?a.iDate.d:$.CalenStyle.extra.dToday.getDate(),M:void 0!==a.iDate.M?a.iDate.M:$.CalenStyle.extra.dToday.getMonth(),y:void 0!==a.iDate.y?a.iDate.y:$.CalenStyle.extra.dToday.getFullYear(),H:void 0!==a.iDate.H?a.iDate.H:0,m:void 0!==a.iDate.m?a.iDate.m:0,s:void 0!==a.iDate.s?a.iDate.s:0,ms:void 0!==a.iDate.ms?a.iDate.ms:0};var d;return null===b||void 0===b||""===b?d=new Date(a.iDate.y,a.iDate.M,a.iDate.d,a.iDate.H,a.iDate.m,a.iDate.s,a.iDate.ms):"START"===b?d=new Date(a.iDate.y,a.iDate.M,a.iDate.d,0,0,0,0):"END"===b&&(d=new Date(a.iDate.y,a.iDate.M,a.iDate.d,23,59,59,999)),d},_getCurrentDate:function(){var a=this;return a.getDateByAddingOutputTZOffset(a.convertToUTC(new Date),a.setting.outputTZOffset)},convertToUTC:function(a,b){var c=this;return new Date(a.getTime()-(void 0===b||""===b||null===b?-a.getTimezoneOffset()*$.CalenStyle.extra.iMS.m:c._getTZOffsetInMS(b)))},_getTZOffsetInMS:function(a){var b=0;if(void 0===a||""===a||null===a)b=-$.CalenStyle.extra.dToday.getTimezoneOffset()*$.CalenStyle.extra.iMS.m;else{var c=a.match(/^([+|-]{1})([0-1]{0,1}[0-9]{1}):([0-6]{0,1}[0-9]{1})$/);b=parseInt(c[2])*$.CalenStyle.extra.iMS.h+parseInt(c[3])*$.CalenStyle.extra.iMS.m,b="+"===c[1]?b:-b}return b},getDateByAddingOutputTZOffset:function(a,b){var c=this;return new Date(a.getTime()+c._getTZOffsetInMS(b))},normalizeDateTimeWithOffset:function(a,b,c){var d=this,e=new Date(a);return b!==c&&(e=d.getDateByAddingOutputTZOffset(d.convertToUTC(a,b),c)),e},_getDateObjectFromString:function(a,b,c,d,e,f,g){var h,i=this,j={}.toString,k=j.call(a);if("[object Date]"===k)h=b?i.convertToUTC(a,g):i.normalizeDateTimeWithOffset(a,g,i.setting.outputTZOffset);else if("[object Number]"===k)h=b?i.convertToUTC(new Date(a),"+00:00"):i.normalizeDateTimeWithOffset(new Date(a),"+00:00",i.setting.outputTZOffset);else{var l,m=0,n=0,o=0,p=0,q=0,r=0,s=a.match(/^([0-9]{4})(-([0-1]{1}[0-9]{1}))(-([0-3]{1}[0-9]{1}))$/),t=a.match(/^([0-9]{4})(-([0-1]{1}[0-9]{1})(-([0-3]{1}[0-9]{1})([T]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/),u=a.match(/^([0-9]{4})(([0-1]{1}[0-9]{1})(([0-3]{1}[0-9]{1})([T]([0-9]{2})([0-9]{2})(([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(null!==s)l=i.setDateInFormat({iDate:{y:parseInt(s[1]),M:parseInt(s[3])-1,d:parseInt(s[5])}},"START"),h=b?l:i.getDateByAddingOutputTZOffset(l,i.setting.outputTZOffset);else if(null!==t)l=i.setDateInFormat({iDate:{y:parseInt(t[1]),M:parseInt(t[3])-1,d:parseInt(t[5]),H:parseInt(t[7]),m:parseInt(t[8]),s:parseInt(t[10])}},""),h="Z"===t[13]?i.getDateByAddingOutputTZOffset(l,i.setting.outputTZOffset):i.normalizeDateTimeWithOffset(l,t[13],i.setting.outputTZOffset);else if(null!==u)l=i.setDateInFormat({iDate:{y:parseInt(u[1]),M:parseInt(u[3])-1,d:parseInt(u[5]),H:parseInt(u[7]),m:parseInt(u[8]),s:parseInt(u[9])}},""),h="Z"===u[13]?i.getDateByAddingOutputTZOffset(l,i.setting.outputTZOffset):i.normalizeDateTimeWithOffset(l,u[13],i.setting.outputTZOffset);else{var v=c||i.setting.inputDateTimeFormat;if($.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[1]))h=new Date(parseInt(a));else{var w=d||i.setting.formatSeparatorDateTime,x=e||i.setting.formatSeparatorDate,y=f||i.setting.formatSeparatorTime,z=a.split(w),A=z[0],B=z[1],C=A.split(x);$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[4])||$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[5])?(m=parseInt(C[0]),n=parseInt(C[1])-1,o=parseInt(C[2])):$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[6])||$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[7])?(n=parseInt(C[0])-1,m=parseInt(C[1]),o=parseInt(C[2])):($.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[8])||$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[9]))&&(o=parseInt(C[0]),n=parseInt(C[1])-1,m=parseInt(C[2]));var D;if($.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[4])||$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[6])||$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[8])){var E=B.split(" ");D=E[0].split(y),p=parseInt(D[0]),q=parseInt(D[1]),isNaN(q)&&(q=0),D.length>2&&(r=parseInt(D[2])),$.cf.compareStrings(E[1],"AM")&&12===p&&(p=0),$.cf.compareStrings(E[1],"PM")&&p<12&&(p+=12)}else($.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[5])||$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[7])||$.cf.compareStrings(v,$.CalenStyle.extra.sArrInputDateTimeFormats[9]))&&(D=B.split(y),p=parseInt(D[0]),q=parseInt(D[1]),isNaN(q)&&(q=0),D.length>2&&(r=parseInt(D[2])));h=i.setDateInFormat({iDate:{y:o,M:n,d:m,H:p,m:q,s:r}},"")}h=b?h:i.normalizeDateTimeWithOffset(h,g,i.setting.outputTZOffset)}}return b&&(h=i.setDateInFormat({date:h},"START")),h},__getNumberOfDaysOfMonth:function(a,b){var c=[31,28,31,30,31,30,31,31,30,31,30,31],d=[31,29,31,30,31,30,31,31,30,31,30,31];return b%4==0?d[a]:c[a]},__findWhetherDateIsVisibleInCurrentView:function(a,b,c,d){var e=this;if(e.setting.excludeNonBusinessHours){for(var f=0;f<e.tv.dAVDt.length;f++)if(0===e.compareDates(e.tv.dAVDt[f],a)){if(b)return!0;var g=new Date(a),h=new Date(a);g.setHours(e.tv.oBsHours.startTime[0]),g.setMinutes(e.tv.oBsHours.startTime[1]),h.setHours(e.tv.oBsHours.endTime[0]),h.setMinutes(e.tv.oBsHours.endTime[1]);var i=new Date(c),j=new Date(d);return e.compareDateTimes(g,c)>0&&(i=new Date(g)),e.compareDateTimes(h,d)<0&&(j=new Date(h)),e.compareDateTimes(i,j)<0}return!1}return!0},__getCurrentViewDates:function(){var a,b,c,d=this,e=d.setDateInFormat({date:d.setting.selectedDate},"START");if(!d.tv.bDyClDLV){if(d.tv.dAVDt=[],d.setting.excludeNonBusinessHours&&!$.cf.compareStrings(d.setting.visibleView,"WeekPlannerView")&&d.tv.iBsDays>0)if($.cf.compareStrings(d.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(d.setting.visibleView,"MonthView")||$.cf.compareStrings(d.setting.visibleView,"DatePicker")||$.cf.compareStrings(d.setting.visibleView,"AgendaView")&&$.cf.compareStrings(d.setting.agendaViewDuration,"Month"))for(;0===d._getBusinessHoursForCurrentView(d.setting.selectedDate).length;)d.setting.selectedDate.setDate(d.setting.selectedDate.getDate()+1);else{for(;0===d._getBusinessHoursForCurrentView(e).length;)"Next"===d.tv.sLoadType||"Load"===d.tv.sLoadType?e.setDate(e.getDate()+1):"Prev"===d.tv.sLoadType&&e.setDate(e.getDate()-1);d.setting.selectedDate=new Date(e)}if($.cf.compareStrings(d.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(d.setting.visibleView,"MonthView")||$.cf.compareStrings(d.setting.visibleView,"DatePicker")){b=d.setDateInFormat({iDate:{d:1,M:e.getMonth(),y:e.getFullYear()}},"START"),c=d.setDateInFormat({iDate:{d:d.__getNumberOfDaysOfMonth(e.getMonth(),e.getFullYear()),M:e.getMonth(),y:e.getFullYear()}},"START"),d.tv.dVSDt=d.setDateInFormat({date:d._getWeekForDate(b,!1)[0]},"START"),d.setting.fixedNumOfWeeksInMonthView||(d.tv.iWkInMonth=Math.round((d._getWeekForDate(c,!1)[0].getTime()-d.tv.dVSDt.getTime())/$.CalenStyle.extra.iMS.w)+1),d.tv.iNoVDay=0;for(var f=d.tv.dVSDt.getTime(),g=d.setting.excludeNonBusinessHours?d.tv.iBsDays*d.tv.iWkInMonth:7*d.tv.iWkInMonth,h=d.tv.dVSDt.getTimezoneOffset(),i=0;i<7*d.tv.iWkInMonth;i++){var j=new Date(f),k=j.getTimezoneOffset();h!==k&&(j=new Date(f+(k-h)*$.CalenStyle.extra.iMS.m)),d.setting.excludeNonBusinessHours?d._getBusinessHoursForCurrentView(j).length>0&&(d.tv.dAVDt.push(j),d.tv.iNoVDay++,1===d.tv.dAVDt.length&&(d.tv.dVSDt=new Date(j)),d.tv.dAVDt.length===g&&(d.tv.dVEDt=new Date(j))):(d.tv.dAVDt.push(j),d.tv.iNoVDay++,1===d.tv.dAVDt.length&&(d.tv.dVSDt=new Date(j)),d.tv.dAVDt.length===g&&(d.tv.dVEDt=new Date(j))),f+=$.CalenStyle.extra.iMS.d}d.tv.dVEDt=d.setDateInFormat({date:d.tv.dVEDt},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt)}else if($.cf.compareStrings(d.setting.visibleView,"QuickAgendaView"))$.cf.compareStrings(d.setting.quickAgendaViewDuration,"Week")?(a=d._getWeekForDate(e,!1),d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,a[0],null,"Next"),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt)):$.cf.compareStrings(d.setting.quickAgendaViewDuration,"CustomDays")&&("Next"===d.tv.sLoadType||"Load"===d.tv.sLoadType?d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Next"):"Prev"===d.tv.sLoadType&&(d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Prev"),d.tv.dAVDt.reverse()),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt));else if($.cf.compareStrings(d.setting.visibleView,"TaskPlannerView"))$.cf.compareStrings(d.setting.taskPlannerViewDuration,"Week")?(a=d._getWeekForDate(e,!1),d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,a[0],null,"Next"),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt)):$.cf.compareStrings(d.setting.taskPlannerViewDuration,"CustomDays")&&("Next"===d.tv.sLoadType||"Load"===d.tv.sLoadType?d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Next"):"Prev"===d.tv.sLoadType&&(d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Prev"),d.tv.dAVDt.reverse()),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt));else if($.cf.compareStrings(d.setting.visibleView,"AgendaView"))$.cf.compareStrings(d.setting.agendaViewDuration,"Month")?(b=new Date(e),b.setDate(1),d.tv.iNoVDay=d.__getNumberOfDaysOfMonth(b.getMonth(),b.getFullYear()),c=new Date(e),c.setDate(d.tv.iNoVDay),d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,b,c,"Next"),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt)):$.cf.compareStrings(d.setting.agendaViewDuration,"Week")?(a=d._getWeekForDate(e,!1),d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,a[0],null,"Next"),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt)):$.cf.compareStrings(d.setting.agendaViewDuration,"CustomDays")&&("Next"===d.tv.sLoadType||"Load"===d.tv.sLoadType?d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Next"):"Prev"===d.tv.sLoadType&&(d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Prev"),d.tv.dAVDt.reverse()),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt));else if($.cf.compareStrings(d.setting.visibleView,"AppointmentView"))"Next"===d.tv.sLoadType||"Load"===d.tv.sLoadType?d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Next"):"Prev"===d.tv.sLoadType&&(d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Prev"),d.tv.dAVDt.reverse()),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END");else if($.cf.compareStrings(d.setting.visibleView,"DayEventListView")||$.cf.compareStrings(d.setting.visibleView,"DayEventDetailView")){if(7===d.setting.daysInDayListView){a=d._getWeekForDate(e,!1),d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,a[0],null,"Next");for(var l=0;l<d.tv.iNoVDay;l++)if(0===d.compareDates(e,d.tv.dAVDt[l])){d.tv.iSelDay=l;break}d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END")}else{var m,n=d.__setCurrentViewDatesArray(d.tv.iSelDay+1,e,null,"Prev"),o=d.tv.iNoVDay-(d.tv.iSelDay+1)+1;n.reverse(),m=d.__setCurrentViewDatesArray(o,e,null,"Next"),m.shift(),d.tv.dAVDt=n.concat(m),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END")}d.tv.dVDSDt=d.setDateInFormat({date:d.setting.selectedDate},"START"),d.tv.dVDEDt=d.setDateInFormat({date:d.setting.selectedDate},"END")}else $.cf.compareStrings(d.setting.visibleView,"WeekView")?(a=d._getWeekForDate(e,!1),d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,a[0],null,"Next"),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt)):$.cf.compareStrings(d.setting.visibleView,"DayView")?(d.tv.dVSDt=d.setDateInFormat({date:e},"START"),d.tv.dVEDt=d.setDateInFormat({date:e},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt),d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Next")):$.cf.compareStrings(d.setting.visibleView,"CustomView")?("Next"===d.tv.sLoadType||"Load"===d.tv.sLoadType?d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Next"):"Prev"===d.tv.sLoadType&&(d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,e,null,"Prev"),d.tv.dAVDt.reverse()),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt)):$.cf.compareStrings(d.setting.visibleView,"WeekPlannerView")&&(a=d._getWeekForDate(e,!1),d.tv.dAVDt=d.__setCurrentViewDatesArray(d.tv.iNoVDay,a[0],null,"Next"),d.tv.dVSDt=d.setDateInFormat({date:d.tv.dAVDt[0]},"START"),d.tv.dVEDt=d.setDateInFormat({date:d.tv.dAVDt[d.tv.iNoVDay-1]},"END"),d.tv.dVDSDt=new Date(d.tv.dVSDt),d.tv.dVDEDt=new Date(d.tv.dVEDt))}},__setCurrentViewDatesArray:function(a,b,c,d){for(var e=this,f=b.getTime(),g=[],h=b.getTimezoneOffset(),i=0;i<a;i++){var j=new Date(f),k=j.getTimezoneOffset();if(h!==k&&(j=new Date(f+(k-h)*$.CalenStyle.extra.iMS.m)),e.setting.excludeNonBusinessHours?e._getBusinessHoursForCurrentView(j).length>0?g.push(j):i--:g.push(j),null!==c&&0===e.compareDates(j,c))break;$.cf.compareStrings(d,"Prev")?f-=$.CalenStyle.extra.iMS.d:$.cf.compareStrings(d,"Next")&&(f+=$.CalenStyle.extra.iMS.d)}return g},__getDayIndexInView:function(a){for(var b=this,c=-1,d=0;d<b.tv.dAVDt.length;d++){var e=b.tv.dAVDt[d];if(0===b.compareDates(a,e)){c=d;break}}return $.cf.compareStrings(b.setting.visibleView,"DayEventDetailView")&&(c=0),c},_getWeekForDate:function(a,b){var c=this,d=a.getDay()-(b?0:c.setting.weekStartDay);d<0&&(d=7+d);var e=$.CalenStyle.extra.iMS.d*d,f=a.getTime(),g=f-e,h=g+6*$.CalenStyle.extra.iMS.d;return[c.setDateInFormat({date:new Date(g)},"START"),c.setDateInFormat({date:new Date(h)},"END")]},_getThursdayInAWeek:function(a){var b=a.getDay(),c=b>4?7-b+4:4-b,d=a.getTime()+$.CalenStyle.extra.iMS.d*c;return new Date(d)},__getWeekNumber:function(a,b){var c,d=this,e=d._normalizeDateTime(a,"START","y"),f=d._normalizeDateTime(a,"END","y");if($.cf.compareStrings(d.setting.weekNumCalculation,"US")){var g=d._getWeekForDate(e,!0)[0],h=g.getTime(),i=d._getWeekForDate(a,!0)[0],j=Math.ceil((i.getTime()-h)/$.CalenStyle.extra.iMS.w)+1,k=d._getWeekForDate(b,!0)[0],l=Math.ceil((k.getTime()-h)/$.CalenStyle.extra.iMS.w)+1;c=0===d.setting.weekStartDay?d.compareDates(b,f)>0?d.getNumberStringInFormat(j,0,!0)+"/"+d.getNumberStringInFormat(1,0,!0):d.getNumberStringInFormat(j,0,!0):j!==l?d.compareDates(b,f)>0?d.getNumberStringInFormat(j,0,!0)+"/"+d.getNumberStringInFormat(1,0,!0):d.getNumberStringInFormat(j,0,!0)+"/"+d.getNumberStringInFormat(l,0,!0):d.getNumberStringInFormat(j,0,!0)}else if($.cf.compareStrings(d.setting.weekNumCalculation,"Europe/ISO")){if(a.getFullYear()!==b.getFullYear()){var m=new Date(b);m.setDate(1),m.setMonth(0);var n=new Date(a);n.setDate(1),n.setMonth(0),e=b.getDate()>=3?m:n}var o=d._getThursdayInAWeek(e),p=d._getThursdayInAWeek(a);c=Math.ceil((p.getTime()-o.getTime())/$.CalenStyle.extra.iMS.w)+1,c=d.getNumberStringInFormat(c,0,!0)}return c},__isDateInCurrentView:function(a){var b=this,c=!1;if(b.tv.dAVDt.length>0)for(var d=0;d<b.tv.dAVDt.length;d++){var e=b.tv.dAVDt[d];0===b.compareDates(e,a)&&(c=!0)}return c},_normalizeDateTime:function(a,b,c){var d,e=this,f={d:a.getDate(),M:a.getMonth(),y:a.getFullYear(),H:a.getHours(),m:a.getMinutes(),s:a.getSeconds()};switch(c){case"s":"START"===b?d=new Date(f.y,f.M,f.d,f.H,f.M,0,0):"END"===b&&(d=new Date(f.y,f.M,f.d,f.H,f.M,59,999));break;case"m":"START"===b?d=new Date(f.y,f.M,f.d,f.H,0,0,0):"END"===b&&(d=new Date(f.y,f.M,f.d,f.H,59,59,999));break;case"h":case"T":"START"===b?d=new Date(f.y,f.M,f.d,0,0,0,0):"END"===b&&(d=new Date(f.y,f.M,f.d,23,59,59,999));break;case"d":case"dE":"START"===b?d=new Date(f.y,f.M,1,0,0,0,0):"END"===b&&(d=new Date(f.y,f.M,e.__getNumberOfDaysOfMonth(f.M,f.y),0,0,0,0));break;case"M":case"ME":case"y":case"yE":"START"===b?d=new Date(f.y,0,1,0,0,0,0):"END"===b&&(d=new Date(f.y,11,e.__getNumberOfDaysOfMonth(11,f.y),0,0,0,0))}return"dE"!==c&&"ME"!==c&&"yE"!==c||(d=e._normalizeDateTime(d,"END","T")),d},__getDifference:function(a,b,c){var d,e=b.getTime()-c.getTime();return"ms"===a?d=e:"s"===a?d=e/$.CalenStyle.extra.iMS.s:"m"===a?d=e/$.CalenStyle.extra.iMS.m:"h"===a?d=e/$.CalenStyle.extra.iMS.h:"d"===a?d=e/$.CalenStyle.extra.iMS.d:"M"===a?d=e/$.CalenStyle.extra.iMS.m:"y"===a&&(d=e/$.CalenStyle.extra.iMS.y),d},compareDates:function(a,b){var c=this;a=c._normalizeDateTime(a,"START","T"),b=c._normalizeDateTime(b,"START","T");var d=c.__getDifference("d",a,b);return 0===d?d:d/Math.abs(d)},compareDateTimes:function(a,b){var c=this,d=c.__getDifference("m",a,b);return 0===d?d:d/Math.abs(d)},_getMonthAndYear:function(a,b,c,d){for(var e=a,f=b,g=0;g<c;g++)$.cf.compareStrings(d,"Prev")?-1===(e-=1)&&(e=11,f-=1):$.cf.compareStrings(d,"Next")&&12===(e+=1)&&(e=0,f+=1);return[e,f]},getNumberStringInFormat:function(a,b,c){var d,e=this,f="",g=a.toString(),h=g.length;if(0!==b)for(d=0;d<b-h;d++)f+=c?e.setting.numbers[0]:"0";if(c)for(d=0;d<h;d++)f+=e.setting.numbers[parseInt(g.charAt(d))];else f+=g;return f},getDateInFormat:function(a,b,c,d){var e,f=this,g="",h=f.setting.formatSeparatorDate,i=f.setting.formatSeparatorTime,j=f.setting.formatSeparatorDateTime,k=d?f.setting.veryShortDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],l=d?f.setting.shortDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],m=d?f.setting.fullDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],n=d?f.setting.shortMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],o=d?f.setting.fullMonthNames:["January","February","March","April","May","June","July","August","September","October","November","December"];return void 0===a.date&&void 0===a.iDate&&(a.date=f._getCurrentDate()),void 0===a.iDate&&(a.iDate={D:a.date.getDay(),d:a.date.getDate(),M:a.date.getMonth(),y:a.date.getFullYear(),H:a.date.getHours(),m:a.date.getMinutes(),s:a.date.getSeconds(),ms:a.date.getMilliseconds()}),a.iDate.h=a.iDate.H>12?a.iDate.H-12:0===a.iDate.H?12:a.iDate.H,a.iDate.me=a.iDate.H<12?"am":"pm",a.iDate.sm=a.iDate.H<12?"a":"p",c&&(b=b.replace("hh","HH"),b=b.replace("h","H"),b=b.replace(" me","","i"),b=b.replace(" sm","","i"),b=b.replace("sm","","i")),"object"===b?g=a.iDate:"d"===b?g=void 0!==f.setting.formatDates.d?f.setting.formatDates.d.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.d,0,d):"M"===b?g=void 0!==f.setting.formatDates.M?f.setting.formatDates.M.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.M+1,0,d):"y"===b?g=void 0!==f.setting.formatDates.y?f.setting.formatDates.y.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.y,0,d):"H"===b?g=void 0!==f.setting.formatDates.H?f.setting.formatDates.H.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.H,0,d):"h"===b?g=void 0!==f.setting.formatDates.h?f.setting.formatDates.h.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.h,0,d):"m"===b?g=void 0!==f.setting.formatDates.m?f.setting.formatDates.m.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.m,0,d):"s"===b&&(g=void 0!==f.setting.formatDates.s?f.setting.formatDates.s.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.s,0,d)),"dd"===b?g=void 0!==f.setting.formatDates.dd?f.setting.formatDates.dd.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.d,2,d):"MM"===b?g=void 0!==f.setting.formatDates.MM?f.setting.formatDates.MM.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.M+1,2,d):"yyyy"===b?g=void 0!==f.setting.formatDates.yyyy?f.setting.formatDates.yyyy.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.y,2,d):"HH"===b?g=void 0!==f.setting.formatDates.HH?f.setting.formatDates.HH.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.H,2,d):"hh"===b?g=void 0!==f.setting.formatDates.hh?f.setting.formatDates.hh.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.h,2,d):"mm"===b?g=void 0!==f.setting.formatDates.mm?f.setting.formatDates.mm.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.m,2,d):"ss"===b?g=void 0!==f.setting.formatDates.ss?f.setting.formatDates.ss.call(f,a.iDate):f.getNumberStringInFormat(a.iDate.s,2,d):"DD"===b?g=k[a.iDate.D]:"DDD"===b?g=l[a.iDate.D]:"DDDD"===b?g=m[a.iDate.D]:"MMM"===b?g=n[a.iDate.M]:"MMMM"===b?g=o[a.iDate.M]:"dd-MM-yyyy"===b?g=void 0!==f.setting.formatDates["dd-MM-yyyy"]?f.setting.formatDates["dd-MM-yyyy"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"dd",c,d)+h+f.getDateInFormat({iDate:a.iDate},"MM",c,d)+h+f.getDateInFormat({iDate:a.iDate},"yyyy",c,d):"dd MMM"===b?g=void 0!==f.setting.formatDates["dd MMM"]?f.setting.formatDates["dd MMM"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"dd",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"MMM",c,d):"dd-MMM-yyyy"===b?g=void 0!==f.setting.formatDates["dd-MMM-yyyy"]?f.setting.formatDates["dd-MMM-yyyy"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"dd",c,d)+h+f.getDateInFormat({iDate:a.iDate},"MMM",c,d)+h+f.getDateInFormat({iDate:a.iDate},"yyyy",c,d):"DDD MMM dd, yyyy"===b?g=void 0!==f.setting.formatDates["DDD MMM dd, yyyy"]?f.setting.formatDates["DDD MMM dd, yyyy"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"DDD",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"MMM",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"dd",c,d)+", "+f.getDateInFormat({iDate:a.iDate},"yyyy",c,d):"DDD MMM dd yyyy"===b?g=void 0!==f.setting.formatDates["DDD MMM dd yyyy"]?f.setting.formatDates["DDD MMM dd yyyy"].call(f,a.iDate):"<b>"+f.getDateInFormat({iDate:a.iDate},"DDD",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"MMM",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"dd",c,d)+"</b> "+f.getDateInFormat({iDate:a.iDate},"yyyy",c,d):"DDDD MMM dd yyyy"===b?g=void 0!==f.setting.formatDates["DDDD MMM dd yyyy"]?f.setting.formatDates["DDDD MMM dd yyyy"].call(f,a.iDate):"<b>"+f.getDateInFormat({iDate:a.iDate},"DDDD",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"MMM",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"dd",c,d)+"</b> "+f.getDateInFormat({iDate:a.iDate},"yyyy",c,d):"DDDD MMMM dd yyyy"===b?g=void 0!==f.setting.formatDates["DDDD MMMM dd yyyy"]?f.setting.formatDates["DDDD MMMM dd yyyy"].call(f,a.iDate):"<b>"+f.getDateInFormat({iDate:a.iDate},"DDDD",c,d)+" - "+f.getDateInFormat({iDate:a.iDate},"MMMM",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"dd",c,d)+"</b> "+f.getDateInFormat({iDate:a.iDate},"yyyy",c,d):"yyyy-MM-dd"===b?g=void 0!==f.setting.formatDates["yyyy-MM-dd"]?f.setting.formatDates["yyyy-MM-dd"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"yyyy",c,d)+h+f.getDateInFormat({iDate:a.iDate},"MM",c,d)+h+f.getDateInFormat({iDate:a.iDate},"dd",c,d):"ISO8601Date"===b?g=void 0!==f.setting.formatDates.ISO8601Date?f.setting.formatDates.ISO8601Date.call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"yyyy",c,d)+"-"+f.getDateInFormat({iDate:a.iDate},"MM",c,d)+"-"+f.getDateInFormat({iDate:a.iDate},"dd",c,d):"DDD, MMM dd"===b?g=void 0!==f.setting.formatDates["DDD, MMM dd"]?f.setting.formatDates["DDD, MMM dd"].call(f,a.iDate):"<b>"+f.getDateInFormat({iDate:a.iDate},"DDD",c,d)+", "+f.getDateInFormat({iDate:a.iDate},"MMM",c,d)+" "+f.getDateInFormat({iDate:a.iDate},"dd",c,d):"hh:mm sm"===b||"hh:mm SM"===b?g=void 0!==f.setting.formatDates["hh:mm"]?f.setting.formatDates["hh:mm"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"hh",c,d)+i+f.getDateInFormat({iDate:a.iDate},"mm",c,d)+" "+("hh:mm SM"===b?a.iDate.sm.toUpperCase():a.iDate.sm):"hh:mmsm"===b||"hh:mmSM"===b?g=void 0!==f.setting.formatDates["hh:mm"]?f.setting.formatDates["hh:mm"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"hh",c,d)+i+f.getDateInFormat({iDate:a.iDate},"mm",c,d)+("hh:mmSM"===b?a.iDate.sm.toUpperCase():a.iDate.sm):"h[:m]sm"===b||"h[:m]SM"===b?(e=0!==a.iDate.m?i+f.getDateInFormat({iDate:a.iDate},"m",c,d):"",g=void 0!==f.setting.formatDates["h:m"]?f.setting.formatDates["h:m"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"h",c,d)+e+("h:mSM"===b?a.iDate.sm.toUpperCase():a.iDate.sm)):"hh:mm"===b||"hh:mm me"===b||"hh:mm ME"===b?g=void 0!==f.setting.formatDates["hh:mm"]?f.setting.formatDates["hh:mm"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"hh",c,d)+i+f.getDateInFormat({iDate:a.iDate},"mm",c,d)+" "+("hh:mm ME"===b?a.iDate.me.toUpperCase():a.iDate.me):"hh:mm:ss"===b||"hh:mm:ss me"===b||"hh:mm:ss ME"===b?g=void 0!==f.setting.formatDates["hh:mm:ss"]?f.setting.formatDates["hh:mm:ss"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"hh",c,d)+i+f.getDateInFormat({iDate:a.iDate},"mm",c,d)+i+f.getDateInFormat({iDate:a.iDate},"ss",c,d)+" "+("hh:mm:ss ME"===b?a.iDate.me.toUpperCase():a.iDate.me):"HH:mm"===b?g=void 0!==f.setting.formatDates["HH:mm"]?f.setting.formatDates["HH:mm"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"HH",c,d)+i+f.getDateInFormat({iDate:a.iDate},"mm",c,d):"H[:m]"===b?(e=0!==a.iDate.m?i+f.getDateInFormat({iDate:a.iDate},"m",c,d):"",g=void 0!==f.setting.formatDates["H:m"]?f.setting.formatDates["H:m"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"H",c,d)+e):"HH:mm:ss"===b?g=void 0!==f.setting.formatDates["HH:mm:ss"]?f.setting.formatDates["HH:mm:ss"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"HH",c,d)+i+f.getDateInFormat({iDate:a.iDate},"mm",c,d)+i+f.getDateInFormat({iDate:a.iDate},"ss",c,d):"ISO8601Time"===b?g=void 0!==f.setting.formatDates.ISO8601Time?f.setting.formatDates.ISO8601Time.call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"HH",c,d)+":"+f.getDateInFormat({iDate:a.iDate},"mm",c,d)+":"+f.getDateInFormat({iDate:a.iDate},"ss",c,d):"dd-MM-yyyy HH:mm"===b?g=void 0!==f.setting.formatDates["dd-MM-yyyy HH:mm"]?f.setting.formatDates["dd-MM-yyyy HH:mm"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"dd-MM-yyyy",c,d)+j+f.getDateInFormat({iDate:a.iDate},"HH:mm",c,d):"dd-MM-yyyy hh:mm"===b?g=void 0!==f.setting.formatDates["dd-MM-yyyy hh:mm"]?f.setting.formatDates["dd-MM-yyyy hh:mm"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"dd-MM-yyyy",c,d)+j+f.getDateInFormat({iDate:a.iDate},"hh:mm",c,d):"HH:mm dd-MMM-yyyy"===b?g=void 0!==f.setting.formatDates["HH:mm dd-MMM-yyyy"]?f.setting.formatDates["HH:mm dd-MMM-yyyy"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"HH:mm",c,d)+j+f.getDateInFormat({iDate:a.iDate},"dd-MMM-yyyy",c,d):"hh:mm dd-MMM-yyyy"===b?g=void 0!==f.setting.formatDates["hh:mm dd-MMM-yyyy"]?f.setting.formatDates["hh:mm dd-MMM-yyyy"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"hh:mm",c,d)+j+f.getDateInFormat({iDate:a.iDate},"dd-MMM-yyyy",c,d):"yyyy-MM-ddTHH:mm:ss"===b?g=void 0!==f.setting.formatDates["yyyy-MM-ddTHH:mm:ss"]?f.setting.formatDates["yyyy-MM-ddTHH:mm:ss"].call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"yyyy-MM-dd",c,d)+"T"+f.getDateInFormat({iDate:a.iDate},"HH:mm:ss",c,d):"ISO8601DateTime"===b&&(g=void 0!==f.setting.formatDates.ISO8601DateTime?f.setting.formatDates.ISO8601DateTime.call(f,a.iDate):f.getDateInFormat({iDate:a.iDate},"ISO8601Date",c,d)+"T"+f.getDateInFormat({iDate:a.iDate},"ISO8601Time",c,d)),g},getEventDateTimeString:function(a,b,c,d){var e=this,f="";return c?0===e.compareDates(a,b)?f=e.getDateInFormat({date:a},"dd-MMM-yyyy",!1,!0):0===b.getHours()&&0===b.getMinutes()?(b.setTime(b.getTime()-$.CalenStyle.extra.iMS.m),f=0===e.compareDates(a,b)?e.getDateInFormat({date:a},"dd-MMM-yyyy",!1,!0):e.getDateInFormat({date:a},"hh:mm dd-MMM-yyyy",e.setting.is24Hour,!0)+d+e.getDateInFormat({date:b},"hh:mm dd-MMM-yyyy",e.setting.is24Hour,!0)):f=e.getDateInFormat({date:a},"hh:mm dd-MMM-yyyy",e.setting.is24Hour,!0)+d+e.getDateInFormat({date:b},"hh:mm dd-MMM-yyyy",e.setting.is24Hour,!0):f=0===e.compareDates(a,b)?e.getDateInFormat({date:a},"hh:mm",e.setting.is24Hour,!0)+d+e.getDateInFormat({date:b},"hh:mm",e.setting.is24Hour,!0):e.getDateInFormat({date:a},"hh:mm dd-MMM-yyyy",e.setting.is24Hour,!0)+d+e.getDateInFormat({date:b},"hh:mm dd-MMM-yyyy",e.setting.is24Hour,!0),f},__getDurationBetweenDates:function(a,b,c,d,e){for(var f=this,g=Math.abs(b.getTime()-a.getTime()),h={},i="",j=0;j<c.length;j++)h[c.charAt(j)]=0;return void 0!==h.y&&(h.y=Math.floor(g/$.CalenStyle.extra.iMS.y),g%=$.CalenStyle.extra.iMS.y,e||void 0===h.y||!d&&0===h.y||(i+=h.y+(1===h.y?f.setting.durationStrings.y[0]:f.setting.durationStrings.y[1]))),void 0!==h.M&&(h.M=Math.floor(g/$.CalenStyle.extra.iMS.m),g%=$.CalenStyle.extra.iMS.m,e||void 0===h.M||!d&&0===h.M||(i+=h.M+(1===h.M?f.setting.durationStrings.M[0]:f.setting.durationStrings.M[1]))),void 0!==h.w&&(h.w=Math.floor(g/$.CalenStyle.extra.iMS.w),g%=$.CalenStyle.extra.iMS.w,e||void 0===h.w||!d&&0===h.w||(i+=h.w+(1===h.w?f.setting.durationStrings.w[0]:f.setting.durationStrings.w[1]))),void 0!==h.d&&(h.d=Math.floor(g/$.CalenStyle.extra.iMS.d),g%=$.CalenStyle.extra.iMS.d,e||void 0===h.d||!d&&0===h.d||(i+=h.d+(1===h.d?f.setting.durationStrings.d[0]:f.setting.durationStrings.d[1]))),void 0!==h.h&&(h.h=Math.floor(g/$.CalenStyle.extra.iMS.h),g%=$.CalenStyle.extra.iMS.h,e||void 0===h.h||!d&&0===h.h||(i+=h.h+(1===h.h?f.setting.durationStrings.h[0]:f.setting.durationStrings.h[1]))),void 0!==h.m&&(h.m=Math.floor(g/$.CalenStyle.extra.iMS.m),g%=$.CalenStyle.extra.iMS.m,e||void 0===h.m||!d&&0===h.m||(i+=h.m+(1===h.m?f.setting.durationStrings.m[0]:f.setting.durationStrings.m[1]))),void 0!==h.s&&(h.s=Math.floor(g/$.CalenStyle.extra.iMS.s),g%=$.CalenStyle.extra.iMS.s,e||void 0===h.s||!d&&0===h.s||(i+=h.s+(1===h.s?f.setting.durationStrings.s[0]:f.setting.durationStrings.s[1]))),e?h:i.trim()},__isValidUrl:function(a){return!!a.match(/(((ftp|http|https):\/\/)|(\/)|(..\/)|())(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/)},_isGoogleCalendarUrl:function(a){return!!a.match("https://www.googleapis.com/calendar/v3/calendars/")},_convertToISO8601Date:function(a,b){var c=this;return c.getDateInFormat({date:a},"ISO8601DateTime",!1,!0)+(b||c.setting.inputTZOffset)},incrementDataLoadingCount:function(a){var b=this;b.tv.iLoadCnt=b.tv.iLoadCnt+a,1===b.tv.iLoadCnt&&b._startDataLoading()},_startDataLoading:function(){var a=this;a.tv.iLoadCnt>=1&&(a.addRemoveLoaderIndicators(!0,"cEventLoaderIndicator"),a.addRemoveViewLoader(!0,"cEventLoaderBg"),a.setting.dataLoadingStart&&a.setting.dataLoadingStart.call(a,a.setting.visibleView))},_stopDataLoading:function(a,b,c){var d=this;0===--d.tv.iLoadCnt&&(d.setting.dataLoadingEnd&&d.setting.dataLoadingEnd.call(d,d.setting.visibleView),d.setting.deleteOldDataWhileNavigating&&d._dataCleaning(a,b),c())},__parseJson:function(a){return $.cf.compareStrings(typeof a,"string")?$.parseJSON(a):a},parseDataSource:function(a,b,c,d,e,f,g){var h=this;b=h.__parseJson(b),$.cf.compareStrings(a,"eventSource")&&g?h._getModifiedEventsArray(b,f,g,!1):b.length>0?$.cf.compareStrings(a,"eventCalendarSource")?h._getModifiedEventCalendarsArray(b):$.cf.compareStrings(a,"eventSource")?h._getModifiedEventsArray(b,f,g,!1):$.cf.compareStrings(a,"sourceCount")?h._getModifiedSourceCountArray(b,f):$.cf.compareStrings(a,"restrictedSectionSource")?h._getModifiedRestrictedSectionArray(b,f):$.cf.compareStrings(a,"slotAvailabilitySource")&&h._getModifiedSlotAvailabilityArray(b,f):$.cf.compareStrings(a,"eventCalendarSource")?h.tv.oAECalendar=[]:$.cf.compareStrings(a,"eventSource")?h.tv.oAEvents=[]:$.cf.compareStrings(a,"sourceCount")?h.tv.oASrcCnt=[]:$.cf.compareStrings(a,"restrictedSectionSource")?h.tv.oAResSec=[]:$.cf.compareStrings(a,"slotAvailabilitySource")&&(h.tv.oASltAvail=[]),h._stopDataLoading(c,d,e)},_parseAllDataSources:function(a,b,c,d,e,f){var g=this,h=0;c&&h++,void 0!==a.eventCalendarSource&&h++,void 0!==a.eventSource&&h++,void 0!==a.sourceCount&&h++,void 0!==a.restrictedSectionSource&&h++,void 0!==a.slotAvailabilitySource&&h++,g.incrementDataLoadingCount(h),c&&g.parseDataSource("eventSource",a,d,e,f,b,c),void 0!==a.eventCalendarSource&&g.parseDataSource("eventCalendarSource",a.eventCalendarSource,d,e,f,b,c),void 0!==a.eventSource&&g.parseDataSource("eventSource",a.eventSource,d,e,f,b,c),void 0!==a.sourceCount&&g.parseDataSource("sourceCount",a.sourceCount,d,e,f,b,c),void 0!==a.restrictedSectionSource&&g.parseDataSource("restrictedSectionSource",a.restrictedSectionSource,d,e,f,b,c),void 0!==a.slotAvailabilitySource&&g.parseDataSource("slotAvailabilitySource",a.slotAvailabilitySource,d,e,f,b,c),0===h&&g._stopDataLoading(d,e,f)},__parseData:function(a,b){var c=this;if(a){var d,e,f,g,h=null,i=null,j=null,k=null,l=!1,m=!1;for(d=0;d<c.setting.calDataSource.length;d++)e=c.setting.calDataSource[d],$.cf.compareStrings(e.sourceFetchType,"All")&&!e.fetched&&(l=!0),$.cf.compareStrings(e.sourceFetchType,"DateRange")&&(m=!0);var n=!1;if(m){if($.cf.compareStrings(c.setting.visibleView,"DetailedMonthView")||$.cf.compareStrings(c.setting.visibleView,"MonthView")||$.cf.compareStrings(c.setting.visibleView,"AgendaView")&&$.cf.compareStrings(c.setting.agendaViewDuration,"Month"))n=!0;else if($.cf.compareStrings(c.tv.sLoadType,"Prev")){var o=c.compareDateTimes(c.tv.dLoadDt,c.tv.dPLSDt),p=!1;o>=0&&(p=!0);var q=c.compareDateTimes(c.tv.dLoadDt,c.tv.dPLEDt),r=!1;q<=0&&(r=!0),p&&r&&(n=!0)}else if($.cf.compareStrings(c.tv.sLoadType,"Next")){var s=c.compareDateTimes(c.tv.dLoadDt,c.tv.dNLSDt),t=!1;s>=0&&(t=!0);var u=c.compareDateTimes(c.tv.dLoadDt,c.tv.dNLEDt),v=!1;u<=0&&(v=!0),t&&v&&(n=!0)}else n=!0;if(n){var w=c.tv.dLoadDt.getMonth(),x=c.tv.dLoadDt.getFullYear(),y=c._getMonthAndYear(w,x,1,"Prev"),z=y[0],A=y[1],B=c.__getNumberOfDaysOfMonth(z,A);c.tv.dPLSDt=c.setDateInFormat({iDate:{d:1,M:z,y:A}},"START"),c.tv.dPLEDt=c.setDateInFormat({iDate:{d:B,M:z,y:A}},"START");var C=c._getMonthAndYear(w,x,1,"Next"),D=C[0],E=C[1],F=c.__getNumberOfDaysOfMonth(D,E);c.tv.dNLSDt=c.setDateInFormat({iDate:{d:1,M:D,y:E}},"START"),c.tv.dNLEDt=c.setDateInFormat({iDate:{d:F,M:D,y:E}},"START");var G=c._getMonthAndYear(w,x,c.setting.extraMonthsForDataLoading,"Prev"),H=G[0],I=G[1],J=c.__getNumberOfDaysOfMonth(H,I),K=c._getMonthAndYear(w,x,c.setting.extraMonthsForDataLoading,"Next"),L=K[0],M=K[1],N=c.__getNumberOfDaysOfMonth(L,M);$.cf.compareStrings(c.tv.sLoadType,"Load")||$.cf.compareStrings(c.setting.datasetModificationRule,"ReplaceAll")?(h=c.setDateInFormat({iDate:{d:1,M:H,y:I}},"START"),i=c.setDateInFormat({iDate:{d:N,M:L,y:M}},"END"),j=h,k=i):$.cf.compareStrings(c.tv.sLoadType,"Prev")?(h=c.setDateInFormat({iDate:{d:1,M:H,y:I}},"START"),i=c.setDateInFormat({iDate:{d:J,M:H,y:I}},"END"),j=new Date(h),k=c.setDateInFormat({iDate:{d:N,M:L,y:M}},"END")):$.cf.compareStrings(c.tv.sLoadType,"Next")&&(h=c.setDateInFormat({iDate:{d:1,M:L,y:M}},"START"),i=c.setDateInFormat({iDate:{d:N,M:L,y:M}},"END"),j=c.setDateInFormat({iDate:{d:1,M:H,y:I}},"START"),k=new Date(i))}}if(n||l)for($.cf.compareStrings(c.tv.sLoadType,"Load")&&(c.tv.oAECalendar=[],c.tv.oAEvents=[],c.tv.oASrcCnt=[],c.tv.oAResSec=[],c.tv.oASltAvail=[],c.tv.iMaxEvId=0),d=0;d<c.setting.calDataSource.length;d++){e=c.setting.calDataSource[d];var O=e.config||{},P=null,Q=null,R=null,S=null;if($.cf.compareStrings(e.sourceFetchType,"DateRange")&&(P=h,Q=i,R=j,S=k),$.cf.compareStrings(e.sourceType,"JSON")){var T=c.__parseJson(e.source);c._parseAllDataSources(T,O,!1,R,S,b)}else if($.cf.compareStrings(e.sourceType,"FUNCTION"))e.source.call(c,P,Q,R,S,O,b);else if($.cf.compareStrings(e.sourceType,"URL"))if(c.__isValidUrl(e.source)){for(var U=e.source,V=c._isGoogleCalendarUrl(U),W={},X={},Y=O.tzOffset||"",Z=0;Z<c.tv.oSURLParams.length;Z++){var _=c.tv.oSURLParams[Z];_.sourceId===e.sourceId&&(X=_.params)}if(V){for(U+="/events?callback=?",W.sortOrder="ascending",W.singleEvents="true",W.timeZone=c.setting.tz,W.maxResults=1e3,W.key=O.googleCalendarApiKey||"",f=0;f<X.length;f++)g=X[f],W[g.keyName]=g.values;$.cf.compareStrings(e.sourceFetchType,"DateRange")&&null!==P&&null!==Q&&(W.timeMin=c._convertToISO8601Date(P,Y),W.timeMax=c._convertToISO8601Date(Q,Y))}else{for(f=0;f<X.length;f++)g=X[f],W[g.keyName]=g.values;$.cf.compareStrings(e.sourceFetchType,"DateRange")&&(W.callback="?",null!==P&&null!==Q&&(W.startdate=c.getDateInFormat({date:P},"yyyy-MM-dd",!1,!1),W.enddate=c.getDateInFormat({date:Q},"yyyy-MM-dd",!1,!1),W.startdatetime=c.getDateInFormat({date:c.convertToUTC(P,Y)},"yyyy-MM-ddTHH:mm:ss",!1,!1),W.enddatetime=c.getDateInFormat({date:c.convertToUTC(Q,Y)},"yyyy-MM-ddTHH:mm:ss",!1,!1)))}c._requestJson(U,W,O,V,R,S,b)}else console.log("Invalid Event Source String");else console.log("Invalid Event Source.");e.fetched=!0}else b()}else b()},_requestJson:function(a,b,c,d,e,f,g){var h=this;console.log("sBaseUrl : "+a),console.log(b),h.incrementDataLoadingCount(1),$.getJSON(a,b).done(function(a){h.tv.iLoadCnt--,a=h.__parseJson(a),h._parseAllDataSources(a,c,d,e,f,g)}).fail(function(a,b,c){h._stopDataLoading(e,f,g),console.log("Request Failed : "+b+"  :  "+c)})},_getModifiedEventCalendarsArray:function(a){var b=this;$.cf.compareStrings(b.setting.datasetModificationRule,"Default")?b.tv.oAECalendar=b.tv.oAECalendar.concat(a):$.cf.compareStrings(b.setting.datasetModificationRule,"ReplaceAll")&&(b.tv.oAECalendar=a),b.__addEventCalendarToEventFilterCriteriaArray()},_getRecurringEventsArray:function(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=d.iCalUID,f=0,g=0;g<b.length;g++){var h=b[g],i=h[0],j=parseInt(h[1]);if(e===i){f=++j,b[g]=[i,f];break}}0===f&&b.push([e,1])}return b},_getModifiedEventsArray:function(b,c,d,e){var f,g,h,i,j,k,l,m,n=this,o=[],p=0,q=c.inputDateTimeFormat||"",r=c.formatSeparatorDateTime||"",s=c.formatSeparatorDate||"",t=c.formatSeparatorTime||"",u=c.inputTZOffset||n.setting.inputTZOffset,v=!1,w=.1;$.cf.isValid(c.singleColor)?(v=!0,i=$.cf.addHashToHexcode(c.singleColor),j=$.cf.getRGBAString(i,w),k=i,l=i,m=i):(j=c.backgroundColor||"",j=$.cf.compareStrings(j,"")||$.cf.compareStrings(j,"transparent")?"transparent":j,k=c.borderColor||"",k=$.cf.compareStrings(k,"")||$.cf.compareStrings(k,"transparent")?"transparent":k,l=c.textColor||"",l=$.cf.compareStrings(l,"")||$.cf.compareStrings(l,"transparent")?n.setting.textColor:l,m=c.nonAllDayEventsTextColor||"",m=$.cf.compareStrings(m,"transparent")?"transparent":$.cf.compareStrings(m,"")?j:m,j=$.cf.addHashToHexcode(j),k=$.cf.addHashToHexcode(k),l=$.cf.addHashToHexcode(l),m=$.cf.addHashToHexcode(m));var x,y=null;if(y=$.cf.isValid(c.icon)?c.icon:n.setting.eventIcon,d){var z=b,A=z.summary,B=z.items||[],C=n._getRecurringEventsArray(B);b=[];for(var D=0;D<C.length;D++)for(var E=C[D],F=E[0],G=E[1],H=1,I=0;I<B.length;I++){var J=B[I],K=J.iCalUID;if(F===K){K=K.replace("@google.com","");var L=!!J.start.date,M=L?J.start.date:J.start.dateTime,N=L?J.end.date:J.end.dateTime,O=J.summary||n.setting.miscStrings.emptyGoogleCalendarEventTitle,P=J.htmlLink||"";if(f=new a(K,L,M,N,A,O,"",P),b.push(f),++H>G)break}}}for(g=0;g<b.length;g++){if(h=b[g],null!==h.start){if(p++,null!==h.start&&(h.start=n._getDateObjectFromString(h.start,h.isAllDay,q,r,s,t,u)),null!==h.end?(h.end=n._getDateObjectFromString(h.end,h.isAllDay,q,r,s,t,u),h.endSpecified=!0):(h.end=n._getUnspecifiedEndDateOfEvent(h.isAllDay,h.start),h.endSpecified=!1),x=!1,$.cf.compareStrings(n.setting.datasetModificationRule,"ReplaceSpecified"))for(var Q=0;Q<n.tv.oAEvents.length;Q++)if(f=n.tv.oAEvents[Q],parseInt(f.id)===parseInt(h.id)){h.calEventId=f.calEventId,x=!0;break}x||(h.calEventId=++n.tv.iMaxEvId)}else h.id="DEL";""===h.title&&(h.title=n.setting.miscStrings.emptyEventTitle)}if(0!=b.length-p){var R=[];for(g=0;g<b.length;g++)h=b[g],$.cf.compareStrings(h.id,"DEL")||R.push(h);b=R}var S,T=c.changeColorBasedOn||n.setting.changeColorBasedOn||"Event";if($.cf.compareStrings(T,"EventCalendar")){o=[];for(var U=0;U<n.tv.oAECalendar.length;U++){var V=n.tv.oAECalendar[U];V.fromSingleColor=!1,$.cf.isValid(V.singleColor)?(i=$.cf.addHashToHexcode(V.singleColor),V.fromSingleColor=!0,V.backgroundColor=$.cf.getRGBAString(i,w),V.borderColor=i,V.textColor=i,V.nonAllDayEventsTextColor=i,o.push(i)):$.cf.isValid(V.backgroundColor)?o.push(V.backgroundColor):(S=n._generateUniqueColor(o),o.push(S),V.backgroundColor=$.cf.addHashToHexcode(S)),y=$.cf.isValid(V.icon)?V.icon:n.setting.eventIcon}}for($.cf.compareStrings(T,"EventSource")&&(j=j||n._generateUniqueColor(o),o.push(j)),g=0;g<b.length;g++){h=b[g];var W=n._getEventCalendarObject(h.calendar);$.cf.compareStrings(T,"Event")||$.cf.compareStrings(T,"EventCalendar")&&!$.cf.isValid(W)?($.cf.isValid(h.singleColor)?(i=$.cf.addHashToHexcode(h.singleColor),h.fromSingleColor=!0,h.backgroundColor=$.cf.getRGBAString(i,w),h.borderColor=i,h.textColor=i,h.nonAllDayEventsTextColor=i,o.push(i)):$.cf.isValid(h.backgroundColor)?(h.backgroundColor=$.cf.addHashToHexcode(h.backgroundColor),h.borderColor=$.cf.addHashToHexcode(h.borderColor),h.textColor=$.cf.addHashToHexcode(h.textColor),h.nonAllDayEventsTextColor=$.cf.addHashToHexcode(h.nonAllDayEventsTextColor),o.push(h.backgroundColor)):(S=n._generateUniqueColor(o),o.push(S),h.backgroundColor=$.cf.addHashToHexcode(S)),y=$.cf.isValid(h.isMarked)&&h.isMarked?$.cf.isValid(h.icon)?h.icon:"cs-icon-Mark":$.cf.isValid(h.icon)?h.icon:n.setting.eventIcon):$.cf.compareStrings(T,"EventCalendar")&&$.cf.isValid(W)?(h.fromSingleColor=W.fromSingleColor,h.backgroundColor=$.cf.addHashToHexcode(W.backgroundColor),h.borderColor=$.cf.addHashToHexcode(W.borderColor),h.textColor=$.cf.addHashToHexcode(W.textColor),h.nonAllDayEventsTextColor=$.cf.addHashToHexcode(W.nonAllDayEventsTextColor),h.icon=W.icon):$.cf.compareStrings(T,"EventSource")&&(h.fromSingleColor=v,h.backgroundColor=j,h.borderColor=k,h.textColor=l,h.nonAllDayEventsTextColor=m,h.icon=y),h.isDragNDropInMonthView=(!$.cf.isValid(h.isMarked)||!h.isMarked)&&($.cf.isValid(h.isDragNDropInMonthView)?h.isDragNDropInMonthView:$.cf.isValid(c.isDragNDropInMonthView)?c.isDragNDropInMonthView:W&&$.cf.isValid(W.isDragNDropInMonthView)?W.isDragNDropInMonthView:n.setting.isDragNDropInMonthView),h.isDragNDropInQuickAgendaView=(!$.cf.isValid(h.isMarked)||!h.isMarked)&&($.cf.isValid(h.isDragNDropInQuickAgendaView)?h.isDragNDropInQuickAgendaView:$.cf.isValid(c.isDragNDropInQuickAgendaView)?c.isDragNDropInQuickAgendaView:W&&$.cf.isValid(W.isDragNDropInQuickAgendaView)?W.isDragNDropInQuickAgendaView:n.setting.isDragNDropInQuickAgendaView),h.isDragNDropInTaskPlannerView=(!$.cf.isValid(h.isMarked)||!h.isMarked)&&($.cf.isValid(h.isDragNDropInTaskPlannerView)?h.isDragNDropInTaskPlannerView:$.cf.isValid(c.isDragNDropInTaskPlannerView)?c.isDragNDropInTaskPlannerView:W&&$.cf.isValid(W.isDragNDropInTaskPlannerView)?W.isDragNDropInTaskPlannerView:n.setting.isDragNDropInTaskPlannerView),h.isDragNDropInDetailView=(!$.cf.isValid(h.isMarked)||!h.isMarked)&&($.cf.isValid(h.isDragNDropInDetailView)?h.isDragNDropInDetailView:$.cf.isValid(c.isDragNDropInDetailView)?c.isDragNDropInDetailView:W&&$.cf.isValid(W.isDragNDropInDetailView)?W.isDragNDropInDetailView:n.setting.isDragNDropInDetailView),h.isResizeInDetailView=(!$.cf.isValid(h.isMarked)||!h.isMarked)&&($.cf.isValid(h.isResizeInDetailView)?h.isResizeInDetailView:$.cf.isValid(c.isResizeInDetailView)?c.isResizeInDetailView:W&&$.cf.isValid(W.isResizeInDetailView)?W.isResizeInDetailView:n.setting.isResizeInDetailView)}if(e)n.tv.oAEvents=n.tv.oAEvents.concat(b);else if($.cf.compareStrings(n.setting.datasetModificationRule,"Default"))n.tv.oAEvents=n.tv.oAEvents.concat(b);else if($.cf.compareStrings(n.setting.datasetModificationRule,"ReplaceAll"))n.tv.oAEvents=b;else if($.cf.compareStrings(n.setting.datasetModificationRule,"ReplaceSpecified"))for(var X=0;X<b.length;X++){var Y=b[X];x=!1;for(var Z=0;Z<n.tv.oAEvents.length;Z++){var _=n.tv.oAEvents[Z];if(parseInt(_.id)===parseInt(Y.id)){_=Y,x=!0;break}}x||n.tv.oAEvents.push(Y)}n.tv.oAEvents=n._sortEvents(n.tv.oAEvents)},_getModifiedSourceCountArray:function(a,b){for(var c=this,d=b.inputDateTimeFormat||"",e=b.formatSeparatorDateTime||"",f=b.formatSeparatorDate||"",g=b.formatSeparatorTime||"",h=b.inputTZOffset||c.setting.inputTZOffset,i=[],j=0;j<a.length;j++){var k=a[j];$.cf.isValid(k.date)&&(k.date=c._getDateObjectFromString(k.date,!0,d,e,f,g,h),$.cf.isValid(k.date)&&i.push(k))}if($.cf.compareStrings(c.setting.datasetModificationRule,"Default"))c.tv.oASrcCnt=c.tv.oASrcCnt.concat(i);else if($.cf.compareStrings(c.setting.datasetModificationRule,"ReplaceAll"))c.tv.oASrcCnt=i;else if($.cf.compareStrings(c.setting.datasetModificationRule,"ReplaceSpecified"))for(var l=0;l<i.length;l++){for(var m=!1,n=i[l],o=0;o<c.tv.oASrcCnt.length;o++){var p=c.tv.oASrcCnt[o];0===c.compareDateTimes(n.date,p.date)&&(p=n,m=!0)}m||c.tv.oASrcCnt.append(n)}return i},_getModifiedRestrictedSectionArray:function(a,b){for(var c=this,d=b.inputDateTimeFormat||"",e=b.formatSeparatorDateTime||"",f=b.formatSeparatorDate||"",g=b.formatSeparatorTime||"",h=b.inputTZOffset||c.setting.inputTZOffset,i=0;i<a.length;i++){var j=a[i];null!==j.start&&(null!==j.start&&(j.start=c._getDateObjectFromString(j.start,j.isAllDay,d,e,f,g,h)),null!==j.end&&(j.end=c._getDateObjectFromString(j.end,j.isAllDay,d,e,f,g,h)),j.isAllDay&&(j.start=c.setDateInFormat({date:j.start},"START"),j.end=c.setDateInFormat({date:j.end},"END"),j.end=c._normalizeEndDateTime(j.end)))}$.cf.compareStrings(c.setting.datasetModificationRule,"Default")?c.tv.oAResSec=c.tv.oAResSec.concat(a):$.cf.compareStrings(c.setting.datasetModificationRule,"ReplaceAll")&&(c.tv.oAResSec=a),c._checkAllowDroppable()},_getModifiedSlotAvailabilityArray:function(a,b){for(var c=this,d=b.inputDateTimeFormat||"",e=b.formatSeparatorDateTime||"",f=b.formatSeparatorDate||"",g=b.formatSeparatorTime||"",h=b.inputTZOffset||c.setting.inputTZOffset,i=[],j=0;j<a.length;j++){var k=a[j];null!==k.start&&null!==k.end&&(null!==k.start&&(k.start=c._getDateObjectFromString(k.start,k.isAllDay,d,e,f,g,h)),null!==k.end&&(k.end=c._getDateObjectFromString(k.end,k.isAllDay,d,e,f,g,h)),""!==k.start&&""!==k.end&&(k.isAllDay&&(k.start=c.setDateInFormat({date:k.start},"START"),k.end=c.setDateInFormat({date:k.end},"END")),k.end=c._normalizeEndDateTime(k.end),i.push(k)))}if($.cf.compareStrings(c.setting.datasetModificationRule,"Default"))c.tv.oASltAvail=c.tv.oASltAvail.concat(i);else if($.cf.compareStrings(c.setting.datasetModificationRule,"ReplaceAll"))c.tv.oASltAvail=i;else if($.cf.compareStrings(c.setting.datasetModificationRule,"ReplaceSpecified"))for(var l=0;l<i.length;l++){for(var m=!1,n=i[l],o=0;o<c.tv.oASltAvail.length;o++){var p=c.tv.oASltAvail[o];0===c.compareDateTimes(n.start,p.start)&&0===c.compareDateTimes(n.end,p.end)&&$.cf.compareStrings(n.status,p.status)&&(p=n,m=!0)}m||c.tv.oASltAvail.append(n)}},_dataCleaning:function(a,b){var c=this;$.cf.compareStrings(c.tv.sLoadType,"Load")?c.tv.oAEvents.length>0&&(c.tv.oAEvents=c._sortEvents(c.tv.oAEvents)):($.cf.compareStrings(c.tv.sLoadType,"Prev")||$.cf.compareStrings(c.tv.sLoadType,"Next"))&&(c.tv.oAEvents.length>0&&(null!==a&&null!==b&&c._deleteEventsOutOfDuration(a,b),c.tv.oAEvents=c._sortEvents(c.tv.oAEvents)),c.tv.oASrcCnt.length>0&&null!==a&&null!==b&&c._deleteSourceCountOutOfDuration(a,b),c.tv.oAResSec.length>0&&null!==a&&null!==b&&c._deleteRestrictedSectionsOutOfDuration(a,b),c.tv.oASltAvail.length>0&&null!==a&&null!==b&&c._deleteSlotAvailabilityOutOfDuration(a,b))},_deleteEventsOutOfDuration:function(a,b){var c,d,e=this;for(c=0;c<e.tv.oAEvents.length;c++)d=e.tv.oAEvents[c],$.cf.compareStrings(e.tv.sLoadType,"Prev")?e.compareDateTimes(d.start,b)>0&&(d.id="DEL"):$.cf.compareStrings(e.tv.sLoadType,"Next")&&e.compareDateTimes(d.end,a)<0&&(d.id="DEL");var f=[];for(c=0;c<e.tv.oAEvents.length;c++)d=e.tv.oAEvents[c],$.cf.compareStrings(d.id,"DEL")||f.push(d);e.tv.oAEvents=f},_deleteSourceCountOutOfDuration:function(a,b){var c,d,e=this;for(c=0;c<e.tv.oASrcCnt.length;c++){d=e.tv.oASrcCnt[c];var f=new Date(d.date);$.cf.compareStrings(e.tv.sLoadType,"Prev")?e.compareDates(f,b)>0&&(d.date="DEL"):$.cf.compareStrings(e.tv.sLoadType,"Next")&&e.compareDates(f,a)<0&&(d.date="DEL")}var g=[];for(c=0;c<e.tv.oASrcCnt.length;c++)d=e.tv.oASrcCnt[c],$.cf.compareStrings(d.date,"DEL")||g.push(d);e.tv.oASrcCnt=g},_deleteRestrictedSectionsOutOfDuration:function(a,b){var c,d,e=this;for(c=0;c<e.tv.oAResSec.length;c++)d=e.tv.oAResSec[c],$.cf.compareStrings(e.tv.sLoadType,"Prev")?e.compareDateTimes(d.start,b)>0&&(d.start="DEL"):$.cf.compareStrings(e.tv.sLoadType,"Next")&&e.compareDateTimes(d.end,a)<0&&(d.start="DEL");var f=[];for(c=0;c<e.tv.oAResSec.length;c++)d=e.tv.oAResSec[c],$.cf.compareStrings(d.start,"DEL")||f.push(d);e.tv.oAResSec=f},_deleteSlotAvailabilityOutOfDuration:function(a,b){var c,d,e=this;for(c=0;c<e.tv.oASltAvail.length;c++){d=e.tv.oASltAvail[c];var f=new Date(d.start),g=new Date(d.end);if($.cf.compareStrings(e.tv.sLoadType,"Prev"))e.compareDateTimes(f,b)>0&&(d.start="DEL");else if($.cf.compareStrings(e.tv.sLoadType,"Next")){var h=e.compareDateTimes(f,a),i=e.compareDateTimes(g,b);h<0&&i<0&&(d.start="DEL")}}var j=[];for(c=0;c<e.tv.oASltAvail.length;c++)d=e.tv.oASltAvail[c],$.cf.compareStrings(d.start,"DEL")||j.push(d);e.tv.oASltAvail=j},addEventsForSource:function(a,b){var c=this;a=c.__parseJson(a);for(var d=0;d<c.setting.calDataSource.length;d++){var e=c.setting.calDataSource[d];if(e.sourceId===b){a.length>0&&c._getModifiedEventsArray(a,e.config||{},"string"==typeof e.source&&c._isGoogleCalendarUrl(e.source),!0);break}}},_replaceEventWithId:function(a,b){for(var c=this,d=0;d<c.tv.oAEvents.length;d++){var e=c.tv.oAEvents[d];if(parseInt(a)===parseInt(e.id)){e=b;break}}},_replaceEventsWithRule:function(a,b){var c=this;c._removeEventsWithRule(a),c.tv.oAEvents=c.tv.oAEvents.concat(b)},replaceEvents:function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c],e=d.replaceId,f=d.replaceRule;$.cf.isValid(e)?b._replaceEventWithId(e,d.event):$.cf.isValid(f)&&b._replaceEventsWithRule(f,d.events)}},revertToOriginalEvent:function(a,b,c){var d=this;d.__updateEventWithId(a.calEventId,b,c)&&d.__reloadCurrentView(!0,!1)},_removeEventsWithIds:function(a){for(var b=this,c=[],d=0;d<a.length;d++)for(var e=0;e<b.tv.oAEvents.length;e++){var f=b.tv.oAEvents[e];parseInt(f.id)!==parseInt(a[d])&&c.push(f.id)}b.tv.oAEvents=c},_removeEventsWithRule:function(a){for(var b=this,c=[],d=0;d<b.tv.oAEvents.length;d++){var e=b.tv.oAEvents[d];a(e)||c.push(e)}b.tv.oAEvents=c},removeEvents:function(a){for(var b=this,c=0;c<a.length;c++){var d=a[c],e=d.removeIds,f=d.removeRule;$.cf.isValid(e)&&b._removeEventsWithIds(e),$.cf.isValid(f)&&b._removeEventsWithRule(f)}},_getEventCalendarObject:function(a){for(var b=this,c=0;c<b.tv.oAECalendar.length;c++){var d=b.tv.oAECalendar[c];if($.cf.compareStrings(a,d.calendar))return d}return null},getEventWithId:function(a){for(var b=this,c=0;c<b.tv.oAEvents.length;c++){var d=b.tv.oAEvents[c];if(d.calEventId===parseInt(a))return d}return{}},__updateEventWithId:function(a,b,c){for(var d=this,e=!1,f=0;f<d.tv.oAEvents.length;f++){var g=d.tv.oAEvents[f];if(g.calEventId===parseInt(a)){g.start=b,g.end=null!==c?c:new Date(b.getTime()+30*$.CalenStyle.extra.iMS.m),d.tv.oAEvents[f]=g,e=!0;break}}return d.tv.oAEvents=d._sortEvents(d.tv.oAEvents),e},_normalizeEndDateTime:function(a){return 0===a.getHours()&&0===a.getMinutes()&&0===a.getSeconds()&&(a=new Date(a.getTime()-$.CalenStyle.extra.iMS.m)),a},_getUnspecifiedEndDateOfEvent:function(a,b){var c=this;return a?new Date(b.getFullYear(),b.getMonths(),b.getDate()+(c.setting.allDayEventDuration-1),0,0,0,0):new Date(b.getTime()+c.setting.eventDuration*$.CalenStyle.extra.iMS.m)},_getStartAndEndDatesOfEvent:function(a,b,c){var d,e,f=this;return a?(d=f.setDateInFormat({date:b},"START"),e=null!==c?f.setDateInFormat({date:c},"START"):f._getUnspecifiedEndDateOfEvent(a,d)):(d=new Date(b),e=null!==c?new Date(c):f._getUnspecifiedEndDateOfEvent(a,d)),[d,e]},__getStartAndEndDatesOfEventForView:function(a,b,c){var d=this,e=d._getStartAndEndDatesOfEvent(a,b,c),f=new Date(e[0]),g=new Date(e[1]),h=d.compareDates(f,d.tv.dVDSDt),i=d.compareDates(g,d.tv.dVDEDt),j=new Date(f),k=new Date(g);return h<0&&(j=d.tv.dVDSDt),i>0&&(k=d.tv.dVDEDt),[j,k]},getDurationOfEventInHHmmFormat:function(a,b){var c=Math.ceil((b.getTime()-a.getTime())/$.CalenStyle.extra.iMS.m);return[Math.floor(c/60),c%60]},__getNumberOfHoursOfEvent:function(a,b,c){var d=this,e=d._getStartAndEndDatesOfEvent(a,b,c),f=e[0],g=e[1],h=g.getTime()-f.getTime(),i=Math.round(h/$.CalenStyle.extra.iMS.h);return i<=0&&h>0&&(i=1),i},__getDateIndexInView:function(a){for(var b=this,c=0;c<b.tv.iNoVDay;c++){var d=b.tv.dAVDt[c];if(0===b.compareDates(d,a))return c}return-1},getNumberOfDaysOfEvent:function(a,b,c,d,e,f){var g,h=this;g=a&&0===h.compareDateTimes(b,c)&&f?new Date(c.getTime()+$.CalenStyle.extra.iMS.d):new Date(c),0===g.getHours()&&0===g.getMinutes()&&g.setMinutes(g.getMinutes()-1);var i=0,j=h.__getNumberOfHoursOfEvent(a,b,g),k=h._getStartAndEndDatesOfEvent(a,b,g),l=k[0],m=k[1],n=h.compareDates(l,m);if(j<=0)a&&n<=0?(j=24,i=1):console.log("Invalid Start And End Dates "+b+" "+g);else if(n<0){var o=h.setDateInFormat({date:l},"START"),p=h.setDateInFormat({date:m},"START"),q=(p.getTime()-o.getTime())/$.CalenStyle.extra.iMS.h;if(i=Math.round(q/24)+1,e){for(var r=new Date(o),s=0,t=0;t<i;t++)h.__findWhetherDateIsVisibleInCurrentView(r,a||j>23,l,m)&&s++,r.setDate(r.getDate()+1);i=s}}else 0===n&&(e?h.__findWhetherDateIsVisibleInCurrentView(l,a||j>23,l,m)&&(i=1):i=1);return d?[i,j]:i},_sortEvents:function(a){for(var b=this,c=0;c<a.length;c++)for(var d=a[c],e=d.start,f=b.__getNumberOfHoursOfEvent(d.isAllDay,d.start,d.end),g=d.isAllDay||f>23||$.cf.isValid(d.isMarked)&&d.isMarked,h=c+1;h<a.length;h++){var i,j=a[h],k=j.start,l=b.__getNumberOfHoursOfEvent(j.isAllDay,j.start,j.end),m=j.isAllDay||l>23||$.cf.isValid(j.isMarked)&&j.isMarked,n=b.compareDates(e,k),o=b.compareDateTimes(e,k),p=0===n,q=!g&&m,r=g&&m,s=!g&&!m,t=n>0,u=p&&q,v=p&&o>0&&(r||s),w=p&&(q||r||s)&&0===o&&f<l;(t||u||v||w)&&(i=d,d=j,j=i,a[c]=d,a[h]=j,e=d.start,f=l,g=m)}return a},_whetherEventIsBetweenDates:function(a,b,c){var d,e,f=this,g=a.start,h=a.end,i=a.isAllDay,j=f.compareDates(h,b),k=f.compareDates(g,c);if(0===j&&0===h.getHours()&&0===h.getMinutes())if(i){var l=f.__getNumberOfHoursOfEvent(i,g,h)>0,m=f.__getNumberOfHoursOfEvent(i,b,h)>0;l&&!m&&(j=-1)}else j=-1;return d=k<=0,e=j>=0,!(!d||!e)},getArrayOfEventsForView:function(a,b){var c=this;a=c.setDateInFormat({date:a},"START"),b=c.setDateInFormat({date:b},"END");for(var d=[],e=[],f=0;f<c.tv.oAEvents.length;f++){var g=c.tv.oAEvents[f];c._whetherEventIsBetweenDates(g,a,b)&&(d.push(g),c.setting.eventFilterCriteria.length>0?c.__whetherToDisplayAnEventOnCalendar(g)&&e.push(g):e.push(g))}return c.setting.eventFilterCriteria.length>0&&c.__setEventCountBasedOnCriteria(d),e},__getSourceCountForDate:function(a){var b,c,d,e,f,g,h,i,j,k,l=this,m=0;if(l.tv.oASrcCnt.length>0){for(b=0;b<l.tv.oASrcCnt.length;b++)if(d=l.tv.oASrcCnt[b],0===l.compareDates(d.date,a)){m=d.count;break}}else if(null!==l.setting.parentObject)for(c=0;c<l.setting.calDataSource.length;c++)if(e=l.setting.calDataSource[c],f=e.config.sourceCountType,$.cf.compareStrings(f,"Event"))for(b=0;b<l.setting.parentObject.tv.oAEvents.length;b++)g=l.setting.parentObject.tv.oAEvents[b],h=g.start,i=g.end,j=l.compareDates(a,h)>=0,k=l.compareDates(a,i)<=0,j&&k&&m++;else if($.cf.compareStrings(f,"FreeTimeSlot")||$.cf.compareStrings(f,"BusyTimeSlot"))for(b=0;b<l.setting.parentObject.tv.oASltAvail.length;b++)g=l.setting.parentObject.tv.oASltAvail[b],h=g.start,i=g.end,j=l.compareDates(a,h)>=0,k=l.compareDates(a,i)<=0,j&&k&&($.cf.compareStrings(f,"FreeTimeSlot")&&$.cf.compareStrings(g.status,"Free")||$.cf.compareStrings(f,"BusyTimeSlot")&&$.cf.compareStrings(g.status,"Busy"))&&m++;return m},getEventCountAndIsMarkedDay:function(a,b){var c,d,e=this,f=e.getArrayOfEventsForView(a,a),g=f.length;for(c=0;c<g;c++)if(d=f[c],$.cf.isValid(d.isMarked)&&d.isMarked){var h=d.fromSingleColor?d.textColor:d.backgroundColor;return h=$.cf.compareStrings(h,"")||$.cf.compareStrings(h,"transparent")?"transparent":h,[g,!0,h]}return[g,!1,""]},_setHeightForEvents:function(){for(var a=this,b=0;b<a.setting.viewsToDisplay.length;b++){var c=a.setting.viewsToDisplay[b].viewName,d=$.CalenStyle.extra.oEventClass[c];if($.cf.isValid(d)){var e="<div class="+d+"></div>",f=$(e).hide().appendTo("body"),g=$.cf.getSizeValue(f,"height");f.remove(),$.cf.isValid(g)&&g>2&&($.CalenStyle.extra.iEventHeights[c]=g)}}},_generateUniqueColor:function(a){var b,c=this,d="";if(c.setting.eventColorsArray.length>a.length)for(var e=0;e<c.setting.eventColorsArray.length;e++){var f=c.setting.eventColorsArray[e];b=!1;for(var g=0;g<a.length;g++){var h=a[g];if(f===h){b=!0;break}}b||(d=f)}if($.cf.compareStrings(d,"")){b=!0;for(var i=0;b;){if(b=!1,d=c._generateColor(),a.length>0)for(var j=0;j<a.length;j++)if(d===a[j]){b=!0;break}i+=1}}return d},_generateColor:function(){var a=Math.floor(100*Math.random())+100,b=Math.floor(100*Math.random())+100,c=Math.floor(100*Math.random())+100,d=a.toString(16);d=1===d.length?"0"+d:d;var e=b.toString(16);e=1===e.length?"0"+e:e;var f=c.toString(16);return f=1===d.length?"0"+f:f,d+e+f},__bindClick:function(a){for(var b,c=a.data,d=0;d<$.CalenStyle.extra.oArrCalenStyle.length;d++){var e=$.CalenStyle.extra.oArrCalenStyle[d];e.tv.pluginId===c.pluginId&&(b=e)}a.stopPropagation();var f=$(b.elem).find(c.eventElemSelector).hasClass("cEditingEvent"),g=$.cf.getTimestamp()-b.tv.iTSEndEditing,h=$("body").hasClass("br-ie")?900:100;f||!f&&g<h||(b.setting.eventClicked?b.setting.eventClicked.call(b,b.setting.visibleView,c.eventElemSelector,b.getEventWithId(c.eventId)):$.cf.compareStrings(c.url,"")||window.open(c.url,"_blank"))},__getElementsAtPoint:function(a,b){return $("body").find("*").filter(function(){var c=$(this).offset().left,d=c+$(this).width(),e=$(this).offset().top,f=e+$(this).height();return a>=c&&a<=d&&b>=e&&b<=f})}},c.prototype=$.extend(c.prototype,{_arrayContains:function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return 1;return 0},_setNextPreviousMonthDates:function(){var a=this,b=new Date(a.tv.dCMDt.getTime()-30*$.CalenStyle.extra.iMS.d);b.setDate(15),a.tv.dPMDt=new Date(b);var c=new Date(a.tv.dCMDt.getTime()+30*$.CalenStyle.extra.iMS.d);c.setDate(15),a.tv.dNMDt=new Date(c)},_updateMonthTable:function(){var a=this;a.__getCurrentViewDates();var b="";b+="<thead>",b+="<tr class='cmvMonthTableRowDayHeader'>",a.setting.displayWeekNumInMonthView&&(b+="<td class='cmvDayHeader cmvWeekNumber cmvThinBorderRight cmvFirstColumn'></td>");var c,d=a.setting.weekStartDay,e=a.setting.excludeNonBusinessHours?a.tv.iBsDays:7;for(c=0;c<7;c++){var f="";a.setting.displayWeekNumInMonthView||0!==c||(f="cmvFirstColumn"),(a.setting.excludeNonBusinessHours&&a.tv.bABsDays[d]||!a.setting.excludeNonBusinessHours)&&(b+="<td id='cmvDayName"+(d+1)+"' class='cmvDayHeader cmvTableColumns "+f+"'>"+a.getDateInFormat({iDate:{D:d}},"DDD",!1,!0)+"</td>"),d++,d>6&&(d=0)}b+="</tr>",b+="</thead>",a.tv.dCMDt=new Date(a.setting.selectedDate),a.tv.dCMDt.setDate(15),a._setNextPreviousMonthDates();var g=$.CalenStyle.extra.dToday.getDate(),h=$.CalenStyle.extra.dToday.getMonth(),i=$.CalenStyle.extra.dToday.getFullYear();b+="<tbody>";for(var j=0,k=1;k<=a.tv.iWkInMonth;k++){b+="<tr id='cmvMonthTableRow"+k+"' class='cmvMonthTableRows'>";if(a.setting.displayWeekNumInMonthView){var l=a.tv.dAVDt[j],m=a.setDateInFormat({date:a.tv.dAVDt[j+6]},"END"),n=a.__getWeekNumber(l,m),o="cmvDay cmvWeekNumber cmvThinBorderRight cmvWeekNumberBorderLeft";1===k?o+=" cmvWeekNumberBorderBottom":k===a.tv.iWkInMonth?o+=" cmvWeekNumberBorderTop":o+=" cmvWeekNumberBorderBottom cmvWeekNumberBorderTop";var p=a._getWeekForDate($.CalenStyle.extra.dToday,!1),q=p[0],r=p[1];0===a.compareDates(q,l)&&0===a.compareDates(r,m)&&(o+=" cTodayHighlightTextColor",!0),b+="<td id='"+l.getTime()+"' class='"+o+"'><span>"+n+"</span></td>"}for(c=0;c<e;c++){var s,t,u=a.tv.dAVDt[j],v=u.getDate(),w=u.getMonth(),x=u.getFullYear(),y=a.__getSourceCountForDate(u),z=$.cf.compareStrings(a.setting.eventIndicatorInDatePicker,"DayNumberBold")&&($.cf.compareStrings(a.setting.visibleView,"DatePicker")||null!==a.setting.parentObject)&&y>0?" cBold":"",A=[],B="",C="cmvDay cmvTableColumns cmvTableColumn"+c;a.tv.dCMDt.getMonth()!==w?C+=" cmvOtherMonthDay":C+=" cmvCurrentMonthDay",a.setting.displayWeekNumInMonthView||0!==c||(C+=" cmvFirstColumn"),t="cmvDay-"+v+"-"+w+"-"+x;var D=a.setting.selectedDate.getDate(),E=a.setting.selectedDate.getMonth(),F=a.setting.selectedDate.getFullYear();for(v===g&&w===h&&x===i?C+=" cTodayHighlightTextColor":v===D&&w===E&&x===F&&(C+=" cCurrentDateHighlightColor"),($.cf.compareStrings(a.setting.visibleView,"MonthView")&&!$.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")||$.cf.compareStrings(a.setting.visibleView,"DatePicker"))&&(C+=" clickableLink"),a.tv.bABsDays[u.getDay()]||(C+=" cNonBusinessHoursBg"),A=a._getRestrictedSectionForCurrentView(u),s=0;s<A.length;s++){var G,H=A[s],I=new Date(H.start),J=0===a.compareDates(u,I),K=new Date(H.end),L=0===a.compareDates(u,K);J||(I=a._normalizeDateTime(u,"START","T")),L||(K=a._normalizeDateTime(u,"END","T")),G=Math.round((K.getTime()-I.getTime())/$.CalenStyle.extra.iMS.h),(G>23||H.isAllDay)&&($.cf.isValid(H.backgroundColor)&&(B="style='background: "+$.cf.addHashToHexcode(H.backgroundColor)+";'"),$.cf.isValid(H.class)&&(C+=" "+H.class))}b+="<td id='"+t+"' class='"+C+"' "+B+">",b+="<span class='cmvDayNumber"+z+"'>"+a.getNumberStringInFormat(v,0,!0)+"</span>",$.cf.compareStrings(a.setting.visibleView,"MonthView")?($.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&(b+="<span class='cmvDisplayAllEvents'>..</span>"),$.cf.compareStrings(a.setting.eventIndicatorInMonthView,"DayHighlight")?b+="<div class='cmvMonthTableRowIndicator' ><span>&nbsp;</span></div>":$.cf.compareStrings(a.setting.eventIndicatorInMonthView,"Custom")&&(b+="<div class='cmvMonthTableRowCustom' >&nbsp;</div>")):$.cf.compareStrings(a.setting.visibleView,"DatePicker")&&(b+="<div class='cElemDatePickerCustom'>",$.cf.compareStrings(a.setting.eventIndicatorInDatePicker,"Dot")&&y>0&&(b+="<span class='cElemDatePickerDot'></span>"),b+="</div>"),b+="</td>",j++}b+="</tr>"}b+="</tbody>",$(a.elem).find(".cmvMonthTableMain").html(b),$(a.elem).find(".cTodayHighlightTextColor").find(".cmvDayNumber").addClass("cTodayHighlightCircle"),$.cf.compareStrings(a.setting.visibleView,"MonthView")&&$.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"ModifyEventList")&&$(a.elem).find(".cCurrentDateHighlightColor").find(".cmvDayNumber").addClass("cCurrentHighlightCircle"),a.adjustMonthTable(),a.setting.addEventsInMonthView||a.adjustMonthTable(),a._setMonthStrings(),$.CalenStyle.extra.bTouchDevice||a._addHoverClassesInMonthView()},_updateMonthTableContents:function(a){var b=this;b.setting.addEventsInMonthView&&!$.cf.compareStrings(b.setting.visibleView,"DatePicker")?$.cf.compareStrings(b.setting.eventIndicatorInMonthView,"DayHighlight")?b._updateDayHighlightViewInMonthView(a):$.cf.compareStrings(b.setting.eventIndicatorInMonthView,"Events")?b._addEventContInMonthView(a):$.cf.compareStrings(b.setting.eventIndicatorInMonthView,"Custom")&&b.__parseData(a,function(){b.setting.modifyCustomView&&b.setting.modifyCustomView.call(b,b.tv.dAVDt),$.cf.compareStrings(b.setting.actionOnDayClickInMonthView,"ChangeDate")||b._displayEventOnDayClickInMonthView(),b.adjustMonthTable(),b.__modifyFilterBarCallback()}):$.cf.compareStrings(b.setting.visibleView,"DatePicker")&&b._updateDayHighlightInDatePickerView(a),$.cf.compareStrings(b.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")||b._makeDayClickableInMonthView()},_updateDayHighlightInDatePickerView:function(a){var b=this;b.__parseData(a,function(){for(var a=0;a<b.tv.dAVDt.length;a++){var c=b.tv.dAVDt[a],d="#cmvDay-"+c.getDate()+"-"+c.getMonth()+"-"+c.getFullYear(),e=$(b.elem).find(d),f=b.__getSourceCountForDate(c),g=($.cf.compareStrings(b.setting.visibleView,"DatePicker")||null!==b.setting.parentObject)&&f>0?" cBold":"";if($.cf.compareStrings(b.setting.eventIndicatorInDatePicker,"DayNumberBold"))""!==g&&e.find(".cmvDayNumber").addClass(g);else if($.cf.compareStrings(b.setting.eventIndicatorInDatePicker,"Dot")&&0===e.find(".cElemDatePickerCustom").length){var h="<div class='cElemDatePickerCustom'>";h+="<span class='cElemDatePickerDot'></span>",h+="</div>",e.append(h)}}})},_updateDayHighlightViewInMonthView:function(a){var b=this;b.__parseData(a,function(){for(var a=0;a<b.tv.dAVDt.length;a++){var c=b.tv.dAVDt[a],d="#cmvDay-"+c.getDate()+"-"+c.getMonth()+"-"+c.getFullYear(),e=b.setDateInFormat({date:c},"START"),f=b.setDateInFormat({date:c},"END"),g=b.getEventCountAndIsMarkedDay(e,f),h=g[0],i=g[1],j=g[2],k=$(b.elem).find(d+" .cmvMonthTableRowIndicator");0!==h&&(h<b.setting.averageEventsPerDayForDayHighlightView?h*=100/b.setting.averageEventsPerDayForDayHighlightView:h=100,h>100&&(h=100)),i&&(k.addClass("cMarkedDayLineIndicator"),$.cf.isValid(j)&&k.find("span").css({background:j})),k.find("span").css({width:h+"%"}),$.cf.compareStrings(b.setting.visibleView,"MonthView")&&$.cf.compareStrings(b.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&0===$(b.elem).find(".cmvMonthTableMain "+d).has(".cmvDisplayAllEvents").length&&$(b.elem).find(".cmvMonthTableMain "+d).prepend("<span class='cmvDisplayAllEvents'>...</span>")}$.cf.compareStrings(b.setting.actionOnDayClickInMonthView,"ChangeDate")||b._displayEventOnDayClickInMonthView(),b.adjustMonthTable(),b.addRemoveViewLoader(!1,"cEventLoaderBg"),b.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),b.__modifyFilterBarCallback()})},updateMonthTableAndContents:function(a){var b=this;$(b.elem).find(".cmvDisplayAllEvents").remove(),$(b.elem).find(".cmvEvent").remove(),$(b.elem).find(".cdmvEvent").remove(),$(b.elem).find(".cHiddenEventsIndicator").remove(),$(b.elem).find(".cHiddenEventsCont").remove(),$(b.elem).find(".cmvDialog").remove(),b._updateMonthTable(),b._updateMonthTableContents(a)},_addHoverClassesInMonthView:function(){var a=this;$(a.elem).find(".cContHeaderLabelMonth, .cContHeaderLabelYear").hasClass("sClickableClass")&&$(a.elem).find(".cContHeaderLabelMonth, .cContHeaderLabelYear").hover(function(a){$(this).addClass("cContHeaderLabelHover")},function(a){$(this).removeClass("cContHeaderLabelHover")}),$(a.elem).find(".cmvDay").hover(function(a){$(this).addClass("cContHeaderButtonsHover")},function(a){$(this).removeClass("cContHeaderButtonsHover")})},_addEventContInMonthView:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t=this,u="",v=null,w=null,x=0,y=!1;$.cf.compareStrings(t.setting.visibleView,"MonthView")&&t.setting.displayEventsInMonthView&&(u+="<div class='cmvEventCont'><div class='cmvEventContSmall'></div><div class='cmvEventContAllDay'></div></div>",$(t.elem).find(".cmvMonthTableMain .cmvDay").not(".cmvWeekNumber").append(u)),$(t.elem).find(".cmvDay").droppable({scope:"Events",over:function(a,u){for(c=$(u.draggable),e=c.attr("id"),f=c.attr("data-id"),g=t.getEventWithId(f),h=".Event-"+f,v=null,w=null,x=0,$(t.elem).find(h).addClass("cEditingEventClone"),null!==g.start&&(v=g.start),null!==g.end&&(w=g.end),null!==g.isAllDay&&(x=g.isAllDay),j=t.getNumberOfDaysOfEvent(x,v,w,!0,!1,!0),k=j[0],l=j[1],m=$(this).attr("id"),n=m.split("-"),o=new Date(n[3],n[2],n[1],0,0,0,0),p=new Date(o),q=!1,r=t.setDateInFormat({iDate:{d:parseInt(n[1]),M:parseInt(n[2]),y:parseInt(n[3]),H:v.getHours(),m:v.getMinutes(),s:v.getSeconds()}},""),s=new Date(r.getTime()+(w.getTime()-v.getTime())),t.tv.bChkDroppable&&(c=$(t.elem).find("#"+e+".ui-draggable-dragging"),d=c.attr("data-droppableid"),y=t._findWhetherEventEnteredNonDroppableZone(r,s,x,k,d),y?(c.addClass("cCursorNotAllowed"),c.find(".cEventLink").addClass("cCursorNotAllowed")):(c.removeClass("cCursorNotAllowed"),c.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(t.elem).find(".cmvDay").removeClass("cActivatedCell"),b=0;b<k;b++)b>0&&(p=new Date(p.getTime()+$.CalenStyle.extra.iMS.d),q=t.compareDates(p,t.tv.dVEDt)),(0===b||q<=0)&&t.__findWhetherDateIsVisibleInCurrentView(p,x||l>23,v,w)&&(i="#cmvDay-"+p.getDate()+"-"+p.getMonth()+"-"+p.getFullYear(),$(t.elem).find(i).addClass("cActivatedCell"))},drop:function(a,b){c=$(b.draggable),e=c.attr("id"),f=c.attr("data-id"),g=t.getEventWithId(f),h=".Event-"+f,v=null,w=null,x=0,null!==g.start&&(v=g.start),null!==g.end&&(w=g.end),null!==g.isAllDay&&(x=g.isAllDay),j=t.getNumberOfDaysOfEvent(x,v,w,!0,!1,!0),k=j[0],l=j[1],m=$(this).attr("id"),n=m.split("-"),r=t.setDateInFormat({iDate:{d:parseInt(n[1]),M:parseInt(n[2]),y:parseInt(n[3]),H:v.getHours(),m:v.getMinutes(),s:v.getSeconds()}},""),s=new Date(r.getTime()+(w.getTime()-v.getTime())),t.tv.bChkDroppable&&(c=$(t.elem).find("#"+e+".ui-draggable-dragging"),d=c.attr("data-droppableid"),y=t._findWhetherEventEnteredNonDroppableZone(r,s,x,k,d),c.removeClass("cCursorNotAllowed"),c.find(".cEventLink").removeClass("cCursorNotAllowed"));var i=t.compareDates(w,$.CalenStyle.extra.dToday);if(i>=0?$(t.elem).find(h).removeClass("cEditingEventClone"):i<0&&$(t.elem).find(h).removeClass("cEditingEventClone").addClass("cBlurredEvent"),t.tv.draggableParent===$(this).attr("id")||y)return t.tv.iTSEndEditing=$.cf.getTimestamp(),t.tv.bDroppedInDifferent=!1,setTimeout(function(){var a=$("#"+e+".cEventClone");$("#"+e).attr("style",a.attr("style")),$(h).removeClass("cEditingEvent cEditingEventUI cEventBeingDragged"),a.remove()},300),!0;t.tv.bDroppedInDifferent=!0;var o="";$.cf.compareStrings(t.setting.visibleView,"MonthView")&&(o+=!0===x||l>23?".cmvEventContAllDay":".cmvEventContSmall"),t.__updateEventWithId(f,r,s)&&($(t.elem).find(".cmvDisplayAllEvents").remove(),$(t.elem).find(".cmvEvent").remove(),$(t.elem).find(".cdmvEvent").remove(),$(t.elem).find(".cHiddenEventsIndicator").remove(),$(t.elem).find(".cHiddenEventsCont").remove(),$(t.elem).find(".cmvDialog").remove(),t._addEventsInMonthView(null),$.cf.compareStrings(t.setting.visibleView,"DetailedMonthView")&&t._adjustEventsInMonthView()),$(t.elem).find(".cmvDay").removeClass("cActivatedCell"),t.setting.saveChangesOnEventDrop&&t.setting.saveChangesOnEventDrop.call(t,g,v,w,r,s),t.tv.iTSEndEditing=$.cf.getTimestamp()}}),$.cf.compareStrings(t.setting.visibleView,"MonthView")&&t.adjustMonthTable(),t.__parseData(a,function(){t._addEventsInMonthView(null),t.adjustMonthTable(),t.__modifyFilterBarCallback()})},_addEventsInMonthView:function(a){var b,c,d,e,f=this,g=new Date($.CalenStyle.extra.dToday);g.setDate(1);var h=$.cf.isValid(f.setting.hideEventIcon[f.setting.visibleView])?f.setting.hideEventIcon[f.setting.visibleView]:!!$.cf.isValid(f.setting.hideEventIcon.Default)&&f.setting.hideEventIcon.Default,i=$.cf.isValid(f.setting.hideEventTime[f.setting.visibleView])?f.setting.hideEventTime[f.setting.visibleView]:!!$.cf.isValid(f.setting.hideEventTime.Default)&&f.setting.hideEventTime.Default,j=f.setting.is24Hour?"HH:mm":"h[:m]sm",k=f.setting.excludeNonBusinessHours?f.tv.iBsDays:7;if($.cf.isValid(a)&&a.oArrEvents.length>0)b=!0,c=a.oArrEvents,d=a.dDayStart,e=a.dDayEnd;else{$.cf.compareStrings(f.setting.visibleView,"DetailedMonthView")&&$(f.elem).find(".cdmvEventContMain").html(""),c=f.getArrayOfEventsForView(f.tv.dVSDt,f.tv.dVEDt),f.tv.bAWkRw=[];for(var l=0;l<6;l++){for(var m=[],n=0;n<f.tv.iMxEvRw-1;n++)m.push(new Array(0,0,0,0,0,0,0));f.tv.bAWkRw.push(m)}}if(c.length>0){for(var o=$.CalenStyle.extra.iEventHeights[f.setting.visibleView],p="",q=$(f.elem).find(".cmvTableColumn0").width(),r=f._getHeightForAllDayEventInMonthView(),s=f._getHeightForSmallEventInMonthView(),t=f._getMarginValueForSmallEventInMonthView(),u=t+"px "+t+"px",v=0;v<c.length;v++){var w=c[v],x=null,y=null,z=0,A="",B="",C="",D=!1,E=!1,F="",G="Event-"+w.calEventId;null!==w.start&&(x=w.start),null!==w.end&&(y=w.end),null!==w.isAllDay&&(z=w.isAllDay),null!==w.title&&(A=w.title),null!==w.desc&&(B=w.desc),null!==w.type&&w.type,null!==w.url&&(C=w.url),null!==w.droppableId&&(F=w.droppableId),null!==w.isDragNDropInMonthView&&(E=w.isDragNDropInMonthView),null!==w.isMarked&&(D=w.isMarked),D&&(z=!0);var H=f.getNumberOfDaysOfEvent(z,x,y,!0,!0,!0),I=H[0],J=H[1];if(I>0){var K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_,aa,ba,ca,da,ea="",fa=I,ga="",ha=0,ia=new Date(x),ja=new Date(y),ka="",la="",ma="",na="",oa="",pa=!1,qa=!1,ra=!1,sa=!1,ta=0;if($.cf.compareStrings(f.setting.visibleView,"DetailedMonthView")){if(p=".cdmvEvent",b)f.compareDates(x,d)<0&&Math.abs(f.__getDifference("m",d,x))>1&&(pa=!0,ga="Left",ia=new Date(d)),f.compareDates(e,y)<0&&Math.abs(f.__getDifference("m",e,y))>1&&(qa=!0,ga="Right",ja=new Date(e)),ea="#cmvDay-"+d.getDate()+"-"+d.getMonth()+"-"+d.getFullYear();else{for(f.compareDates(x,f.tv.dVSDt)<0&&Math.abs(f.__getDifference("m",f.tv.dVSDt,x))>1&&(ga="Left",ia=new Date(f.tv.dVSDt)),f.compareDates(f.tv.dVEDt,y)<0&&Math.abs(f.__getDifference("m",f.tv.dVEDt,y))>1&&(ga="Right",ja=new Date(f.tv.dVEDt)),M=new Date(ia),ca=!0;!(f.__findWhetherDateIsVisibleInCurrentView(M,z||J>23,ia,ja)||(M.setDate(M.getDate()+1),ca=!1,f.compareDates(M,ja)>0)););ia=new Date(M),ea="#cmvDay-"+ia.getDate()+"-"+ia.getMonth()+"-"+ia.getFullYear()}if(ba=f.getNumberOfDaysOfEvent(z,ia,ja,!0,!0,ca),L=ba[0],fa=ba[0],(ha=ba[1])>0){V="cdmvEvent ",Q=w.backgroundColor,Q=!$.cf.isValid(Q)||$.cf.compareStrings(Q,"transparent")?"transparent":Q,R=w.borderColor||$.cf.addHashToHexcode(f.setting.borderColor),R=!$.cf.isValid(R)||$.cf.compareStrings(R,"transparent")?"transparent":R,S=w.textColor||$.cf.addHashToHexcode(f.setting.textColor),S=!$.cf.isValid(S)||$.cf.compareStrings(S,"transparent")?$.cf.addHashToHexcode(f.setting.textColor):S,T=$.cf.isValid(w.nonAllDayEventsTextColor)?w.nonAllDayEventsTextColor:w.backgroundColor,T=!$.cf.isValid(T)||$.cf.compareStrings(T,"transparent")?w.backgroundColor:T,!0===z||J>23?D?w.fromSingleColor?(ka+="background: "+Q+"; ",ka+="border-color: "+R+"; ",ka+="color: "+S+"; ",ma+="color: "+S+"; ",la="background: "+S+"; color: #FFFFFF","background: "+S+"; "):(R=Q,ka+="background: "+$.cf.getRGBAString(Q,.1)+"; ",ka+="border-color: "+R+"; ",ka+="color: "+Q+"; ",ma+="color: "+Q+"; ",la="background: "+Q+"; color: "+S,"background: "+Q+"; "):(ka+="background: "+Q+"; ",ka+="border-color: "+R+"; ",ka+="color: "+S+"; ",ma+="color: "+S+"; ",la="color: "+S+"; ","background: "+S+"; "):f.setting.onlyTextForNonAllDayEvents?(V+="cEventOnlyText ",ka+="color: "+T+"; ",ka+="border-color: transparent; ",fa=1,ga="",ma+="color: "+T+"; ",la="color: "+T+"; ","background: "+T+"; "):(ka+="background: "+Q+"; ",ka+="border-color: "+R+"; ",ka+="color: "+S+"; ",ma+="color: "+S+"; ",la="color: "+S+"; ","background: "+S+"; "),oa="border-color: "+(w.fromSingleColor?S:"#000000"),U=D?$.cf.isValid(w.icon)&&"Dot"!==w.icon?w.icon:"cs-icon-Mark":$.cf.isValid(w.icon)?w.icon:f.setting.eventIcon,f.compareDates(y,g)<0&&(V+="cBlurredEvent "),E&&(V+="EventDraggable cDragNDrop "),f.setting.isTooltipInMonthView&&(V+="cEventTooltip "),V+=G,D&&(V+=" cMarkedDayEvent"),A,B;var ua,va,wa=$(f.elem).find(ea).parent(),xa=wa.attr("id"),ya=parseInt(xa.replace("cmvMonthTableRow",""))-1,za=$(f.elem).find(ea).index();if(f.setting.displayWeekNumInMonthView&&za--,b)Da=0,Fa=v,Ga=0,Ha=1,Oa=G+"-Hidden",Aa=Da+"|"+(Fa+1)+"|"+Ga+"|"+Ha,ua=o+"px",na=ka,na+="height: "+ua+"; ","transparent"===R&&(na+="border-width: 0px; "),V+=" cHiddenEvent",da=$.cf.isValid(F)?"data-droppableid='"+F+"'":"",Y="<div id='"+Oa+"' class='"+V+"' style='"+na+"'  data-pos='"+Aa+"' "+da+" title='' data-id='"+w.calEventId+"'>",Y+="<a class='cEventLink' style='"+ma+"'>",va="",qa&&pa?(va="cPartialEvent",Y+="<span class='"+va+" cPartialEventLeft' style='"+oa+"'></span>",Y+="<span class='"+va+" cPartialEventRight' style='"+oa+"'></span>"):(qa||pa)&&(va="cPartialEvent",pa&&(va+=" cPartialEventLeft"),qa&&(va+=" cPartialEventRight"),Y+="<span class='"+va+"' style='"+oa+"'></span>"),D?(Y+="<span class='cdmvEventTitle'>"+A+"</span>",Y+="<span class='cdmvEventIcon "+U+"' style='"+la+"'></span>"):(!i&&!1===z&&(1===I||I>1&&!pa&&qa)&&(Y+="<span class='cdmvEventTime'>"+f.getDateInFormat({date:x},j,f.setting.is24Hour,!0)+"</span>"),!i&&!1===z&&(1===I||I>1&&pa&&!qa)&&(Y+="<span class='cdmvEventTimeRight'>"+f.getDateInFormat({date:y},j,f.setting.is24Hour,!0)+"</span>"),h||$.cf.compareStrings(U,"Dot")||(Y+="<span class='cdmvEventIcon "+U+"' style='"+la+"'></span>"),Y+="<span class='cdmvEventTitle'>"+A+"</span>"),Y+="</a>",Y+="</div>",$(f.elem).find(".cHiddenEventsCont").append(Y),Z="#"+Oa,_=$(f.elem).find(Z),aa=_.find(".cEventLink"),W={},X=f.getEventDateTimeString(x,y,z,"&&"),P=X.split("&&"),W.title=A,W.startDateTime=P[0],W.endDateTime=P[1],_.data("tooltipcontent",W),f.setting.eventRendered&&f.setting.eventRendered.call(f,w,_,aa,f.setting.visibleView,!0),($.cf.isValid(C)||f.setting.eventClicked)&&aa.on($.CalenStyle.extra.sClickHandler,{url:C,eventId:w.calEventId,eventElemSelector:Z,view:"MonthView",pluginId:f.tv.pluginId},f.__bindClick);else for(var Aa,Ba=0,Ca=0,Da=ya;Da<f.tv.bAWkRw.length;Da++){G="Event-"+w.calEventId;var Ea=f.tv.bAWkRw[Da],Fa=-1;if(pa=!1,qa=!1,$.cf.compareStrings(ga,"Left")&&(pa=!(Ba>0)),$.cf.compareStrings(ga,"Right")&&(qa=!0),!(Ba<fa))break;var Ga=Ba>0&&!ra&&!sa?0:za,Ha=fa-Ba,Ia=(f.setting.excludeNonBusinessHours?f.tv.iBsDays:7)-Ga;ra=!1,sa=!1,ta=0,Ha>Ia&&(Ha=Ia,qa=!0),Ba>0&&(pa=!0);var Ja,Ka,La,Ma,Na=Ga+Ha;for(Ka=0;Ka<Ea.length&&(Ja=Ea[Ka],-1===Fa);Ka++){for(Ma=0,La=Ga;La<Na;La++)if(0===Ja[La]&&Ma<Ha){if(f.setting.hideExtraEvents?La===Ga?Ma++:Ma>0&&Ma++:Ma++,Ma===Ha){Fa=Ka;break}}else if(f.setting.hideExtraEvents)break;f.setting.hideExtraEvents&&Ma>0&&Ma<Ha&&(Fa=Ka,qa=!0,sa=!0,ta=Ma)}if(Ga=Ga>k-1?k-1:Ga,f.setting.hideExtraEvents&&-1!==Fa||!f.setting.hideExtraEvents){-1===Fa&&(Ea.push([0,0,0,0,0,0,0]),Fa=Ea.length-1),Ja=Ea[Fa];var Oa=G+"-"+ ++Ca;if(Aa=Da+"|"+(Fa+1)+"|"+Ga+"|"+(sa?ta:Ha),ua=o+"px",na=ka,na+="height: "+ua+"; ","transparent"===R&&(na+="border-width: 0px; "),da=$.cf.isValid(F)?"data-droppableid='"+F+"'":"",Y="<div id='"+Oa+"' class='"+V+"' style='"+na+"'  data-pos='"+Aa+"' "+da+" title='' data-id='"+w.calEventId+"'>",Y+="<a class='cEventLink' style='"+ma+"'>",va="",qa&&pa?(va="cPartialEvent",Y+="<span class='"+va+" cPartialEventLeft' style='"+oa+"'></span>",Y+="<span class='"+va+" cPartialEventRight' style='"+oa+"'></span>"):(qa||pa)&&(va="cPartialEvent",pa&&(va+=" cPartialEventLeft"),qa&&(va+=" cPartialEventRight"),Y+="<span class='"+va+"' style='"+oa+"'></span>"),D?(Y+="<span class='cdmvEventTitle'>"+A+"</span>",Y+="<span class='cdmvEventIcon "+U+"' style='"+la+"'></span>"):(!i&&!1===z&&(1===Ca&&!pa&&I>1||1===I)&&(Y+="<span class='cdmvEventTime'>"+f.getDateInFormat({date:x},j,f.setting.is24Hour,!0)+"</span>"),i||!1!==z||!(fa>1||(sa?ta:Ha)>1||J>23)||qa||(Y+="<span class='cdmvEventTimeRight'>"+f.getDateInFormat({date:y},j,f.setting.is24Hour,!0)+"</span>"),h||$.cf.compareStrings(U,"Dot")||(Y+="<span class='cdmvEventIcon "+U+"' style='"+la+"'></span>"),Y+="<span class='cdmvEventTitle'>"+A+"</span>"),Y+="</a>",Y+="</div>",$(f.elem).find(".cdmvEventContMain").append(Y),Z="#"+Oa,_=$(f.elem).find(Z),aa=_.find(".cEventLink"),W={},X=f.getEventDateTimeString(x,y,z,"&&"),P=X.split("&&"),W.title=A,W.startDateTime=P[0],W.endDateTime=P[1],_.data("tooltipcontent",W),f.setting.eventRendered&&f.setting.eventRendered.call(f,w,_,aa,f.setting.visibleView,!1),($.cf.isValid(C)||f.setting.eventClicked)&&aa.on($.CalenStyle.extra.sClickHandler,{url:C,eventId:w.calEventId,eventElemSelector:Z,view:"MonthView",pluginId:f.tv.pluginId},f.__bindClick),D)for(K=$(f.elem).find(ea),N=new Date(ia),O=0;O<L;O++)O>0&&(N.setDate(N.getDate()+1),ea="#cmvDay-"+N.getDate()+"-"+N.getMonth()+"-"+N.getFullYear(),K=$(f.elem).find(ea)),0===K.find(".cMarkedDayIndicator").length&&K.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>"),$.cf.isValid(Q)&&(w.fromSingleColor?K.css({background:Q}):K.css({background:$.cf.getRGBAString(Q,.1)}));if(f.setting.hideExtraEvents){var Pa=Ga+(sa?ta:Ha);for(La=Ga;La<Pa;La++)Ja[La]=1,Ba++;sa&&Da--,ia=new Date(ia.getTime()+(Pa-Ga)*$.CalenStyle.extra.iMS.d),ea="#cmvDay-"+ia.getDate()+"-"+ia.getMonth()+"-"+ia.getFullYear(),za=$(f.elem).find(ea).index()}else for(La=Ga;La<Na;La++)Ja[La]=1,Ba++}else{var Qa=$(f.elem).find(".cdmvEventContMain"),Ra=f.setDateInFormat({date:ia},"START"),Sa=f.setDateInFormat({date:ia},"END"),Ta=f.getEventCountAndIsMarkedDay(Ra,Sa)[0],Ua=Ra.getDate()+"-"+Ra.getMonth()+"-"+Ra.getFullYear();G="HiddenEvents-"+Ua;var Va=Ta-Ea.length,Wa=f.getNumberStringInFormat(Va,0,!0),Xa=$(f.elem).find("#cmvDay-"+Ua),Ya=Xa.closest(".cmvMonthTableRows").index(),Za=Xa.index();if(Za=f.setting.displayWeekNumInMonthView?Za-1:Za,Aa=Ya+"|"+(Ea.length+1)+"|"+Za+"|1",0===Qa.find("#"+G).length&&Va>0){var $a="<span class='cHiddenEventsIndicator clickableLink' id='"+G+"' data-pos='"+Aa+"'>";$a+=f.setting.hiddenEventsIndicatorLabel.replace("(count)",Wa),$a+="</span>",Qa.append($a)}else Qa.find("#"+G).html(f.setting.hiddenEventsIndicatorLabel.replace("(count)",Wa));Ba++,Ga!==k-1&&(ra=!0,Da--),ia=new Date(ia.getTime()+$.CalenStyle.extra.iMS.d),ea="#cmvDay-"+ia.getDate()+"-"+ia.getMonth()+"-"+ia.getFullYear(),za=$(f.elem).find(ea).index()}}}}else if($.cf.compareStrings(f.setting.visibleView,"MonthView")){p=".cmvEvent";var _a=0,ab=0;for(f.compareDates(x,f.tv.dVSDt)<0&&(ga="Left",ia=new Date(f.tv.dVSDt)),f.compareDates(f.tv.dVEDt,y)<0&&(ga="Right",ja=new Date(f.tv.dVEDt)),M=new Date(ia),ca=!0;!(f.__findWhetherDateIsVisibleInCurrentView(M,z||J>23,ia,ja)||(M.setDate(M.getDate()+1),ca=!1,f.compareDates(M,ja)>0)););if(ia=new Date(M),ba=f.getNumberOfDaysOfEvent(z,ia,ja,!0,!1,ca),fa=ba[0],ha=ba[1],Q=w.fromSingleColor?w.textColor:w.backgroundColor,Q=$.cf.compareStrings(Q,"")||$.cf.compareStrings(Q,"transparent")?"transparent":Q,D)for(N=new Date(ia),O=0;O<fa;O++)O>0&&N.setDate(N.getDate()+1),ea="#cmvDay-"+N.getDate()+"-"+N.getMonth()+"-"+N.getFullYear(),K=$(f.elem).find(ea),$.cf.isValid(Q)&&K.css({background:$.cf.getRGBAString(Q,.1)});else{!0===z||ha>23||(ga="",fa=1);for(var bb=new Date(ia),cb=bb.getTime(),db=1;db<=fa;db++){if(f.__findWhetherDateIsVisibleInCurrentView(bb,z||J>23,ia,ja)){ea="#cmvDay-"+bb.getDate()+"-"+bb.getMonth()+"-"+bb.getFullYear();var eb=!1;if(1===db&&(eb=!0),f.setting.displayEventsInMonthView){if(V="cmvEvent ",!0===z||J>23?(V+="cmvEventAllDay ",0===f.compareDates(bb,x)&&1===fa?V+="cmvEventAllDaySingle ":0===f.compareDates(bb,x)?V+="cmvEventAllDayFirst ":0===f.compareDates(bb,y)?V+="cmvEventAllDayLast ":V+="cmvEventAllDayMiddle "):V+="cmvEventSmall ",f.compareDates(y,g)<0&&(V+="cBlurredEvent "),E&&(V+="EventDraggable cDragNDrop "),f.setting.isTooltipInMonthView&&(V+="cEventTooltip "),V+=G,A,B,1===z||!0===z||J>23){if(eb){for(var fb,gb=$(f.elem).find(".cmvMonthTableMain "+ea+" .cmvEventCont .cmvEventContAllDay").children(),hb=[],ib=0;ib<gb.length;ib++)hb.push($(f.elem).find(gb[ib]).position().top);var jb=f._getHeightForAllDayEventInMonthView(),kb=2;fb=kb;var lb=jb+kb;if(hb.length>0&&0===ab)if(hb.length<2)for(;1===f._arrayContains(hb,fb);)fb+=lb;else ab=1;_a=fb}}else{var mb=Math.floor(q/(s+t))-1,nb=$(f.elem).find(".cmvMonthTableMain "+ea+" .cmvEventCont .cmvEventContSmall").children().length;nb>=mb&&(ab=1)}0===ab&&(na="background: "+Q+"; ",na+=" top: "+_a+"px;",na+=!0===z||J>23?" height: "+r+"px;":" height: "+s+"px; width: "+s+"px; margin: "+u+";",W={},X=f.getEventDateTimeString(x,y,z,"&&"),P=X.split("&&"),W.title=A,W.startDateTime=P[0],W.endDateTime=P[1],da=$.cf.isValid(F)?"data-droppableid='"+F+"'":"",Y="<span id='"+G+"' class='"+V+"' style='"+na+"' "+da+" title='' data-id='"+w.calEventId+"'>",Y+="</span>",!0===z||J>23?$(f.elem).find(".cmvMonthTableMain "+ea+" .cmvEventCont .cmvEventContAllDay").append(Y):$(f.elem).find(".cmvMonthTableMain "+ea+" .cmvEventCont .cmvEventContSmall").append(Y))}}cb+=$.CalenStyle.extra.iMS.d,bb.setTime(cb)}Z="."+G,W={},X=f.getEventDateTimeString(x,y,z,"&&"),P=X.split("&&"),W.title=A,W.startDateTime=P[0],W.endDateTime=P[1],$(f.elem).find(Z).data("tooltipcontent",W),$(f.elem).find(Z).on($.CalenStyle.extra.sClickHandler,{url:C,eventId:w.calEventId,eventElemSelector:Z,view:"MonthView",pluginId:f.tv.pluginId},f.__bindClick)}}}}b?(f.setting.isTooltipInMonthView&&f._addTooltipInMonthView(".cEventTooltip.cHiddenEvent"),f.setting.isDragNDropInMonthView&&f._makeEventDraggableInMonthView(".EventDraggable.cHiddenEvent")):($.cf.compareStrings(f.setting.actionOnDayClickInMonthView,"ChangeDate")||f._displayEventOnDayClickInMonthView(),f.setting.hideExtraEvents&&f._hiddenEventsIndicatorActionHandler(),f.setting.displayEventsInMonthView&&(f.setting.isTooltipInMonthView&&f._addTooltipInMonthView(".cEventTooltip"),f.setting.isDragNDropInMonthView&&f._makeEventDraggableInMonthView(".EventDraggable")),null!==f.setting.datePickerObject&&f.setting.datePickerObject.refreshView(),f.setting.eventsAddedInView&&f.setting.eventsAddedInView.call(f,f.setting.visibleView,p))}else console.log("to._addEventsInMonthView - No Events");f.addRemoveViewLoader(!1,"cEventLoaderBg"),f.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_hiddenEventsIndicatorActionHandler:function(){var a=this;$(a.elem).find(".cHiddenEventsIndicator").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation();var c,d,e,f,g,h=$(this),i=h.attr("id"),j=$(a.elem).find(".cHiddenEventsCont");i=i.replace("HiddenEvents-",""),c=i.split("-"),d=new Date(parseInt(c[2]),parseInt(c[1]),parseInt(c[0]),0,0,0,0),e=a.setDateInFormat({date:d},"START"),f=a.setDateInFormat({date:d},"END"),g=a.getArrayOfEventsForView(e,f);var k="#cmvDay-"+i,l=$(a.elem).find(k),m=l.position().left,n=l.closest(".cmvMonthTableRows").position().top,o=l.width(),p="cHiddenEventsContHeader";if(0===a.compareDates(d,$.CalenStyle.extra.dToday)&&(p+=" cHiddenEventsContToday"),$.cf.compareStrings(typeof a.setting.hiddenEventsIndicatorAction,"function"))a.setting.hiddenEventsIndicatorAction.call(a,d,g,!0);else if($.cf.compareStrings(typeof a.setting.hiddenEventsIndicatorAction,"string")&&$.cf.compareStrings(a.setting.hiddenEventsIndicatorAction,"ShowEventDialog")&&g.length>0){j.length>0&&j.remove();var q="<div class='cHiddenEventsCont' data-date='"+i+"'></span>";q+="<span class='"+p+"'>",q+=a.getDateInFormat({date:d},"DDD MMM dd, yyyy",!1,!0),q+="<span class='cHiddenEventsContClose'>&times;</span>",q+="</span>",q+="</div>",$(a.elem).find(".cdmvEventContMain").append(q);var r={};j=$(a.elem).find(".cHiddenEventsCont"),r.oArrEvents=g,r.dDayStart=e,r.dDayEnd=f,a._addEventsInMonthView(r),j.css({left:m,top:n,width:o+o/2}),a._adjustEventsInMonthView(!0),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(b){b.stopPropagation(),a._endHiddenEventsIndicatorHandlerAction()}),$(a.elem).find(".cdmvEventContMain, .cdmvEvent:not(.cHiddenEvent), .cdmvEvent:not(.cHiddenEvent) .cEventLink").on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(b){b.stopPropagation(),a._endHiddenEventsIndicatorHandlerAction()}),j.find(".cHiddenEventsContClose").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation(),a._endHiddenEventsIndicatorHandlerAction()})}})},_endHiddenEventsIndicatorHandlerAction:function(){var a=this;if($.cf.compareStrings(typeof a.setting.hiddenEventsIndicatorAction,"function"))a.setting.hiddenEventsIndicatorAction.call(a,null,null,!1);else if($.cf.compareStrings(typeof a.setting.hiddenEventsIndicatorAction,"string")&&$.cf.compareStrings(a.setting.hiddenEventsIndicatorAction,"ShowEventDialog")){var b=$(a.elem).find(".cHiddenEventsCont");b.find(".cHiddenEvent").remove(),b.remove()}},_displayEventOnDayClickInMonthView:function(){var a=this;if($.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"DisplayEventListDialog"))a._displayEventsForDayInDialog(),$(document).off($.CalenStyle.extra.sClickHandler+".CalenStyleDialog"),$(document).on($.CalenStyle.extra.sClickHandler+".CalenStyleDialog",function(b){a._closeDialogOfEventsForDay()});else if(a.tv.bCMVDisEvLst){var b="";a.setting.displayEventsForPeriodInList&&(b=a.setting.displayEventsForPeriodInList.call(a,a.setDateInFormat({date:a.setting.selectedDate},"START"),a.setDateInFormat({date:a.setting.selectedDate},"END"))||""),$(a.elem).find(".cListOuterCont").html(b),a.setting.eventListAppended&&a.setting.eventListAppended.call(a)}},_adjustEventsInMonthView:function(a){var b=this;if($.cf.compareStrings(b.setting.visibleView,"DetailedMonthView")){var c=30,d=$(b.elem).find(".cmvMonthTableRows").css("min-height"),e=$.CalenStyle.extra.iEventHeights[b.setting.visibleView],f=$(b.elem).find(".cdmvEvent, .cHiddenEventsIndicator"),g=0,h=$(b.elem).find(".cdmvEventContMain").width(),i=0,j=30,k=0;if(d=parseInt(d.replace("px","")),b.setting.hideExtraEvents)g=$(b.elem).find(".cmvMonthTableMain").height(),i=$(b.elem).find(".cmvDay").width(),i+=i/2,i=i<200?200:i;else{g+=$(b.elem).find(".cmvMonthTableRowDayHeader").height();for(var l=0;l<b.tv.bAWkRw.length;l++){var m=b.tv.bAWkRw[l],n=m.length,o=c+n*e;o<d&&(o=d),$(b.elem).find("#cmvMonthTableRow"+(l+1)).css({height:o}),g+=o}$(b.elem).find(".cmvMonthTableMain").css({height:g}),$(b.elem).find(".cdmvEventContMain").css({height:g})}var p,q,r,s=$(b.elem).find(".cmvMonthTableMain").height();b.setting.hideExtraEvents?($(b.elem).find(".cmvTableContainer").height()<30&&$(b.elem).find(".cmvTableContainer").css({height:s}),$(b.elem).find(".cmvTableContainerOuter").height()<30&&$(b.elem).find(".cmvTableContainerOuter").css({height:s}),p=$(b.elem).find(".calendarContInner").height(),p=s+($(b.elem).find(".cContHeader").length>0?$(b.elem).find(".cContHeader").height():0),b.tv.bDisABar&&(p+=$(b.elem).find(".cActionBar").height()),$(b.elem).find(".calendarContInner").css({height:p}),q=p,b.tv.bDisFBar&&($.cf.compareStrings(b.setting.filterBarPosition,"Top")||$.cf.compareStrings(b.setting.filterBarPosition,"Bottom"))&&(q=p+$(b.elem).find(".cFilterBar").height()),$(b.elem).find(".calendarCont").css({height:q})):($(b.elem).find(".cmvTableContainer").css({height:s}),$(b.elem).find(".cmvTableContainerOuter").css({height:s}),p=s+($(b.elem).find(".cContHeader").length>0?$(b.elem).find(".cContHeader").height():0),b.tv.bDisABar&&(p+=$(b.elem).find(".cActionBar").height()),$(b.elem).find(".calendarContInner").css({height:p}),q=p,b.tv.bDisFBar&&($.cf.compareStrings(b.setting.filterBarPosition,"Top")||$.cf.compareStrings(b.setting.filterBarPosition,"Bottom"))&&(q+=$(b.elem).find(".cFilterBar").height()),$(b.elem).find(".calendarCont").css({height:q}),r=q,$(b.elem).find(".calendarCont").parent().css({height:r})),b.tv.bDisFBar&&$.cf.compareStrings(b.setting.filterBarPosition,"Bottom")&&$(b.elem).find(".cFilterBar").css({top:p}),b.tv.iDocHtPrev<$(document).height()?$(window).height()<$(document).height()&&b.adjustMonthTable():$(window).height()>$(document).height()&&b.adjustMonthTable();var t=g+$.CalenStyle.extra.iBorderOverhead;$(b.elem).find(".cContHeader").length>0&&(t+=$(b.elem).find(".cContHeader").outerHeight()),b.tv.bDisABar&&(t+=$(b.elem).find(".cActionBar").outerHeight()),b.tv.bDisFBar&&($.cf.compareStrings(b.setting.filterBarPosition,"Top")||$.cf.compareStrings(b.setting.filterBarPosition,"Bottom"))&&(t+=$(b.elem).find(".cFilterBar").outerHeight()),b.tv.bCMVDisEvLst&&(t+=$(b.elem).find(".cListOuterCont").height());for(var u=0;u<f.length;u++){var v,w,x,y,z,A,B=f[u],C=$(b.elem).find(B).attr("data-pos"),D=C.split("|"),E=parseInt(D[0])+1,F=parseInt(D[1]),G=parseInt(D[2]),H=parseInt(D[3]);if($(B).hasClass("cHiddenEvent"))v=0===k?30:v+e+2,w=10,x=i-25,j+=e+2,k++;else if(!a)if(v=$(b.elem).find("#cmvMonthTableRow"+E).position().top,w=$(b.elem).find(".cmvTableColumn"+G).position().left,b.setting.hideExtraEvents&&$(b.elem).find("#cmvMonthTableRow"+E).height()<40){var I=$(".cmvDayNumber").width();x=$(b.elem).find(".cmvTableColumn"+G).width()-(I-10),v+=6,w+=I}else v+=c+(F-1)*(e+1),w+=2*$.CalenStyle.extra.iBorderOverhead,x=$(b.elem).find(".cmvTableColumn"+G).width(),H>1&&(y=G+(H-1),z=$(b.elem).find(".cmvTableColumn"+y).position().left+2*$.CalenStyle.extra.iBorderOverhead,A=$(b.elem).find(".cmvTableColumn"+y).width(),x=z+A-w),x-=2*$.CalenStyle.extra.iBorderOverhead;if($(B).css({left:w,top:v,width:x}),!$(B).hasClass("cHiddenEventsIndicator")){var J=$(B).find(".cdmvEventTitle"),K=$(B).height(),L=$(B).find(".cdmvEventIcon"),M=null!==L?L.outerWidth(!0):0,N=$(B).find(".cdmvEventTime"),O=null!==N?N.outerWidth(!0):0,P=0,Q=$(B).find(".cdmvEventTimeRight");null!==Q&&(P=null!==Q?Q.outerWidth(!0):0);var R=$(B).find(".cPartialEventLeft").outerWidth(!0)+$(B).find(".cPartialEventRight").outerWidth(!0),S=x-(M+O+P+10*$.CalenStyle.extra.iBorderOverhead+R);J.css({height:K,"line-height":K+"px",width:S}),N.css({height:K,"line-height":K+"px"}),null!==Q&&Q.css({height:K,"line-height":K+"px"})}}var T=$(b.elem).find(".cHiddenEventsCont");if(b.setting.hideExtraEvents&&T.length>0){var U=T.position().left,V=T.position().top;j+=10,i=i>h?h-10:i,U=U+i>h?h-i-1:U,j=j>g?g-10:j,V=V+j>g?g-j-2:V,T.css({width:i,height:j,left:U,top:V})}b.setting.isDragNDropInMonthView&&b._makeEventDraggableInMonthView(".EventDraggable")}},_displayEventsForDayInDialog:function(){var a=this,b=$(a.elem).find(".calendarCont").parent().outerWidth(),c=$(a.elem).find(".calendarCont").parent().outerHeight();$(a.elem).find(".cmvDay").css("cursor","pointer"),$(a.elem).find(".cmvDay, .cmvDisplayAllEvents").off($.CalenStyle.extra.sClickHandler),$(a.elem).find(".cmvDay, .cmvDisplayAllEvents").on($.CalenStyle.extra.sClickHandler,function(d){d.stopPropagation();var e,f=$(this).hasClass("cmvDay")?$(this):$(this).parent(),g=f.attr("id"),h=a._getDateForDayIdInMonthView(g),i=a.setting.is24Hour?"HH:mm":"h[:m]sm",j="cmvDialog-"+h.getDate()+"-"+h.getMonth()+"-"+h.getFullYear(),k=$(a.elem).find(".cmvDialog");if(null!==k&&(e=k.attr("data-date"),k.remove(),e===j))return!1;var l=a.getArrayOfEventsForView(h,h),m={};if(m.x=d.pageX||d.originalEvent.touches[0].pageX||d.originalEvent.changedTouches[0].pageX,m.y=d.pageY||d.originalEvent.touches[0].pageY||d.originalEvent.changedTouches[0].pageY,a.setting.displayEventListDialog)a.setting.displayEventListDialog.call(a,h,l,m);else if(l.length>0){var n=f.parent().attr("id"),o=parseInt(n.replace("cmvMonthTableRow","")),p=0,q=h.getDay();p=q<a.setting.weekStartDay?6-a.setting.weekStartDay+q+1:q-a.setting.weekStartDay;var r=f.height(),s=f.width(),t=3*r,u=1.25*s;u=u<200?200:u,b=$(a.elem).find(".calendarCont").parent().outerWidth(),c=$(a.elem).find(".calendarCont").parent().outerHeight();var v="";v+="<div class='cmvDialog' data-date='"+j+"'>",v+="<span class='cmvDialogTooltip'></span>",v+="<div class='cmvDialogInnerCont'>",v+="<table class='cmvDialogTable'>";for(var w=0;w<l.length;w++){var x,y,z,A,B,C=l[w],D=C.title,E=C.id,F=C.start,G=C.end,H=C.isAllDay,I=C.isMarked,J="cmvDialogEvent",K="",L="",M=$.cf.isValid(a.setting.hideEventIcon[a.setting.visibleView])?a.setting.hideEventIcon[a.setting.visibleView]:!!$.cf.isValid(a.setting.hideEventIcon.Default)&&a.setting.hideEventIcon.Default,N=$.cf.isValid(a.setting.hideEventTime[a.setting.visibleView])?a.setting.hideEventTime[a.setting.visibleView]:!!$.cf.isValid(a.setting.hideEventTime.Default)&&a.setting.hideEventTime.Default,O="",P=a.compareDates(F,h),Q=a.compareDates(G,h);H?(A="All Day",B=0!==Q?$.cf.compareStrings(a.setting.duration,"Default")?a.__getDurationBetweenDates(h,G,"dhm",!1,!1):a.setting.duration.call(a,h,G,"dhm"):""):(A=0===P?a.getDateInFormat({date:F},i,a.setting.is24Hour,!0):0===Q?"Ends "+a.getDateInFormat({date:G},i,a.setting.is24Hour,!0):"All Day",B=0===P&&0===Q?$.cf.compareStrings(a.setting.duration,"Default")?a.__getDurationBetweenDates(F,G,"dhm",!1,!1):a.setting.duration.call(a,F,G,"dhm"):$.cf.compareStrings(a.setting.duration,"Default")?a.__getDurationBetweenDates(h,G,"dhm",!1,!1):a.setting.duration.call(a,h,G,"dhm")),$.cf.isValid(A)&&(O+="<span class='cmvDialogTimeStart'>"+A+"</span>"),$.cf.isValid(B)&&(O+="<span class='cmvDialogTimeDuration'>"+B+"</span>"),x=C.fromSingleColor?C.textColor:C.backgroundColor,y=C.fromSingleColor?C.backgroundColor:$.cf.addHashToHexcode(x,"0.1"),I?(J+=" cMarkedDayEvent",K="background: "+y+";",L="color: "+x+";",z=$.cf.isValid(C.icon)&&"Dot"!==C.icon?C.icon:"cs-icon-Mark"):("background: "+x+";",L="color: "+x+";",z=$.cf.isValid(C.icon)?C.icon:a.setting.eventIcon),v+="<tr id='cmvDialogEvent-"+E+"' class='"+J+"'>",v+="<td style='"+K+"'>",v+="<div>",v+="<div class='cmvDialogTitle'>"+D+"</div>",N||I||""===O||(v+="<div class='cmvDialogTime'>"+O+"</div>"),v+="</div>",v+="</td>",v+="<td class='cmvDialogIcon' style='"+K+"'>",I?v+="<span class='cmvDialogIconFont "+z+"' style='"+L+"'></span>":M||($.cf.compareStrings(z,"Dot")?(L="background: "+x+";",v+="<span class='cmvDialogIconDot' style='"+L+"'></span>"):v+="<span class='cmvDialogIconFont "+z+"' style='"+L+"'></span>"),v+="</td>",v+="</tr>",I?v+="<tr class='cmvDialogEventSeparator'><td colspan='2'></td></tr>":w!==l.length-1&&(v+="<tr class='cmvDialogEventSeparator'><td colspan='2'><hr></td></tr>")}if(v+="</table>",v+="</div>",v+="</div>",e!==j){$(a.elem).find(".calendarContInner").append(v);var R=$(a.elem).find(".cmvDialog").width();R=R<200?200:R,b<=400?(u=b-2,R=u,t=3*r):c<=400&&(t=4*r),$(a.elem).find(".cmvDialog").css({"max-height":t,"max-width":u,width:R}),b=$(a.elem).find(".cmvCalendarCont").width(),c=$(a.elem).find(".cmvCalendarCont").height();var S=$(a.elem).find(".cmvDialog").width(),T=$(a.elem).find(".cmvDialog").height(),U=$(a.elem).find("#"+g).position().left,V=$(a.elem).find("#"+n).position().top,W=t-24;T=T>W?W:T;var X,Y,Z,_,aa=$(a.elem).find(".cmvMonthTableMain").position().top,ba="",ca="";if(b<=400?o<=3?(X=aa+V+(r-10),Z=-11,ca="cmvDialogTooltipBottom",ba="10px 0px 0px 0px",t=X+t>c?c-X:t):(X=aa+V-(T+6),X<50?(X=50,T=aa+V-3-50,t=aa+V-3-50,Z=T-1):Z=T-1,Z=T-1,ca="cmvDialogTooltipTop",ba="0px 0px 10px 0px"):o<=3?(X=aa+V+$(a.elem).find(".cmvDisplayAllEvents").height()-2,Z=-11,ca="cmvDialogTooltipBottom",ba="10px 0px 0px 0px",t=X+t>c?c-X:t):(X=aa+V-(T-3),X<50?(X=50,T=aa+V-3-50,t=aa+V-3-50,Z=T-1):Z=T-1,ca="cmvDialogTooltipTop",ba="0px 0px 10px 0px"),b<=400)Y=0,_=U+s/2-10;else if(0===p)Y=U+5,_=s-34;else if(p===(a.setting.excludeNonBusinessHours?a.tv.iBsDays:6))Y=b-S,_=S-28;else{_=S/2-14;var da=U+s-10;Y=da-S/2-4;var ea,fa,ga=$(a.elem).find(".cmvTableColumn0").position().left,ha=Y+S,ia=Y-S/2;ha>=b&&(ea=Y,Y=b-S-5,fa=ea-Y,_+=fa),ia<=ga&&(ea=Y,Y=ga+5,fa=Y-ea,_-=fa)}$(a.elem).find(".cmvDialogTooltip").addClass(ca),$(a.elem).find(".cmvDialogTooltip").css({top:Z,left:_}),$(a.elem).find(".cmvDialog").css({top:X,left:Y}),t-=24,$(a.elem).find(".cmvDialogInnerCont").css({margin:ba,"max-height":t,"max-width":u}),$(a.elem).find(".cmvDialogClose").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation(),a._closeDialogOfEventsForDay()}),$(a.elem).find(".cmvDialog").on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation()}),a._addDialogEventAction()}if($("body").hasClass("br-ios")){var ja=$(a.elem).find(".cmvDialogTable").height()+20;t=ja>t?t:ja,$(a.elem).find(".cmvDialogInnerCont").css({height:t}),o>3&&(X=aa+V-(t+6),$(a.elem).find(".cmvDialog").css({top:X}),Z=t-1,$(a.elem).find(".cmvDialogTooltip").css({top:Z}))}}})},_closeDialogOfEventsForDay:function(){var a=this,b=$(a.elem).find(".cmvDialog");null!==b&&(b.animate({opacity:0},100),setTimeout(function(){b.remove()},100))},_addDialogEventAction:function(){var a=this;$(a.elem).find(".cmvDialogEvent").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation();var c=a.getEventWithId($(this).attr("data-id"));a.setting.eventInADialogClicked&&a.setting.eventInADialogClicked.call(a,c)})},_makeDayClickableInMonthView:function(){var a,b=this;a=$.cf.compareStrings(b.setting.visibleView,"DetailedMonthView")?$(b.elem).find(".cdmvEventContMain"):$(b.elem).find(".cmvDay"),a.on($.CalenStyle.extra.sClickHandler,function(c){c.stopPropagation();var d={};d.x=c.pageX||c.originalEvent.touches[0].pageX||c.originalEvent.changedTouches[0].pageX,d.y=c.pageY||c.originalEvent.touches[0].pageY||c.originalEvent.changedTouches[0].pageY;for(var e=b.__getElementsAtPoint(d.x,d.y),f=0;f<=e.length;f++){var g=$(e[f]);g.hasClass("cmvDay")&&(a=g)}if(a.hasClass("cmvDay")){$(b.elem).find(".cmvDay .cmvDayNumber").removeClass("cCurrentHighlightCircle cContHeaderButtonsHover");var h=a.attr("id");if(b.setting.selectedDate=b._getDateForDayIdInMonthView(h),0===$(b.elem).find(".cHiddenEventsCont").length&&b.setting.cellClicked&&b.setting.cellClicked.call(b,b.setting.visibleView,b.setting.selectedDate,!0,d),$.cf.compareStrings(b.setting.visibleView,"MonthView")&&$.cf.compareStrings(b.setting.actionOnDayClickInMonthView,"ModifyEventList")){0!==b.compareDates($.CalenStyle.extra.dToday,b.setting.selectedDate)&&a.find(".cmvDayNumber").addClass("cCurrentHighlightCircle");var i="";b.setting.displayEventsForPeriodInList&&(i=b.setting.displayEventsForPeriodInList.call(b,b.setDateInFormat({date:b.setting.selectedDate},"START"),b.setDateInFormat({date:b.setting.selectedDate},"END"))||""),$(b.elem).find(".cListOuterCont").html(i),b.setting.eventListAppended&&b.setting.eventListAppended.call(b)}}})},_getDateForDayIdInMonthView:function(a){var b=a.split("-");return new Date(b[3],b[2],b[1],0,0,0,0)},_addTooltipInMonthView:function(a){var b=this;$(b.elem).find(a).tooltip({content:function(){var a="";if($.cf.compareStrings(b.setting.eventTooltipContent,"Default")){var c=$(this).data("tooltipcontent");void 0!==c.title&&(a+="<div class='cTooltipTitle'>"+c.title+"</div>"),void 0===c.startDateTime&&void 0!==c.endDateTime||(a+="<div class='cTooltipTime'>",void 0!==c.startDateTime&&(a+=c.startDateTime),void 0!==c.endDateTime&&(a+="<br/>"+c.endDateTime),a+="</div>")}else{var d=b.getEventWithId($(this).attr("data-id"));a=b.setting.eventTooltipContent.call(b,d)}return a},position:{my:"center bottom-15",at:"center top",using:function(a,b){$(this).css(a),$("<div>").addClass("tooltip-arrow").addClass(b.vertical).addClass(b.horizontal).appendTo(this)}}})},_makeEventDraggableInMonthView:function(a){var b,c,d,e=this;$.cf.compareStrings(e.setting.visibleView,"DetailedMonthView")?b=$.CalenStyle.extra.iEventHeights[e.setting.visibleView]:$.cf.compareStrings(e.setting.visibleView,"MonthView")&&(b=e._getHeightForAllDayEventInMonthView()),c=$(e.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").width(),d=$(e.elem).find(".cmvMonthTableRows").css("height"),$.cf.compareStrings(e.setting.visibleView,"MonthView")&&(d=$(e.elem).find(".cmvMonthTableRows").css("height")),d=parseInt(d.replace("px",""))||0;var f=$(e.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").offset().left,g=$(e.elem).find("#cmvMonthTableRow1 .cmvTableColumns:last").offset().left,h=$(e.elem).find("#cmvMonthTableRow1 .cmvTableColumn0").offset().top,i=$(e.elem).find("#cmvMonthTableRow"+e.tv.iWkInMonth+" .cmvTableColumn0").offset().top+d-b;$.cf.compareStrings(e.setting.visibleView,"MonthView")&&(i-=2*b);var j,k,l,m,n,o;$(e.elem).find(a).draggable({zIndex:100,scope:"Events",containment:[f,h,g,i],scroll:!1,revertDuration:300,start:function(){j=$(this);var a=j.clone();if($(a).removeClass("ui-draggable-dragging").addClass("cEventClone cEventBeingDragged"),j.parent().append(a),k=j.attr("data-id"),l=e.getEventWithId(k),m=".Event-"+k,n=null,j.hasClass("cEventOnlyText")?j.addClass("cEditingEvent"):j.addClass("cEditingEvent cEditingEventUI"),null!==l.start&&(n=l.start),e.tv.draggableParent="cmvDay-"+n.getDate()+"-"+n.getMonth()+"-"+n.getFullYear(),j.css({position:"absolute"}),j.css({width:c,height:b}),e.setting.hideExtraEvents){o=j.find(".cdmvEventTitle").width();var d=j.find(".cdmvEventIcon"),f=null!==d?d.outerWidth(!0):0,g=j.find(".cdmvEventTime"),h=null!==g?g.outerWidth(!0):0,i=0,p=j.find(".cdmvEventTimeRight");null!==p&&(i=null!==p?p.outerWidth(!0):0);var q=j.find(".cPartialEventLeft").outerWidth(!0)+j.find(".cPartialEventRight").outerWidth(!0),r=c-(f+h+i+10*$.CalenStyle.extra.iBorderOverhead+q);j.find(".cdmvEventTitle").css({width:r})}},revert:function(){return j=$(this),e.setting.hideExtraEvents&&j.find(".cdmvEventTitle").css({width:o}),$(e.elem).find(".cmvDay").removeClass("cActivatedCell"),e.tv.bDroppedInDifferent&&(e.setting.isTooltipInMonthView&&e._addTooltipInMonthView(".cEventTooltip"),e.setting.isDragNDropInMonthView&&e._makeEventDraggableInMonthView(".EventDraggable")),!0}})},adjustMonthTable:function(){var a=this,b=$(a.elem).outerWidth(),c=$(a.elem).outerHeight(),d=$.cf.getSizeValue($(a.elem),"max-width"),e=$.cf.getSizeValue($(a.elem).find(".cmvMonthTable"),"min-height")||0;a.tv.iDocHtPrev=$(document).height(),c+=2*$.CalenStyle.extra.iBorderOverhead,a._closeDialogOfEventsForDay(),b=d&&b>d?d:b;var f=c;a.tv.bDisFBar&&($.cf.compareStrings(a.setting.filterBarPosition,"Left")||$.cf.compareStrings(a.setting.filterBarPosition,"Right")?b-=a.setting.filterBarWidth:($.cf.compareStrings(a.setting.filterBarPosition,"Top")||$.cf.compareStrings(a.setting.filterBarPosition,"Bottom"))&&(f-=a.setting.filterBarHeight,$(a.elem).find(".cFilterBar").css({width:b}))),$.cf.compareStrings(a.setting.visibleView,"MonthView")&&$(a.elem).find(".calendarContInner").css({height:f}),$(a.elem).find(".calendarContInner").css({width:b}),a.__adjustHeader(),$.cf.compareStrings(a.setting.filterBarPosition,"Right")&&$(a.elem).find(".cFilterBar").css({left:b}),b>=300&&c>=300?($(a.elem).find(".cmvDayHeader").removeClass("cmvThinBorderBottom cmvThinBorder").addClass("cmvThinBorderBottom"),$(a.elem).find(".cmvWeekNumber").removeClass("cmvThinBorderRight cmvThinBorder").addClass("cmvThinBorderRight"),$(a.elem).find(".cmvTableContainerOuter").addClass("cmvThinBorder")):($(a.elem).find(".cmvWeekNumber").removeClass("cmvThinBorderRight cmvThinBorder").addClass("cmvThinBorder"),$(a.elem).find(".cmvTableContainerOuter").addClass("cmvThinBorder"));var g;$.cf.compareStrings(a.setting.visibleView,"MonthView")&&$.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"ModifyEventList")&&a.tv.bCMVDisEvLst&&(a.setting.displayEventsInMonthView?(g=c/2)<300-($(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").height():0)&&(g=300-($(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").height():0)):c>b?g=b:(g=c/2)<300-($(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").height():0)&&(g=300-($(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").height():0)),0!==e&&(g=e),$(a.elem).find(".cmvMonthTableMain").css({height:g}));var h,i,j,k,l,m,n,o,p,q,r;b>500&&c>500?($.cf.compareStrings(a.setting.visibleView,"MonthView")&&$.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"ModifyEventList")&&a.tv.bCMVDisEvLst?i=g:(i=c-($(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").outerHeight():0),a.tv.bDisABar&&(i-=$(a.elem).find(".cActionBar").outerHeight()),a.tv.bDisFBar&&($.cf.compareStrings(a.setting.filterBarPosition,"Top")||$.cf.compareStrings(a.setting.filterBarPosition,"Bottom"))&&(i-=$(a.elem).find(".cFilterBar").outerHeight())),$(a.elem).find(".calendarCont").css({height:c}),$(a.elem).find(".cContHeader").length>0&&$(a.elem).find(".cContHeader").css({width:b}),j=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").outerWidth():$(a.elem).find(".calendarContInner").outerWidth(),k=j/(a.setting.excludeNonBusinessHours?a.tv.iBsDays:7),a.setting.displayWeekNumInMonthView&&(k>50?(k=(j-50)/(a.setting.excludeNonBusinessHours?a.tv.iBsDays:7),$(a.elem).find(".cmvWeekNumber").css({width:50})):$(a.elem).find(".cmvWeekNumber").css({width:k})),$(a.elem).find(".cmvTableColumns").css({width:k}),l=$(a.elem).find(".cmvMonthTableRowDayHeader").outerHeight(),$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker")?(m=(i-l)/a.tv.iWkInMonth,n=$(a.elem).find(".cmvDayNumber").height()+2,o=$(a.elem).find(".cmvDisplayAllEvents").height(),p=n>o?n:o,h=m-p):$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&(m=(i-l)/a.tv.iWkInMonth,(a.tv.bDisABar||a.tv.bDisFBar&&$.cf.compareStrings(a.setting.filterBarPosition,"Bottom"))&&(i+=$.CalenStyle.extra.iBorderOverhead)),$(a.elem).find(".cmvTableContainerOuter").css({height:i,width:j}),$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&(j-=$.CalenStyle.extra.iBorderOverhead,i-=$.CalenStyle.extra.iBorderOverhead),$(a.elem).find(".cmvTableContainer").css({height:i,width:j,top:-$.CalenStyle.extra.iBorderOverhead,left:-$.CalenStyle.extra.iBorderOverhead}),q=0,$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")?($(a.elem).find(".cmvMonthTableMain").css({top:-$.CalenStyle.extra.iBorderOverhead}),a.setting.hideExtraEvents&&($(a.elem).find(".cmvMonthTableRows").css({height:m}),a.tv.iMxEvRw=Math.floor((m-30)/$.CalenStyle.extra.iEventHeights[a.setting.visibleView]),(q=l+a.tv.iWkInMonth*m)>i&&(i=q))):($(a.elem).find(".cmvMonthTableRows").css({height:m}),m<60&&$(a.elem).find(".cmvMonthTableRows").css({"min-height":m}),$.cf.compareStrings(a.setting.visibleView,"MonthView")&&$.cf.compareStrings(a.setting.eventIndicatorInMonthView,"Custom")&&(r=m-n,$(a.elem).find(".cmvMonthTableRowCustom").css({"max-height":r}))),$(a.elem).find(".cmvMonthTableMain").css({height:i,width:j}),$(a.elem).find(".cdmvEventContMain").css({height:i,width:j}),$(a.elem).find(".cmvDayHeader").removeClass("cmvThinBorderBottom cmvThinBorder").addClass("cmvThinBorderBottom")):($(a.elem).find(".cContHeader").length>0&&$(a.elem).find(".cContHeader").css({width:b}),$.cf.compareStrings(a.setting.visibleView,"MonthView")&&$.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"ModifyEventList")&&a.tv.bCMVDisEvLst?(i=g,$(a.elem).find(".cmvMonthTable").css({height:i})):a.tv.bDisABar||a.tv.bDisFBar?(i=c-($(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").outerHeight():0),a.tv.bDisABar&&(i-=a.setting.actionBarHeight),a.tv.bDisFBar&&($.cf.compareStrings(a.setting.filterBarPosition,"Top")||$.cf.compareStrings(a.setting.filterBarPosition,"Bottom"))&&(i-=a.setting.filterBarHeight)):i=c-($(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").outerHeight():0),j=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").outerWidth():$(a.elem).find(".calendarContInner").outerWidth(),k=j/(a.setting.excludeNonBusinessHours?a.tv.iBsDays:7),a.setting.displayWeekNumInMonthView&&(k>50?(k=(j-50)/(a.setting.excludeNonBusinessHours?a.tv.iBsDays:7),$(a.elem).find(".cmvWeekNumber").css({width:50})):$(a.elem).find(".cmvWeekNumber").css({width:k})),$(a.elem).find(".cmvTableColumns").css({width:k}),l=$(a.elem).find(".cmvMonthTableRowDayHeader").outerHeight(),$.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker")?(m=(i-l)/a.tv.iWkInMonth,n=$(a.elem).find(".cmvDayNumber").height()+2,o=$(a.elem).find(".cmvDisplayAllEvents").height(),p=n>o?n:o,h=m-p):a.setting.hideExtraEvents&&(m=(i-l)/a.tv.iWkInMonth),$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&(a.tv.bDisABar||a.tv.bDisFBar&&$.cf.compareStrings(a.setting.filterBarPosition,"Bottom"))&&(i+=$.CalenStyle.extra.iBorderOverhead),$(a.elem).find(".cmvTableContainerOuter").css({height:i,width:j}),$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&(j-=$.CalenStyle.extra.iBorderOverhead,i-=$.CalenStyle.extra.iBorderOverhead),$(a.elem).find(".cmvTableContainer").css({height:i,width:j,top:-$.CalenStyle.extra.iBorderOverhead,left:-$.CalenStyle.extra.iBorderOverhead}),q=0,$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")?($(a.elem).find(".cmvMonthTableMain").css({top:-$.CalenStyle.extra.iBorderOverhead}),a.setting.hideExtraEvents&&($(a.elem).find(".cmvMonthTableRows").css({height:m}),a.tv.iMxEvRw=Math.floor((m-30)/$.CalenStyle.extra.iEventHeights[a.setting.visibleView]),(q=l+a.tv.iWkInMonth*m)>i&&(i=q))):($(a.elem).find(".cmvMonthTableRows").css({height:m}),m<60&&$(a.elem).find(".cmvMonthTableRows").css({"min-height":m}),$.cf.compareStrings(a.setting.visibleView,"MonthView")&&$.cf.compareStrings(a.setting.eventIndicatorInMonthView,"Custom")&&(r=m-n,$(a.elem).find(".cmvMonthTableRowCustom").css({"max-height":r}))),$(a.elem).find(".cmvMonthTableMain").css({height:i,width:j}),$(a.elem).find(".cdmvEventContMain").css({height:i,width:j}));var s=h/2;$(a.elem).find(".cmvEventContSmall").css({height:s}),$(a.elem).find(".cmvEventContAllDay").css({height:s});var t=a._getHeightForAllDayEventInMonthView(),u=a._getHeightForSmallEventInMonthView(),v=a._getMarginValueForSmallEventInMonthView(),w=v+"px "+v+"px;";$(a.elem).find(".cmvEventSmall").css({width:u,height:u,margin:w,top:0}),$(a.elem).find(".cmvEventAllDay").css({height:t}),b>=550?$(a.elem).find(".cmvMonthTableRows .cmvWeekNumber").addClass("clickableLink"):$(a.elem).find(".cmvMonthTableRows .cmvWeekNumber").removeClass("clickableLink");var x=$(a.elem).find(".calendarCont").height();a.tv.bDisFBar&&($.cf.compareStrings(a.setting.filterBarPosition,"Top")||$.cf.compareStrings(a.setting.filterBarPosition,"Bottom"))&&(x-=$(a.elem).find(".cFilterBar").height());for(var y=0;y<a.setting.sectionsList.length;y++){var z=a.setting.sectionsList[y];$.cf.compareStrings(z,"Calendar")?(x-=($(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").height():0)+4,x-=$(a.elem).find(".cmvMonthTable").height()):$.cf.compareStrings(z,"ActionBar")&&(x-=$(a.elem).find(".cActionBar").height()+1)}$(a.elem).find(".cListOuterCont").css({height:x});var A=$(a.elem).find(".cmvMonthTableMain").position().left;$(a.elem).find(".cContHeader").length>0?($(a.elem).find(".cContHeader").position().top,$(a.elem).find(".cContHeader").outerHeight()):$(a.elem).position().top,$(a.elem).find(".cdmvEventContMain").css({left:A,top:-$.CalenStyle.extra.iBorderOverhead}),a._adjustEventsInMonthView(),a.setCalendarBorderColor(),$.cf.compareStrings(a.setting.visibleView,"MonthView")&&a.setting.isDragNDropInMonthView&&a._makeEventDraggableInMonthView(".EventDraggable"),$.cf.compareStrings(a.setting.visibleView,"MonthView")&&$.cf.compareStrings(a.setting.actionOnDayClickInMonthView,"DisplayEventListDialog")&&(b<=400?$(a.elem).find(".cmvDisplayAllEvents").remove():0===$(a.elem).find(".cmvDisplayAllEvents").length&&$(a.elem).find(".cmvDay").prepend("<span class='cmvDisplayAllEvents'>..</span>"))},_getHeightForAllDayEventInMonthView:function(){var a=this,b=$(a.elem).find(".cmvEventContAllDay").height(),c=Math.floor(b/5);return c<2?c=2:c>4&&(c=4),c},_getHeightForSmallEventInMonthView:function(){var a=this,b=$(a.elem).find(".cmvEventContAllDay").height(),c=Math.floor(b/2);return c<2?c=2:c>10&&(c=10),c},_getMarginValueForSmallEventInMonthView:function(){var a=this,b=a._getHeightForSmallEventInMonthView();return b<=3?1:b>3?2:void 0},_setMonthStrings:function(){var a=this,b=$.cf.compareStrings(a.setting.visibleView,"DatePicker"),c=b?"cContHeaderLabelUnderline":"",f=b?"clickableLink":"",g="<span class='cContHeaderLabelMonth "+f+"'><span class='"+c+"'><b>"+a.getDateInFormat({iDate:{M:a.setting.selectedDate.getMonth()}},"MMMM",!1,!0)+"</b></span></span>";g+="<span class='cContHeaderLabelYear "+f+"'><span class='"+c+"'>"+a.getNumberStringInFormat(a.setting.selectedDate.getFullYear(),0,!0)+"</span></span>",a.setting.modifyHeaderViewLabels&&a.setting.modifyHeaderViewLabels.call(a,a.tv.dVSDt,a.tv.dVEDt,a.setting.selectedDate,g,a.setting.visibleView),$(a.elem).find(".cContHeaderLabel").html(g),$.cf.compareStrings(a.setting.visibleView,"DatePicker")&&($(a.elem).find(".cContHeaderLabelMonth").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation(),new d(a,!1).showOrHideMonthList()}),$(a.elem).find(".cContHeaderLabelYear").on($.CalenStyle.extra.sClickHandler,function(b){b.stopPropagation(),new e(a,!1).showOrHideYearList()}))},__goToPrevMonthView:function(){var a=this;if($(a.elem).find(".cmlvOuterCont").length<=0&&$(a.elem).find(".cylvOuterCont").length<=0){if(a.setting.showTransition){var b=$(a.elem).find(".cmvMonthTableMain").width(),c=$(a.elem).find(".cmvMonthTableMain").position().left,d=0;($.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker"))&&(d=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").position().top+$(a.elem).find(".cContHeader").outerHeight()-1:$(a.elem).position().top);var e=$(a.elem).find(".cmvMonthTableMain").clone();$(e).removeClass("cmvMonthTableMain").addClass("cmvMonthTableTemp"),$(e).css({position:"absolute",top:d,left:c}),$(a.elem).find(".cmvMonthTableMain").parent().append(e),$(e).css({"z-index":101}),c+=b;var f,g,h;$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&(f=$(a.elem).find(".cdmvEventContMain").position().left,g=$(a.elem).find(".cdmvEventContMain").width(),h=$(a.elem).find(".cdmvEventContMain").clone(),$(h).removeClass("cdmvEventContMain").addClass("cdmvEventContTemp"),$(a.elem).find(".cdmvEventContMain").parent().append(h),$(h).css({"z-index":102}),f+=g,$(h).animate({left:f},a.setting.transitionSpeed)),$(e).animate({left:c},a.setting.transitionSpeed),setTimeout(function(){$(e).remove(),$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&$(h).remove()},a.setting.transitionSpeed)}a.tv.dCMDt=new Date(a.tv.dPMDt),a._setNextPreviousMonthDates();var i=a.tv.dCMDt.getMonth(),j=a.tv.dCMDt.getFullYear(),k=a.__getNumberOfDaysOfMonth(i,j),l=a.setting.selectedDate.getDate();l>k&&(l=k);var m=a.setting.selectedDate.getHours(),n=a.setting.selectedDate.getMinutes(),o=a.setting.selectedDate.getSeconds();a.setting.selectedDate=a.setDateInFormat({iDate:{y:j,M:i,d:l,H:m,m:n,s:o}},""),a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType="Prev",a.updateMonthTableAndContents(!0),setTimeout(function(){a.__reloadDatePickerContentOnNavigation()},10)}},__goToNextMonthView:function(){var a=this;if($(a.elem).find(".cmlvOuterCont").length<=0&&$(a.elem).find(".cylvOuterCont").length<=0){if(a.setting.showTransition){var b=$(a.elem).find(".cmvMonthTableMain").width(),c=$(a.elem).find(".cmvMonthTableMain").position().left,d=0;($.cf.compareStrings(a.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.visibleView,"DatePicker"))&&(d=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").position().top+$(a.elem).find(".cContHeader").outerHeight()-1:$(a.elem).position().top);var e=$(a.elem).find(".cmvMonthTableMain").clone();$(e).removeClass("cmvMonthTableMain").addClass("cmvMonthTableTemp"),$(e).css({position:"absolute",top:d,left:c}),$(e).css({"z-index":101}),c-=b,$(a.elem).find(".cmvMonthTableMain").parent().append(e);var f,g,h;$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&(f=$(a.elem).find(".cdmvEventContMain").position().left,g=$(a.elem).find(".cdmvEventContMain").width(),h=$(a.elem).find(".cdmvEventContMain").clone(),$(h).removeClass("cdmvEventContMain").addClass("cdmvEventContTemp"),$(a.elem).find(".cdmvEventContMain").parent().append(h),$(h).css({"z-index":102}),f-=g,$(h).animate({left:f},a.setting.transitionSpeed)),$(e).animate({left:c},a.setting.transitionSpeed),setTimeout(function(){$(e).remove(),$.cf.compareStrings(a.setting.visibleView,"DetailedMonthView")&&$(h).remove()},a.setting.transitionSpeed)}a.tv.dCMDt=new Date(a.tv.dNMDt),a._setNextPreviousMonthDates();var i=a.tv.dCMDt.getMonth(),j=a.tv.dCMDt.getFullYear(),k=a.__getNumberOfDaysOfMonth(i,j),l=a.setting.selectedDate.getDate();l>k&&(l=k);var m=a.setting.selectedDate.getHours(),n=a.setting.selectedDate.getMinutes(),o=a.setting.selectedDate.getSeconds();a.setting.selectedDate=a.setDateInFormat({iDate:{y:j,M:i,d:l,H:m,m:n,s:o}},""),a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType="Next",a.updateMonthTableAndContents(!0),setTimeout(function(){a.__reloadDatePickerContentOnNavigation()},10)}},highlightDatesInDatePicker:function(a){var b=this;null===a&&void 0===a||(b.tv.dHighlightDPV=a,b.__highlightDaysInDatePicker())},__highlightDaysInDatePicker:function(){var a=this;if($(".cmvDay").removeClass("cDatePickerHighlightBg"),!($.cf.compareStrings(a.setting.parentObject.setting.visibleView,"MonthView")||$.cf.compareStrings(a.setting.parentObject.setting.visibleView,"DetailedMonthView")||null===a.tv.dHighlightDPV&&void 0===a.tv.dHighlightDPV))for(var b=0;b<a.tv.dHighlightDPV.length;b++){var c=a.tv.dHighlightDPV[b],d="#cmvDay-"+c.getDate()+"-"+c.getMonth()+"-"+c.getFullYear();$(a.elem).find(d).addClass("cDatePickerHighlightBg")}}}),c.prototype=$.extend(c.prototype,{_getTimeSlotsArrayForCurrentView:function(){var a,b,c,d,e,f,g,h,i,j=this,k=$.cf.compareStrings(j.setting.visibleView,"DayEventDetailView")?1:j.tv.iNoVDay,l=24*j.tv.iUTmSlt;for(j.tv.bADVCur=[],j.tv.sADVInfo=[],b=0;b<k;b++){a=[];for(var m=0;m<24;m++)for(c=0;c<j.tv.iUTmSlt;c++)a.push(0);a.push(0),j.tv.bADVCur.push(a)}var n=new Date(j.tv.dVDSDt),o=j.tv.dVDSDt.getTime();for(b=0;b<k;b++){if(j.tv.bABsDays[n.getDay()]||!j.setting.excludeNonBusinessHours){a=j.tv.bADVCur[b];var p=j._getRestrictedSectionForCurrentView(n),q=j._getBusinessHoursForCurrentView(n);if(q.length>0)for(d=0;d<q.length;d++){var r=q[d],s=new Date(r[0]),t=new Date(r[1]);for(e=Math.floor((t.getTime()-s.getTime())/j.tv.iUTmMS),f=s.getHours(),g=s.getMinutes(),h=Math.floor(g/j.setting.unitTimeInterval),c=0;c<e;c++)i=0===f?h:f*j.tv.iUTmSlt+h,a[i]=1,g+=j.setting.unitTimeInterval,h=Math.floor(g/j.setting.unitTimeInterval),g>=60&&(g%=j.setting.unitTimeInterval,h=Math.floor(g/j.setting.unitTimeInterval),f+=1)}if(p.length>0)for(d=0;d<p.length;d++){var u=p[d],v=new Date(u.start),w=0===j.compareDates(n,v),x=new Date(u.end),y=0===j.compareDates(n,x);w||(v=j._normalizeDateTime(n,"START","T")),y||(x=j._normalizeDateTime(n,"END","T")),e=Math.round((x.getTime()-v.getTime())/j.tv.iUTmMS),e=0===e?1:e>l?l:e;var z,A=2,B=!1,C=!1,D=!1,E=u.backgroundColor,F=$.cf.isValid(E),G=u.class,H=$.cf.isValid(G);if(F||H){for(A=0;A<j.tv.sADVInfo.length;A++)if(z=j.tv.sADVInfo[A],B=F&&z.bgColor===E,C=H&&z.class===G,F&&H){if(B&&C){A=z.index,D=!0;break}}else if(B||C){A=z.index,D=!0;break}D||(z={},A=3+j.tv.sADVInfo.length,z.index=A,F&&(z.bgColor=E),H&&(z.class=G),j.tv.sADVInfo.push(z))}for(e===l&&(a[a.length-1]=A),f=v.getHours(),g=v.getMinutes(),h=Math.floor(g/j.setting.unitTimeInterval),c=0;c<e;c++)i=0===f?h:f*j.tv.iUTmSlt+h,a[i]=A,g+=j.setting.unitTimeInterval,h=Math.floor(g/j.setting.unitTimeInterval),g>=60&&(g%=j.setting.unitTimeInterval,h=Math.floor(g/j.setting.unitTimeInterval),f+=1)}j.tv.bADVCur[b]=a}o+=$.CalenStyle.extra.iMS.d,n=new Date(o)}},_getStartAndEndDatesOfEventWithId:function(a){var b=this,c=b.getEventWithId(a);return[c.start,c.end]},_getNumberOfHoursOfEventWithId:function(a){var b=this,c=b.getEventWithId(a);return b.__getNumberOfHoursOfEvent(c.isAllDay,c.start,c.end)},_getNumberOfDaysOfEventForWeek:function(a,b,c,d,e){var f,g=this;f=a&&0===g.compareDateTimes(b,c)?new Date(c.getTime()+$.CalenStyle.extra.iMS.d):new Date(c),0===f.getHours()&&0===f.getMinutes()&&f.setMinutes(f.getMinutes()-1);var h=0,i=g.__getStartAndEndDatesOfEventForView(a,b,f),j=i[0],k=i[1],l=Math.round((k.getTime()-j.getTime())/$.CalenStyle.extra.iMS.m),m=Math.round(l/60);if(l<0)console.log("Invalid Start And End Dates "+b+" "+f);else if(h=0,0!==g.compareDates(j,k)){var n=g.setDateInFormat({date:j},"START"),o=g.setDateInFormat({date:k},"START"),p=(o.getTime()-n.getTime())/$.CalenStyle.extra.iMS.h;if(h=Math.round(p/24)+1,e){for(var q=new Date(n),r=0,s=0;s<h;s++)g.__findWhetherDateIsVisibleInCurrentView(q,a||m>23,j,k)&&r++,q.setDate(q.getDate()+1);h=r}}else e?g.__findWhetherDateIsVisibleInCurrentView(j,a||m>23,j,k)&&(h=1):h=1;return d?[h,m]:h},_getLeftPositionOfEventSeg:function(a){for(var b=this,c=b.tv.fADVDayLftPos.length,d=$(b.elem).find(".cdvTableColumns").width(),e=0,f=0;f<c;f++){var g=b.tv.fADVDayLftPos[f],h=g+d;if(g-=5,h-=5,f===c-1&&(h+=5),a>=g&&a<=h){e=b.tv.fADVDayLftPos[f];break}}return e},_getDateBasedOnLeftPosition:function(a){var b=this;if($.cf.compareStrings(b.setting.visibleView,"DayEventDetailView"))return b.setting.selectedDate;var c,d=$(b.elem).find(".cdvTableColumns").width(),e=b.tv.fADVDayLftPos.length,f=0,g=0;for(c=0;c<e;c++){var h=b.tv.fADVDayLftPos[c]-5,i=h+d-5;if(c===e-1&&(i+=5),a>=h&&a<=i){g=c+1;break}}for(c=0;c<b.tv.dAVDt.length;c++){var j=b.tv.dAVDt[c];if(b.__isDateInCurrentView(j)&&++f===g)return j}},_getDateForDayNumber:function(a,b){for(var c=this,d=b?0:c.tv.iNoVDay-1,e=0,f=0;f<c.tv.iNoVDay;f++){if(++e===a)return c.tv.dAVDt[d];d=b?d+1:d-1}},_createCopyOfArray:function(a){return[].concat(a)},_setPropertiesOfEventSeg:function(){for(var a,b,c,d,e=this,f=[],g=0;g<e.tv.dAVDt.length;g++){var h=[];h.push(["eventSegStart",e.tv.dAVDt[g]]);var i=e._getEventSegWith(h);i=e._sortEventSeg(e._createCopyOfArray(i)),c=[];for(var j=0;j<i.length;j++){var k=i[j],l=k.eventSegStart,m=k.eventSegEnd;if(c.length<=0)a=new Array(k),b=new Array(l,m,a),c.push(b);else{var n=0;for(d=0;d<c.length;d++){var o=c[d],p=o[0],q=o[1],r=0,s=0,t=0,u=0,v=e.compareDateTimes(l,p),w=e.compareDateTimes(l,q),x=e.compareDateTimes(m,p),y=e.compareDateTimes(m,q);if((v>0||0===v)&&(r=1),w<0&&(s=1),x>0&&(t=1),(y<0||0===y)&&(u=1),1===r&&1===s||1===t&&1===u){o[2].push(k),n=1}v<0&&(o[0]=l),y>0&&w<0&&(o[1]=m)}0===n&&(a=new Array(k),b=new Array(l,m,a),c.push(b))}}f.push(c)}for(var z=[],A=0;A<f.length;A++){c=f[A];var B=[];for(d=0;d<c.length;d++){var C=c[d],D=C[2],E=e._assignEventSegToColumnsInDetailView(D);B.push([C[0],C[1],E])}z.push(B)}},_getEventSegWith:function(a){for(var b=this,c=[],d=0;d<b.tv.oASmEvSeg.length;d++){for(var e=b.tv.oASmEvSeg[d],f=0,g=0;g<a.length;g++){var h=a[g],i=h[0],j=h[1];$.cf.compareStrings(i,"eventSegStart")||$.cf.compareStrings(i,"eventSegEnd")?0===b.compareDates(e[i],j)&&f++:e[i]===j&&f++}f===a.length&&c.push(e)}return c},_sortEventSeg:function(a){var b=this,c=a.length;if(c>1)for(var d=0;d<c;d++)for(var e,f=a[d],g=parseInt(f.eventId),h=b._getStartAndEndDatesOfEventWithId(g)[0],i=d+1;i<c;i++){var j=a[i],k=parseInt(j.eventId);if(g!==k){var l=b._getStartAndEndDatesOfEventWithId(k)[0],m=b.compareDateTimes(h,l);if(m>0)e=f,f=j,j=e,a[d]=f,h=l,a[i]=j;else if(0===m){var n=b._getNumberOfHoursOfEventWithId(g),o=b._getNumberOfHoursOfEventWithId(k);o>n&&(e=f,f=j,j=e,a[d]=f,h=f.eventSegStart,a[i]=j)}}}return a},_whetherEventsAreColliding:function(a,b){var c=this,d=a.eventSegStart,e=a.eventSegEnd,f=b.eventSegStart,g=b.eventSegEnd,h=0,i=0,j=0,k=0,l=c.compareDateTimes(d,f),m=c.compareDateTimes(d,g),n=c.compareDateTimes(e,f),o=c.compareDateTimes(e,g);return(l>0||0===l)&&(h=1),m<0&&(i=1),n>0&&(j=1),(o<0||0===o)&&(k=1),1===h&&1===i||1===j&&1===k},_removeEventSegWithId:function(a){var b=this,c=[];a=parseInt(a);for(var d=0;d<b.tv.oASmEvSeg.length;d++){var e=b.tv.oASmEvSeg[d];parseInt(e.eventId)!==parseInt(a)&&c.push(e)}b.tv.oASmEvSeg=[],b.tv.oASmEvSeg=c},_createAndAddEventSegForId:function(a,b,c,d){for(var e=this,f=e.__getStartAndEndDatesOfEventForView(b,c,d),g=f[0],h=f[1],i=e.__getNumberOfHoursOfEvent(b,c,d),j=e._getNumberOfDaysOfEventForWeek(b,c,d,!1,!0),k=e.setting.is24Hour?"HH:mm":"h[:m]sm",l=e.getDateInFormat({date:c},k,e.setting.is24Hour,!0),m=e.getDateInFormat({date:d},k,e.setting.is24Hour,!0),n=new Date(g);!e.__findWhetherDateIsVisibleInCurrentView(n,b||i>23,g,h);)n.setDate(n.getDate()+1),n=e.setDateInFormat({date:n},"START");g=new Date(n);for(var o=e.setDateInFormat({date:g},"START"),p=0;p<j;p++){var q=e.__getDayIndexInView(o),r={};r.iNumEvElem=j,r.iId=a,r.sId="Event-"+a,r.dStart=c,r.dEnd=d,r.dStartView=g,r.dEndView=h,r.dThisDate=o,r.iEventElem=p+1,r.iWkIndex=q;var s=e._createAndAddEventSeg(r),t="#"+s.sId,u=s.sElemTitle,v=s.iTopPos,w=s.iEventHeight,x=e.tv.fADVDayLftPos[q];e.tv.oDVEdtgEv!=={}&&$.cf.isValid(e.tv.oDVEdtgEv.dEditingDate)&&0===e.compareDates(e.tv.oDVEdtgEv.dEditingDate,o)&&(e.tv.oDVEdtgEv.iElemLeft=x);var y=$(e.elem).find(t);y.css({top:v,height:w,left:x}),y.attr("data-pos",s.sName),y.attr("title",u);var z,A,B,C;z={},A=e.getEventDateTimeString(c,d,b,"&&"),B=A.split("&&"),C=e.getEventWithId(a),z.title=C.title||"",z.startDateTime=B[0],z.endDateTime=B[1],y.data("tooltipcontent",z),v<0?y.find(".cEventLink").css({"margin-top":Math.abs(v)}):y.find(".cEventLink").css({"margin-top":0}),y.find(".cdvEventTime").html(l+"-"+m),o=new Date(o.getTime()+$.CalenStyle.extra.iMS.d)}},_createAndAddEventSeg:function(a){var c,d,e=this,f=a.iId,g=a.sId,h=a.dStart,i=a.dEnd,j=a.dThisDate,k=a.iEventElem,l=a.iWkIndex,m=($(e.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(e.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2,n=m/e.setting.unitTimeInterval,o=0,p=0,q=0,r="",s=0,t=e.getDateInFormat({date:j},"object",!1,!1);e.setting.excludeNonBusinessHours?(c=e.setDateInFormat({iDate:{d:t.d,M:t.M,y:t.y,H:e.tv.oBsHours.startTime[0],m:e.tv.oBsHours.startTime[1],s:0,ms:0}},""),d=e.setDateInFormat({iDate:{d:t.d,M:t.M,y:t.y,H:e.tv.oBsHours.endTime[0],m:e.tv.oBsHours.endTime[1],s:0,ms:0}},"")):(c=e.setDateInFormat({iDate:t},"START"),d=e.setDateInFormat({iDate:t},"END"));var u=e.compareDateTimes(h,c)<0,v=e.compareDateTimes(i,d)>0,w=u?c:h,x=v?d:i,y=(x.getTime()-h.getTime())/$.CalenStyle.extra.iMS.m*n,z=(x.getTime()-w.getTime())/$.CalenStyle.extra.iMS.m*n,A=z;p=w.getHours(),o=w.getMinutes(),q=Math.floor(o/e.setting.unitTimeInterval)*e.setting.unitTimeInterval,r=e.getNumberStringInFormat(p,2,!1)+e.getNumberStringInFormat(q,2,!1),s=$(e.elem).find(".cdvTimeSlotTableRow"+r).position().top,u&&(A=y,s-=y-z);var B=r+"|"+l+"|"+s,C=h+"\n"+i;g+="-"+k;var D=new b(l+1,f,C,g,w,x,0,0);e.tv.oASmEvSeg.push(D);var E={};return E.sElemTitle=C,E.sId=g,E.sName=B,E.iTopPos=s,E.iEventHeight=A,E},_setOpacityOfEventSeg:function(a,b){var c=this,d=c.compareDates(b,$.CalenStyle.extra.dToday)<0,e=$(c.elem).find(".Event-"+a).hasClass("cBlurredEvent");d&&!e&&$(c.elem).find(".Event-"+a).addClass("cBlurredEvent"),!d&&e&&$(c.elem).find(".Event-"+a).removeClass("cBlurredEvent")},_changeViewPropertiesWhileEditing:function(a,b){var c,d=this;$.cf.isValid(d.tv.oDVEdtgEv)&&($.cf.compareStrings(d.tv.oDVEdtgEv.type,"cdvEvent")?c=".Event-"+b:$.cf.compareStrings(d.tv.oDVEdtgEv.type,"cdvEventAllDay")&&(c="#Event-"+b),$.cf.compareStrings(a,"BEFORE")?$(d.elem).find(c).hasClass("cEditingEvent")||($.cf.compareStrings(d.tv.oDVEdtgEv.type,"cdvEvent")?$(d.elem).find(c).addClass("cEditingEvent cEditingEventUI"):$(d.elem).find(c).addClass("cEditingEvent cEditingEventUI cEditingEventAllDay")):$.cf.compareStrings(a,"AFTER")&&($(d.elem).find(c).removeClass("cEditingEvent cEditingEventAllDay cEditingEventUI"),d.tv.iTSEndEditing=$.cf.getTimestamp()))},__updateDetailViewTable:function(){var a,b,c=this,d=1===c.tv.iNoVDayDis?"cdvSingleColumn":"cdvMultiColumn",e=$.CalenStyle.extra.iScrollbarWidth;c._getTimeSlotsArrayForCurrentView(),$.cf.compareStrings(c.tv.sLoadType,"Prev")?c.tv.dLoadDt=c.tv.dAVDt[0]:$.cf.compareStrings(c.tv.sLoadType,"Next")&&(c.tv.dLoadDt=c.tv.dAVDt[c.tv.dAVDt.length-1]);var f="";for(f+="<thead>",$.cf.compareStrings(c.setting.visibleView,"DayEventDetailView")?f+="<tr class='cdvDetailTableRow1 cDayEventDetailView'>":f+="<tr class='cdvDetailTableRow1 cExceptDayEventDetailView'>",f+="<td  class='cdvDetailTableColumnTime'>",f+="<div class='cdvCellWeekNumberLabel'></div>",f+="<div class='cdvCellWeekNumber'></div>",f+="</td>",a=0;a<c.tv.iNoVDayDis;a++){var g="cdvCellDay"+a;b=d,a===c.tv.iNoVDayDis-1&&(b+=" cdvLastColumn"),f+="<td id='"+g+"' class='cdvTableColumns "+b+"'>",$.cf.compareStrings(c.setting.visibleView,"DayEventDetailView")?f+="<table class='cTable cdlvDaysTable cdlvDaysTableMain' cellspacing='0'></table>":f+="&nbsp;",f+="</td>"}for(e>0&&(f+="<td class='cdvDetailTableScroll'>&nbsp;</td>"),f+="</tr>",f+="</thead>",f+="<tbody>",f+="<tr class='cdvDetailTableRow2'>",f+="<td class='cdvDetailTableColumnTime'> &nbsp; </td>",a=0;a<c.tv.iNoVDayDis;a++){var h="cdvAllDayColumn"+a;b="",a===c.tv.iNoVDayDis-1&&(b+=" cdvLastColumn"),f+="<td id='"+h+"' class='cdvAllDayColumns "+b+"' title='"+c.tv.dAVDt[a]+"'> &nbsp; </td>"}for(e>0&&(f+="<td class='cdvDetailTableScroll'>&nbsp;</td>"),f+="</tr>",f+="<tr class='cdvDetailTableRow3'>",f+="<td class='cdvDetailTableColumnTime'> &nbsp; </td>",a=0;a<c.tv.iNoVDayDis;a++)b="cdvDetailTableColumn"+a,a===c.tv.iNoVDayDis-1&&(b+=" cdvLastColumn"),f+="<td class='cdvTableColumns "+b+"'> &nbsp; </td>";e>0&&(f+="<td class='cdvDetailTableScroll'>&nbsp;</td>"),f+="</tr>",f+="</tbody>",$(c.elem).find(".cdvDetailTableMain").html(f),f="",f+="<span class='cdvCellHeaderAllDay'><span>"+c.setting.miscStrings.allDay+"</span></span>",$(c.elem).find(".cdvContRow2Main").html(f),$.cf.compareStrings(c.setting.visibleView,"DayEventDetailView")?c.__updateDayListViewTable(!1,!0):c._setDateStringsInDetailView(),c._addTimeSlotTable(),f="",f+="<div class='cdvContRow3Events'></div>",$(c.elem).find(".cdvContRow3Main").append(f),c._takeActionOnTimeSlotTableClick()},__addEventsInDetailView:function(a){var b=this;($.cf.compareStrings(a,"AllDay")||$.cf.compareStrings(a,"Both"))&&$(b.elem).find(".cdvContRow2Main").length>0&&$(b.elem).find(".cdvContRow2Main .cdvEventAllDay").remove(),($.cf.compareStrings(a,"Small")||$.cf.compareStrings(a,"Both"))&&$(b.elem).find(".cdvContRow3Events").length>0&&$(b.elem).find(".cdvContRow3Events").html("");var c=b.getArrayOfEventsForView(b.tv.dVDSDt,b.tv.dVDEDt),d=$.cf.isValid(b.setting.hideEventIcon[b.setting.visibleView])?b.setting.hideEventIcon[b.setting.visibleView]:!!$.cf.isValid(b.setting.hideEventIcon.Default)&&b.setting.hideEventIcon.Default,e=$.cf.isValid(b.setting.hideEventTime[b.setting.visibleView])?b.setting.hideEventTime[b.setting.visibleView]:!!$.cf.isValid(b.setting.hideEventTime.Default)&&b.setting.hideEventTime.Default,f=b.setting.is24Hour?"HH:mm":"h[:m]sm";if(($.cf.compareStrings(a,"Small")||$.cf.compareStrings(a,"Both"))&&(b.tv.oASmEvSeg=[]),($.cf.compareStrings(a,"AllDay")||$.cf.compareStrings(a,"Both"))&&(b.tv.oAADEvSeg=[]),c.length>0){for(var g=[],h=0;h<c.length;h++){var i=c[h],j=null,k=null,l=0,m="",n="",o="",p=!1;null!==i.start&&(j=i.start),null!==i.end&&(k=i.end),null!==i.isAllDay&&(l=i.isAllDay),null!==i.title&&(m=i.title),null!==i.desc&&i.desc,null!==i.type&&i.type,null!==i.url&&(n=i.url),null!==i.droppableId&&(o=i.droppableId),null!==i.isMarked&&(p=i.isMarked),p&&(l=!0);var q,r=b.__getStartAndEndDatesOfEventForView(l,j,k),s=r[0],t=r[1],u=b.getNumberOfDaysOfEvent(l,j,k,!1,!1,!0),v=b._getNumberOfDaysOfEventForWeek(l,j,k,!1,!0),w=b.__getNumberOfHoursOfEvent(l,j,k);if(v>0){for(var x=new Date(s);!b.__findWhetherDateIsVisibleInCurrentView(x,l||w>23,s,t);)x.setDate(x.getDate()+1),x=b.setDateInFormat({date:x},"START");s=new Date(x);var y=b.setDateInFormat({date:s},"START"),z=y.getTime(),A=i.backgroundColor;A=$.cf.compareStrings(A,"")||$.cf.compareStrings(A,"transparent")?"transparent":A;var B=i.borderColor||$.cf.addHashToHexcode(b.setting.borderColor);B=$.cf.compareStrings(B,"")||$.cf.compareStrings(B,"transparent")?"transparent":B;var C=i.textColor||$.cf.addHashToHexcode(b.setting.textColor);C=$.cf.compareStrings(C,"")||$.cf.compareStrings(C,"transparent")?$.cf.addHashToHexcode(b.setting.textColor):C;var D="",E="",F="",G="",H="";p?i.fromSingleColor?(D+="background: "+A+"; ",D+="border-color: "+B+"; ",D+="color: "+C+"; ",H="color: "+C+"; ",F="background: "+C+"; color: #FFFFFF","background: "+C+"; "):(B=A,D+="background: "+$.cf.getRGBAString(A,.1)+"; ",D+="border-color: "+B+"; ",D+="color: "+A+"; ",H="color: "+A+"; ",F="background: "+A+"; color: "+C,"background: "+A+"; "):(D+="background: "+A+"; ",D+="border-color: "+B+"; ",D+="color: "+C+"; ",H="color: "+C+"; ",F="color: "+C+"; ","background: "+C+"; ",G="border-color: "+(i.fromSingleColor?C:"#000000")),"transparent"===B&&(D+="border-width: 0px; "),E=p?$.cf.isValid(i.icon)&&"Dot"!==i.icon?i.icon:"cs-icon-Mark":$.cf.isValid(i.icon)?i.icon:b.setting.eventIcon;var I,J,K,L,M,N,O,P,Q,R=b.__getDayIndexInView(y),S=(b.tv.fADVDayLftPos[R],0);if(1===l||!0===l||w>23){if($.cf.compareStrings(a,"AllDay")||$.cf.compareStrings(a,"Both")){q="Event-"+i.calEventId;var T=$(b.elem).find("#"+q).length>0,U=!1;if(T){var V=new Date($(b.elem).find("#"+q).data("startdate"));U=0!==b.compareDates(V,s)}if(T&&U||!T){var W,X=v,Y=b.compareDates(j,s),Z=b.compareDates(b.tv.dVDSDt,j),_=b.compareDates(b.tv.dVDEDt,j),aa=Z<=0&&_>=0,ba=b.compareDates(b.tv.dVDSDt,k),ca=b.compareDates(b.tv.dVDEDt,k),da=ba<=0&&ca>=0,ea=b.compareDates(k,t),fa=0;if(0===g.length)fa=1,W=[],W.push([s,t]),g.push([fa,W]);else{for(var ga=0,ha=0;ha<g.length;ha++){W=g[ha];var ia=W[0];ia>ga&&(ga=ia);for(var ja=W[1],ka=!1,la=0;la<ja.length;la++){var ma=ja[la];if(b.compareDates(s,ma[1])<=0){ka=!1;break}ka=!0}if(ka){fa=ia,ja.push([s,t]);break}}0===fa&&(fa=ga+1,W=[],W.push([s,t]),g.push([fa,W]))}b.tv.oAADEvSeg.push([q,X,R,fa]),I="cdvEventAllDay ",b.compareDates(k,$.CalenStyle.extra.dToday)<0&&(I+="cBlurredEvent "),b.setting.isTooltipInDetailView&&(I+=" cEventTooltip"),p&&(I+=" cMarkedDayEvent"),P=$.cf.isValid(o)?"data-droppableid='"+o+"'":"",L="<span id='"+q+"' class='"+I+"' style='"+D+"' data-startdate='"+s+"' "+P+" title='' data-id='"+i.calEventId+"'>",L+="<a class='cEventLink' style='"+H+"'>",p?(L+="<span class='cdvEventTitle'>"+m+"</span>",L+="<span class='cdvEventIcon "+E+"' style='"+F+"'></span>",$.cf.compareStrings(b.setting.visibleView,"DayEventListView")&&$.cf.isValid(i.status)&&(L+="<span class='cdvEventStatus' style='border-color: "+i.statusColor+";'></span>")):(0!==Y&&(L+="<span class='cPartialEvent cPartialEventLeft' style='"+G+"'></span>"),!e&&!l&&u>1&&aa&&(L+="<span class='cdvEventTimeLeft'>"+b.getDateInFormat({date:j},f,b.setting.is24Hour,!0)+"</span>"),d||$.cf.compareStrings(E,"Dot")||(L+="<span class='cdvEventIcon "+E+"' style='"+F+"'></span>"),$.cf.compareStrings(b.setting.visibleView,"DayEventListView")&&$.cf.isValid(i.status)&&(L+="<span class='cdvEventStatus' style='border-color: "+i.statusColor+";'></span>"),L+="<span class='cdvEventTitle'>"+m+"</span>",!e&&!l&&u>1&&da&&(L+="<span class='cdvEventTimeRight'>"+b.getDateInFormat({date:k},f,b.setting.is24Hour,!0)+"</span>"),0!==ea&&(L+="<span class='cPartialEvent cPartialEventRight' style='"+G+"'></span>")),L+="</a>",L+="</span>",$(b.elem).find(".cdvContRow2Main").append(L),M="#"+q,N=$(b.elem).find(M),O=N.find(".cEventLink"),K={},J=b.getEventDateTimeString(j,k,l,"&&"),Q=J.split("&&"),K.title=m,K.startDateTime=Q[0],K.endDateTime=Q[1],N.data("tooltipcontent",K),b.setting.eventRendered&&b.setting.eventRendered.call(b,i,N,O,b.setting.visibleView,!1),($.cf.isValid(n)||b.setting.eventClicked)&&O.on($.CalenStyle.extra.sClickHandler,{url:n,eventId:i.calEventId,eventElemSelector:M,eventType:"AllDay",view:"DetailView",pluginId:b.tv.pluginId},b.__bindClick)}}}else if($.cf.compareStrings(a,"Small")||$.cf.compareStrings(a,"Both")){var na="Event-"+i.calEventId;if(0===$(b.elem).find("."+na).length)for(var oa=1;oa<=v;oa++){q=na,R=b.__getDayIndexInView(y),b.tv.fADVDayLftPos[R],I="cdvEvent ",b.compareDates(k,$.CalenStyle.extra.dToday)<0&&(I+="cBlurredEvent "),I+=q,b.setting.isTooltipInDetailView&&(I+=" cEventTooltip");var pa={};pa.iNumEvElem=v,pa.iId=i.calEventId,pa.sId=q,pa.dStart=j,pa.dEnd=k,pa.dStartView=s,pa.dEndView=t,pa.dThisDate=y,pa.iEventElem=oa,pa.iWkIndex=R;var qa=b._createAndAddEventSeg(pa),ra=qa.sName;q=qa.sId,qa.iTopPos,S=qa.iEventHeight;var sa=b.getDateInFormat({date:j},f,b.setting.is24Hour,!0)+" - "+b.getDateInFormat({date:k},f,b.setting.is24Hour,!0);D+="left: 0px; top: 0px; height: "+parseInt(S)+"px; width: 10px;",L="",P=$.cf.isValid(o)?"data-droppableid='"+o+"'":"",L+="<span id='"+q+"' class='"+I+"' style='"+D+"' data-pos='"+ra+"' "+P+" title='' data-id='"+i.calEventId+"'>",L+="<a class='cEventLink' style='color: "+C+";'>",d||$.cf.compareStrings(E,"Dot")||(L+="<span class='cdvEventIcon "+E+"' style='"+F+"' align='left'></span>"),L+="<div class='cdvEventDetails'>",$.cf.compareStrings(b.setting.visibleView,"DayEventListView")&&$.cf.isValid(i.status)&&(L+="<span class='cdvEventStatus' style='border-color: "+i.statusColor+";'></span>"),L+="<div class='cdvEventTitle'>"+m+"</div>",e||(L+="<div class='cdvEventTime'>"+sa+"</div>"),L+="</div>",L+="</a>",L+="</span>",$(b.elem).find(".cdvContRow3Main .cdvContRow3Events").append(L),M="#"+q,N=$(b.elem).find(M),O=N.find(".cEventLink"),K={},J=b.getEventDateTimeString(j,k,l,"&&"),Q=J.split("&&"),K.title=m,K.startDateTime=Q[0],K.endDateTime=Q[1],N.data("tooltipcontent",K),z+=$.CalenStyle.extra.iMS.d,y.setTime(z),b.setting.eventRendered&&b.setting.eventRendered.call(b,i,N,O,b.setting.visibleView,!1),($.cf.isValid(n)||b.setting.eventClicked)&&O.on($.CalenStyle.extra.sClickHandler,{url:n,eventId:i.calEventId,eventElemSelector:M,eventType:"Small",view:"DetailView",pluginId:b.tv.pluginId},b.__bindClick)}}}}b.tv.dDrgSDt=null,b.tv.dDrgEDt=null,($.cf.compareStrings(a,"AllDay")||$.cf.compareStrings(a,"Both"))&&b._makeEventEditableInDetailView(".cdvEventAllDay"),($.cf.compareStrings(a,"Small")||$.cf.compareStrings(a,"Both"))&&(b._setPropertiesOfEventSeg(),b._makeEventEditableInDetailView(".cdvEvent")),b.setting.isTooltipInDetailView&&b._addTooltipInDetailView(),b.setting.eventsAddedInView&&b.setting.eventsAddedInView.call(b,b.setting.visibleView,".cdvEvent, .cdvEventAllDay")}else console.log("to.__addEventsInDetailView - No Events");b.addRemoveViewLoader(!1,"cEventLoaderBg"),b.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_takeActionOnTimeSlotTableClick:function(){var a=this;$(a.elem).find(".calendarCont").on($.CalenStyle.extra.sClickHandler,function(b){if(!$(a.elem).find(".cdvEvent").hasClass("cEditingEvent")&&a.setting.cellClicked){var c={};c.x=b.pageX||b.originalEvent.touches[0].pageX||b.originalEvent.changedTouches[0].pageX,c.y=b.pageY||b.originalEvent.touches[0].pageY||b.originalEvent.changedTouches[0].pageY;for(var d,e,f,g,h=a.__getElementsAtPoint(c.x,c.y),i=0,j=0,k=0;k<h.length;k++){var l,m=$(h[k]),n=m.hasClass("cdvAllDayColumns"),o=m.hasClass("cdvTableColumns"),p=m.hasClass("cdvTimeSlotTableRow");if(n&&(l=m.attr("title"),d=new Date(l),e=!0),o&&(l=m.attr("title"),d=new Date(l),g=!0),p){var q=m.attr("class");q=q.replace(/cdvTimeSlotTableRow/g,""),q=q.replace(/ /g,""),i=parseInt(q.substr(0,2)),j=parseInt(q.substr(2,2)),f=!0}}a.setting.cellClicked&&(e?a.setting.cellClicked.call(a,a.setting.visibleView,d,!0,c):g&&f&&(d.setHours(i),d.setMinutes(j),a.setting.cellClicked.call(a,a.setting.visibleView,d,!1,c)))}b.stopPropagation(),a._makeEventNonEditableInDetailView(),a._callCommonEvents()})},_makeEventNonEditableInDetailView:function(){var a=this;if(null!==a.tv.oEvEdt){$("body").css("cursor","default");var b=a.tv.oEvEdt.calEventId,c=a.tv.oEvEdt.end;a._changeViewPropertiesWhileEditing("AFTER",b),a._setOpacityOfEventSeg(b,c),$.cf.compareStrings(a.tv.oDVEdtgEv.type,"cdvEvent")?(a._adjustEventsInDetailView(),$.CalenStyle.extra.bTouchDevice&&$(a.elem).find(".Event-"+b).hasClass("ui-resizable")&&$(a.elem).find(".Event-"+b).resizable("destroy")):a._adjustAllDayEventsInDetailView(),a.tv.oEvEdt=null,a.tv.oDVEdtgEv={}}},_makeEventEditableInDetailView:function(a){var b=this;$(b.elem).find(a).on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation()});var c,d,e;$.cf.compareStrings(a,".cdvEvent")?(c="EventEditable",d="EventDraggable",e="EventResizable"):$.cf.compareStrings(a,".cdvEventAllDay")&&(c="EventAllDayEditable",d="EventAllDayDraggable",e="EventAllDayResizable");for(var f=$(b.elem).find(a),g=0;g<f.length;g++){var h=f[g],i=$(h).attr("data-id"),j=b.getEventWithId(i),k="";(j.isDragNDropInDetailView||j.isResizeInDetailView)&&(k+=c,j.isDragNDropInDetailView&&(k+=" "+d+" cDragNDrop"),j.isResizeInDetailView&&(k+=" "+e,$.CalenStyle.extra.bTouchDevice||(b.setting.isResizeInDetailView?b._makeEventResizableInDetailView(".Event-"+i):$(".cdvEvent").removeClass("EventResizable")))),$(h).addClass(k)}b.setting.isDragNDropInDetailView?b._makeEventDraggableInDetailView(a,d):($(".cdvEvent").removeClass("EventDraggable cDragNDrop"),$(".cdvEventAllDay").removeClass("EventAllDayDraggable cDragNDrop")),$(b.elem).find("."+c).each(function(){var d,e,f,g,h,i,j,k,l,m,n=!1,o=8,p=$.CalenStyle.extra.bTouchDevice?300:0,q=!1;$(this).on({mousedown:function(f){if($.cf.compareStrings(a,".cdvEvent")&&b.tv.bDVScrlg)return!1;l=f.timeStamp,n=!0,d=f.pageX,e=f.pageY,h=d-o,i=e-o,j=d+o,k=e+o,q=!1,setTimeout(function(){if(n){var d=f.pageX,e=f.pageY;if(null===b.tv.oEvEdt){var g=h<=d&&d<=j,l=i<=e&&e<=k;g&&l&&(b.tv.bEvLgPresd=!0)}if(b.tv.bEvLgPresd&&(n=!1,null===b.tv.oEvEdt)){for(var o=f.target,p=$(b.elem).find(o).hasClass(c);!p&&(o=$(b.elem).find(o).parent(),p=$(b.elem).find(o).hasClass(c),void 0!==$(b.elem).find(o).attr("class")););m=$(b.elem).find(o).attr("id"),$.cf.compareStrings(a,".cdvEvent")?q=b._setSmallEventBeingEditedInDetailView(q,m):$.cf.compareStrings(a,".cdvEventAllDay")&&b._setAllDayEventBeingEditedInDetailView(m)}}},p)},mousemove:function(o){if($.cf.compareStrings(a,".cdvEvent")&&b.tv.bDVScrlg)return!1;if(n){if(f=o.pageX,g=o.pageY,null===b.tv.oEvEdt){var r=h<=f&&f<=j,s=i<=g&&g<=k;if(r&&s){o.timeStamp-l>p&&(b.tv.bEvLgPresd=!0)}}if(b.tv.bEvLgPresd){var t=Math.abs(f-d)>5,u=Math.abs(g-e)>1;if(n&&(t||u)&&(n=!1,null===b.tv.oEvEdt)){for(var v=o.target,w=$(b.elem).find(v).hasClass(c);!w&&(v=$(b.elem).find(v).parent(),w=$(b.elem).find(v).hasClass(c),void 0!==$(b.elem).find(v).attr("class")););m=$(b.elem).find(v).attr("id"),$.cf.compareStrings(a,".cdvEvent")?q=b._setSmallEventBeingEditedInDetailView(q,m):$.cf.compareStrings(a,".cdvEventAllDay")&&b._setAllDayEventBeingEditedInDetailView(m)}}}},mouseup:function(){n=!1}})})},_setSmallEventBeingEditedInDetailView:function(a,b){var c=this,d="#"+b,e=$(c.elem).find(".cdvTableColumns").width()-5,f=$(c.elem).find(d).position().left,g=f,h=c._getDateBasedOnLeftPosition(f),i=b.split("-"),j=i[1],k=i[2],l=".Event-"+j;if(!a){g=c._getLeftPositionOfEventSeg(f),$(c.elem).find(".Event-"+j).css({width:e});var m=c.getEventWithId(j),n=m.start,o=m.end,p=m.isAllDay,q=c.__getStartAndEndDatesOfEventForView(p,n,o),r=q[0],s=q[1];$(c.elem).find(d).css({left:g});var t=c.compareDates(h,r),u=c.compareDates(h,s),v=0===t||0===u;if($(c.elem).find(".Event-"+j).length>1&&v){var w,x;0===t?(w=s,x="#Event-"+j+"-2"):0===u&&(w=r,x="#Event-"+j+"-1");var y=c.__getDayIndexInView(w),z=c.tv.fADVDayLftPos[y];$(c.elem).find(x).css({left:z})}a=!0,c.tv.oEvEdt=c.getEventWithId(j),c.tv.oDVEdtgEv={},c.tv.oDVEdtgEv.type="cdvEvent",c.tv.oDVEdtgEv.sEventId=j}return c.tv.oDVEdtgEv.iSegIndex=k,c.tv.oDVEdtgEv.dEditingDate=h,c.tv.oDVEdtgEv.iElemLeft=g,$.CalenStyle.extra.bTouchDevice&&(c._changeViewPropertiesWhileEditing("BEFORE",j),c.setting.isResizeInDetailView&&null!==c.tv.oEvEdt&&c.tv.oEvEdt.isResizeInDetailView&&c._makeEventResizableInDetailView(l)),a},_setAllDayEventBeingEditedInDetailView:function(a){var b=this,c=a.split("-")[1];b.tv.oEvEdt=b.getEventWithId(c),b.tv.oDVEdtgEv={},b.tv.oDVEdtgEv.type="cdvEventAllDay",b.tv.oDVEdtgEv.sEventId=c,b._changeViewPropertiesWhileEditing("BEFORE",c)},_getWhetherEventIsAllDay:function(a){var b=this,c=b.getEventWithId(a);return null!==c.isAllDay&&c.isAllDay},_makeEventDraggableInDetailView:function(a,b){var c,d=this;$.cf.compareStrings(a,".cdvEvent")?c="Events":$.cf.compareStrings(a,".cdvEventAllDay")&&(c="AllDayEvents");var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x=d.setting.is24Hour?"HH:mm":"h[:m]sm",y=$.CalenStyle.extra.iScrollbarWidth;if($.cf.compareStrings(a,".cdvEvent")){var z=$(d.elem).find(".cdvTableColumns").width()-5;f=z;var A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y=z+6,Z=($(d.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(d.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2,_=d.tv.dDrgSDt,aa=d.tv.dDrgEDt,ba=!1;j=$(d.elem).css("margin-left"),j=parseInt(j.replace("px","")),g=$(d.elem).find(".cdvDetailTableColumnTime").width(),l=$(d.elem).find(".cdvContRow3Events").position().left+j+g,m=l+($(d.elem).find(".cdvContRow3Events").width()-g),q=1440,p=-1440,h=!1,$(d.elem).find("."+b).draggable({zIndex:10,scope:c,grid:[Y,Z],scroll:!1,containment:[l,p,m,q],delay:10,cursor:"move",revertDuration:300,start:function(a,b){if(d.tv.bDVResEv||d.tv.bDVScrlg)return!1;if(r=this,t=$(r).attr("id"),u=t.split("-"),v=u[1],w=u[2],$.CalenStyle.extra.bTouchDevice||d._changeViewPropertiesWhileEditing("BEFORE",v),!(h=null!==d.tv.oEvEdt&&d.tv.oDVEdtgEv.sEventId===v))return!1;d.tv.bDVDrgEv=!0;var c=d.getEventWithId(v);_=c.start,aa=c.end,N=c.isAllDay,M=d.__getStartAndEndDatesOfEventForView(N,_,aa),Q=M[0],R=M[1],A=b.position.left,C=A,E=A,B=b.position.top,D=B,F=B,W=!0},drag:function(a,b){if(r=this,t=$(r).attr("id"),u=t.split("-"),v=u[1],w=u[2],N=d._getWhetherEventIsAllDay(v),!(h=null!==d.tv.oEvEdt&&d.tv.oDVEdtgEv.sEventId===v))return!1;var c,e=b.position.left,f=b.position.top,g=e>=40,i=Math.round((e-E)/Y),j=Math.round((f-B)/Z),k=Math.abs(i),l=Math.abs(j),m=!!(g&&e!==E&&k>=1),n=f!==F&&l>=1;if(m){var o=Math.round((e-A)/Y);U=Math.abs(o*Y);var p=e-C,q="None";p>0?q="Right":p<0&&(q="Left");var y=d.compareDates(d.tv.dVDSDt,d.tv.oDVEdtgEv.dEditingDate),z=d.compareDates(d.tv.dVDEDt,d.tv.oDVEdtgEv.dEditingDate),W=d.compareDates(_,d.tv.oDVEdtgEv.dEditingDate),ca=d.compareDates(aa,d.tv.oDVEdtgEv.dEditingDate),da=d._getDateForDayNumber(2,!0),ea=d._getDateForDayNumber(2,!1),fa=d.compareDates(da,d.tv.oDVEdtgEv.dEditingDate),ga=d.compareDates(ea,d.tv.oDVEdtgEv.dEditingDate);c=$(d.elem).find(".Event-"+v).length,$.cf.compareStrings(q,"Right")&&0!==z?(J=e+Y/2,d.tv.oDVEdtgEv.dEditingDate=d._getDateBasedOnLeftPosition(J),K=_.getTime(),K+=$.CalenStyle.extra.iMS.d,_=new Date(K),L=aa.getTime(),L+=$.CalenStyle.extra.iMS.d,aa=new Date(L),d.tv.dDrgSDt=_,d.tv.dDrgEDt=aa,M=d.__getStartAndEndDatesOfEventForView(N,_,aa),Q=M[0],R=M[1],c>1?1===parseInt(w)&&(G=$(d.elem).find("#Event-"+v+"-2"),0===ga&&G.remove()):0===y&&0!==W&&(I="Event-"+v+"-2",$(this).attr("id",I),G=$(this).clone(),H="Event-"+v+"-1",G.attr("id",H),$(d.elem).find(".cdvContRow3Events").append(G),d._makeEventEditableInDetailView(".cdvEvent")),d._removeEventSegWithId(v),d._createAndAddEventSegForId(v,N,_,aa)):$.cf.compareStrings(q,"Left")&&0!==y&&(J=e+Y/2,d.tv.oDVEdtgEv.dEditingDate=d._getDateBasedOnLeftPosition(J),K=_.getTime(),K-=$.CalenStyle.extra.iMS.d,_=new Date(K),L=aa.getTime(),L-=$.CalenStyle.extra.iMS.d,aa=new Date(L),d.tv.dDrgSDt=_,d.tv.dDrgEDt=aa,M=d.__getStartAndEndDatesOfEventForView(N,_,aa),Q=M[0],R=M[1],c>1?2===parseInt(w)&&(G=$(d.elem).find("#Event-"+v+"-1"),0===fa&&G.remove()):0===z&&0!==ca&&(G=$(this).clone(),H="Event-"+v+"-2",G.attr("id",H),$(d.elem).find(".cdvContRow3Events").append(G),d._makeEventEditableInDetailView(".cdvEvent")),d._removeEventSegWithId(v),d._createAndAddEventSegForId(v,N,_,aa)),O=d.getDateInFormat({date:_},x,d.setting.is24Hour,!0),P=d.getDateInFormat({date:aa},x,d.setting.is24Hour,!0),$(d.elem).find(".Event-"+v+" .cdvEventDetails .cdvEventTime").html(O+"-"+P),E=e}if(n){var ha=f-F,ia=Math.round(ha/Z),ja=ia*d.tv.iUTmMS;U=Math.abs(ia*Z),X="None",ha>0?X="Down":ha<0&&(X="Up");var ka,la,ma,na,oa,pa,qa,ra,sa,ta;if($.cf.compareStrings(X,"Up")){var ua=$(d.elem).find(".cdvTimeSlotTableRow").first().position().top,va=ua+2*Z;if(a.pageX,ka=a.pageY,la=$(d.elem).find(".cdvContRow3Main").position().top,na=ka-la,oa=$(this).height(),na<va,pa=oa-Math.abs(f),qa=oa%Z,ra=1*Z+qa,f<0&&pa<ra,f<0?$(this).find(".cEventLink").css({"margin-top":Math.abs(f)}):$(this).find(".cEventLink").css({"margin-top":0}),K=_.getTime(),K+=ja,_=new Date(K),L=aa.getTime(),L+=ja,aa=new Date(L),M=d.__getStartAndEndDatesOfEventForView(N,_,aa),Q=M[0],R=M[1],S=d._getNumberOfDaysOfEventForWeek(N,_,aa,!1,!0),c=$(d.elem).find(".Event-"+v).length,T=d.__getDayIndexInView(d.tv.oDVEdtgEv.dEditingDate),c>0&&0===S)return $(this).remove(),!1;(c>0||S>0)&&(c>S&&(I="#Event-"+v+"-2",$(d.elem).find(I).remove(),d._performOperationsAfterDraggingStopsInDetailView(v,_,aa,!1)),c<S?(sa=d.compareDates(d.tv.oDVEdtgEv.dEditingDate,Q),ta=d.compareDates(d.tv.oDVEdtgEv.dEditingDate,R),d.tv.dDrgSDt=_,d.tv.dDrgEDt=aa,0===sa?H="Event-"+v+"-2":0===ta&&(H="Event-"+v+"-1",I="Event-"+v+"-2",$(this).attr("id",I)),G=$(this).clone(),G.attr("id",H),$(d.elem).find(".cdvContRow3Events").append(G),d._makeEventEditableInDetailView(".cdvEvent"),d._removeEventSegWithId(v),d._createAndAddEventSegForId(v,N,_,aa)):c===S&&(d._removeEventSegWithId(v),d._createAndAddEventSegForId(v,N,_,aa)))}else if($.cf.compareStrings(X,"Down")){var wa=$(d.elem).find(".cdvTimeSlotTableRow").last().position().top,xa=wa+Z,ya=wa-1*Z;a.pageX,ka=a.pageY,la=$(d.elem).find(".cdvContRow3Main").position().top,ma=$(d.elem).find(".cdvContRow3Main").scrollTop(),na=ka-la+ma,oa=$(this).height(),na>wa,na>ya,qa=oa%Z,ra=1*Z+qa,oa<=ra,f<0?$(this).find(".cEventLink").css({"margin-top":Math.abs(f)}):$(this).find(".cEventLink").css({"margin-top":0}),K=_.getTime(),K+=ja,_=new Date(K),L=aa.getTime(),L+=ja,aa=new Date(L),oa=$(this).height();var za=f+oa;if(za>xa&&(oa-=za-xa,$(this).css({height:oa})),M=d.__getStartAndEndDatesOfEventForView(N,_,aa),Q=M[0],R=M[1],O=d.getDateInFormat({date:_},x,d.setting.is24Hour,!0),P=d.getDateInFormat({date:aa},x,d.setting.is24Hour,!0),S=d._getNumberOfDaysOfEventForWeek(N,_,aa,!1,!0),c=$(d.elem).find(".Event-"+v).length,T=d.__getDayIndexInView(d.tv.oDVEdtgEv.dEditingDate),c>0&&0===S)return $(this).remove(),!1;if(c>0||S>0)if(c>S){var Aa="Event-"+v+"-1";I="#"+Aa,$(d.elem).find(I).remove(),H="#Event-"+v+"-2",$(d.elem).find(H).attr("id",Aa),d._performOperationsAfterDraggingStopsInDetailView(v,_,aa,!1)}else c<S?(sa=d.compareDates(d.tv.oDVEdtgEv.dEditingDate,Q),ta=d.compareDates(d.tv.oDVEdtgEv.dEditingDate,R),d.tv.dDrgSDt=_,d.tv.dDrgEDt=aa,0===sa?H="Event-"+v+"-2":0===ta&&(H="Event-"+v+"-1",I="Event-"+v+"-2",$(this).attr("id",I)),G=$(this).clone(),G.attr("id",H),$(d.elem).find(".cdvContRow3Events").append(G),d._makeEventEditableInDetailView(".cdvEvent"),d._removeEventSegWithId(v),d._createAndAddEventSegForId(v,N,_,aa)):c===S&&(d._removeEventSegWithId(v),d._createAndAddEventSegForId(v,N,_,aa))}F=f}d.tv.bDVDrgEv&&(b.position.left=d.tv.oDVEdtgEv.iElemLeft),C=e,D=f,d.tv.bChkDroppable&&(s=$(d.elem).find("#"+t+".ui-draggable-dragging"),S=d._getNumberOfDaysOfEventForWeek(N,_,aa,!1,!0),V=s.attr("data-droppableid"),ba=d._findWhetherEventEnteredNonDroppableZone(_,aa,N,S,V),ba?(s.addClass("cCursorNotAllowed"),s.find(".cEventLink").addClass("cCursorNotAllowed")):(s.removeClass("cCursorNotAllowed"),s.find(".cEventLink").removeClass("cCursorNotAllowed")))},stop:function(a,b){if(r=this,t=$(r).attr("id"),u=t.split("-"),v=u[1],w=u[2],h=null!==d.tv.oEvEdt&&d.tv.oDVEdtgEv.sEventId===v,d.tv.bChkDroppable&&(s=$(d.elem).find("#"+t+".ui-draggable-dragging"),S=d._getNumberOfDaysOfEventForWeek(N,_,aa,!1,!0),V=s.attr("data-droppableid"),ba=d._findWhetherEventEnteredNonDroppableZone(_,aa,N,S,V),s.removeClass("cCursorNotAllowed"),s.find(".cEventLink").removeClass("cCursorNotAllowed")),ba)setTimeout(function(){if(d._performOperationsAfterDraggingStopsInDetailView(v,null,null,!0),d.tv.dDrgSDt=null,d.tv.dDrgEDt=null,!h)return!1},300);else{if(!h)return $.CalenStyle.extra.bTouchDevice||d._makeEventNonEditableInDetailView(),d.tv.dDrgSDt=null,d.tv.dDrgEDt=null,!1;d._performOperationsAfterDraggingStopsInDetailView(v,_,aa,!0),d.tv.bDVDrgEv=!1,d.tv.dDrgSDt=null,d.tv.dDrgEDt=null}},revert:function(a,b){return!!ba}})}else $.cf.compareStrings(a,".cdvEventAllDay")&&(e=$(d.elem).find(".cdvEventAllDay").height(),f=$(d.elem).find(".cdvTableColumns").width(),f>140&&(f=140),g=$(d.elem).find(".cdvDetailTableColumnTime").width(),i=$(d.elem).position().left,j=$(d.elem).css("margin-left"),j=parseInt(j.replace("px","")),k=i+j+$(d.elem).find(".cdvContRow2Main").position().left,l=k+g,m=l+$(d.elem).find(".cdvContRow2Main").width()-(f+y+g),n=$(d.elem).position().top,o=$(d.elem).css("margin-top"),o=parseInt(o.replace("px","")),p=n+o+$(d.elem).find(".cdvContRow2Main").position().top,d.tv.bDisFBar&&$.cf.compareStrings(d.setting.filterBarPosition,"Top")&&(p+=d.setting.filterBarHeight),q=p+$(d.elem).find(".cdvContRow2Main").height()-e,h=!1,$(d.elem).find("."+b).draggable({zIndex:100,scope:c,cursorAt:{top:5,left:5},containment:[l,p,m,q],cursor:"move",revertDuration:300,start:function(){if(s=$(this),t=s.attr("id"),u=t.split("-"),v=u[1],!(h=null!==d.tv.oEvEdt&&d.tv.oDVEdtgEv.sEventId===v))return!1;var a=s.clone();s.parent().append(a),$(a).removeClass("cEditingEvent").addClass("cEventBeingDragged"),s.find(".cPartialEventLeft, .cPartialEventRight, .cPartialEventBoth").remove(),s.css({width:f,height:e})},revert:function(){return!0}}))},_performOperationsAfterDraggingStopsInDetailView:function(a,b,c,d){var e=this,f=e.getEventWithId(a),g=f.isAllDay,h=f.start,i=f.end;$.cf.isValid(b)||(b=new Date(h)),$.cf.isValid(c)||(c=new Date(i)),f.start=b,f.end=c,e._removeEventSegWithId(a),e._createAndAddEventSegForId(a,g,b,c),e._setPropertiesOfEventSeg(),e.tv.oEvEdt=f,$(e.elem).find(".cdvEvent").removeClass("ui-draggable-dragging"),e.tv.bDVDrgEv=!1,e.setting.saveChangesOnEventDrop?(e._makeEventNonEditableInDetailView(),e.setting.saveChangesOnEventDrop.call(e,f,h,i,b,c)):d&&!$.CalenStyle.extra.bTouchDevice&&e._makeEventNonEditableInDetailView()},_adjustAllDayEventsInDetailView:function(){for(var a=this,b=a.tv.iNoVDayDis,c=6,d=$.CalenStyle.extra.iEventHeights[a.setting.visibleView],e=0,f=0,g=0,h=0,i=0;i<a.tv.oAADEvSeg.length;i++){var j=a.tv.oAADEvSeg[i],k=j[0],l=j[1],m=j[2];f=(j[3]-1)*(d+c)+c,g=a.tv.fADVDayLftPos[m];var n,o=m+l;n=o>=b?a.tv.fADVDayLftPos[b-1]+a.tv.fDVDayWth+2:a.tv.fADVDayLftPos[o],e=n-g-5;var p=$(a.elem).find("#"+k);p.css({top:f,left:g,width:e,height:d,"line-height":d+"px"}),f>h&&(h=f);var q=0;q+=p.find(".cdvEventIcon").outerWidth(!0),q+=p.find(".cPartialEventLeft").outerWidth(!0),q+=p.find(".cPartialEventRight").outerWidth(!0),q+=p.find(".cdvEventTimeLeft").outerWidth(!0),q+=p.find(".cdvEventTimeRight").outerWidth(!0),q+=p.find(".cdvEventStatus").outerWidth(!0),q+=10*$.CalenStyle.extra.iBorderOverhead;var r=e-q;$(a.elem).find("#"+k).find(".cdvEventTitle").css({"max-height":d,"line-height":d+"px",width:r})}var s=h+d+2*c;$(a.elem).find(".cdvContRow2Main").css({height:s}),s=$(a.elem).find(".cdvContRow2Main").height(),$(a.elem).find(".cdvDetailTableRow2").css({height:s}),$(a.elem).find(".cdvCellHeaderAllDay").css({height:s});var t=$(a.elem).find(".cdvContRow2Main").position().top,u=$(a.elem).find(".cdvDetailTableMain").height(),v=$(a.elem).find(".cdvDetailTableRow1").height(),w=t+s+$.CalenStyle.extra.iEventHeightOverhead,x=u-(v+s+$.CalenStyle.extra.iEventHeightOverhead);$(a.elem).find(".cdvContRow3Main").css({height:x,top:w}),a._makeEventEditableInDetailView(".cdvEventAllDay")},_getLeftColumnAndWidthOfAnEventSegInDetailView:function(a){for(var b=this,c=b.tv.oASmEvSeg.length,d=0;d<c;d++){var e=b.tv.oASmEvSeg[d];if(e.eventSegId===a)return[e.segLeftColumn,e.segColumns]}return 0},_assignEventSegToColumnsInDetailView:function(a){var b,c,d=this,e=a.length,f=[],g=0;if(e>0){for(b=0;b<e;b++)if(c=a[b],0===b)g=1,c.segLeftColumn=g,f.push([g,[c]]);else if(1===b)g=2,c.segLeftColumn=g,f.push([g,[c]]);else{for(var h=!1,i=0;i<f.length;i++){for(var j=f[i],k=j[0],l=j[1],m=!1,n=0;n<l.length;n++){var o=l[n],p=d._whetherEventsAreColliding(c,o);if(p){m=!0;break}}if(!m){c.segLeftColumn=k,l.push(c),h=!0;break}}h||(g++,c.segLeftColumn=g,f.push([g,[c]]))}for(b=0;b<e;b++)c=a[b],c.segColumns=g}return f},_addTimeSlotTable:function(){var a=this,b="",c="",d="",e=0;a.tv.fAHrTpPos=[],b+="<table class='cdvTimeSlotTable'>";for(var f=0;f<24*a.tv.iUTmSlt;f++){var g=Math.floor(f/a.tv.iUTmSlt),h=f%a.tv.iUTmSlt,i=h*a.setting.unitTimeInterval,j=new Date,k=new Date,l=new Date;j.setHours(g),j.setMinutes(i),k.setHours(a.tv.oBsHours.startTime[0]),k.setMinutes(a.tv.oBsHours.startTime[1]),l.setHours(a.tv.oBsHours.endTime[0]),l.setMinutes(a.tv.oBsHours.endTime[1]);if(!a.setting.excludeNonBusinessHours||a.compareDateTimes(j,k)>=0&&a.compareDateTimes(j,l)<0){var m=a.getNumberStringInFormat(g,2,!1)+a.getNumberStringInFormat(i,2,!1),n=a.getDateInFormat({iDate:{H:g,m:i}},"hh:mm",a.setting.is24Hour,!0);c="cdvTimeSlotTableRow cdvTimeSlotTableRow"+m,b+="<tr class='"+c+"' title='"+n+"'>",a.setting.timeLabels[h]||(n="&nbsp;"),b+="<td class='cdvDetailTableColumnTime'><span>"+n+"</span></td>";for(var o=0;o<a.tv.iNoVDayDis;o++){var p=a.tv.bADVCur[o],q=p[f],r=a.tv.dAVDt[o],s="";d="cdvDetailTableColumn"+o;var t="cdvTableColumns "+d;if(0===q)t+=" cNonBusinessHoursBg";else if(2===q)t+=" cRestrictedSectionBg";else if(1!==q)for(var u=0;u<a.tv.sADVInfo.length;u++){var v=a.tv.sADVInfo[u];if(v.index===q){$.cf.isValid(v.class)&&(t+=" "+v.class),$.cf.isValid(v.bgColor)&&(s="style='background: "+$.cf.addHashToHexcode(v.bgColor)+";'");break}}else 1===q&&(t+=" cBusinessHoursBg");b+="<td class='"+t+"' title='"+r+"' "+s+"'> &nbsp; </td>"}b+="</tr>",a.tv.fAHrTpPos.push(e),e+=32}}b+="</table>",$(a.elem).find(".cdvContRow3Main").html(b),$(a.elem).find(".cdvContRow3Main").scroll(function(){a.tv.bDVScrlg=!0,setTimeout(function(){a.tv.bDVScrlg=!1},1e3)}),setTimeout(function(){a._showCurrentTimeIndicator()},100),a._makeViewDroppableInDetailView()},__updateTimeSlotTableView:function(){var a=this;$(a.elem).find(".cdvTableColumns").removeClass("cNonBusinessHoursBg cRestrictedSectionBg cBusinessHoursBg"),a._getTimeSlotsArrayForCurrentView();var b,c,d,e,f,g,h=24*a.tv.iUTmSlt;for(b=0;b<h;b++){var i=Math.floor(b/a.tv.iUTmSlt),j=b%a.tv.iUTmSlt,k=j*a.setting.unitTimeInterval,l=a.getNumberStringInFormat(i,2,!1)+a.getNumberStringInFormat(k,2,!1),m=".cdvTimeSlotTableRow"+l,n=$(a.elem).find(m);for(c=0;c<a.tv.iNoVDayDis;c++){d=a.tv.bADVCur[c],e=d[b];var o=$(n).find(".cdvDetailTableColumn"+c),p="";if(0===e)p="cNonBusinessHoursBg";else if(2===e)p="cRestrictedSectionBg";else if(1!==e){for(f=0;f<a.tv.sADVInfo.length;f++)if(g=a.tv.sADVInfo[f],g.index===e){$.cf.isValid(g.class)&&(p+=" "+g.class),$.cf.isValid(g.bgColor)&&o.css({background:$.cf.addHashToHexcode(g.bgColor)});break}}else 1===e&&(p="cBusinessHoursBg");o.addClass(p)}}for(c=0;c<a.tv.iNoVDayDis;c++){d=a.tv.bADVCur[c],e=d[h];var q=$(a.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+c);if(2===e)q.addClass("cRestrictedSectionBg");else if(0!==e&&1!==e)for(f=0;f<a.tv.sADVInfo.length;f++)if(g=a.tv.sADVInfo[f],g.index===e){$.cf.isValid(g.class)&&q.addClass(g.class),$.cf.isValid(g.bgColor)&&q.css({background:$.cf.addHashToHexcode(g.bgColor)});break}}},_makeViewDroppableInDetailView:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=this,p=!1;$(o.elem).find(".cdvDetailTableRow2 .cdvAllDayColumns").droppable({scope:"AllDayEvents",over:function(q,r){a=$(this).attr("id"),b=parseInt(a.replace("cdvAllDayColumn","")),c=r.draggable,d=$(o.elem).find(c).attr("id"),e=d.replace("Event-",""),f=o.getEventWithId(e),g=f.start,h=f.end,i=f.isAllDay,j=o.getNumberOfDaysOfEvent(i,g,h,!1,!1,!0),k=o.tv.dAVDt[b],l=o.setDateInFormat({iDate:{d:k.getDate(),M:k.getMonth(),y:k.getFullYear(),H:g.getHours(),m:g.getMinutes(),s:g.getSeconds()}},""),m=new Date(l.getTime()+(h.getTime()-g.getTime())),o.tv.bChkDroppable&&(n=$(o.elem).find("#"+d+".ui-draggable-dragging"),a=n.attr("data-droppableid"),p=o._findWhetherEventEnteredNonDroppableZone(l,m,i,j,a),p?(n.addClass("cCursorNotAllowed"),n.find(".cEventLink").addClass("cCursorNotAllowed")):(n.removeClass("cCursorNotAllowed"),n.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(o.elem).find(".cdvAllDayColumns").removeClass("cActivatedCell");for(var s=0;s<j;s++){var t=b+s;if(t<=o.tv.dAVDt.length-1){var u="#cdvAllDayColumn"+t;$(o.elem).find(u).addClass("cActivatedCell")}}},drop:function(q,r){if(a=$(this).attr("id"),b=parseInt(a.replace("cdvAllDayColumn","")),$(o.elem).find(".cdvAllDayColumns").removeClass("cActivatedCell"),c=r.draggable,d=$(o.elem).find(c).attr("id"),e=d.replace("Event-",""),f=o.getEventWithId(e),g=f.start,h=f.end,i=f.isAllDay,j=o.getNumberOfDaysOfEvent(i,g,h,!1,!1,!0),k=o.tv.dAVDt[b],l=o.setDateInFormat({iDate:{d:k.getDate(),M:k.getMonth(),y:k.getFullYear(),H:g.getHours(),m:g.getMinutes(),s:g.getSeconds()}},""),m=new Date(l.getTime()+(h.getTime()-g.getTime())),o.tv.bChkDroppable&&(n=$(o.elem).find("#"+d+".ui-draggable-dragging"),a=n.attr("data-droppableid"),p=o._findWhetherEventEnteredNonDroppableZone(l,m,i,j,a),n.removeClass("cCursorNotAllowed"),n.find(".cEventLink").removeClass("cCursorNotAllowed")),p)setTimeout(function(){return o.tv.bChkDroppable&&n.removeClass("cEventBeingDragged ui-draggable-dragging"),$(r.draggable).remove(),o._makeEventNonEditableInDetailView(),!1},300);else{if(!o.__updateEventWithId(e,l,m))return $(r.draggable).remove(),o._makeEventNonEditableInDetailView(),!1;$(o.elem).find(".cdvEventAllDay").remove(),o.__addEventsInDetailView("AllDay"),o._adjustAllDayEventsInDetailView(),o._makeEventNonEditableInDetailView()}o.tv.bDVDrgEv=!1,o.setting.saveChangesOnEventDrop&&o.setting.saveChangesOnEventDrop.call(o,f,g,h,l,m)}})},_canEditEventInDetailView:function(a){var b=this,c=a.split("-"),d=c[1],e=c[2];return[null!==b.tv.oEvEdt&&b.tv.oDVEdtgEv.sEventId===d,d,e]},_makeEventResizableInDetailView:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=this,r=($(q.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(q.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2,s=r/4,t=46*r,u=!1,v=!1;$(q.elem).find(a).resizable({grid:r,distance:s,handles:"s",maxHeight:t,minHeight:r/2,containment:"parent",create:function(b,c){$(q.elem).find(a).find(".ui-resizable-handle").css({"text-align":"center"});var d=$(q.elem).find(a+" .ui-resizable-s");d.css({bottom:0}),d.addClass("cEventResizeHandle"),d.html("<div class ='cHandleSouth'></div>"),d.on($.CalenStyle.extra.sClickHandler,function(a){a.stopPropagation()})},start:function(a,c){if(q.tv.bDVDrgEv||q.tv.bDVScrlg)return!1;d=$(q.elem).find(c.element).attr("id"),$.CalenStyle.extra.bTouchDevice||(l=d.split("-"),m=l[1],q._changeViewPropertiesWhileEditing("BEFORE",m));var n=q._canEditEventInDetailView(d);(u=n[0])&&(q.tv.bDVResEv=!0,d="#"+d,e=n[1],f=n[2],k=$(q.elem).find(d).height(),b="Event-"+e,j=$(q.elem).find(d).position().top,g=q._getStartAndEndDatesOfEventWithId(e),h=new Date(g[0]),i=new Date(g[1]))},resize:function(a,b){if(q.tv.bDVDrgEv||q.tv.bDVScrlg)return!1;d=$(q.elem).find(b.element).attr("id");var g=q._canEditEventInDetailView(d);if(u=g[0]){c=q._getNumberOfDaysOfEventForWeek(0,h,i,!1,!0),d="#"+d;var l=$(q.elem).find(d).height(),m=j;$(q.elem).find(d).css({top:m});var r=0;m<0?(r=m+k,l>=r-10&&l<=r+10&&(r=0)):r=l;if(r>0&&Math.abs(l-k)>10){var s;if(l<k?(s=i.getTime(),s-=q.tv.iUTmMS,i=new Date(s)):l>k&&(s=i.getTime(),s+=q.tv.iUTmMS,i=new Date(s)),n=$(q.elem).find(d+".ui-resizable-resizing"),o=n.attr("data-droppableid"),p=q._findWhetherEventEnteredNonDroppableZone(h,i,v,c,o))return n.addClass("cCursorNotAllowed"),n.find(".cEventLink").addClass("cCursorNotAllowed"),n.css({height:b.originalSize.height}),!1;if(n.removeClass("cCursorNotAllowed"),n.find(".cEventLink").removeClass("cCursorNotAllowed"),!p){if(m+l<=0)return q._performOperationsAfterResizingStopsInDetailView(e,h,i),!1;if(2===c&&1===f)return $(q.elem).find("#Event-"+e+"-2").remove(),i=q.setDateInFormat({date:h},"END"),i.setMinutes(30),i.setSeconds(0),q._performOperationsAfterResizingStopsInDetailView(e,h,i),!1;k=l}}}},stop:function(a,b){if(q.tv.bDVDrgEv||q.tv.bDVScrlg)return!1;d=$(q.elem).find(b.element).attr("id");var c=q._canEditEventInDetailView(d);u=c[0],u&&($.cf.isValid(n)&&(n.removeClass("cCursorNotAllowed"),n.find(".cEventLink").removeClass("cCursorNotAllowed")),p&&(g=q._getStartAndEndDatesOfEventWithId(e),h=new Date(g[0]),i=new Date(g[1])),q._performOperationsAfterResizingStopsInDetailView(e,h,i),q.tv.bDVResEv=!1),$.CalenStyle.extra.bTouchDevice||q._makeEventNonEditableInDetailView()}})},_performOperationsAfterResizingStopsInDetailView:function(a,b,c){var d=this,e=d.getEventWithId(a),f=e.isAllDay,g=e.start,h=e.end;e.start=b,e.end=c,d._removeEventSegWithId(a),d._createAndAddEventSegForId(a,f,b,c),d._setPropertiesOfEventSeg(),d.tv.oEvEdt=e,$(d.elem).find(".cdvEvent").removeClass("ui-resizable-resizing"),d.tv.bDVResEv=!1,d.setting.saveChangesOnEventResize&&d.setting.saveChangesOnEventResize.call(d,e,g,h,b,c)},__adjustDetailViewTable:function(){var a=this,b=$(a.elem).find(".cdvCalendarCont").css("max-height");b=parseInt(b.replace("px",""))||0;var c=$(a.elem).find(".cdvCalendarCont").css("min-height");c=parseInt(c.replace("px",""))||0;var d=$.CalenStyle.extra.iScrollbarWidth;if(b>0&&$(a.elem).height()>b?$(a.elem).css({height:b}):c>0&&$(a.elem).height()<c&&$(a.elem).css({height:c}),0!==a.tv.iCalHeight&&$(a.elem).css({height:a.tv.iCalHeight}),$(a.elem).find(".cdvCalendarCont").length>0&&!a.tv.bDVDrgEv&&!a.tv.bDVResEv){var e=$(a.elem).find(".calendarCont").parent().outerWidth(),f=$(a.elem).find(".calendarCont").outerHeight(),g=f;if(a.tv.bDisFBar)if($.cf.compareStrings(a.setting.filterBarPosition,"Left")||$.cf.compareStrings(a.setting.filterBarPosition,"Right"))e-=a.setting.filterBarWidth;else if($.cf.compareStrings(a.setting.filterBarPosition,"Top")||$.cf.compareStrings(a.setting.filterBarPosition,"Bottom")){var h=e;$(a.elem).find(".cFilterBar").css({width:h}),g-=$(a.elem).find(".cFilterBar").height()}$(a.elem).find(".calendarContInner").css({width:e,height:g}),a.__adjustHeader(),d>0&&$(a.elem).find(".cdvDetailTableScroll").css({width:d}),$.cf.compareStrings(a.setting.filterBarPosition,"Right")&&$(a.elem).find(".cFilterBar").css({left:e}),$(a.elem).find(".calendarCont").css("overflow","hidden");var i=0,j=e,k=e;$(a.elem).find(".cContHeader").length>0&&$(a.elem).find(".cContHeader").css({width:k});var l=e,m=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").outerHeight():0;a.tv.bDisABar&&(f-=$(a.elem).find(".cActionBar").height()),a.tv.bDisFBar&&($.cf.compareStrings(a.setting.filterBarPosition,"Top")||$.cf.compareStrings(a.setting.filterBarPosition,"Bottom"))&&(f-=$(a.elem).find(".cFilterBar").height());var n=f-m;a.tv.bDisABar&&a.tv.bDisFBar&&$.cf.compareStrings(a.setting.filterBarPosition,"Bottom")?n-=$.CalenStyle.extra.iBorderOverhead:n+=$.CalenStyle.extra.iBorderOverhead,$(a.elem).find(".cdvDetailTableMain").css({height:n,width:l});var o=$(a.elem).find(".cdvDetailTableMain").position().top+$(a.elem).find(".cdvDetailTableRow1").outerHeight();$(a.elem).find(".cdvContRow2Main").css({left:i,top:o,width:j});var p=a.tv.iNoVDay*$.CalenStyle.extra.iBorderOverhead,q=$(a.elem).find(".cdvDetailTableColumnTime").width();q=60!==q?60:q;var r=(j-q-d-p)/a.tv.iNoVDayDis;$(a.elem).find(".cdvTableColumns").css({width:r}),$(a.elem).find(".cdvAllDayColumns").css({width:r});var s=o+$(a.elem).find(".cdvContRow2Main").outerHeight(),t=s,u=f-s,v=e-$.CalenStyle.extra.iBorderOverhead,w=$(a.elem).find(".cdvTimeSlotTable").prop("scrollHeight");u=u>w?w:u,$(a.elem).find(".cdvContRow3Main").css({left:0,top:t,height:u,width:v}),0===d?v+=1:v=d>p?v-d:v-p+d,$(a.elem).find(".cdvTimeSlotTable").css({width:v}),$(a.elem).find(".cdvContRow3Events").css({height:w,width:v}),q=$(a.elem).find(".cdvDetailTableColumnTime").width(),q=60!==q?60:q,r=(e-q-d-p)/a.tv.iNoVDayDis,$(a.elem).find(".cdvTableColumns").css({width:r}),$(a.elem).find(".cdvAllDayColumns").css({width:r}),$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")&&$(a.elem).find(".cdlvDaysTable").css({width:r}),a.tv.fDVDayWth=$(a.elem).find(".cdvTableColumns").width();var x=a._getTimeSlotLeftPosition();$(a.elem).find(".cdvContRow3Main .cTimeline").length>0&&$(a.elem).find(".cdvContRow3Main .cTimeline").css({left:x,width:a.tv.fDVDayWth}),a.tv.fADVDayLftPos=[];for(var y=0;y<a.tv.iNoVDayDis;y++){var z="#cdvCellDay"+y,A=$(a.elem).find(z).position().left;a.tv.fADVDayLftPos.push(A)}a._adjustEventsInDetailView(),a._adjustAllDayEventsInDetailView()}a.setCalendarBorderColor()},_adjustEventsInDetailView:function(){for(var a=this,b=$(a.elem).find(".cdvEvent"),c=0;c<b.length;c++){var d=b[c],e=$(a.elem).find(d).attr("data-pos"),f=e.split("|"),g=parseInt(f[1]),h=$(a.elem).find(d),i=h.attr("id"),j=a._getLeftColumnAndWidthOfAnEventSegInDetailView(i),k=j[0],l=j[1],m=a.tv.fADVDayLftPos[g],n=parseInt(f[2]),o=100/l,p=a.tv.fDVDayWth*o/100;m+=(k-1)*p,p-=.05*p,h.css({left:m,top:n,width:p}),n<0&&h.find(".cEventLink").css({"margin-top":Math.abs(n)});var q=h.height(),r=h.find(".cdvEventTime").height(),s=q-r-10,t=h.find(".cdvEventTitle").css("min-height");t=$.cf.isValid(t)?parseInt(t.replace("px","")):0,t<s&&h.find(".cdvEventTitle").css({"max-height":s})}a._makeEventEditableInDetailView(".cdvEvent")},_displayWeekNumberInDetailView:function(){var a=this,b=a.__getWeekNumber(a.tv.dVSDt,a.tv.dVEDt);$(a.elem).find(".cdvCellWeekNumberLabel").html(a.setting.miscStrings.week),$(a.elem).find(".cdvCellWeekNumber").html(b)},_setDateStringsInDetailView:function(){var a,b=this,c=b.getDateInFormat({date:b.tv.dVSDt},"object",!1,!0),d=b.getDateInFormat({date:b.tv.dVEDt},"object",!1,!0);a=$.cf.compareStrings(b.setting.visibleView,"DayView")||$.cf.compareStrings(b.setting.visibleView,"CustomView")&&1===b.setting.daysInCustomView?"<b>"+b.getDateInFormat({iDate:c},"DDDD",!1,!0)+" "+b.getDateInFormat({iDate:d},"MMMM",!1,!0)+" "+b.getNumberStringInFormat(d.d,0,!0)+"</b>  "+b.getNumberStringInFormat(d.y,0,!0):c.y===d.y?c.M===d.M?"<b>"+b.getDateInFormat({iDate:c},"MMM",!1,!0)+" "+b.getNumberStringInFormat(c.d,0,!0)+"</b>  -  <b>"+b.getNumberStringInFormat(d.d,0,!0)+"</b>  "+b.getNumberStringInFormat(d.y,0,!0):"<b>"+b.getDateInFormat({iDate:c},"MMM",!1,!0)+"  "+b.getNumberStringInFormat(c.d,0,!0)+"</b>  -  <b>"+b.getDateInFormat({iDate:d},"MMM",!1,!0)+" "+b.getNumberStringInFormat(d.d,0,!0)+"</b>  "+b.getNumberStringInFormat(d.y,0,!0):"<b>"+b.getDateInFormat({iDate:c},"MMM",!1,!0)+"  "+b.getNumberStringInFormat(c.d,0,!0)+"</b>  "+b.getNumberStringInFormat(c.y,0,!0)+"  -  <b>"+b.getDateInFormat({iDate:d},"MMM",!1,!0)+" "+b.getNumberStringInFormat(d.d,0,!0)+"</b>  "+b.getNumberStringInFormat(d.y,0,!0),b.setting.modifyHeaderViewLabels&&b.setting.modifyHeaderViewLabels.call(b,b.tv.dVSDt,b.tv.dVEDt,b.setting.selectedDate,a,b.setting.visibleView),$(b.elem).find(".cContHeaderLabel").html(a);for(var e=0;e<b.tv.iNoVDayDis;e++){var f=b.tv.dAVDt[e],g=b.compareDates(f,$.CalenStyle.extra.dToday),h=f.getDay(),i=".cdvDetailTableMain #cdvCellDay"+e,j=f.getDate(),k=!b.tv.bABsDays[h],l=b.tv.bADVCur[e],m=l[24*b.tv.iUTmSlt];k&&0===g?$(b.elem).find(i).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(k&&$(b.elem).find(i).addClass("cNonBusinessHoursBg"),0===g&&$(b.elem).find(i).addClass("cTodayHighlightTextColor")),0===g?$(b.elem).find(i).html("<span class='cdvCellDayLeft'>"+b.setting.miscStrings.today+"</span><span class='cdvCellDayRight'>"+b.getNumberStringInFormat(j,0,!0)+"</span>"):$(b.elem).find(i).html("<span class='cdvCellDayLeft'>"+b.getDateInFormat({iDate:{D:h}},"DDD",!1,!0)+"</span><span class='cdvCellDayRight'>"+b.getNumberStringInFormat(j,0,!0)+"</span>"),k&&0===g?$(b.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+e).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(k&&$(b.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+e).addClass("cNonBusinessHoursBg"),0===g&&$(b.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+e).addClass("cTodayHighlightTextColor"),2===m&&$(b.elem).find(".cdvDetailTableMain #cdvAllDayColumn"+e).addClass("cRestrictedSectionBg")),k&&0===g?$(b.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+e).addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(k&&$(b.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+e).addClass("cNonBusinessHoursBg"),0===g&&$(b.elem).find(".cdvDetailTableMain .cdvDetailTableColumn"+e).addClass("cTodayHighlightTextColor"))}$.cf.compareStrings(b.setting.visibleView,"WeekView")&&b._displayWeekNumberInDetailView()},__goToPrevDetailView:function(){var a=this;if(a.setting.showTransition){var b=$(a.elem).find(".cdvDetailTableMain"),c=b.width(),d=b.position().left,e=0;e=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").position().top+$(a.elem).find(".cContHeader").outerHeight()-1:$(a.elem).position().top;var f=b.clone();$(f).removeClass("cdvDetailTableMain").addClass("cdvDetailTableTemp"),$(f).css({position:"absolute",top:e,left:d}),b.parent().append(f),d+=c,$(a.elem).find(".cdvDetailTableTemp .cdlvDaysTableMain").removeClass("cdlvDaysTableMain").addClass("cdlvDaysTableTemp");var g=$(a.elem).find(".cdvContRow2Main"),h=g.position().left,i=g.width(),j=g.clone();$(j).removeClass(".cdvContRow2Main").addClass("cdvContRow2Temp"),g.parent().append(j),h+=i;var k=$(a.elem).find(".cdvContRow3Main"),l=k.position().left,m=k.width(),n=k.clone();if($(n).removeClass(".cdvContRow3Main").addClass("cdvContRow3Temp"),k.parent().append(n),l+=m,$(a.elem).find(".cdvContRow3Main .cTimeline").remove(),!$.CalenStyle.extra.bTouchDevice&&$(a.elem).find(".cdvContRow3Temp .cTimeIndicator").length>0){var o=$(a.elem).find(".cdvContRow3Temp .cTimeIndicator").position().top,p=o-$(a.elem).find(".cdvContRow3Temp").height()/2;$(a.elem).find(".cdvContRow3Temp").scrollTop(p)}$(f).animate({left:d},a.setting.transitionSpeed),$(j).animate({left:h},a.setting.transitionSpeed),$(n).animate({left:l},a.setting.transitionSpeed),setTimeout(function(){$(a.elem).find(".cdvDetailTableTemp").remove(),$(a.elem).find(".cdvContRow2Temp").remove(),$(a.elem).find(".cdvContRow3Temp").remove()},a.setting.transitionSpeed)}if($.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")){var q=a.tv.iNoVDay+1,r=a.__setCurrentViewDatesArray(q,a.tv.dVSDt,null,"Prev");r.shift(),r.reverse(),a.setting.selectedDate=r[a.tv.iSelDay],a.setting.selectedDate=a.setDateInFormat({date:a.setting.selectedDate},"START")}else{var s=a.tv.dVSDt.getTime();7===a.setting.daysInCustomView?s-=a.tv.iNoVDay*$.CalenStyle.extra.iMS.d:s-=$.CalenStyle.extra.iMS.d,a.setting.selectedDate=a.setDateInFormat({date:new Date(s)},"START")}a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType="Prev",a.__reloadCurrentView(!0,!0),setTimeout(function(){a.__reloadDatePickerContentOnNavigation()},10)},__goToNextDetailView:function(){var a=this;if(a.setting.showTransition){var b=$(a.elem).find(".cdvDetailTableMain"),c=b.width(),d=b.position().left,e=0;e=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").position().top+$(a.elem).find(".cContHeader").outerHeight()-1:$(a.elem).position().top;var f=b.clone();$(f).removeClass("cdvDetailTableMain").addClass("cdvDetailTableTemp"),$(f).css({position:"absolute",top:e,left:d}),b.parent().append(f),d-=c,$(a.elem).find(".cdvDetailTableTemp .cdlvDaysTableMain").removeClass("cdlvDaysTableMain").addClass("cdlvDaysTableTemp");var g=$(a.elem).find(".cdvContRow2Main"),h=g.position().left,i=g.width(),j=g.clone();$(j).removeClass(".cdvContRow2Main").addClass("cdvContRow2Temp"),g.parent().append(j),h-=i;var k=$(a.elem).find(".cdvContRow3Main"),l=k.position().left,m=k.width(),n=k.clone();if($(n).removeClass(".cdvContRow3Main").addClass("cdvContRow3Temp"),k.parent().append(n),l-=m,$(a.elem).find(".cdvContRow3Main .cTimeline").remove(),!$.CalenStyle.extra.bTouchDevice&&$(a.elem).find(".cdvContRow3Temp .cTimeIndicator").length>0){var o=$(a.elem).find(".cdvContRow3Temp .cTimeIndicator").position().top,p=o-$(a.elem).find(".cdvContRow3Temp").height()/2;$(a.elem).find(".cdvContRow3Temp").scrollTop(p)}$(f).animate({left:d},a.setting.transitionSpeed),$(j).animate({left:h},a.setting.transitionSpeed),$(n).animate({left:l},a.setting.transitionSpeed),setTimeout(function(){$(a.elem).find(".cdvDetailTableTemp").remove(),$(a.elem).find(".cdvContRow2Temp").remove(),$(a.elem).find(".cdvContRow3Temp").remove()},a.setting.transitionSpeed)}if($.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")){var q=a.tv.iNoVDay+1,r=a.__setCurrentViewDatesArray(q,a.tv.dVEDt,null,"Next");r.shift(),a.setting.selectedDate=r[a.tv.iSelDay],a.setting.selectedDate=a.setDateInFormat({date:a.setting.selectedDate},"START")}else{var s=a.tv.dVEDt.getTime();s+=$.CalenStyle.extra.iMS.d,a.setting.selectedDate=a.setDateInFormat({date:new Date(s)},"START")}a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType="Next",a.__reloadCurrentView(!0,!0),setTimeout(function(){a.__reloadDatePickerContentOnNavigation()},10)},_showCurrentTimeIndicator:function(){for(var a,b=this,c=!1,d=0;d<$.CalenStyle.extra.oArrCalenStyle.length;d++){if($.CalenStyle.extra.oArrCalenStyle[d].tv.pluginId===b.tv.pluginId){c=!0;break}}if(c){var e=Math.floor(($(b.elem).find(".cdvTimeSlotTableRow:eq(0)").outerHeight()+$(b.elem).find(".cdvTimeSlotTableRow:eq(1)").outerHeight())/2/b.setting.unitTimeInterval);if($.cf.compareStrings(b.setting.visibleView,"WeekView")||$.cf.compareStrings(b.setting.visibleView,"DayView")||$.cf.compareStrings(b.setting.visibleView,"CustomView")||$.cf.compareStrings(b.setting.visibleView,"DayEventDetailView")){var f=b._getCurrentDate(),g=f.getHours(),h=f.getMinutes(),i=h%b.setting.unitTimeInterval,j=e*i;h-=j;var k=b.getNumberStringInFormat(g,2,!1),l=b.getNumberStringInFormat(h,2,!1),m=".cdvContRow3Main .cdvTimeSlotTableRow"+k+l;if($(b.elem).find(m).length>0){var n,o=$(b.elem).find(m).position().top,p=0,q=0;b.tv.fDVDayWth>0&&(q=b.tv.fDVDayWth),o+=j;($.cf.compareStrings(b.setting.visibleView,"DayEventDetailView")?0===b.compareDates(b.setting.selectedDate,$.CalenStyle.extra.dToday):b.__isDateInCurrentView(f))?(p=b._getTimeSlotLeftPosition(),$(b.elem).find(".cdvContRow3Main .cTimeline").length>0?$(b.elem).find(".cdvContRow3Main .cTimeline").css({left:p,top:o,width:q}):(n="<div class='cTimeline'></div>",$(b.elem).find(".cdvContRow3Main .cdvTimeSlotTable").append(n),$(b.elem).find(".cdvContRow3Main .cTimeline").css({left:p,top:o,width:q}))):$(b.elem).find(".cdvContRow3Main .cTimeline").remove(),$(b.elem).find(".cdvContRow3Main .cTimeIndicator").length>0?$(b.elem).find(".cdvContRow3Main .cTimeIndicator").css({top:o}):(n="<div class='cTimeIndicator'></div>",$(b.elem).find(".cdvContRow3Main .cdvTimeSlotTable").append(n),$(b.elem).find(".cdvContRow3Main .cTimeIndicator").css({top:o})),$.CalenStyle.extra.bTouchDevice||setTimeout(function(){var a=o-$(b.elem).find(".cdvContRow3Main").height()/2;$(b.elem).find(".cdvContRow3Main").scrollTop(a)},500)}a=setTimeout(function(){b._showCurrentTimeIndicator()},$.CalenStyle.extra.iMS.m*b.setting.timeIndicatorUpdationInterval)}c=!1}else clearTimeout(a)},_getTimeSlotLeftPosition:function(){var a=this,b=0;if(a.tv.fADVDayLftPos.length>0)for(var c=0;c<a.tv.dAVDt.length;c++)if(0===a.compareDates($.CalenStyle.extra.dToday,a.tv.dAVDt[c])){b=$.cf.compareStrings(a.setting.visibleView,"DayEventDetailView")?a.tv.fADVDayLftPos[0]:a.tv.fADVDayLftPos[c];break}return b},_addTooltipInDetailView:function(){var a=this;$(a.elem).find(".cEventTooltip").tooltip({content:function(){var b="";if($.cf.compareStrings(a.setting.eventTooltipContent,"Default")){var c=$(this).data("tooltipcontent");void 0!==c.title&&(b+="<div class='cTooltipTitle'>"+c.title+"</div>"),void 0===c.startDateTime&&void 0!==c.endDateTime||(b+="<div class='cTooltipTime'>",void 0!==c.startDateTime&&(b+=c.startDateTime),void 0!==c.endDateTime&&(b+="<br/>"+c.endDateTime),b+="</div>")}else{var d=$(this).attr("data-id"),e=a.getEventWithId(d);b=a.setting.eventTooltipContent.call(a,e)}return b},position:{my:"left-25 bottom-15",at:"center top",using:function(a,b){$(this).css(a),$("<div>").addClass("tooltip-arrow").addClass(b.vertical).addClass(b.horizontal).appendTo(this)}},track:!0})}}),c.prototype=$.extend(c.prototype,{updateAgendaView:function(a){var b,c,d,e,f,g,h=this,i=h.tv.dAVDt.length,j=$.cf.isValid(h.setting.hideEventIcon[h.setting.visibleView])?h.setting.hideEventIcon[h.setting.visibleView]:!!$.cf.isValid(h.setting.hideEventIcon.Default)&&h.setting.hideEventIcon.Default,k=$.cf.isValid(h.setting.hideEventTime[h.setting.visibleView])?h.setting.hideEventTime[h.setting.visibleView]:!!$.cf.isValid(h.setting.hideEventTime.Default)&&h.setting.hideEventTime.Default;h.__getCurrentViewDates(),$.cf.compareStrings(h.tv.sLoadType,"Prev")?h.tv.dLoadDt=h.tv.dAVDt[0]:$.cf.compareStrings(h.tv.sLoadType,"Next")&&(h.tv.dLoadDt=h.tv.dAVDt[i-1]),h._setDateStringsInHeaderOfAgendaView(),h.__parseData(a,function(){var a,l,m,n,o,p,q,r=0,s="",t="",u=null,v=null,w=null,x=0,y="",z="",A="",B=!1,C=null,D=null,E="",F="",G="",H="",I="",J="",K="",L="",M="",N="",O="",P="",Q="";if(h.setting.displayEventsForPeriodInListInAgendaView){var R={};R.viewStartDate=h.tv.dVSDt,R.viewEndDate=h.tv.dVEDt;var S=0,T=[];for(b=0;b<i;b++){d=h.tv.dAVDt[b],e=h.setDateInFormat({date:d},"START"),f=h.setDateInFormat({date:d},"END"),g=h.getArrayOfEventsForView(e,f);var U={};U.date=e;var V=[];for(c=0;c<g.length;c++)V.push(g[c]),S++;U.events=V,T.push(U)}R.eventCount=S,R.eventList=T,o=h.setting.displayEventsForPeriodInListInAgendaView.call(h,R),$(h.elem).find(".cListOuterCont").html(o)}else{if(i>0&&(h.compareDates(h.setting.selectedDate,h.tv.dAVDt[0])>=0||h.compareDates(h.setting.selectedDate,h.tv.dAVDt[i-1])<=0)&&(a="#Date-"+h.getDateInFormat({date:h.setting.selectedDate},"dd-MM-yyyy",!1,!0)),$.cf.compareStrings(h.setting.agendaViewTheme,"Timeline1"))for($(h.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),n=4,j&&n--,k&&n--,b=0;b<i;b++)if(d=h.tv.dAVDt[b],e=h.setDateInFormat({date:d},"START"),f=h.setDateInFormat({date:d},"END"),g=h.getArrayOfEventsForView(e,f),p=0===h.compareDates(d,$.CalenStyle.extra.dToday),l=h.getDateInFormat({date:e},"dd-MM-yyyy",!1,!0),m="Date-"+l,s=p?"cagvDate cagvDateToday":"cagvDate",0===b&&void 0===a&&(a="#"+m),0!==g.length)for($(h.elem).find(".cagvTable").append("<tr><td colspan='"+n+"'><div id='"+m+"' class='"+s+"'>"+h.getDateInFormat({date:e},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>"),c=0;c<g.length;c++)u=g[c],v=null,w=null,x=0,y="",z="",E="",A="",O="",P="",E="",F="",G="",H="",I="",J="",K="",L="",null!==u.start&&(v=u.start),null!==u.end&&(w=u.end),null!==u.isAllDay&&(x=u.isAllDay),null!==u.title&&(y=u.title),null!==u.desc&&(A=u.desc),null!==u.url&&(z=u.url),null!==u.isMarked&&(B=u.isMarked),B&&(x=!0),C=h.getEventDateTimeDataForAgendaView(v,w,x,e),D=C[0],""===D&&(D=h.setting.miscStrings.allDay),E=u.fromSingleColor?u.textColor:u.backgroundColor,E=$.cf.compareStrings(E,"")||$.cf.compareStrings(E,"transparent")?"transparent":E,O="Event"+ ++r,I=C[1],L="background: "+E+"; ",B?(N="border-right: 12px solid "+E,M="border-color: "+E+";"):(N="",M=""),Q="cagvEvent",B?(Q+=" cMarkedDayEvent",J=$.cf.isValid(u.icon)&&"Dot"!==u.icon?u.icon:"cs-icon-Mark"):J=$.cf.isValid(u.icon)?u.icon:h.setting.eventIcon,o="",o+="<tr id='"+O+"' class='cagvEvent'>",B?o+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconFont "+J+"' style='"+L+"'></span></td>":j||($.cf.compareStrings(J,"Dot")?o+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconDot' style='"+L+"'></span></td>":o+="<td class='cagvEventIcon'><span class='cagvEventIconLine'></span><span class='cagvEventIconFont "+J+"' style='"+L+"'></span></td>"),o+="<td class='cagvContDetails'>",o+="<div class='cagvEventCard' style='"+M+"'>",o+="<span class='cagvEventCardBefore' style='"+N+"'></span>",k||(o+="<div class='cagvEventTime'>"+D+"</div>"),o+="<div class='cagvEventContent'>",o+="<div class='cagvEventTitle'>"+y+"</div>",o+="<div class='cagvEventDesc'>"+A+"</div>",o+="</div>",o+="</div>",o+="</td>",o+="</tr>",$(h.elem).find(".cagvTable").append(o),B&&(q=$(h.elem).find("#"+m),0===q.find(".cMarkedDayIndicator").length&&q.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>")),($.cf.isValid(z)||h.setting.eventClicked)&&(P="#"+O,$(h.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:z,eventId:u.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:h.tv.pluginId},h.__bindClick));else h.setting.showDaysWithNoEventsInAgendaView&&(o="<tr><td colspan='"+n+"'><div id='"+m+"' class='"+s+"'>"+h.getDateInFormat({date:e},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>",o+="<tr><td colspan='"+n+"'><div class='cagvNoEvent'>No Events</div></td></tr>",$(h.elem).find(".cagvTable").append(o));else if($.cf.compareStrings(h.setting.agendaViewTheme,"Timeline2"))for($(h.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),b=0;b<i;b++){d=h.tv.dAVDt[b],e=h.setDateInFormat({date:d},"START"),f=h.setDateInFormat({date:d},"END"),g=h.getArrayOfEventsForView(e,f),p=0===h.compareDates(d,$.CalenStyle.extra.dToday);var W=!1;if(l=h.getDateInFormat({date:e},"dd-MM-yyyy",!1,!0),m="Date-"+l,s=p?"cagvDate cagvDateToday":"cagvDate",t=p?"cagvDay cagvDateToday":"cagvDay",0===b&&void 0===a&&(a="#"+m),0!==g.length)for(c=0;c<g.length;c++)u=g[c],v=null,w=null,x=0,y="",z="",E="",A="",O="",P="",E="",F="",G="",H="",I="",J="",K="",L="",null!==u.start&&(v=u.start),null!==u.end&&(w=u.end),null!==u.isAllDay&&(x=u.isAllDay),null!==u.title&&(y=u.title),null!==u.desc&&(A=u.desc),null!==u.url&&(z=u.url),null!==u.isMarked&&(B=u.isMarked),B&&(x=!0),E=u.backgroundColor,E=$.cf.compareStrings(E,"")||$.cf.compareStrings(E,"transparent")?"transparent":E,F=u.borderColor||$.cf.addHashToHexcode(h.setting.borderColor),F=$.cf.compareStrings(F,"")||$.cf.compareStrings(F,"transparent")?"transparent":F,G=u.textColor||$.cf.addHashToHexcode(h.setting.textColor),G=$.cf.compareStrings(G,"")||$.cf.compareStrings(G,"transparent")?$.cf.addHashToHexcode(h.setting.textColor):G,H="background: "+E+"; border-color: "+F+"; color: "+G+"; ","transparent"===F&&(H+="border-width: 0px; "),C=h.getEventDateTimeDataForAgendaView(v,w,x,e),D=C[0],""===D&&(D=h.setting.miscStrings.allDay),O="Event"+ ++r,I=C[1],B?(K="color: "+G+"; border-color: "+F+"; background: "+E+"; ",L=u.fromSingleColor?"background: "+G:"color: "+G+"; background: "+E):(K="color: "+G+"; border-color: "+F+"; background: "+E+"; ",L="color: "+G+"; "),o="",o+="<tr id='"+O+"'>",o+="<td id='"+m+"' class='cagvContDate'>",W||(o+="<div class='"+s+"'>"+h.getDateInFormat({date:d},"d",!1,!0)+"</div>",o+="<div class='"+t+"'>"+h.getDateInFormat({date:d},"DDD",!1,!0)+"</div>",W=!0),o+="</td>",Q="cagvEvent",B?(Q+=" cMarkedDayEvent",J=$.cf.isValid(u.icon)&&"Dot"!==u.icon?u.icon:"cs-icon-Mark"):J=$.cf.isValid(u.icon)?u.icon:h.setting.eventIcon,o+="<td class='"+Q+"'>",o+="<div class='cagvContDetails' style='"+K+"'>",o+="<div class='cagvContTitle'>",B?(o+="<span class='cagvEventIcon cagvEventIconFont "+J+"' style='"+L+"'></span>",o+="<span class='cagvEventTitle'>"+y+"</span>",o+="</div>"):(j||($.cf.compareStrings(J,"Dot")?(L="background: "+G+"; ",o+="<span class='cagvEventIcon cagvEventIconDot' style='"+L+"'></span>"):o+="<span class='cagvEventIcon cagvEventIconFont "+J+"' style='"+L+"'></span>"),o+="<span class='cagvEventTitle'>"+y+"</span>",o+="</div>",o+="<div class='cagvContTime'>",k||(o+="<span class='cagvEventTime'>"+D+"</span>"),o+="</div>"),o+="</div>",o+="</td>",o+="</tr>",c===g.length-1&&(o+="<tr><td class='cagvDaySeparator' colspan='2'><hr/></td></tr>"),$(h.elem).find(".cagvTable").append(o),P="#"+O,$(h.elem).find(P+" .cagvEventTimeLabel").css({background:G}),($.cf.isValid(z)||h.setting.eventClicked)&&$(h.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:z,eventId:u.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:h.tv.pluginId},h.__bindClick);else h.setting.showDaysWithNoEventsInAgendaView&&(o="",o+="<tr>",o+="<td id='"+m+"' class='cagvContDate'>",W||(o+="<div class='cagvDate'>"+h.getDateInFormat({date:d},"d",!1,!0)+"</div>",o+="<div class='cagvDay'>"+h.getDateInFormat({date:d},"DDD",!1,!0)+"</div>",W=!0),o+="</td>",o+="<td class='cagvNoEvent'>No Events</td>",o+="</tr>",o+="<tr><td class='cagvDaySeparator' colspan='2'><hr/></td></tr>",$(h.elem).find(".cagvTable").append(o))}else if($.cf.compareStrings(h.setting.agendaViewTheme,"Timeline3"))for($(h.elem).find(".cListOuterCont").html("<table class='cagvTable'></table>"),n=4,j&&n--,k&&n--,b=0;b<i;b++)if(d=h.tv.dAVDt[b],e=h.setDateInFormat({date:d},"START"),f=h.setDateInFormat({date:d},"END"),g=h.getArrayOfEventsForView(e,f),p=0===h.compareDates(d,$.CalenStyle.extra.dToday),l=h.getDateInFormat({date:e},"dd-MM-yyyy",!1,!0),m="Date-"+l,s=p?"cagvDate cagvDateToday":"cagvDate",0===b&&void 0===a&&(a="#"+m),0!==g.length)for($(h.elem).find(".cagvTable").append("<tr><td colspan='"+n+"'><div id='"+m+"' class='"+s+"'>"+h.getDateInFormat({date:e},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>"),c=0;c<g.length;c++)u=g[c],v=null,w=null,x=0,y="",z="",E="",A="",O="",P="",E="",F="",G="",H="",I="",J="",K="",L="",null!==u.start&&(v=u.start),null!==u.end&&(w=u.end),null!==u.isAllDay&&(x=u.isAllDay),null!==u.title&&(y=u.title),null!==u.desc&&(A=u.desc),null!==u.url&&(z=u.url),null!==u.isMarked&&(B=u.isMarked),B&&(x=!0),C=h.getEventDateTimeDataForAgendaView(v,w,x,e),D=C[0],""===D&&(D=h.setting.miscStrings.allDay),E=u.fromSingleColor?u.textColor:u.backgroundColor,E=$.cf.compareStrings(E,"")||$.cf.compareStrings(E,"transparent")?"transparent":E,O="Event"+ ++r,I=C[1],Q="cagvEvent",B?(Q+=" cMarkedDayEvent",J=$.cf.isValid(u.icon)&&"Dot"!==u.icon?u.icon:"cs-icon-Mark",L="background: "+E+";"):(J=$.cf.isValid(u.icon)?u.icon:h.setting.eventIcon,L="background: "+E+"; "),o="",o+="<tr id='"+O+"' class='"+Q+"'>",o+="<td class='cagvEventColor'><span style='background:"+E+"; height:"+I+";'></span></td>",k||(o+="<td class='cagvEventTime'>"+D+"</td>"),B?o+="<td class='cagvEventIcon'><span class='cagvEventIconFont "+J+"' style='"+L+"'></span></td>":j||($.cf.compareStrings(J,"Dot")?o+="<td class='cagvEventIcon'><span class='cagvEventIconDot' style='"+L+"'></span></td>":o+="<td class='cagvEventIcon'><span class='cagvEventIconFont "+J+"' style='"+L+"'></span></td>"),o+="<td class='cagvEventContent'>",o+="<div class='cagvEventTitle'>"+y+"</div>",o+="<div class='cagvEventDesc'>"+A+"</div>",o+="</td>",o+="</tr>",o+="<tr class='cagvEventSeparator'><td colspan='"+n+"'><hr/></td></tr>",$(h.elem).find(".cagvTable").append(o),B&&(q=$(h.elem).find("#"+m),0===q.find(".cMarkedDayIndicator").length&&q.append("<span class='cMarkedDayIndicator cs-icon-Mark'></span>")),($.cf.isValid(z)||h.setting.eventClicked)&&(P="#"+O,$(h.elem).find(P).on($.CalenStyle.extra.sClickHandler,{url:z,eventId:u.calEventId,eventElemSelector:P,view:"AgendaView",pluginId:h.tv.pluginId},h.__bindClick));else h.setting.showDaysWithNoEventsInAgendaView&&(o="<tr><td colspan='"+n+"'><div id='"+m+"' class='"+s+"'>"+h.getDateInFormat({date:e},"DDDD MMMM dd yyyy",!1,!0)+"</div></td></tr>",o+="<tr><td colspan='"+n+"'><div class='cagvNoEvent'>No Events</div></td></tr>",$(h.elem).find(".cagvTable").append(o));setTimeout(function(){$(h.elem).find(".cListOuterCont").scrollTop(0),void 0!==a&&$(h.elem).find(".cListOuterCont").animate({scrollTop:$(h.elem).find(a).position().top},300)},0)}h.addRemoveViewLoader(!1,"cEventLoaderBg"),h.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator"),h.setting.eventListAppended&&h.setting.eventListAppended.call(h),h.adjustAgendaView(),h.__modifyFilterBarCallback()})},_setDateStringsInHeaderOfAgendaView:function(){var a=this,b="";if($.cf.compareStrings(a.setting.agendaViewDuration,"Month")){var c=a.getDateInFormat({date:a.setting.selectedDate},"object",!1,!0);b="<span class='cContHeaderLabelMonth'><b>"+a.getDateInFormat({iDate:c},"MMMM",!1,!0)+"</b></span></span>",b+="<span class='cContHeaderLabelYear'>"+a.getNumberStringInFormat(c.y,0,!0)+"</span></span>"}else{var d=a.getDateInFormat({date:a.tv.dVSDt},"object",!1,!0),e=a.getDateInFormat({date:a.tv.dVEDt},"object",!1,!0);b=a.tv.iNoVDay>1?d.y===e.y?a.getDateInFormat({iDate:d},"MMM",!1,!0)+" "+a.getNumberStringInFormat(d.d,0,!0)+"  -  "+a.getDateInFormat({iDate:e},"MMM",!1,!0)+" "+a.getNumberStringInFormat(e.d,0,!0)+",  "+a.getNumberStringInFormat(e.y,0,!0):a.getDateInFormat({iDate:d},"MMM",!1,!0)+" "+a.getNumberStringInFormat(d.d,0,!0)+",  "+a.getNumberStringInFormat(d.y,0,!0)+"  -  "+a.getDateInFormat({iDate:e},"MMM",!1,!0)+" "+a.getNumberStringInFormat(e.d,0,!0)+",  "+a.getNumberStringInFormat(e.y,0,!0):a.getDateInFormat({iDate:d},"DDDD",!1,!0)+" "+a.getDateInFormat({iDate:e},"MMMM",!1,!0)+" "+a.getNumberStringInFormat(e.d,0,!0)+",  "+a.getNumberStringInFormat(e.y,0,!0)}a.setting.modifyHeaderViewLabels&&a.setting.modifyHeaderViewLabels.call(a,a.tv.dVSDt,a.tv.dVEDt,a.setting.selectedDate,b,a.setting.visibleView),$(a.elem).find(".cContHeaderLabel").html(b)},getEventDateTimeDataForAgendaView:function(a,b,c,d,e){var f,g,h=this,i=48,j=i+"px",k="",l=h.setDateInFormat({iDate:{y:d.getFullYear(),M:d.getMonth(),d:d.getDate()+1}},"START"),m="",n=h.setting.is24Hour?"HH:mm":"h[:m]sm";$.cf.compareStrings(h.setting.visibleView,"AgendaView")&&!$.cf.isValid(h.setting.displayEventsForPeriodInListInAgendaView)&&(e="cagvEventTime");var o=e+"Top",p=e+"Middle",q=e+"Bottom",r=e+"Label",s=e+"Duration";if($.cf.compareStrings(h.setting.agendaViewTheme,"Timeline2")&&!$.cf.isValid(h.setting.displayEventsForPeriodInListInAgendaView)&&$.cf.compareStrings(h.setting.visibleView,"AgendaView")||(m="<br/>"),c)k=0===h.compareDates(a,b)?"<span class='"+p+" "+r+" cagvEventTimeAllDay'>"+h.setting.miscStrings.allDay+"</span>":"<span class='"+o+" "+r+" cagvEventTimeAllDay'>"+h.setting.miscStrings.allDay+"</span>"+m+"<span class='"+q+" "+s+"'>"+($.cf.compareStrings(h.setting.duration,"Default")?h.__getDurationBetweenDates(d,b,"d",!1,!1):h.setting.duration.call(h,d,b,"d"))+"</span>";else if(0===h.compareDates(a,b))f=h.__getDurationBetweenDates(a,b,"h",!1,!0).h,g=f/24*i,g=g<1?1:g,j=g+"px",k="<span class='"+o+"'>"+h.getDateInFormat({date:a},n,h.setting.is24Hour,!0)+"</span>"+m+"<span class='"+q+" "+s+"'>"+($.cf.compareStrings(h.setting.duration,"Default")?h.__getDurationBetweenDates(a,b,"dhm",!1,!1):h.setting.duration.call(h,a,b,"dhm"))+"</span>";else{var t=h.compareDateTimes(a,d)>=0&&h.compareDateTimes(a,l)<=0?a:d,u=h.compareDateTimes(b,l)<=0?b:l;f=h.__getDurationBetweenDates(t,u,"h",!1,!0).h,g=f/24*i,g=g<1?1:g,j=g+"px",k=0===h.compareDates(a,d)?"<span class='"+o+"'>"+h.getDateInFormat({date:a},n,h.setting.is24Hour,!0)+"</span>"+m+"<span class='"+q+" "+s+"'>"+($.cf.compareStrings(h.setting.duration,"Default")?h.__getDurationBetweenDates(a,b,"dhm",!1,!1):h.setting.duration.call(h,a,b,"dhm"))+"</span>":0===h.compareDates(b,d)?"<span class='"+o+" "+r+"'>"+h.setting.miscStrings.ends+"</span>"+m+"<span class='"+q+"'>"+h.getDateInFormat({date:b},n,h.setting.is24Hour,!0)+"</span>":"<span class='"+o+" "+r+" cagvEventTimeAllDay'>"+h.setting.miscStrings.allDay+"</span>"+m+"<span class='"+q+" "+s+"'>"+($.cf.compareStrings(h.setting.duration,"Default")?h.__getDurationBetweenDates(d,b,"dhm",!1,!1):h.setting.duration.call(h,d,b,"dhm"))+"</span>"}return[k,j]},__goToPrevAgendaView:function(){var a=this;if($.cf.compareStrings(a.setting.agendaViewDuration,"Month")){var b=a.tv.dVSDt.getMonth();a.tv.dVSDt.setMonth(b-1),a.setting.selectedDate=a.setDateInFormat({date:a.tv.dVSDt},"START")}else{var c=a.tv.dVSDt.getTime();7===a.setting.daysInAgendaView?c-=a.tv.iNoVDay*$.CalenStyle.extra.iMS.d:c-=$.CalenStyle.extra.iMS.d,a.setting.selectedDate=a.setDateInFormat({date:new Date(c)},"START")}a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType="Prev",a.__reloadCurrentView(!1,!0),setTimeout(function(){a.__reloadDatePickerContentOnNavigation()},10)},__goToNextAgendaView:function(){var a=this;if($.cf.compareStrings(a.setting.agendaViewDuration,"Month")){var b=a.tv.dVSDt.getMonth();a.tv.dVSDt.setMonth(b+1),a.setting.selectedDate=a.setDateInFormat({date:a.tv.dVSDt},"START")}else{var c=a.tv.dVEDt.getTime();c+=$.CalenStyle.extra.iMS.d,a.setting.selectedDate=a.setDateInFormat({date:new Date(c)},"START")}a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType="Next",a.__reloadCurrentView(!1,!0),setTimeout(function(){a.__reloadDatePickerContentOnNavigation()},10)},adjustAgendaView:function(){var a=this,b=$(a.elem).find(".cagvCalendarCont").css("max-height");b=parseInt(b.replace("px",""))||0;var c=$(a.elem).find(".cagvCalendarCont").css("min-height");c=parseInt(c.replace("px",""))||0,b>0&&$(a.elem).height()>b?$(a.elem).css({height:b}):c>0&&$(a.elem).height()<c&&$(a.elem).css({height:c}),0!==a.tv.iCalHeight&&$(a.elem).css({height:a.tv.iCalHeight});var d=$(a.elem).find(".calendarCont").parent().outerWidth(),e=$(a.elem).find(".calendarCont").outerHeight();($.cf.compareStrings(a.setting.filterBarPosition,"Left")||$.cf.compareStrings(a.setting.filterBarPosition,"Right"))&&(d-=a.setting.filterBarWidth),a.tv.bDisFBar&&($.cf.compareStrings(a.setting.filterBarPosition,"Top")||$.cf.compareStrings(a.setting.filterBarPosition,"Bottom"))&&($(a.elem).find(".cFilterBar").css({width:d}),e-=$(a.elem).find(".cFilterBar").height()),$(a.elem).find(".calendarContInner").css({width:d,height:e}),a.__adjustHeader(),a.tv.bDisFBar&&$.cf.compareStrings(a.setting.filterBarPosition,"Right")&&$(a.elem).find(".cFilterBar").css({left:d}),e-=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").outerHeight():0,a.tv.bDisABar&&(e-=$(a.elem).find(".cActionBar").outerHeight()),$(a.elem).find(".cListOuterCont").css({height:e}),$(a.elem).find(".cagvTable").css({width:d-$.CalenStyle.extra.iScrollbarWidth});var f=d,g=$(a.elem).find(".cagvEventColor").outerWidth(!0),h=$(a.elem).find(".cagvEventTime span"),i=Math.max.apply(null,$(h).map(function(){return $(this).outerWidth(!0)}).get());i+=10,$(a.elem).find(".cagvEventTime").css({"min-width":i});var j=f-(g+i)-10;$.cf.compareStrings(a.setting.agendaViewTheme,"Timeline1")?(j-=$(a.elem).find(".cagvEventIcon").width()+40,$(a.elem).find(".cagvEventContent").css({width:j})):$.cf.compareStrings(a.setting.agendaViewTheme,"Timeline2")?$(a.elem).find(".cagvEventTitle").css({"max-width":j-40}):$.cf.compareStrings(a.setting.agendaViewTheme,"Timeline3")&&$(a.elem).find(".cagvEventContent").css({width:j})}}),c.prototype=$.extend(c.prototype,{__updateQuickAgendaView:function(){var a,b,c=this,d="",e=1===c.tv.iNoVDayDis?" cqavSingleColumn":" cqavMultiColumn";for(d+="<thead>",d+="<tr class='cqavTableRow1'>",a=0;a<c.tv.iNoVDayDis;a++){var f="cqavDayColumn"+a;b="cqavTableColumns",b+=e,a===c.tv.iNoVDayDis-1&&(b+=" cqavLastColumn"),d+="<td id='"+f+"' class='"+b+"'>&nbsp;</td>"}for(d+="</tr>",d+="</thead>",d+="<tbody>",d+="<tr class='cqavTableRow2'>",a=0;a<c.tv.iNoVDayDis;a++){var g="cqavDayColumn"+a;b="cqavTableColumns",a===c.tv.iNoVDayDis-1&&(b+=" cqavLastColumn"),d+="<td id='"+g+"' class='"+b+"' title='"+c.getDateInFormat({date:c.tv.dAVDt[a]},"dd-MMM-yyyy",c.setting.is24Hour,!0)+"'> &nbsp; </td>"}d+="</tr>",d+="</tbody>",$(c.elem).find(".cqavTableMain").html(d),c._setDateStringsInHeaderOfQuickAgendaView(),c._makeEventContDroppableInQuickAgendaView(),c._takeActionOnDayClickInQuickAgendaView()},_setDateStringsInHeaderOfQuickAgendaView:function(){for(var a=this,b=0;b<a.tv.iNoVDayDis;b++){var c,d=a.tv.dAVDt[b],e=a.compareDates(d,$.CalenStyle.extra.dToday),f=d.getDay(),g=".cqavTableRow1 #cqavDayColumn"+b,h=$(a.elem).find(g),i=d.getDate(),j=!a.tv.bABsDays[f],k=a._getRestrictedSectionForCurrentView(d),l="",m="";for(c=0;c<k.length;c++){var n,o=k[c],p=new Date(o.start),q=0===a.compareDates(d,p),r=new Date(o.end),s=0===a.compareDates(d,r);q||(p=a._normalizeDateTime(d,"START","T")),s||(r=a._normalizeDateTime(d,"END","T")),n=Math.round((r.getTime()-p.getTime())/$.CalenStyle.extra.iMS.h),(n>23||o.isAllDay)&&($.cf.isValid(o.backgroundColor)&&(l=$.cf.addHashToHexcode(o.backgroundColor)),$.cf.isValid(o.class)&&(m=o.class))}j&&0===e?h.addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(j&&h.addClass("cNonBusinessHoursBg"),0===e&&h.addClass("cTodayHighlightTextColor"),$.cf.isValid(l)&&h.css({background:l}),$.cf.isValid(m)&&h.addClass(m)),0===e?$(a.elem).find(g).html("<span class='cqavDayColumnLeft'>"+a.setting.miscStrings.today+"</span><span class='cqavDayColumnRight'>"+a.getNumberStringInFormat(i,0,!0)+"</span>"):$(a.elem).find(g).html("<span class='cqavDayColumnLeft'>"+a.getDateInFormat({iDate:{D:f}},"DDD",!1,!0)+"</span><span class='cqavDayColumnRight'>"+a.getNumberStringInFormat(i,0,!0)+"</span>");var t=".cqavTableRow2 #cqavDayColumn"+b,u=$(a.elem).find(t);j&&0===e?u.addClass("cRestrictedTodayBg cTodayHighlightTextColor"):(j&&u.addClass("cNonBusinessHoursBg"),0===e&&u.addClass("cTodayHighlightTextColor"),$.cf.isValid(l)&&u.css({background:l}),$.cf.isValid(m)&&u.addClass(m))}var v,w=a.getDateInFormat({date:a.tv.dVSDt},"object",!1,!0),x=a.getDateInFormat({date:a.tv.dVEDt},"object",!1,!0);v=$.cf.compareStrings(a.setting.quickAgendaViewDuration,"CustomDays")&&1===a.setting.daysInQuickAgendaView?"<b>"+a.getDateInFormat({iDate:w},"DDDD",!1,!0)+" "+a.getDateInFormat({iDate:x},"MMMM",!1,!0)+" "+a.getNumberStringInFormat(x.d,0,!0)+"</b>  "+a.getNumberStringInFormat(x.y,0,!0):w.y===x.y?w.M===x.M?"<b>"+a.getDateInFormat({iDate:w},"MMM",!1,!0)+" "+a.getNumberStringInFormat(w.d,0,!0)+"</b>  -  <b>"+a.getNumberStringInFormat(x.d,0,!0)+"</b>  "+a.getNumberStringInFormat(x.y,0,!0):"<b>"+a.getDateInFormat({iDate:w},"MMM",!1,!0)+"  "+a.getNumberStringInFormat(w.d,0,!0)+"</b>  -  <b>"+a.getDateInFormat({iDate:x},"MMM",!1,!0)+" "+a.getNumberStringInFormat(x.d,0,!0)+"</b>  "+a.getNumberStringInFormat(x.y,0,!0):"<b>"+a.getDateInFormat({iDate:w},"MMM",!1,!0)+"  "+a.getNumberStringInFormat(w.d,0,!0)+"</b>  "+a.getNumberStringInFormat(w.y,0,!0)+"  -  <b>"+a.getDateInFormat({iDate:x},"MMM",!1,!0)+" "+a.getNumberStringInFormat(x.d,0,!0)+"</b>  "+a.getNumberStringInFormat(x.y,0,!0),a.setting.modifyHeaderViewLabels&&a.setting.modifyHeaderViewLabels.call(a,a.tv.dVSDt,a.tv.dVEDt,a.setting.selectedDate,v,a.setting.visibleView),$(a.elem).find(".cContHeaderLabel").html(v)},_takeActionOnDayClickInQuickAgendaView:function(){var a=this;$(a.elem).find(".cqavContRow2Main").on($.CalenStyle.extra.sClickHandler,function(b){var c={};c.x=b.pageX||b.originalEvent.touches[0].pageX||b.originalEvent.changedTouches[0].pageX,c.y=b.pageY||b.originalEvent.touches[0].pageY||b.originalEvent.changedTouches[0].pageY;var d=a._getDateBasedOnLeftPositionInQuickAgendaView(c.x-$(this).offset().left);a.setting.cellClicked&&a.setting.cellClicked.call(a,a.setting.visibleView,d,!0,c)})},__goToPrevQuickAgendaView:function(){var a=this;if(a.setting.showTransition){var b=$(a.elem).find(".cqavTableMain"),c=b.width(),d=b.position().left,e=0;e=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").position().top+$(a.elem).find(".cContHeader").outerHeight()-1:$(a.elem).position().top;var f=b.clone();$(f).removeClass("cqavTableMain").addClass("cqavTableTemp"),$(f).css({position:"absolute",top:e,left:d}),b.parent().append(f),d+=c;var g=$(a.elem).find(".cqavContRow2Main"),h=g.position().left,i=g.width(),j=g.clone();$(j).removeClass("cqavContRow2Main").addClass("cqavContRow2Temp"),g.parent().append(j),h+=i,$(f).animate({left:d},a.setting.transitionSpeed),$(j).animate({left:h},a.setting.transitionSpeed),setTimeout(function(){$(a.elem).find(".cqavTableTemp").remove(),$(a.elem).find(".cqavContRow2Temp").remove()},a.setting.transitionSpeed)}var k;a.setting.navigateOneDayInQuickAgendaView?(k=a.tv.dVEDt.getTime(),k-=$.CalenStyle.extra.iMS.d):(k=a.tv.dVSDt.getTime(),7===a.setting.daysInQuickAgendaView?k-=a.tv.iNoVDay*$.CalenStyle.extra.iMS.d:k-=$.CalenStyle.extra.iMS.d),a.setting.selectedDate=a.setDateInFormat({date:new Date(k)},"START"),a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType="Prev",a.__reloadCurrentView(!1,!0),setTimeout(function(){a.__reloadDatePickerContentOnNavigation()},10)},__goToNextQuickAgendaView:function(){var a=this;if(a.setting.showTransition){var b=$(a.elem).find(".cqavTableMain"),c=b.width(),d=b.position().left,e=0;e=$(a.elem).find(".cContHeader").length>0?$(a.elem).find(".cContHeader").position().top+$(a.elem).find(".cContHeader").outerHeight()-1:$(a.elem).position().top;var f=b.clone();$(f).removeClass("cqavTableMain").addClass("cqavTableTemp"),$(f).css({position:"absolute",top:e,left:d}),b.parent().append(f),d-=c;var g=$(a.elem).find(".cqavContRow2Main"),h=g.position().left,i=g.width(),j=g.clone();$(j).removeClass("cqavContRow2Main").addClass("cqavContRow2Temp"),g.parent().append(j),h-=i,$(f).animate({left:d},a.setting.transitionSpeed),$(j).animate({left:h},a.setting.transitionSpeed),setTimeout(function(){$(a.elem).find(".cqavTableTemp").remove(),$(a.elem).find(".cqavContRow2Temp").remove()},a.setting.transitionSpeed)}var k;a.setting.navigateOneDayInQuickAgendaView?(k=a.tv.dVSDt.getTime(),k+=$.CalenStyle.extra.iMS.d):(k=a.tv.dVEDt.getTime(),k+=$.CalenStyle.extra.iMS.d),a.setting.selectedDate=a.setDateInFormat({date:new Date(k)},"START"),a.tv.dLoadDt=a.setDateInFormat({date:a.setting.selectedDate},"START"),a.tv.sLoadType="Next",a.__reloadCurrentView(!1,!0),setTimeout(function(){a.__reloadDatePickerContentOnNavigation()},10)},__adjustQuickAgendaView:function(a){var b=this,c=$(b.elem).find(".cqavCalendarCont").css("max-height");c=parseInt(c.replace("px",""))||0;var d=$(b.elem).find(".cqavCalendarCont").css("min-height");if(d=parseInt(d.replace("px",""))||0,c>0&&$(b.elem).height()>c?$(b.elem).css({height:c}):d>0&&$(b.elem).height()<d&&$(b.elem).css({height:d}),0!==b.tv.iCalHeight&&$(b.elem).css({height:b.tv.iCalHeight}),$(b.elem).find(".cqavCalendarCont").length>0&&!b.tv.bDVDrgEv&&!b.tv.bDVResEv){var e=$(b.elem).find(".calendarCont").parent().outerWidth(),f=$(b.elem).find(".calendarCont").outerHeight(),g=f;if(b.tv.bDisFBar)if($.cf.compareStrings(b.setting.filterBarPosition,"Left")||$.cf.compareStrings(b.setting.filterBarPosition,"Right"))e-=b.setting.filterBarWidth;else if($.cf.compareStrings(b.setting.filterBarPosition,"Top")||$.cf.compareStrings(b.setting.filterBarPosition,"Bottom")){var h=e;$(b.elem).find(".cFilterBar").css({width:h}),g-=$(b.elem).find(".cFilterBar").height()}$(b.elem).find(".calendarContInner").css({width:e,height:g}),b.__adjustHeader(),$.cf.compareStrings(b.setting.filterBarPosition,"Right")&&$(b.elem).find(".cFilterBar").css({left:e});var i=0,j=e,k=e;$(b.elem).find(".cContHeader").length>0&&$(b.elem).find(".cContHeader").css({width:k});var l=e,m=$(b.elem).find(".cContHeader").length>0?$(b.elem).find(".cContHeader").outerHeight():0;b.tv.bDisABar&&(f-=$(b.elem).find(".cActionBar").height()),b.tv.bDisFBar&&($.cf.compareStrings(b.setting.filterBarPosition,"Top")||$.cf.compareStrings(b.setting.filterBarPosition,"Bottom"))&&(f-=$(b.elem).find(".cFilterBar").height());var n=f-m;b.tv.bDisABar&&b.tv.bDisFBar&&$.cf.compareStrings(b.setting.filterBarPosition,"Bottom")?n-=$.CalenStyle.extra.iBorderOverhead:n+=$.CalenStyle.extra.iBorderOverhead,$(b.elem).find(".cqavTableMain").css({height:n,width:l});var o=$(b.elem).find(".cqavTableMain").position().top+$(b.elem).find(".cqavTableRow1").outerHeight(),p=$(b.elem).find(".cqavTableRow2").height();$(b.elem).find(".cqavContRow2Main").css({left:i,top:o,width:j,height:p});var q=b.tv.iNoVDay*$.CalenStyle.extra.iBorderOverhead,r=(j-q)/b.tv.iNoVDayDis;$(b.elem).find(".cqavTableColumns").css({width:r}),b.tv.fADVDayLftPos=[];for(var s=0;s<b.tv.iNoVDayDis;s++){var t=$(b.elem).find(".cqavTableRow2 #cqavDayColumn"+s).position().left;b.tv.fADVDayLftPos.push(t)}}b._adjustEventsInQuickAgendaView(),b.setting.isDragNDropInQuickAgendaView&&$.cf.isValid(a)&&a&&($(b.elem).find(".cqavEvent").hasClass("ui-draggable")&&$(b.elem).find(".cqavEvent").draggable("destroy"),$(b.elem).find(".cqavEvent").removeClass("ui-draggable-dragging"),b._makeEventDraggableInQuickAgendaView(".EventDraggable"))},__addEventsInQuickAgendaView:function(){var a=this;$(a.elem).find(".cqavContRow2Main")&&$(a.elem).find(".cqavContRow2Main").html("");var b=a.getArrayOfEventsForView(a.tv.dVSDt,a.tv.dVEDt),c=$.cf.isValid(a.setting.hideEventIcon[a.setting.visibleView])?a.setting.hideEventIcon[a.setting.visibleView]:!!$.cf.isValid(a.setting.hideEventIcon.Default)&&a.setting.hideEventIcon.Default,d=$.cf.isValid(a.setting.hideEventTime[a.setting.visibleView])?a.setting.hideEventTime[a.setting.visibleView]:!!$.cf.isValid(a.setting.hideEventTime.Default)&&a.setting.hideEventTime.Default,e=a.setting.is24Hour?"HH:mm":"h[:m]sm";if(a.tv.bAWkRw=[],b.length>0){for(var f=$.CalenStyle.extra.iEventHeights[a.setting.visibleView],g=0;g<b.length;g++){var h=b[g],i=null,j=null,k=0,l="",m="",n=!1,o=!1,p="",q="Event-"+h.calEventId;null!==h.start&&(i=h.start),null!==h.end&&(j=h.end),null!==h.isAllDay&&(k=h.isAllDay),null!==h.title&&(l=h.title),null!==h.desc&&h.desc,null!==h.type&&h.type,null!==h.url&&(m=h.url),null!==h.droppableId&&(p=h.droppableId),null!==h.isDragNDropInQuickAgendaView&&(n=h.isDragNDropInQuickAgendaView),null!==h.isMarked&&(o=h.isMarked),o&&(k=!0);var r=a.getNumberOfDaysOfEvent(k,i,j,!0,!0,!0),s=r[0],t=r[1];if(s>0){var u,v,w,x=s,y="",z=new Date(i),A=new Date(j);a.compareDates(i,a.tv.dVSDt)<0&&Math.abs(a.__getDifference("m",a.tv.dVSDt,i))>1&&(y="Left",z=new Date(a.tv.dVSDt)),a.compareDates(a.tv.dVEDt,j)<0&&Math.abs(a.__getDifference("m",a.tv.dVEDt,j))>1&&(y="Right",A=new Date(a.tv.dVEDt));for(var B=new Date(z),C=!0;!(a.__findWhetherDateIsVisibleInCurrentView(B,k||t>23,z,A)||(B.setDate(B.getDate()+1),C=!1,a.compareDates(B,A)>0)););if(z=new Date(B),u=a._getDayNumberFromDateInQuickAgendaView(z),"#cqavDayColumn"+u,v=a.getNumberOfDaysOfEvent(k,z,A,!0,!0,C),x=v[0],v[1]>0){var D="cqavEvent ",E=h.backgroundColor;E=$.cf.compareStrings(E,"")||$.cf.compareStrings(E,"transparent")?"transparent":E;var F=h.borderColor||$.cf.addHashToHexcode(a.setting.borderColor);F=$.cf.compareStrings(F,"")||$.cf.compareStrings(F,"transparent")?"transparent":F;var G=h.textColor||$.cf.addHashToHexcode(a.setting.textColor);G=$.cf.compareStrings(G,"")||$.cf.compareStrings(G,"transparent")?$.cf.addHashToHexcode(a.setting.textColor):G;var H=$.cf.isValid(h.nonAllDayEventsTextColor)?h.nonAllDayEventsTextColor:h.backgroundColor;H=!$.cf.isValid(H)||$.cf.compareStrings(H,"transparent")?h.backgroundColor:H;var I="",J="",K="",L="",M="";!0===k||t>23?o?h.fromSingleColor?(I+="background: "+E+"; ",I+="border-color: "+F+"; ",I+="color: "+G+"; ",K+="color: "+G+"; ",J="background: "+G+"; color: #FFFFFF"):(F=E,I+="background: "+$.cf.getRGBAString(E,.1)+"; ",I+="border-color: "+F+"; ",I+="color: "+E+"; ",K+="color: "+E+"; ",J="background: "+E+"; color: "+G):(I+="background: "+E+"; ",I+="border-color: "+F+"; ",I+="color: "+G+"; ",K+="color: "+G+"; ",J="color: "+G+"; "):a.setting.onlyTextForNonAllDayEvents?(D+="cEventOnlyText ",I+="color: "+H+"; ",I+="border-color: transparent; ",x=1,y="",K+="color: "+H+"; ",J="color: "+H+"; "):(I+="background: "+E+"; ",I+="border-color: "+F+"; ",I+="color: "+G+"; ",K+="color: "+G+"; ",J="color: "+G+"; "),L="border-color: "+(h.fromSingleColor?G:"#000000"),M=o?$.cf.isValid(h.icon)&&"Dot"!==h.icon?h.icon:"cs-icon-Mark":$.cf.isValid(h.icon)?h.icon:a.setting.eventIcon,a.compareDates(j,a.tv.dAVDt[0])<0&&(D+="cBlurredEvent "),n&&(D+="EventDraggable cDragNDrop "),a.setting.isTooltipInQuickAgendaView&&(D+="cEventTooltip "),D+=q,o&&(D+=" cMarkedDayEvent");var N=0,O=0,P=-1,Q=!1,R=!1;if($.cf.compareStrings(y,"Left")&&(Q=!(N>0)),$.cf.compareStrings(y,"Right")&&(R=!0),!(N<x))break;var S=N>0?0:u,T=x-N,U=a.tv.iNoVDayDis-S;T>U&&(T=U,R=!0),N>0&&(Q=!0);for(var V,W,X=S+T,Y=0;Y<a.tv.bAWkRw.length&&(V=a.tv.bAWkRw[Y],-1===P);Y++){var Z=0;for(W=S;W<X;W++)if(0===V[W]&&Z<T&&++Z===T){P=Y;break}}-1===P&&(a.tv.bAWkRw.push([0,0,0,0,0,0,0]),P=a.tv.bAWkRw.length-1),V=a.tv.bAWkRw[P];var _=q+"-"+ ++O,aa=P+1+"|"+S+"|"+T,ba=f+"px",ca=I;ca+="height: "+ba+"; ","transparent"===F&&(ca+="border-width: 0px; "),w=$.cf.isValid(p)?" data-droppableid='"+p+"'":"";var da="<div id='"+_+"' class='"+D+"' style='"+ca+"'  data-pos='"+aa+"' "+w+" title='' data-id='"+h.calEventId+"'>";if(da+="<a class='cEventLink' style='"+K+"'>",o)da+="<span class='cqavEventTitle'>"+l+"</span>",da+="<span class='cqavEventIcon "+M+"' style='"+J+"'></span>";else{var ea="";R&&Q?(ea="cPartialEvent",da+="<span class='"+ea+" cPartialEventLeft' style='"+L+"'></span>",da+="<span class='"+ea+" cPartialEventRight' style='"+L+"'></span>"):(R||Q)&&(ea="cPartialEvent",Q&&(ea+=" cPartialEventLeft"),R&&(ea+=" cPartialEventRight"),da+="<span class='"+ea+"' style='"+L+"'></span>"),!d&&!1===k&&(1===O&&!Q&&s>1||1===s)&&(da+="<span class='cqavEventTime'>"+a.getDateInFormat({date:i},e,a.setting.is24Hour,!0)+"</span>"),c||$.cf.compareStrings(M,"Dot")||(da+="<span class='cqavEventIcon "+M+"' style='"+J+"'></span>"),d||!1!==k||!(x>1||T>1||t>23)||R||(da+="<span class='cqavEventTimeRight'>"+a.getDateInFormat({date:j},e,a.setting.is24Hour,!0)+"</span>"),da+="<span class='cqavEventTitle'>"+l+"</span>"}da+="</a>",da+="</div>",$(a.elem).find(".cqavContRow2Main").append(da);var fa,ga,ha="#"+_,ia=$(a.elem).find(ha),ja=ia.find(".cEventLink");fa={},ga=a.getEventDateTimeString(i,j,k,"&&");var ka=ga.split("&&");for(fa.title=l,fa.startDateTime=ka[0],fa.endDateTime=ka[1],ia.data("tooltipcontent",fa),a.setting.eventRendered&&a.setting.eventRendered.call(a,h,ia,ja,a.setting.visibleView,!1),($.cf.isValid(m)||a.setting.eventClicked)&&ja.on($.CalenStyle.extra.sClickHandler,{url:m,eventId:h.calEventId,eventElemSelector:ha,view:"QuickAgendaView",pluginId:a.tv.pluginId},a.__bindClick),W=S;W<X;W++)V[W]=1,N++}}}a.setting.isTooltipInQuickAgendaView&&a._addTooltipInQuickAgendaView(".cEventTooltip"),a.setting.isDragNDropInQuickAgendaView&&a._makeEventDraggableInQuickAgendaView(".EventDraggable"),a.setting.eventsAddedInView&&a.setting.eventsAddedInView.call(a,a.setting.visibleView,".cqavEvent")}else console.log("to._addEventsInMonthView - No Events");a.addRemoveViewLoader(!1,"cEventLoaderBg"),a.addRemoveLoaderIndicators(!1,"cEventLoaderIndicator")},_adjustEventsInQuickAgendaView:function(){for(var a=this,b=10,c=$.CalenStyle.extra.iEventHeights[a.setting.visibleView]+2,d=$(a.elem).find(".cqavEvent"),e=0;e<d.length;e++){var f,g=d[e],h=$(a.elem).find(g).attr("data-pos"),i=h.split("|"),j=parseInt(i[0]),k=parseInt(i[1]),l=parseInt(i[2]),m=b+(j-1)*c,n=$(a.elem).find("#cqavDayColumn"+k).position().left+2*$.CalenStyle.extra.iBorderOverhead;if(l>1){var o=k+(l-1);f=$(a.elem).find("#cqavDayColumn"+o).position().left+2*$.CalenStyle.extra.iBorderOverhead+$(a.elem).find("#cqavDayColumn"+o).width()-n}else f=$(a.elem).find("#cqavDayColumn"+k).width();f-=2*$.CalenStyle.extra.iBorderOverhead,$(g).css({left:n,top:m,width:f});var p=$(g).find(".cqavEventTitle"),q=$(g).height(),r=$(g).find(".cqavEventIcon"),s=null!==r?r.outerWidth(!0):0,t=$(g).find(".cqavEventTime"),u=null!==t?t.outerWidth(!0):0,v=0,w=$(g).find(".cqavEventTimeRight");null!==w&&(v=null!==w?w.outerWidth(!0):0);var x=$(g).find(".cPartialEventLeft").outerWidth(!0)+$(g).find(".cPartialEventRight").outerWidth(!0),y=f-(s+u+v+10*$.CalenStyle.extra.iBorderOverhead+x);p.css({height:q,"line-height":q+"px",width:y}),t.css({height:q,"line-height":q+"px"}),null!==w&&w.css({height:q,"line-height":q+"px"})}},_makeEventContDroppableInQuickAgendaView:function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n=this,o=null,p=null,q=0,r=!1,s=null,t=null;$(n.elem).find(".cqavTableRow2 .cqavTableColumns").droppable({scope:"Events",over:function(u,v){for(a=$(v.draggable),c=a.attr("id"),d=a.attr("data-id"),e=n.getEventWithId(d),f=".Event-"+d,o=null,p=null,q=!1,null!==e.start&&(o=e.start),null!==e.end&&(p=e.end),null!==e.isAllDay&&(q=e.isAllDay),g=n.getNumberOfDaysOfEvent(q,o,p,!0,!1,!0),h=g[0],i=g[1],j=n._getDateBasedOnLeftPositionInQuickAgendaView(v.position.left),k=n._getDayNumberFromDateInQuickAgendaView(j),s=n.setDateInFormat({iDate:{d:j.getDate(),M:j.getMonth(),y:j.getFullYear(),H:o.getHours(),m:o.getMinutes(),s:o.getSeconds()}},""),t=new Date(s.getTime()+(p.getTime()-o.getTime())),n.tv.bChkDroppable&&(a=$(n.elem).find("#"+c+".ui-draggable-dragging"),b=a.attr("data-droppableid"),r=n._findWhetherEventEnteredNonDroppableZone(s,t,q,h,b),r?(a.addClass("cCursorNotAllowed"),a.find(".cEventLink").addClass("cCursorNotAllowed")):(a.removeClass("cCursorNotAllowed"),a.find(".cEventLink").removeClass("cCursorNotAllowed"))),$(n.elem).find(".cqavTableColumns").removeClass("cActivatedCell"),l=0;l<h;l++)(m=k+l)<=n.tv.dAVDt.length-1&&$(n.elem).find(".cqavTableRow2 #cqavDayColumn"+m).addClass("cActivatedCell")},drop:function(j,k){if(a=$(k.draggable),c=a.attr("id"),d=a.attr("data-id"),e=n.getEventWithId(d),f=".Event-"+d,o=null,p=null,q=!1,$(this).attr("id")===n.tv.draggableParent)return setTimeout(function(){$(f+".cEventBeingDragged").remove(),$(f).removeClass("ui-draggable-dragging cEditingEvent cEditingEventUI")},300),n.tv.iTSEndEditing=$.cf.getTimestamp(),!0;null!==e.start&&(o=e.start),null!==e.end&&(p=e.end),null!==e.isAllDay&&(q=e.isAllDay),g=n.getNumberOfDaysOfEvent(q,o,p,!0,!1,!0),h=g[0],i=g[1];var l=n._getDateBasedOnLeftPositionInQuickAgendaView(k.position.left);if(s=n.setDateInFormat({iDate:{d:l.getDate(),M:l.getMonth(),y:l.getFullYear(),H:o.getHours(),m:o.getMinutes(),s:o.getSeconds()}},""),t=new Date(s.getTime()+(p.getTime()-o.getTime())),n.tv.bChkDroppable&&(a=$(n.elem).find("#"+c+".ui-draggable-dragging"),b=a.attr("data-droppableid"),r=n._findWhetherEventEnteredNonDroppableZone(s,t,q,h,b),a.removeClass("cCursorNotAllowed"),a.find(".cEventLink").removeClass("cCursorNotAllowed")),r)setTimeout(function(){return n.tv.bChkDroppable&&a.removeClass("cEditingEvent cEventBeingDragged ui-draggable-dragging"),$("#"+c+".cEventClone").remove(),n.tv.iTSEndEditing=$.cf.getTimestamp(),!1},300);else{var m=n.compareDates(p,$.CalenStyle.extra.dToday);m>0?$(n.elem).find(f).css({opacity:1}):m<0&&$(n.elem).find(f).css({opacity:.7}),n.__updateEventWithId(d,s,t)&&(n.__addEventsInQuickAgendaView(),n._adjustEventsInQuickAgendaView()),$(n.elem).find(".cqavTableColumns").removeClass("cActivatedCell")}n.setting.saveChangesOnEventDrop&&n.setting.saveChangesOnEventDrop.call(n,e,o,p,s,t),n.tv.iTSEndEditing=$.cf.getTimestamp()}})},_makeEventDraggableInQuickAgendaView:function(a){var b=this,c=$(b.elem).find(".cqavEvent").height(),d=$(b.elem).find(".cqavTableColumns").width(),e=d+1,f=$(b.elem).position().left,g=$(b.elem).css("margin-left");g=parseInt(g.replace("px",""));var h=f+g+$(b.elem).find(".cqavContRow2Main").position().left,i=h,j=i+$(b.elem).find(".cqavContRow2Main").width()-d,k=$(b.elem).position().top,l=$(b.elem).css("margin-top");l=parseInt(l.replace("px",""));var m=k+l+$(b.elem).find(".cqavContRow2Main").position().top;b.tv.bDisFBar&&$.cf.compareStrings(b.setting.filterBarPosition,"Top")&&(m+=b.setting.filterBarHeight);var n=m+$(b.elem).find(".cqavContRow2Main").height()-c;$(b.elem).find(a).draggable({zIndex:100,scope:"Events",grid:[e,1],containment:[i,m,j,n],scroll:!1,cursor:"move",delay:300,revertDuration:300,start:function(){var a=$(this),e=a.attr("data-pos"),f=e.split("|"),g=parseInt(f[1]);b.tv.draggableParent="cqavDayColumn"+g,a.removeClass("cPartialEventLeft cPartialEventRight cPartialEventBoth");var h=a.clone();a.parent().append(h),$(h).addClass("cEventBeingDragged cEventClone"),a.hasClass("cEventOnlyText")?a.addClass("cEditingEvent"):a.addClass("cEditingEvent cEditingEventUI"),a.css({width:d,height:c})},revert:function(){return $(b.elem).find(".cqavTableColumns").removeClass("cActivatedCell"),!0}})},_addTooltipInQuickAgendaView:function(a){var b=this;$(b.elem).find(a).tooltip({content:function(){var a="";if($.cf.compareStrings(b.setting.eventTooltipContent,"Default")){var c=$(this).data("tooltipcontent");void 0!==c.title&&(a+="<div class='cTooltipTitle'>"+c.title+"</div>"),void 0===c.startDateTime&&void 0!==c.endDateTime||(a+="<div class='cTooltipTime'>",void 0!==c.startDateTime&&(a+=c.startDateTime),void 0!==c.endDateTime&&(a+="<br/>"+c.endDateTime),a+="</div>")}else{var d=b.getEventWithId($(this).attr("data-id"));a=b.setting.eventTooltipContent.call(b,d)}return a},position:{my:"center bottom-15",at:"center top",using:function(a,b){$(this).css(a),$("<div>").addClass("tooltip-arrow").addClass(b.vertical).addClass(b.horizontal).appendTo(this)}}})},_getDateBasedOnLeftPositionInQuickAgendaView:function(a){for(var b=this,c=$(b.elem).find(".cqavTableColumns").width(),d=b.tv.fADVDayLftPos.length,e=0,f=0,g=0;g<d;g++){var h=b.tv.fADVDayLftPos[g]-5,i=h+c-5;if(g===d-1&&(i+=5),a>=h&&a<=i){f=g+1;break}}for(var j=0;j<b.tv.dAVDt.length;j++){var k=b.tv.dAVDt[j];if(b.__isDateInCurrentView(k)&&++e===f)return k}},_getDayNumberFromDateInQuickAgendaView:function(a){for(var b=this,c=0;c<b.tv.dAVDt.length;c++)if(0===b.compareDates(a,b.tv.dAVDt[c]))return c;return-1}})}();